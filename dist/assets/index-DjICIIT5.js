const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ccip-C-5SJinD.js","assets/localBatchGatewayRequest-DrlSpZ6g.js","assets/embedded-wallet-BfkP9U8S.js","assets/if-defined-DtFz36zK.js","assets/index-Dn3yZgQO.js","assets/index-BuVcaqdn.js","assets/ref-CRgLwM4H.js","assets/index-CgbWwCN8.js","assets/index-BwhkEuU7.js","assets/index-CXi5rC2W.js","assets/index-DseCmCtl.js","assets/index-Cs4pie2V.js","assets/index-BqNJK49m.js","assets/index-C1pX5OMa.js","assets/email-CMo1RZ3Q.js","assets/index-R3n2VnTI.js","assets/socials-D-ljZloW.js","assets/index-BY0ZeRvt.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-BJm_uhyg.js","assets/index-CPdKRPEG.js","assets/index-DZokSEhW.js","assets/index-C4oRq-kg.js","assets/swaps-BxPLiieg.js","assets/index-zJ5NZiKm.js","assets/index-BbyELIgz.js","assets/index-DQQx8-Dp.js","assets/send-CjbSial1.js","assets/index-CZ2Ds4go.js","assets/index-VQdnS4UX.js","assets/receive-CZOVNhFQ.js","assets/index-CnH5ELGl.js","assets/onramp-DzNOUjCq.js","assets/index-Cj4ICNMg.js","assets/index-DiK1lJQ3.js","assets/transactions-B8aqBfKz.js","assets/index-BAAAFVxw.js","assets/index-DZkiv7KZ.js","assets/index-6hWIpEHe.js","assets/index-D0C35hCc.js","assets/index-CrdVXK_y.js","assets/w3m-modal-DQ0j6eUq.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var Lo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ON(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var SE={exports:{}},N0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kx;function LP(){if(kx)return N0;kx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,o){var c=null;if(o!==void 0&&(c=""+o),s.key!==void 0&&(c=""+s.key),"key"in s){o={};for(var l in s)l!=="key"&&(o[l]=s[l])}else o=s;return s=o.ref,{$$typeof:t,type:r,key:c,ref:s!==void 0?s:null,props:o}}return N0.Fragment=e,N0.jsx=n,N0.jsxs=n,N0}var Lx;function DP(){return Lx||(Lx=1,SE.exports=LP()),SE.exports}var Se=DP(),_E={exports:{}},Gt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dx;function MP(){if(Dx)return Gt;Dx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function S(H){return H===null||typeof H!="object"?null:(H=v&&H[v]||H["@@iterator"],typeof H=="function"?H:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,N={};function R(H,fe,Ae){this.props=H,this.context=fe,this.refs=N,this.updater=Ae||_}R.prototype.isReactComponent={},R.prototype.setState=function(H,fe){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,fe,"setState")},R.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function $(){}$.prototype=R.prototype;function G(H,fe,Ae){this.props=H,this.context=fe,this.refs=N,this.updater=Ae||_}var F=G.prototype=new $;F.constructor=G,A(F,R.prototype),F.isPureReactComponent=!0;var X=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function Z(H,fe,Ae,ke,$e,Ve){return Ae=Ve.ref,{$$typeof:t,type:H,key:fe,ref:Ae!==void 0?Ae:null,props:Ve}}function U(H,fe){return Z(H.type,fe,void 0,void 0,void 0,H.props)}function D(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function B(H){var fe={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(Ae){return fe[Ae]})}var W=/\/+/g;function K(H,fe){return typeof H=="object"&&H!==null&&H.key!=null?B(""+H.key):fe.toString(36)}function he(){}function pe(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(he,he):(H.status="pending",H.then(function(fe){H.status==="pending"&&(H.status="fulfilled",H.value=fe)},function(fe){H.status==="pending"&&(H.status="rejected",H.reason=fe)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function V(H,fe,Ae,ke,$e){var Ve=typeof H;(Ve==="undefined"||Ve==="boolean")&&(H=null);var Fe=!1;if(H===null)Fe=!0;else switch(Ve){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(H.$$typeof){case t:case e:Fe=!0;break;case y:return Fe=H._init,V(Fe(H._payload),fe,Ae,ke,$e)}}if(Fe)return $e=$e(H),Fe=ke===""?"."+K(H,0):ke,X($e)?(Ae="",Fe!=null&&(Ae=Fe.replace(W,"$&/")+"/"),V($e,fe,Ae,"",function(Q){return Q})):$e!=null&&(D($e)&&($e=U($e,Ae+($e.key==null||H&&H.key===$e.key?"":(""+$e.key).replace(W,"$&/")+"/")+Fe)),fe.push($e)),1;Fe=0;var wt=ke===""?".":ke+":";if(X(H))for(var De=0;De<H.length;De++)ke=H[De],Ve=wt+K(ke,De),Fe+=V(ke,fe,Ae,Ve,$e);else if(De=S(H),typeof De=="function")for(H=De.call(H),De=0;!(ke=H.next()).done;)ke=ke.value,Ve=wt+K(ke,De++),Fe+=V(ke,fe,Ae,Ve,$e);else if(Ve==="object"){if(typeof H.then=="function")return V(pe(H),fe,Ae,ke,$e);throw fe=String(H),Error("Objects are not valid as a React child (found: "+(fe==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":fe)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function P(H,fe,Ae){if(H==null)return H;var ke=[],$e=0;return V(H,ke,"","",function(Ve){return fe.call(Ae,Ve,$e++)}),ke}function ne(H){if(H._status===-1){var fe=H._result;fe=fe(),fe.then(function(Ae){(H._status===0||H._status===-1)&&(H._status=1,H._result=Ae)},function(Ae){(H._status===0||H._status===-1)&&(H._status=2,H._result=Ae)}),H._status===-1&&(H._status=0,H._result=fe)}if(H._status===1)return H._result.default;throw H._result}var de=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var fe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(fe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)};function me(){}return Gt.Children={map:P,forEach:function(H,fe,Ae){P(H,function(){fe.apply(this,arguments)},Ae)},count:function(H){var fe=0;return P(H,function(){fe++}),fe},toArray:function(H){return P(H,function(fe){return fe})||[]},only:function(H){if(!D(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Gt.Component=R,Gt.Fragment=n,Gt.Profiler=s,Gt.PureComponent=G,Gt.StrictMode=r,Gt.Suspense=p,Gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Gt.__COMPILER_RUNTIME={__proto__:null,c:function(H){return j.H.useMemoCache(H)}},Gt.cache=function(H){return function(){return H.apply(null,arguments)}},Gt.cloneElement=function(H,fe,Ae){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ke=A({},H.props),$e=H.key,Ve=void 0;if(fe!=null)for(Fe in fe.ref!==void 0&&(Ve=void 0),fe.key!==void 0&&($e=""+fe.key),fe)!L.call(fe,Fe)||Fe==="key"||Fe==="__self"||Fe==="__source"||Fe==="ref"&&fe.ref===void 0||(ke[Fe]=fe[Fe]);var Fe=arguments.length-2;if(Fe===1)ke.children=Ae;else if(1<Fe){for(var wt=Array(Fe),De=0;De<Fe;De++)wt[De]=arguments[De+2];ke.children=wt}return Z(H.type,$e,void 0,void 0,Ve,ke)},Gt.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:o,_context:H},H},Gt.createElement=function(H,fe,Ae){var ke,$e={},Ve=null;if(fe!=null)for(ke in fe.key!==void 0&&(Ve=""+fe.key),fe)L.call(fe,ke)&&ke!=="key"&&ke!=="__self"&&ke!=="__source"&&($e[ke]=fe[ke]);var Fe=arguments.length-2;if(Fe===1)$e.children=Ae;else if(1<Fe){for(var wt=Array(Fe),De=0;De<Fe;De++)wt[De]=arguments[De+2];$e.children=wt}if(H&&H.defaultProps)for(ke in Fe=H.defaultProps,Fe)$e[ke]===void 0&&($e[ke]=Fe[ke]);return Z(H,Ve,void 0,void 0,null,$e)},Gt.createRef=function(){return{current:null}},Gt.forwardRef=function(H){return{$$typeof:l,render:H}},Gt.isValidElement=D,Gt.lazy=function(H){return{$$typeof:y,_payload:{_status:-1,_result:H},_init:ne}},Gt.memo=function(H,fe){return{$$typeof:m,type:H,compare:fe===void 0?null:fe}},Gt.startTransition=function(H){var fe=j.T,Ae={};j.T=Ae;try{var ke=H(),$e=j.S;$e!==null&&$e(Ae,ke),typeof ke=="object"&&ke!==null&&typeof ke.then=="function"&&ke.then(me,de)}catch(Ve){de(Ve)}finally{j.T=fe}},Gt.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Gt.use=function(H){return j.H.use(H)},Gt.useActionState=function(H,fe,Ae){return j.H.useActionState(H,fe,Ae)},Gt.useCallback=function(H,fe){return j.H.useCallback(H,fe)},Gt.useContext=function(H){return j.H.useContext(H)},Gt.useDebugValue=function(){},Gt.useDeferredValue=function(H,fe){return j.H.useDeferredValue(H,fe)},Gt.useEffect=function(H,fe,Ae){var ke=j.H;if(typeof Ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ke.useEffect(H,fe)},Gt.useId=function(){return j.H.useId()},Gt.useImperativeHandle=function(H,fe,Ae){return j.H.useImperativeHandle(H,fe,Ae)},Gt.useInsertionEffect=function(H,fe){return j.H.useInsertionEffect(H,fe)},Gt.useLayoutEffect=function(H,fe){return j.H.useLayoutEffect(H,fe)},Gt.useMemo=function(H,fe){return j.H.useMemo(H,fe)},Gt.useOptimistic=function(H,fe){return j.H.useOptimistic(H,fe)},Gt.useReducer=function(H,fe,Ae){return j.H.useReducer(H,fe,Ae)},Gt.useRef=function(H){return j.H.useRef(H)},Gt.useState=function(H){return j.H.useState(H)},Gt.useSyncExternalStore=function(H,fe,Ae){return j.H.useSyncExternalStore(H,fe,Ae)},Gt.useTransition=function(){return j.H.useTransition()},Gt.version="19.1.0",Gt}var Mx;function pb(){return Mx||(Mx=1,_E.exports=MP()),_E.exports}var st=pb();const aS=Rm(st);var xE={exports:{}},R0={},TE={exports:{}},AE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ux;function UP(){return Ux||(Ux=1,function(t){function e(P,ne){var de=P.length;P.push(ne);e:for(;0<de;){var me=de-1>>>1,H=P[me];if(0<s(H,ne))P[me]=ne,P[de]=H,de=me;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var ne=P[0],de=P.pop();if(de!==ne){P[0]=de;e:for(var me=0,H=P.length,fe=H>>>1;me<fe;){var Ae=2*(me+1)-1,ke=P[Ae],$e=Ae+1,Ve=P[$e];if(0>s(ke,de))$e<H&&0>s(Ve,ke)?(P[me]=Ve,P[$e]=de,me=$e):(P[me]=ke,P[Ae]=de,me=Ae);else if($e<H&&0>s(Ve,de))P[me]=Ve,P[$e]=de,me=$e;else break e}}return ne}function s(P,ne){var de=P.sortIndex-ne.sortIndex;return de!==0?de:P.id-ne.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,l=c.now();t.unstable_now=function(){return c.now()-l}}var p=[],m=[],y=1,v=null,S=3,_=!1,A=!1,N=!1,R=!1,$=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function X(P){for(var ne=n(m);ne!==null;){if(ne.callback===null)r(m);else if(ne.startTime<=P)r(m),ne.sortIndex=ne.expirationTime,e(p,ne);else break;ne=n(m)}}function j(P){if(N=!1,X(P),!A)if(n(p)!==null)A=!0,L||(L=!0,K());else{var ne=n(m);ne!==null&&V(j,ne.startTime-P)}}var L=!1,Z=-1,U=5,D=-1;function B(){return R?!0:!(t.unstable_now()-D<U)}function W(){if(R=!1,L){var P=t.unstable_now();D=P;var ne=!0;try{e:{A=!1,N&&(N=!1,G(Z),Z=-1),_=!0;var de=S;try{t:{for(X(P),v=n(p);v!==null&&!(v.expirationTime>P&&B());){var me=v.callback;if(typeof me=="function"){v.callback=null,S=v.priorityLevel;var H=me(v.expirationTime<=P);if(P=t.unstable_now(),typeof H=="function"){v.callback=H,X(P),ne=!0;break t}v===n(p)&&r(p),X(P)}else r(p);v=n(p)}if(v!==null)ne=!0;else{var fe=n(m);fe!==null&&V(j,fe.startTime-P),ne=!1}}break e}finally{v=null,S=de,_=!1}ne=void 0}}finally{ne?K():L=!1}}}var K;if(typeof F=="function")K=function(){F(W)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,pe=he.port2;he.port1.onmessage=W,K=function(){pe.postMessage(null)}}else K=function(){$(W,0)};function V(P,ne){Z=$(function(){P(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(P){switch(S){case 1:case 2:case 3:var ne=3;break;default:ne=S}var de=S;S=ne;try{return P()}finally{S=de}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(P,ne){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var de=S;S=P;try{return ne()}finally{S=de}},t.unstable_scheduleCallback=function(P,ne,de){var me=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?me+de:me):de=me,P){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=de+H,P={id:y++,callback:ne,priorityLevel:P,startTime:de,expirationTime:H,sortIndex:-1},de>me?(P.sortIndex=de,e(m,P),n(p)===null&&P===n(m)&&(N?(G(Z),Z=-1):N=!0,V(j,de-me))):(P.sortIndex=H,e(p,P),A||_||(A=!0,L||(L=!0,K()))),P},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(P){var ne=S;return function(){var de=S;S=ne;try{return P.apply(this,arguments)}finally{S=de}}}}(AE)),AE}var $x;function $P(){return $x||($x=1,TE.exports=UP()),TE.exports}var IE={exports:{}},Ds={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jx;function jP(){if(jx)return Ds;jx=1;var t=pb();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(p,m,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:p,containerInfo:m,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Ds.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ds.createPortal=function(p,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(p,m,null,y)},Ds.flushSync=function(p){var m=c.T,y=r.p;try{if(c.T=null,r.p=2,p)return p()}finally{c.T=m,r.p=y,r.d.f()}},Ds.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(p,m))},Ds.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},Ds.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var y=m.as,v=l(y,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,_=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?r.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:S,fetchPriority:_}):y==="script"&&r.d.X(p,{crossOrigin:v,integrity:S,fetchPriority:_,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Ds.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=l(m.as,m.crossOrigin);r.d.M(p,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(p)},Ds.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,v=l(y,m.crossOrigin);r.d.L(p,y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Ds.preloadModule=function(p,m){if(typeof p=="string")if(m){var y=l(m.as,m.crossOrigin);r.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(p)},Ds.requestFormReset=function(p){r.d.r(p)},Ds.unstable_batchedUpdates=function(p,m){return p(m)},Ds.useFormState=function(p,m,y){return c.H.useFormState(p,m,y)},Ds.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ds.version="19.1.0",Ds}var Bx;function BP(){if(Bx)return IE.exports;Bx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),IE.exports=jP(),IE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fx;function FP(){if(Fx)return R0;Fx=1;var t=$P(),e=pb(),n=BP();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)a+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,f=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(f=a.return),i=a.return;while(i)}return a.tag===3?f:null}function c(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function l(i){if(o(i)!==i)throw Error(r(188))}function p(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var f=i,g=a;;){var C=f.return;if(C===null)break;var x=C.alternate;if(x===null){if(g=C.return,g!==null){f=g;continue}break}if(C.child===x.child){for(x=C.child;x;){if(x===f)return l(C),i;if(x===g)return l(C),a;x=x.sibling}throw Error(r(188))}if(f.return!==g.return)f=C,g=x;else{for(var z=!1,J=C.child;J;){if(J===f){z=!0,f=C,g=x;break}if(J===g){z=!0,g=C,f=x;break}J=J.sibling}if(!z){for(J=x.child;J;){if(J===f){z=!0,f=x,g=C;break}if(J===g){z=!0,g=x,f=C;break}J=J.sibling}if(!z)throw Error(r(189))}}if(f.alternate!==g)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?i:a}function m(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=m(i),a!==null)return a;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),G=Symbol.for("react.consumer"),F=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function K(i){return i===null||typeof i!="object"?null:(i=W&&i[W]||i["@@iterator"],typeof i=="function"?i:null)}var he=Symbol.for("react.client.reference");function pe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===he?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case R:return"Profiler";case N:return"StrictMode";case j:return"Suspense";case L:return"SuspenseList";case D:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case _:return"Portal";case F:return(i.displayName||"Context")+".Provider";case G:return(i._context.displayName||"Context")+".Consumer";case X:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Z:return a=i.displayName||null,a!==null?a:pe(i.type)||"Memo";case U:a=i._payload,i=i._init;try{return pe(i(a))}catch{}}return null}var V=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},me=[],H=-1;function fe(i){return{current:i}}function Ae(i){0>H||(i.current=me[H],me[H]=null,H--)}function ke(i,a){H++,me[H]=i.current,i.current=a}var $e=fe(null),Ve=fe(null),Fe=fe(null),wt=fe(null);function De(i,a){switch(ke(Fe,a),ke(Ve,i),ke($e,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?ax(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=ax(a),i=cx(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Ae($e),ke($e,i)}function Q(){Ae($e),Ae(Ve),Ae(Fe)}function ue(i){i.memoizedState!==null&&ke(wt,i);var a=$e.current,f=cx(a,i.type);a!==f&&(ke(Ve,i),ke($e,f))}function Ee(i){Ve.current===i&&(Ae($e),Ae(Ve)),wt.current===i&&(Ae(wt),_0._currentValue=de)}var Ye=Object.prototype.hasOwnProperty,qe=t.unstable_scheduleCallback,it=t.unstable_cancelCallback,Bt=t.unstable_shouldYield,bn=t.unstable_requestPaint,Wt=t.unstable_now,hr=t.unstable_getCurrentPriorityLevel,Xn=t.unstable_ImmediatePriority,Jt=t.unstable_UserBlockingPriority,Nt=t.unstable_NormalPriority,An=t.unstable_LowPriority,Wn=t.unstable_IdlePriority,ts=t.log,xf=t.unstable_setDisableYieldValue,$r=null,jr=null;function zs(i){if(typeof ts=="function"&&xf(i),jr&&typeof jr.setStrictMode=="function")try{jr.setStrictMode($r,i)}catch{}}var Vt=Math.clz32?Math.clz32:D2,Ed=Math.log,Hl=Math.LN2;function D2(i){return i>>>=0,i===0?32:31-(Ed(i)/Hl|0)|0}var Cd=256,Tf=4194304;function ri(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function oo(i,a,f){var g=i.pendingLanes;if(g===0)return 0;var C=0,x=i.suspendedLanes,z=i.pingedLanes;i=i.warmLanes;var J=g&134217727;return J!==0?(g=J&~x,g!==0?C=ri(g):(z&=J,z!==0?C=ri(z):f||(f=J&~i,f!==0&&(C=ri(f))))):(J=g&~x,J!==0?C=ri(J):z!==0?C=ri(z):f||(f=g&~i,f!==0&&(C=ri(f)))),C===0?0:a!==0&&a!==C&&(a&x)===0&&(x=C&-C,f=a&-a,x>=f||x===32&&(f&4194048)!==0)?a:C}function _s(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Kt(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hc(){var i=Cd;return Cd<<=1,(Cd&4194048)===0&&(Cd=256),i}function Hm(){var i=Tf;return Tf<<=1,(Tf&62914560)===0&&(Tf=4194304),i}function Sd(i){for(var a=[],f=0;31>f;f++)a.push(i);return a}function Xl(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function kb(i,a,f,g,C,x){var z=i.pendingLanes;i.pendingLanes=f,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=f,i.entangledLanes&=f,i.errorRecoveryDisabledLanes&=f,i.shellSuspendCounter=0;var J=i.entanglements,ge=i.expirationTimes,Re=i.hiddenUpdates;for(f=z&~f;0<f;){var Ge=31-Vt(f),We=1<<Ge;J[Ge]=0,ge[Ge]=-1;var Le=Re[Ge];if(Le!==null)for(Re[Ge]=null,Ge=0;Ge<Le.length;Ge++){var Me=Le[Ge];Me!==null&&(Me.lane&=-536870913)}f&=~We}g!==0&&Xm(i,g,0),x!==0&&C===0&&i.tag!==0&&(i.suspendedLanes|=x&~(z&~a))}function Xm(i,a,f){i.pendingLanes|=a,i.suspendedLanes&=~a;var g=31-Vt(a);i.entangledLanes|=a,i.entanglements[g]=i.entanglements[g]|1073741824|f&4194090}function ao(i,a){var f=i.entangledLanes|=a;for(i=i.entanglements;f;){var g=31-Vt(f),C=1<<g;C&a|i[g]&a&&(i[g]|=a),f&=~C}}function Af(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function co(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Wm(){var i=ne.p;return i!==0?i:(i=window.event,i===void 0?32:Ax(i.type))}function Br(i,a){var f=ne.p;try{return ne.p=i,a()}finally{ne.p=f}}var br=Math.random().toString(36).slice(2),Vn="__reactFiber$"+br,Fr="__reactProps$"+br,Wl="__reactContainer$"+br,If="__reactEvents$"+br,Lb="__reactListeners$"+br,Di="__reactHandles$"+br,ka="__reactResources$"+br,La="__reactMarker$"+br;function Vm(i){delete i[Vn],delete i[Fr],delete i[If],delete i[Lb],delete i[Di]}function Mi(i){var a=i[Vn];if(a)return a;for(var f=i.parentNode;f;){if(a=f[Wl]||f[Vn]){if(f=a.alternate,a.child!==null||f!==null&&f.child!==null)for(i=hx(i);i!==null;){if(f=i[Vn])return f;i=hx(i)}return a}i=f,f=i.parentNode}return null}function Xc(i){if(i=i[Vn]||i[Wl]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Vl(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function Wc(i){var a=i[ka];return a||(a=i[ka]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function je(i){i[La]=!0}var Nf=new Set,Km={};function Kn(i,a){Gs(i,a),Gs(i+"Capture",a)}function Gs(i,a){for(Km[i]=a,i=0;i<a.length;i++)Nf.add(a[i])}var Ym=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rf={},xs={};function Ho(i){return Ye.call(xs,i)?!0:Ye.call(Rf,i)?!1:Ym.test(i)?xs[i]=!0:(Rf[i]=!0,!1)}function _d(i,a,f){if(Ho(a))if(f===null)i.removeAttribute(a);else{switch(typeof f){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var g=a.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+f)}}function Da(i,a,f){if(f===null)i.removeAttribute(a);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+f)}}function Pn(i,a,f,g){if(g===null)i.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(f);return}i.setAttributeNS(a,f,""+g)}}var Ma,Kl;function Yl(i){if(Ma===void 0)try{throw Error()}catch(f){var a=f.stack.trim().match(/\n( *(at )?)/);Ma=a&&a[1]||"",Kl=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ma+i+Kl}var qm=!1;function xd(i,a){if(!i||qm)return"";qm=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(a){var We=function(){throw Error()};if(Object.defineProperty(We.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(We,[])}catch(Me){var Le=Me}Reflect.construct(i,[],We)}else{try{We.call()}catch(Me){Le=Me}i.call(We.prototype)}}else{try{throw Error()}catch(Me){Le=Me}(We=i())&&typeof We.catch=="function"&&We.catch(function(){})}}catch(Me){if(Me&&Le&&typeof Me.stack=="string")return[Me.stack,Le.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=g.DetermineComponentFrameRoot(),z=x[0],J=x[1];if(z&&J){var ge=z.split(`
`),Re=J.split(`
`);for(C=g=0;g<ge.length&&!ge[g].includes("DetermineComponentFrameRoot");)g++;for(;C<Re.length&&!Re[C].includes("DetermineComponentFrameRoot");)C++;if(g===ge.length||C===Re.length)for(g=ge.length-1,C=Re.length-1;1<=g&&0<=C&&ge[g]!==Re[C];)C--;for(;1<=g&&0<=C;g--,C--)if(ge[g]!==Re[C]){if(g!==1||C!==1)do if(g--,C--,0>C||ge[g]!==Re[C]){var Ge=`
`+ge[g].replace(" at new "," at ");return i.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",i.displayName)),Ge}while(1<=g&&0<=C);break}}}finally{qm=!1,Error.prepareStackTrace=f}return(f=i?i.displayName||i.name:"")?Yl(f):""}function M2(i){switch(i.tag){case 26:case 27:case 5:return Yl(i.type);case 16:return Yl("Lazy");case 13:return Yl("Suspense");case 19:return Yl("SuspenseList");case 0:case 15:return xd(i.type,!1);case 11:return xd(i.type.render,!1);case 1:return xd(i.type,!0);case 31:return Yl("Activity");default:return""}}function Db(i){try{var a="";do a+=M2(i),i=i.return;while(i);return a}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function si(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Td(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function U2(i){var a=Td(i)?"checked":"value",f=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),g=""+i[a];if(!i.hasOwnProperty(a)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var C=f.get,x=f.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return C.call(this)},set:function(z){g=""+z,x.call(this,z)}}),Object.defineProperty(i,a,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(z){g=""+z},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Of(i){i._valueTracker||(i._valueTracker=U2(i))}function Mb(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var f=a.getValue(),g="";return i&&(g=Td(i)?i.checked?"true":"false":i.value),i=g,i!==f?(a.setValue(i),!0):!1}function Ua(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var $2=/[\n"\\]/g;function ns(i){return i.replace($2,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Qm(i,a,f,g,C,x,z,J){i.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?i.type=z:i.removeAttribute("type"),a!=null?z==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+si(a)):i.value!==""+si(a)&&(i.value=""+si(a)):z!=="submit"&&z!=="reset"||i.removeAttribute("value"),a!=null?Ad(i,z,si(a)):f!=null?Ad(i,z,si(f)):g!=null&&i.removeAttribute("value"),C==null&&x!=null&&(i.defaultChecked=!!x),C!=null&&(i.checked=C&&typeof C!="function"&&typeof C!="symbol"),J!=null&&typeof J!="function"&&typeof J!="symbol"&&typeof J!="boolean"?i.name=""+si(J):i.removeAttribute("name")}function Ub(i,a,f,g,C,x,z,J){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.type=x),a!=null||f!=null){if(!(x!=="submit"&&x!=="reset"||a!=null))return;f=f!=null?""+si(f):"",a=a!=null?""+si(a):f,J||a===i.value||(i.value=a),i.defaultValue=a}g=g??C,g=typeof g!="function"&&typeof g!="symbol"&&!!g,i.checked=J?i.checked:!!g,i.defaultChecked=!!g,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(i.name=z)}function Ad(i,a,f){a==="number"&&Ua(i.ownerDocument)===i||i.defaultValue===""+f||(i.defaultValue=""+f)}function Vc(i,a,f,g){if(i=i.options,a){a={};for(var C=0;C<f.length;C++)a["$"+f[C]]=!0;for(f=0;f<i.length;f++)C=a.hasOwnProperty("$"+i[f].value),i[f].selected!==C&&(i[f].selected=C),C&&g&&(i[f].defaultSelected=!0)}else{for(f=""+si(f),a=null,C=0;C<i.length;C++){if(i[C].value===f){i[C].selected=!0,g&&(i[C].defaultSelected=!0);return}a!==null||i[C].disabled||(a=i[C])}a!==null&&(a.selected=!0)}}function $b(i,a,f){if(a!=null&&(a=""+si(a),a!==i.value&&(i.value=a),f==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=f!=null?""+si(f):""}function jb(i,a,f,g){if(a==null){if(g!=null){if(f!=null)throw Error(r(92));if(V(g)){if(1<g.length)throw Error(r(93));g=g[0]}f=g}f==null&&(f=""),a=f}f=si(a),i.defaultValue=f,g=i.textContent,g===f&&g!==""&&g!==null&&(i.value=g)}function ql(i,a){if(a){var f=i.firstChild;if(f&&f===i.lastChild&&f.nodeType===3){f.nodeValue=a;return}}i.textContent=a}var Ql=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bb(i,a,f){var g=a.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":g?i.setProperty(a,f):typeof f!="number"||f===0||Ql.has(a)?a==="float"?i.cssFloat=f:i[a]=(""+f).trim():i[a]=f+"px"}function Fb(i,a,f){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||a!=null&&a.hasOwnProperty(g)||(g.indexOf("--")===0?i.setProperty(g,""):g==="float"?i.cssFloat="":i[g]="");for(var C in a)g=a[C],a.hasOwnProperty(C)&&f[C]!==g&&Bb(i,C,g)}else for(var x in a)a.hasOwnProperty(x)&&Bb(i,x,a[x])}function Pf(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var j2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),B2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kf(i){return B2.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var $a=null;function Jm(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Jl=null,Kc=null;function Zb(i){var a=Xc(i);if(a&&(i=a.stateNode)){var f=i[Fr]||null;e:switch(i=a.stateNode,a.type){case"input":if(Qm(i,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),a=f.name,f.type==="radio"&&a!=null){for(f=i;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+ns(""+a)+'"][type="radio"]'),a=0;a<f.length;a++){var g=f[a];if(g!==i&&g.form===i.form){var C=g[Fr]||null;if(!C)throw Error(r(90));Qm(g,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(a=0;a<f.length;a++)g=f[a],g.form===i.form&&Mb(g)}break e;case"textarea":$b(i,f.value,f.defaultValue);break e;case"select":a=f.value,a!=null&&Vc(i,!!f.multiple,a,!1)}}}var eg=!1;function zb(i,a,f){if(eg)return i(a,f);eg=!0;try{var g=i(a);return g}finally{if(eg=!1,(Jl!==null||Kc!==null)&&(Nu(),Jl&&(a=Jl,i=Kc,Kc=Jl=null,Zb(a),i)))for(a=0;a<i.length;a++)Zb(i[a])}}function Id(i,a){var f=i.stateNode;if(f===null)return null;var g=f[Fr]||null;if(g===null)return null;f=g[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break e;default:i=!1}if(i)return null;if(f&&typeof f!="function")throw Error(r(231,a,typeof f));return f}var Xo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tg=!1;if(Xo)try{var eu={};Object.defineProperty(eu,"passive",{get:function(){tg=!0}}),window.addEventListener("test",eu,eu),window.removeEventListener("test",eu,eu)}catch{tg=!1}var ja=null,ng=null,Nd=null;function Gb(){if(Nd)return Nd;var i,a=ng,f=a.length,g,C="value"in ja?ja.value:ja.textContent,x=C.length;for(i=0;i<f&&a[i]===C[i];i++);var z=f-i;for(g=1;g<=z&&a[f-g]===C[x-g];g++);return Nd=C.slice(i,1<g?1-g:void 0)}function Rd(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Wo(){return!0}function Hb(){return!1}function rs(i){function a(f,g,C,x,z){this._reactName=f,this._targetInst=C,this.type=g,this.nativeEvent=x,this.target=z,this.currentTarget=null;for(var J in i)i.hasOwnProperty(J)&&(f=i[J],this[J]=f?f(x):x[J]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Wo:Hb,this.isPropagationStopped=Hb,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Wo)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Wo)},persist:function(){},isPersistent:Wo}),a}var Yc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cn=rs(Yc),Od=y({},Yc,{view:0,detail:0}),rg=rs(Od),sg,ig,Ts,As=y({},Od,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ag,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ts&&(Ts&&i.type==="mousemove"?(sg=i.screenX-Ts.screenX,ig=i.screenY-Ts.screenY):ig=sg=0,Ts=i),sg)},movementY:function(i){return"movementY"in i?i.movementY:ig}}),ii=rs(As),Ba=y({},As,{dataTransfer:0}),F2=rs(Ba),og=y({},Od,{relatedTarget:0}),Pd=rs(og),kd=y({},Yc,{animationName:0,elapsedTime:0,pseudoElement:0}),Lf=rs(kd),Z2=y({},Yc,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),z2=rs(Z2),Df=y({},Yc,{data:0}),Ld=rs(Df),Xb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fa(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=G2[i])?!!a[i]:!1}function ag(){return Fa}var H2=y({},Od,{key:function(i){if(i.key){var a=Xb[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Rd(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Dd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ag,charCode:function(i){return i.type==="keypress"?Rd(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Rd(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Wb=rs(H2),X2=y({},As,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vb=rs(X2),Kb=y({},Od,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ag}),Yb=rs(Kb),W2=y({},Yc,{propertyName:0,elapsedTime:0,pseudoElement:0}),cg=rs(W2),lg=y({},As,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),V2=rs(lg),qb=y({},Yc,{newState:0,oldState:0}),Qb=rs(qb),Jb=[9,13,27,32],ug=Xo&&"CompositionEvent"in window,Md=null;Xo&&"documentMode"in document&&(Md=document.documentMode);var ew=Xo&&"TextEvent"in window&&!Md,Mf=Xo&&(!ug||Md&&8<Md&&11>=Md),Uf=" ",$f=!1;function dg(i,a){switch(i){case"keyup":return Jb.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var qc=!1;function K2(i,a){switch(i){case"compositionend":return hg(a);case"keypress":return a.which!==32?null:($f=!0,Uf);case"textInput":return i=a.data,i===Uf&&$f?null:i;default:return null}}function Y2(i,a){if(qc)return i==="compositionend"||!ug&&dg(i,a)?(i=Gb(),Nd=ng=ja=null,qc=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Mf&&a.locale!=="ko"?null:a.data;default:return null}}var q2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tu(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!q2[i.type]:a==="textarea"}function jf(i,a,f,g){Jl?Kc?Kc.push(g):Kc=[g]:Jl=g,a=_e(a,"onChange"),0<a.length&&(f=new Cn("onChange","change",null,f,g),i.push({event:f,listeners:a}))}var Hs=null,Ud=null;function Za(i){Qe(i,0)}function Bf(i){var a=Vl(i);if(Mb(a))return i}function fg(i,a){if(i==="change")return a}var tw=!1;if(Xo){var Ff;if(Xo){var pg="oninput"in document;if(!pg){var nw=document.createElement("div");nw.setAttribute("oninput","return;"),pg=typeof nw.oninput=="function"}Ff=pg}else Ff=!1;tw=Ff&&(!document.documentMode||9<document.documentMode)}function rw(){Hs&&(Hs.detachEvent("onpropertychange",sw),Ud=Hs=null)}function sw(i){if(i.propertyName==="value"&&Bf(Ud)){var a=[];jf(a,Ud,i,Jm(i)),zb(Za,a)}}function $d(i,a,f){i==="focusin"?(rw(),Hs=a,Ud=f,Hs.attachEvent("onpropertychange",sw)):i==="focusout"&&rw()}function iw(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Bf(Ud)}function jd(i,a){if(i==="click")return Bf(a)}function Q2(i,a){if(i==="input"||i==="change")return Bf(a)}function ow(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Xs=typeof Object.is=="function"?Object.is:ow;function Bd(i,a){if(Xs(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var f=Object.keys(i),g=Object.keys(a);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var C=f[g];if(!Ye.call(a,C)||!Xs(i[C],a[C]))return!1}return!0}function mg(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Zf(i,a){var f=mg(i);i=0;for(var g;f;){if(f.nodeType===3){if(g=i+f.textContent.length,i<=a&&g>=a)return{node:f,offset:a-i};i=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=mg(f)}}function gg(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?gg(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function aw(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Ua(i.document);a instanceof i.HTMLIFrameElement;){try{var f=typeof a.contentWindow.location.href=="string"}catch{f=!1}if(f)i=a.contentWindow;else break;a=Ua(i.document)}return a}function yg(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var J2=Xo&&"documentMode"in document&&11>=document.documentMode,za=null,Fd=null,Zd=null,Qc=!1;function bg(i,a,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Qc||za==null||za!==Ua(g)||(g=za,"selectionStart"in g&&yg(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Zd&&Bd(Zd,g)||(Zd=g,g=_e(Fd,"onSelect"),0<g.length&&(a=new Cn("onSelect","select",null,a,f),i.push({event:a,listeners:g}),a.target=za)))}function Jc(i,a){var f={};return f[i.toLowerCase()]=a.toLowerCase(),f["Webkit"+i]="webkit"+a,f["Moz"+i]="moz"+a,f}var Ga={animationend:Jc("Animation","AnimationEnd"),animationiteration:Jc("Animation","AnimationIteration"),animationstart:Jc("Animation","AnimationStart"),transitionrun:Jc("Transition","TransitionRun"),transitionstart:Jc("Transition","TransitionStart"),transitioncancel:Jc("Transition","TransitionCancel"),transitionend:Jc("Transition","TransitionEnd")},zd={},zf={};Xo&&(zf=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function Ha(i){if(zd[i])return zd[i];if(!Ga[i])return i;var a=Ga[i],f;for(f in a)if(a.hasOwnProperty(f)&&f in zf)return zd[i]=a[f];return i}var Gd=Ha("animationend"),Cr=Ha("animationiteration"),Hd=Ha("animationstart"),cw=Ha("transitionrun"),eE=Ha("transitionstart"),tE=Ha("transitioncancel"),Xd=Ha("transitionend"),Vo=new Map,Ko="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ko.push("scrollEnd");function Is(i,a){Vo.set(i,a),Kn(a,[i])}var Wd=new WeakMap;function ss(i,a){if(typeof i=="object"&&i!==null){var f=Wd.get(i);return f!==void 0?f:(a={value:i,source:a,stack:Db(a)},Wd.set(i,a),a)}return{value:i,source:a,stack:Db(a)}}var Zr=[],lo=0,wg=0;function nu(){for(var i=lo,a=wg=lo=0;a<i;){var f=Zr[a];Zr[a++]=null;var g=Zr[a];Zr[a++]=null;var C=Zr[a];Zr[a++]=null;var x=Zr[a];if(Zr[a++]=null,g!==null&&C!==null){var z=g.pending;z===null?C.next=C:(C.next=z.next,z.next=C),g.pending=C}x!==0&&lw(f,C,x)}}function oi(i,a,f,g){Zr[lo++]=i,Zr[lo++]=a,Zr[lo++]=f,Zr[lo++]=g,wg|=g,i.lanes|=g,i=i.alternate,i!==null&&(i.lanes|=g)}function vg(i,a,f,g){return oi(i,a,f,g),Gf(i)}function ru(i,a){return oi(i,null,null,a),Gf(i)}function lw(i,a,f){i.lanes|=f;var g=i.alternate;g!==null&&(g.lanes|=f);for(var C=!1,x=i.return;x!==null;)x.childLanes|=f,g=x.alternate,g!==null&&(g.childLanes|=f),x.tag===22&&(i=x.stateNode,i===null||i._visibility&1||(C=!0)),i=x,x=x.return;return i.tag===3?(x=i.stateNode,C&&a!==null&&(C=31-Vt(f),i=x.hiddenUpdates,g=i[C],g===null?i[C]=[a]:g.push(a),a.lane=f|536870912),x):null}function Gf(i){if(50<fl)throw fl=0,Ap=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var su={};function uw(i,a,f,g){this.tag=i,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ws(i,a,f,g){return new uw(i,a,f,g)}function Yo(i){return i=i.prototype,!(!i||!i.isReactComponent)}function qo(i,a){var f=i.alternate;return f===null?(f=Ws(i.tag,a,i.key,i.mode),f.elementType=i.elementType,f.type=i.type,f.stateNode=i.stateNode,f.alternate=i,i.alternate=f):(f.pendingProps=a,f.type=i.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=i.flags&65011712,f.childLanes=i.childLanes,f.lanes=i.lanes,f.child=i.child,f.memoizedProps=i.memoizedProps,f.memoizedState=i.memoizedState,f.updateQueue=i.updateQueue,a=i.dependencies,f.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},f.sibling=i.sibling,f.index=i.index,f.ref=i.ref,f.refCleanup=i.refCleanup,f}function dw(i,a){i.flags&=65011714;var f=i.alternate;return f===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=f.childLanes,i.lanes=f.lanes,i.child=f.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=f.memoizedProps,i.memoizedState=f.memoizedState,i.updateQueue=f.updateQueue,i.type=f.type,a=f.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function iu(i,a,f,g,C,x){var z=0;if(g=i,typeof i=="function")Yo(i)&&(z=1);else if(typeof i=="string")z=EP(i,f,$e.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case D:return i=Ws(31,f,a,C),i.elementType=D,i.lanes=x,i;case A:return Xa(f.children,C,x,a);case N:z=8,C|=24;break;case R:return i=Ws(12,f,a,C|2),i.elementType=R,i.lanes=x,i;case j:return i=Ws(13,f,a,C),i.elementType=j,i.lanes=x,i;case L:return i=Ws(19,f,a,C),i.elementType=L,i.lanes=x,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case $:case F:z=10;break e;case G:z=9;break e;case X:z=11;break e;case Z:z=14;break e;case U:z=16,g=null;break e}z=29,f=Error(r(130,i===null?"null":typeof i,"")),g=null}return a=Ws(z,f,a,C),a.elementType=i,a.type=g,a.lanes=x,a}function Xa(i,a,f,g){return i=Ws(7,i,g,a),i.lanes=f,i}function Hf(i,a,f){return i=Ws(6,i,null,a),i.lanes=f,i}function Eg(i,a,f){return a=Ws(4,i.children!==null?i.children:[],i.key,a),a.lanes=f,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var ou=[],Wa=0,Xf=null,Wf=0,is=[],ai=0,el=null,uo=1,Qo="";function Va(i,a){ou[Wa++]=Wf,ou[Wa++]=Xf,Xf=i,Wf=a}function hw(i,a,f){is[ai++]=uo,is[ai++]=Qo,is[ai++]=el,el=i;var g=uo;i=Qo;var C=32-Vt(g)-1;g&=~(1<<C),f+=1;var x=32-Vt(a)+C;if(30<x){var z=C-C%5;x=(g&(1<<z)-1).toString(32),g>>=z,C-=z,uo=1<<32-Vt(a)+C|f<<C|g,Qo=x+i}else uo=1<<x|f<<C|g,Qo=i}function Cg(i){i.return!==null&&(Va(i,1),hw(i,1,0))}function Sg(i){for(;i===Xf;)Xf=ou[--Wa],ou[Wa]=null,Wf=ou[--Wa],ou[Wa]=null;for(;i===el;)el=is[--ai],is[ai]=null,Qo=is[--ai],is[ai]=null,uo=is[--ai],is[ai]=null}var zr=null,rr=null,sn=!1,Jo=null,ho=!1,Ui=Error(r(519));function tl(i){var a=Error(r(418,""));throw Yd(ss(a,i)),Ui}function fw(i){var a=i.stateNode,f=i.type,g=i.memoizedProps;switch(a[Vn]=i,a[Fr]=g,f){case"dialog":ze("cancel",a),ze("close",a);break;case"iframe":case"object":case"embed":ze("load",a);break;case"video":case"audio":for(f=0;f<le.length;f++)ze(le[f],a);break;case"source":ze("error",a);break;case"img":case"image":case"link":ze("error",a),ze("load",a);break;case"details":ze("toggle",a);break;case"input":ze("invalid",a),Ub(a,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Of(a);break;case"select":ze("invalid",a);break;case"textarea":ze("invalid",a),jb(a,g.value,g.defaultValue,g.children),Of(a)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||a.textContent===""+f||g.suppressHydrationWarning===!0||Ls(a.textContent,f)?(g.popover!=null&&(ze("beforetoggle",a),ze("toggle",a)),g.onScroll!=null&&ze("scroll",a),g.onScrollEnd!=null&&ze("scrollend",a),g.onClick!=null&&(a.onclick=Xr),a=!0):a=!1,a||tl(i)}function _g(i){for(zr=i.return;zr;)switch(zr.tag){case 5:case 13:ho=!1;return;case 27:case 3:ho=!0;return;default:zr=zr.return}}function Vd(i){if(i!==zr)return!1;if(!sn)return _g(i),sn=!0,!1;var a=i.tag,f;if((f=a!==3&&a!==27)&&((f=a===5)&&(f=i.type,f=!(f!=="form"&&f!=="button")||lE(i.type,i.memoizedProps)),f=!f),f&&rr&&tl(i),_g(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(f=i.data,f==="/$"){if(a===0){rr=ga(i.nextSibling);break e}a--}else f!=="$"&&f!=="$!"&&f!=="$?"||a++;i=i.nextSibling}rr=null}}else a===27?(a=rr,Pu(i.type)?(i=fE,fE=null,rr=i):rr=a):rr=zr?ga(i.stateNode.nextSibling):null;return!0}function Kd(){rr=zr=null,sn=!1}function pw(){var i=Jo;return i!==null&&(ds===null?ds=i:ds.push.apply(ds,i),Jo=null),i}function Yd(i){Jo===null?Jo=[i]:Jo.push(i)}var xg=fe(null),Ka=null,$i=null;function Ya(i,a,f){ke(xg,a._currentValue),a._currentValue=f}function ea(i){i._currentValue=xg.current,Ae(xg)}function Tg(i,a,f){for(;i!==null;){var g=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),i===f)break;i=i.return}}function qd(i,a,f,g){var C=i.child;for(C!==null&&(C.return=i);C!==null;){var x=C.dependencies;if(x!==null){var z=C.child;x=x.firstContext;e:for(;x!==null;){var J=x;x=C;for(var ge=0;ge<a.length;ge++)if(J.context===a[ge]){x.lanes|=f,J=x.alternate,J!==null&&(J.lanes|=f),Tg(x.return,f,i),g||(z=null);break e}x=J.next}}else if(C.tag===18){if(z=C.return,z===null)throw Error(r(341));z.lanes|=f,x=z.alternate,x!==null&&(x.lanes|=f),Tg(z,f,i),z=null}else z=C.child;if(z!==null)z.return=C;else for(z=C;z!==null;){if(z===i){z=null;break}if(C=z.sibling,C!==null){C.return=z.return,z=C;break}z=z.return}C=z}}function au(i,a,f,g){i=null;for(var C=a,x=!1;C!==null;){if(!x){if((C.flags&524288)!==0)x=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var z=C.alternate;if(z===null)throw Error(r(387));if(z=z.memoizedProps,z!==null){var J=C.type;Xs(C.pendingProps.value,z.value)||(i!==null?i.push(J):i=[J])}}else if(C===wt.current){if(z=C.alternate,z===null)throw Error(r(387));z.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(i!==null?i.push(_0):i=[_0])}C=C.return}i!==null&&qd(a,i,f,g),a.flags|=262144}function Vf(i){for(i=i.firstContext;i!==null;){if(!Xs(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function qa(i){Ka=i,$i=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ir(i){return Ag(Ka,i)}function Qd(i,a){return Ka===null&&qa(i),Ag(i,a)}function Ag(i,a){var f=a._currentValue;if(a={context:a,memoizedValue:f,next:null},$i===null){if(i===null)throw Error(r(308));$i=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else $i=$i.next=a;return f}var Vs=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(f,g){i.push(g)}};this.abort=function(){a.aborted=!0,i.forEach(function(f){return f()})}},mw=t.unstable_scheduleCallback,gw=t.unstable_NormalPriority,fr={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ig(){return{controller:new Vs,data:new Map,refCount:0}}function Jd(i){i.refCount--,i.refCount===0&&mw(gw,function(){i.controller.abort()})}var cu=null,Kf=0,Qa=0,nl=null;function yw(i,a){if(cu===null){var f=cu=[];Kf=0,Qa=we(),nl={status:"pending",value:void 0,then:function(g){f.push(g)}}}return Kf++,a.then(bw,bw),a}function bw(){if(--Kf===0&&cu!==null){nl!==null&&(nl.status="fulfilled");var i=cu;cu=null,Qa=0,nl=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function ww(i,a){var f=[],g={status:"pending",value:null,reason:null,then:function(C){f.push(C)}};return i.then(function(){g.status="fulfilled",g.value=a;for(var C=0;C<f.length;C++)(0,f[C])(a)},function(C){for(g.status="rejected",g.reason=C,C=0;C<f.length;C++)(0,f[C])(void 0)}),g}var Ng=P.S;P.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&yw(i,a),Ng!==null&&Ng(i,a)};var Ja=fe(null);function Rg(){var i=Ja.current;return i!==null?i:kn.pooledCache}function eh(i,a){a===null?ke(Ja,Ja.current):ke(Ja,a.pool)}function Og(){var i=Rg();return i===null?null:{parent:fr._currentValue,pool:i}}var lu=Error(r(460)),vw=Error(r(474)),th=Error(r(542)),Yf={then:function(){}};function Pg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function nh(){}function kg(i,a,f){switch(f=i[f],f===void 0?i.push(a):f!==a&&(a.then(nh,nh),a=f),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Lg(i),i;default:if(typeof a.status=="string")a.then(nh,nh);else{if(i=kn,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(g){if(a.status==="pending"){var C=a;C.status="fulfilled",C.value=g}},function(g){if(a.status==="pending"){var C=a;C.status="rejected",C.reason=g}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Lg(i),i}throw rh=a,lu}}var rh=null;function sh(){if(rh===null)throw Error(r(459));var i=rh;return rh=null,i}function Lg(i){if(i===lu||i===th)throw Error(r(483))}var ec=!1;function ih(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tc(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function fo(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ta(i,a,f){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(an&2)!==0){var C=g.pending;return C===null?a.next=a:(a.next=C.next,C.next=a),g.pending=a,a=Gf(i),lw(i,null,f),a}return oi(i,g,a,f),Gf(i)}function na(i,a,f){if(a=a.updateQueue,a!==null&&(a=a.shared,(f&4194048)!==0)){var g=a.lanes;g&=i.pendingLanes,f|=g,a.lanes=f,ao(i,f)}}function rl(i,a){var f=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var C=null,x=null;if(f=f.firstBaseUpdate,f!==null){do{var z={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};x===null?C=x=z:x=x.next=z,f=f.next}while(f!==null);x===null?C=x=a:x=x.next=a}else C=x=a;f={baseState:g.baseState,firstBaseUpdate:C,lastBaseUpdate:x,shared:g.shared,callbacks:g.callbacks},i.updateQueue=f;return}i=f.lastBaseUpdate,i===null?f.firstBaseUpdate=a:i.next=a,f.lastBaseUpdate=a}var oh=!1;function nc(){if(oh){var i=nl;if(i!==null)throw i}}function ah(i,a,f,g){oh=!1;var C=i.updateQueue;ec=!1;var x=C.firstBaseUpdate,z=C.lastBaseUpdate,J=C.shared.pending;if(J!==null){C.shared.pending=null;var ge=J,Re=ge.next;ge.next=null,z===null?x=Re:z.next=Re,z=ge;var Ge=i.alternate;Ge!==null&&(Ge=Ge.updateQueue,J=Ge.lastBaseUpdate,J!==z&&(J===null?Ge.firstBaseUpdate=Re:J.next=Re,Ge.lastBaseUpdate=ge))}if(x!==null){var We=C.baseState;z=0,Ge=Re=ge=null,J=x;do{var Le=J.lane&-536870913,Me=Le!==J.lane;if(Me?(Yt&Le)===Le:(g&Le)===Le){Le!==0&&Le===Qa&&(oh=!0),Ge!==null&&(Ge=Ge.next={lane:0,tag:J.tag,payload:J.payload,callback:null,next:null});e:{var Ut=i,Rt=J;Le=a;var Ln=f;switch(Rt.tag){case 1:if(Ut=Rt.payload,typeof Ut=="function"){We=Ut.call(Ln,We,Le);break e}We=Ut;break e;case 3:Ut.flags=Ut.flags&-65537|128;case 0:if(Ut=Rt.payload,Le=typeof Ut=="function"?Ut.call(Ln,We,Le):Ut,Le==null)break e;We=y({},We,Le);break e;case 2:ec=!0}}Le=J.callback,Le!==null&&(i.flags|=64,Me&&(i.flags|=8192),Me=C.callbacks,Me===null?C.callbacks=[Le]:Me.push(Le))}else Me={lane:Le,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Ge===null?(Re=Ge=Me,ge=We):Ge=Ge.next=Me,z|=Le;if(J=J.next,J===null){if(J=C.shared.pending,J===null)break;Me=J,J=Me.next,Me.next=null,C.lastBaseUpdate=Me,C.shared.pending=null}}while(!0);Ge===null&&(ge=We),C.baseState=ge,C.firstBaseUpdate=Re,C.lastBaseUpdate=Ge,x===null&&(C.shared.lanes=0),us|=z,i.lanes=z,i.memoizedState=We}}function Dg(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function po(i,a){var f=i.callbacks;if(f!==null)for(i.callbacks=null,i=0;i<f.length;i++)Dg(f[i],a)}var mo=fe(null),rc=fe(0);function uu(i,a){i=_o,ke(rc,i),ke(mo,a),_o=i|a.baseLanes}function ch(){ke(rc,_o),ke(mo,mo.current)}function du(){_o=rc.current,Ae(mo),Ae(rc)}var go=0,Ft=null,wn=null,ar=null,hu=!1,sl=!1,ji=!1,Nr=0,Ns=0,il=null,Ew=0;function sr(){throw Error(r(321))}function qf(i,a){if(a===null)return!1;for(var f=0;f<a.length&&f<i.length;f++)if(!Xs(i[f],a[f]))return!1;return!0}function Qf(i,a,f,g,C,x){return go=x,Ft=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,P.H=i===null||i.memoizedState===null?Wg:yu,ji=!1,x=f(g,C),ji=!1,sl&&(x=Mg(a,f,g,C)),Jf(i),x}function Jf(i){P.H=fh;var a=wn!==null&&wn.next!==null;if(go=0,ar=wn=Ft=null,hu=!1,Ns=0,il=null,a)throw Error(r(300));i===null||Sr||(i=i.dependencies,i!==null&&Vf(i)&&(Sr=!0))}function Mg(i,a,f,g){Ft=i;var C=0;do{if(sl&&(il=null),Ns=0,sl=!1,25<=C)throw Error(r(301));if(C+=1,ar=wn=null,i.updateQueue!=null){var x=i.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}P.H=Vg,x=a(f,g)}while(sl);return x}function Ug(){var i=P.H,a=i.useState()[0];return a=typeof a.then=="function"?ra(a):a,i=i.useState()[0],(wn!==null?wn.memoizedState:null)!==i&&(Ft.flags|=1024),a}function ep(){var i=Nr!==0;return Nr=0,i}function tp(i,a,f){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~f}function np(i){if(hu){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}hu=!1}go=0,ar=wn=Ft=null,sl=!1,Ns=Nr=0,il=null}function os(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ar===null?Ft.memoizedState=ar=i:ar=ar.next=i,ar}function pr(){if(wn===null){var i=Ft.alternate;i=i!==null?i.memoizedState:null}else i=wn.next;var a=ar===null?Ft.memoizedState:ar.next;if(a!==null)ar=a,wn=i;else{if(i===null)throw Ft.alternate===null?Error(r(467)):Error(r(310));wn=i,i={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},ar===null?Ft.memoizedState=ar=i:ar=ar.next=i}return ar}function $g(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ra(i){var a=Ns;return Ns+=1,il===null&&(il=[]),i=kg(il,i,a),a=Ft,(ar===null?a.memoizedState:ar.next)===null&&(a=a.alternate,P.H=a===null||a.memoizedState===null?Wg:yu),i}function rp(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ra(i);if(i.$$typeof===F)return Ir(i)}throw Error(r(438,String(i)))}function mr(i){var a=null,f=Ft.updateQueue;if(f!==null&&(a=f.memoCache),a==null){var g=Ft.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(a={data:g.data.map(function(C){return C.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),f===null&&(f=$g(),Ft.updateQueue=f),f.memoCache=a,f=a.data[a.index],f===void 0)for(f=a.data[a.index]=Array(i),g=0;g<i;g++)f[g]=B;return a.index++,f}function as(i,a){return typeof a=="function"?a(i):a}function sc(i){var a=pr();return jg(a,wn,i)}function jg(i,a,f){var g=i.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=f;var C=i.baseQueue,x=g.pending;if(x!==null){if(C!==null){var z=C.next;C.next=x.next,x.next=z}a.baseQueue=C=x,g.pending=null}if(x=i.baseState,C===null)i.memoizedState=x;else{a=C.next;var J=z=null,ge=null,Re=a,Ge=!1;do{var We=Re.lane&-536870913;if(We!==Re.lane?(Yt&We)===We:(go&We)===We){var Le=Re.revertLane;if(Le===0)ge!==null&&(ge=ge.next={lane:0,revertLane:0,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null}),We===Qa&&(Ge=!0);else if((go&Le)===Le){Re=Re.next,Le===Qa&&(Ge=!0);continue}else We={lane:0,revertLane:Re.revertLane,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null},ge===null?(J=ge=We,z=x):ge=ge.next=We,Ft.lanes|=Le,us|=Le;We=Re.action,ji&&f(x,We),x=Re.hasEagerState?Re.eagerState:f(x,We)}else Le={lane:We,revertLane:Re.revertLane,action:Re.action,hasEagerState:Re.hasEagerState,eagerState:Re.eagerState,next:null},ge===null?(J=ge=Le,z=x):ge=ge.next=Le,Ft.lanes|=We,us|=We;Re=Re.next}while(Re!==null&&Re!==a);if(ge===null?z=x:ge.next=J,!Xs(x,i.memoizedState)&&(Sr=!0,Ge&&(f=nl,f!==null)))throw f;i.memoizedState=x,i.baseState=z,i.baseQueue=ge,g.lastRenderedState=x}return C===null&&(g.lanes=0),[i.memoizedState,g.dispatch]}function lh(i){var a=pr(),f=a.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=i;var g=f.dispatch,C=f.pending,x=a.memoizedState;if(C!==null){f.pending=null;var z=C=C.next;do x=i(x,z.action),z=z.next;while(z!==C);Xs(x,a.memoizedState)||(Sr=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),f.lastRenderedState=x}return[x,g]}function Cw(i,a,f){var g=Ft,C=pr(),x=sn;if(x){if(f===void 0)throw Error(r(407));f=f()}else f=a();var z=!Xs((wn||C).memoizedState,f);z&&(C.memoizedState=f,Sr=!0),C=C.queue;var J=ia.bind(null,g,C,i);if(Zi(2048,8,J,[i]),C.getSnapshot!==a||z||ar!==null&&ar.memoizedState.tag&1){if(g.flags|=2048,oa(9,yo(),Sw.bind(null,g,C,f,a),null),kn===null)throw Error(r(349));x||(go&124)!==0||sa(g,a,f)}return f}function sa(i,a,f){i.flags|=16384,i={getSnapshot:a,value:f},a=Ft.updateQueue,a===null?(a=$g(),Ft.updateQueue=a,a.stores=[i]):(f=a.stores,f===null?a.stores=[i]:f.push(i))}function Sw(i,a,f,g){a.value=f,a.getSnapshot=g,_w(a)&&xw(i)}function ia(i,a,f){return f(function(){_w(a)&&xw(i)})}function _w(i){var a=i.getSnapshot;i=i.value;try{var f=a();return!Xs(i,f)}catch{return!0}}function xw(i){var a=ru(i,2);a!==null&&Js(a,i,2)}function Rs(i){var a=os();if(typeof i=="function"){var f=i;if(i=f(),ji){zs(!0);try{f()}finally{zs(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:i},a}function Bg(i,a,f,g){return i.baseState=f,jg(i,wn,typeof g=="function"?g:as)}function Rr(i,a,f,g,C){if(oc(i))throw Error(r(485));if(i=a.action,i!==null){var x={payload:C,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){x.listeners.push(z)}};P.T!==null?f(!0):x.isTransition=!1,g(x),f=a.pending,f===null?(x.next=a.pending=x,Fg(a,x)):(x.next=f.next,a.pending=f.next=x)}}function Fg(i,a){var f=a.action,g=a.payload,C=i.state;if(a.isTransition){var x=P.T,z={};P.T=z;try{var J=f(C,g),ge=P.S;ge!==null&&ge(z,J),Bi(i,a,J)}catch(Re){uh(i,a,Re)}finally{P.T=x}}else try{x=f(C,g),Bi(i,a,x)}catch(Re){uh(i,a,Re)}}function Bi(i,a,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){Tw(i,a,g)},function(g){return uh(i,a,g)}):Tw(i,a,f)}function Tw(i,a,f){a.status="fulfilled",a.value=f,Aw(a),i.state=f,a=i.pending,a!==null&&(f=a.next,f===a?i.pending=null:(f=f.next,a.next=f,Fg(i,f)))}function uh(i,a,f){var g=i.pending;if(i.pending=null,g!==null){g=g.next;do a.status="rejected",a.reason=f,Aw(a),a=a.next;while(a!==g)}i.action=null}function Aw(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Iw(i,a){return a}function dh(i,a){if(sn){var f=kn.formState;if(f!==null){e:{var g=Ft;if(sn){if(rr){t:{for(var C=rr,x=ho;C.nodeType!==8;){if(!x){C=null;break t}if(C=ga(C.nextSibling),C===null){C=null;break t}}x=C.data,C=x==="F!"||x==="F"?C:null}if(C){rr=ga(C.nextSibling),g=C.data==="F!";break e}}tl(g)}g=!1}g&&(a=f[0])}}return f=os(),f.memoizedState=f.baseState=a,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Iw,lastRenderedState:a},f.queue=g,f=Gg.bind(null,Ft,g),g.dispatch=f,g=Rs(!1),x=Hg.bind(null,Ft,!1,g.queue),g=os(),C={state:a,dispatch:null,action:i,pending:null},g.queue=C,f=Rr.bind(null,Ft,C,x,f),C.dispatch=f,g.memoizedState=i,[a,f,!1]}function Nw(i){var a=pr();return Rw(a,wn,i)}function Rw(i,a,f){if(a=jg(i,a,Iw)[0],i=sc(as)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var g=ra(a)}catch(z){throw z===lu?th:z}else g=a;a=pr();var C=a.queue,x=C.dispatch;return f!==a.memoizedState&&(Ft.flags|=2048,oa(9,yo(),nE.bind(null,C,f),null)),[g,x,i]}function nE(i,a){i.action=a}function Ow(i){var a=pr(),f=wn;if(f!==null)return Rw(a,f,i);pr(),a=a.memoizedState,f=pr();var g=f.queue.dispatch;return f.memoizedState=i,[a,g,!1]}function oa(i,a,f,g){return i={tag:i,create:f,deps:g,inst:a,next:null},a=Ft.updateQueue,a===null&&(a=$g(),Ft.updateQueue=a),f=a.lastEffect,f===null?a.lastEffect=i.next=i:(g=f.next,f.next=i,i.next=g,a.lastEffect=i),i}function yo(){return{destroy:void 0,resource:void 0}}function Fi(){return pr().memoizedState}function aa(i,a,f,g){var C=os();g=g===void 0?null:g,Ft.flags|=i,C.memoizedState=oa(1|a,yo(),f,g)}function Zi(i,a,f,g){var C=pr();g=g===void 0?null:g;var x=C.memoizedState.inst;wn!==null&&g!==null&&qf(g,wn.memoizedState.deps)?C.memoizedState=oa(a,x,f,g):(Ft.flags|=i,C.memoizedState=oa(1|a,x,f,g))}function fu(i,a){aa(8390656,8,i,a)}function ic(i,a){Zi(2048,8,i,a)}function Zg(i,a){return Zi(4,2,i,a)}function ca(i,a){return Zi(4,4,i,a)}function Pw(i,a){if(typeof a=="function"){i=i();var f=a(i);return function(){typeof f=="function"?f():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function la(i,a,f){f=f!=null?f.concat([i]):null,Zi(4,4,Pw.bind(null,a,i),f)}function cs(){}function Os(i,a){var f=pr();a=a===void 0?null:a;var g=f.memoizedState;return a!==null&&qf(a,g[1])?g[0]:(f.memoizedState=[i,a],i)}function on(i,a){var f=pr();a=a===void 0?null:a;var g=f.memoizedState;if(a!==null&&qf(a,g[1]))return g[0];if(g=i(),ji){zs(!0);try{i()}finally{zs(!1)}}return f.memoizedState=[g,a],g}function ol(i,a,f){return f===void 0||(go&1073741824)!==0?i.memoizedState=a:(i.memoizedState=f,i=ks(),Ft.lanes|=i,us|=i,f)}function sp(i,a,f,g){return Xs(f,a)?f:mo.current!==null?(i=ol(i,f,g),Xs(i,a)||(Sr=!0),i):(go&42)===0?(Sr=!0,i.memoizedState=f):(i=ks(),Ft.lanes|=i,us|=i,a)}function zg(i,a,f,g,C){var x=ne.p;ne.p=x!==0&&8>x?x:8;var z=P.T,J={};P.T=J,Hg(i,!1,a,f);try{var ge=C(),Re=P.S;if(Re!==null&&Re(J,ge),ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var Ge=ww(ge,g);gu(i,a,Ge,Qs(i))}else gu(i,a,g,Qs(i))}catch(We){gu(i,a,{then:function(){},status:"rejected",reason:We},Qs())}finally{ne.p=x,P.T=z}}function pu(){}function ip(i,a,f,g){if(i.tag!==5)throw Error(r(476));var C=op(i).queue;zg(i,C,a,de,f===null?pu:function(){return al(i),f(g)})}function op(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:de},next:null};var f={};return a.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:f},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function al(i){var a=op(i).next.queue;gu(i,a,{},Qs())}function ci(){return Ir(_0)}function mu(){return pr().memoizedState}function kw(){return pr().memoizedState}function hh(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var f=Qs();i=fo(f);var g=ta(a,i,f);g!==null&&(Js(g,a,f),na(g,a,f)),a={cache:Ig()},i.payload=a;return}a=a.return}}function Lw(i,a,f){var g=Qs();f={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},oc(i)?Dw(a,f):(f=vg(i,a,f,g),f!==null&&(Js(f,i,g),Xg(f,a,g)))}function Gg(i,a,f){var g=Qs();gu(i,a,f,g)}function gu(i,a,f,g){var C={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(oc(i))Dw(a,C);else{var x=i.alternate;if(i.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var z=a.lastRenderedState,J=x(z,f);if(C.hasEagerState=!0,C.eagerState=J,Xs(J,z))return oi(i,a,C,0),kn===null&&nu(),!1}catch{}finally{}if(f=vg(i,a,C,g),f!==null)return Js(f,i,g),Xg(f,a,g),!0}return!1}function Hg(i,a,f,g){if(g={lane:2,revertLane:we(),action:g,hasEagerState:!1,eagerState:null,next:null},oc(i)){if(a)throw Error(r(479))}else a=vg(i,f,g,2),a!==null&&Js(a,i,2)}function oc(i){var a=i.alternate;return i===Ft||a!==null&&a===Ft}function Dw(i,a){sl=hu=!0;var f=i.pending;f===null?a.next=a:(a.next=f.next,f.next=a),i.pending=a}function Xg(i,a,f){if((f&4194048)!==0){var g=a.lanes;g&=i.pendingLanes,f|=g,a.lanes=f,ao(i,f)}}var fh={readContext:Ir,use:rp,useCallback:sr,useContext:sr,useEffect:sr,useImperativeHandle:sr,useLayoutEffect:sr,useInsertionEffect:sr,useMemo:sr,useReducer:sr,useRef:sr,useState:sr,useDebugValue:sr,useDeferredValue:sr,useTransition:sr,useSyncExternalStore:sr,useId:sr,useHostTransitionStatus:sr,useFormState:sr,useActionState:sr,useOptimistic:sr,useMemoCache:sr,useCacheRefresh:sr},Wg={readContext:Ir,use:rp,useCallback:function(i,a){return os().memoizedState=[i,a===void 0?null:a],i},useContext:Ir,useEffect:fu,useImperativeHandle:function(i,a,f){f=f!=null?f.concat([i]):null,aa(4194308,4,Pw.bind(null,a,i),f)},useLayoutEffect:function(i,a){return aa(4194308,4,i,a)},useInsertionEffect:function(i,a){aa(4,2,i,a)},useMemo:function(i,a){var f=os();a=a===void 0?null:a;var g=i();if(ji){zs(!0);try{i()}finally{zs(!1)}}return f.memoizedState=[g,a],g},useReducer:function(i,a,f){var g=os();if(f!==void 0){var C=f(a);if(ji){zs(!0);try{f(a)}finally{zs(!1)}}}else C=a;return g.memoizedState=g.baseState=C,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:C},g.queue=i,i=i.dispatch=Lw.bind(null,Ft,i),[g.memoizedState,i]},useRef:function(i){var a=os();return i={current:i},a.memoizedState=i},useState:function(i){i=Rs(i);var a=i.queue,f=Gg.bind(null,Ft,a);return a.dispatch=f,[i.memoizedState,f]},useDebugValue:cs,useDeferredValue:function(i,a){var f=os();return ol(f,i,a)},useTransition:function(){var i=Rs(!1);return i=zg.bind(null,Ft,i.queue,!0,!1),os().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,f){var g=Ft,C=os();if(sn){if(f===void 0)throw Error(r(407));f=f()}else{if(f=a(),kn===null)throw Error(r(349));(Yt&124)!==0||sa(g,a,f)}C.memoizedState=f;var x={value:f,getSnapshot:a};return C.queue=x,fu(ia.bind(null,g,x,i),[i]),g.flags|=2048,oa(9,yo(),Sw.bind(null,g,x,f,a),null),f},useId:function(){var i=os(),a=kn.identifierPrefix;if(sn){var f=Qo,g=uo;f=(g&~(1<<32-Vt(g)-1)).toString(32)+f,a="«"+a+"R"+f,f=Nr++,0<f&&(a+="H"+f.toString(32)),a+="»"}else f=Ew++,a="«"+a+"r"+f.toString(32)+"»";return i.memoizedState=a},useHostTransitionStatus:ci,useFormState:dh,useActionState:dh,useOptimistic:function(i){var a=os();a.memoizedState=a.baseState=i;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=f,a=Hg.bind(null,Ft,!0,f),f.dispatch=a,[i,a]},useMemoCache:mr,useCacheRefresh:function(){return os().memoizedState=hh.bind(null,Ft)}},yu={readContext:Ir,use:rp,useCallback:Os,useContext:Ir,useEffect:ic,useImperativeHandle:la,useInsertionEffect:Zg,useLayoutEffect:ca,useMemo:on,useReducer:sc,useRef:Fi,useState:function(){return sc(as)},useDebugValue:cs,useDeferredValue:function(i,a){var f=pr();return sp(f,wn.memoizedState,i,a)},useTransition:function(){var i=sc(as)[0],a=pr().memoizedState;return[typeof i=="boolean"?i:ra(i),a]},useSyncExternalStore:Cw,useId:mu,useHostTransitionStatus:ci,useFormState:Nw,useActionState:Nw,useOptimistic:function(i,a){var f=pr();return Bg(f,wn,i,a)},useMemoCache:mr,useCacheRefresh:kw},Vg={readContext:Ir,use:rp,useCallback:Os,useContext:Ir,useEffect:ic,useImperativeHandle:la,useInsertionEffect:Zg,useLayoutEffect:ca,useMemo:on,useReducer:lh,useRef:Fi,useState:function(){return lh(as)},useDebugValue:cs,useDeferredValue:function(i,a){var f=pr();return wn===null?ol(f,i,a):sp(f,wn.memoizedState,i,a)},useTransition:function(){var i=lh(as)[0],a=pr().memoizedState;return[typeof i=="boolean"?i:ra(i),a]},useSyncExternalStore:Cw,useId:mu,useHostTransitionStatus:ci,useFormState:Ow,useActionState:Ow,useOptimistic:function(i,a){var f=pr();return wn!==null?Bg(f,wn,i,a):(f.baseState=i,[i,f.queue.dispatch])},useMemoCache:mr,useCacheRefresh:kw},bu=null,ph=0;function mh(i){var a=ph;return ph+=1,bu===null&&(bu=[]),kg(bu,i,a)}function wu(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function ap(i,a){throw a.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Mw(i){var a=i._init;return a(i._payload)}function Uw(i){function a(Te,Ce){if(i){var Ne=Te.deletions;Ne===null?(Te.deletions=[Ce],Te.flags|=16):Ne.push(Ce)}}function f(Te,Ce){if(!i)return null;for(;Ce!==null;)a(Te,Ce),Ce=Ce.sibling;return null}function g(Te){for(var Ce=new Map;Te!==null;)Te.key!==null?Ce.set(Te.key,Te):Ce.set(Te.index,Te),Te=Te.sibling;return Ce}function C(Te,Ce){return Te=qo(Te,Ce),Te.index=0,Te.sibling=null,Te}function x(Te,Ce,Ne){return Te.index=Ne,i?(Ne=Te.alternate,Ne!==null?(Ne=Ne.index,Ne<Ce?(Te.flags|=67108866,Ce):Ne):(Te.flags|=67108866,Ce)):(Te.flags|=1048576,Ce)}function z(Te){return i&&Te.alternate===null&&(Te.flags|=67108866),Te}function J(Te,Ce,Ne,He){return Ce===null||Ce.tag!==6?(Ce=Hf(Ne,Te.mode,He),Ce.return=Te,Ce):(Ce=C(Ce,Ne),Ce.return=Te,Ce)}function ge(Te,Ce,Ne,He){var vt=Ne.type;return vt===A?Ge(Te,Ce,Ne.props.children,He,Ne.key):Ce!==null&&(Ce.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===U&&Mw(vt)===Ce.type)?(Ce=C(Ce,Ne.props),wu(Ce,Ne),Ce.return=Te,Ce):(Ce=iu(Ne.type,Ne.key,Ne.props,null,Te.mode,He),wu(Ce,Ne),Ce.return=Te,Ce)}function Re(Te,Ce,Ne,He){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==Ne.containerInfo||Ce.stateNode.implementation!==Ne.implementation?(Ce=Eg(Ne,Te.mode,He),Ce.return=Te,Ce):(Ce=C(Ce,Ne.children||[]),Ce.return=Te,Ce)}function Ge(Te,Ce,Ne,He,vt){return Ce===null||Ce.tag!==7?(Ce=Xa(Ne,Te.mode,He,vt),Ce.return=Te,Ce):(Ce=C(Ce,Ne),Ce.return=Te,Ce)}function We(Te,Ce,Ne){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Ce=Hf(""+Ce,Te.mode,Ne),Ce.return=Te,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case S:return Ne=iu(Ce.type,Ce.key,Ce.props,null,Te.mode,Ne),wu(Ne,Ce),Ne.return=Te,Ne;case _:return Ce=Eg(Ce,Te.mode,Ne),Ce.return=Te,Ce;case U:var He=Ce._init;return Ce=He(Ce._payload),We(Te,Ce,Ne)}if(V(Ce)||K(Ce))return Ce=Xa(Ce,Te.mode,Ne,null),Ce.return=Te,Ce;if(typeof Ce.then=="function")return We(Te,mh(Ce),Ne);if(Ce.$$typeof===F)return We(Te,Qd(Te,Ce),Ne);ap(Te,Ce)}return null}function Le(Te,Ce,Ne,He){var vt=Ce!==null?Ce.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return vt!==null?null:J(Te,Ce,""+Ne,He);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case S:return Ne.key===vt?ge(Te,Ce,Ne,He):null;case _:return Ne.key===vt?Re(Te,Ce,Ne,He):null;case U:return vt=Ne._init,Ne=vt(Ne._payload),Le(Te,Ce,Ne,He)}if(V(Ne)||K(Ne))return vt!==null?null:Ge(Te,Ce,Ne,He,null);if(typeof Ne.then=="function")return Le(Te,Ce,mh(Ne),He);if(Ne.$$typeof===F)return Le(Te,Ce,Qd(Te,Ne),He);ap(Te,Ne)}return null}function Me(Te,Ce,Ne,He,vt){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return Te=Te.get(Ne)||null,J(Ce,Te,""+He,vt);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case S:return Te=Te.get(He.key===null?Ne:He.key)||null,ge(Ce,Te,He,vt);case _:return Te=Te.get(He.key===null?Ne:He.key)||null,Re(Ce,Te,He,vt);case U:var qt=He._init;return He=qt(He._payload),Me(Te,Ce,Ne,He,vt)}if(V(He)||K(He))return Te=Te.get(Ne)||null,Ge(Ce,Te,He,vt,null);if(typeof He.then=="function")return Me(Te,Ce,Ne,mh(He),vt);if(He.$$typeof===F)return Me(Te,Ce,Ne,Qd(Ce,He),vt);ap(Ce,He)}return null}function Ut(Te,Ce,Ne,He){for(var vt=null,qt=null,xt=Ce,Pt=Ce=0,Wr=null;xt!==null&&Pt<Ne.length;Pt++){xt.index>Pt?(Wr=xt,xt=null):Wr=xt.sibling;var un=Le(Te,xt,Ne[Pt],He);if(un===null){xt===null&&(xt=Wr);break}i&&xt&&un.alternate===null&&a(Te,xt),Ce=x(un,Ce,Pt),qt===null?vt=un:qt.sibling=un,qt=un,xt=Wr}if(Pt===Ne.length)return f(Te,xt),sn&&Va(Te,Pt),vt;if(xt===null){for(;Pt<Ne.length;Pt++)xt=We(Te,Ne[Pt],He),xt!==null&&(Ce=x(xt,Ce,Pt),qt===null?vt=xt:qt.sibling=xt,qt=xt);return sn&&Va(Te,Pt),vt}for(xt=g(xt);Pt<Ne.length;Pt++)Wr=Me(xt,Te,Pt,Ne[Pt],He),Wr!==null&&(i&&Wr.alternate!==null&&xt.delete(Wr.key===null?Pt:Wr.key),Ce=x(Wr,Ce,Pt),qt===null?vt=Wr:qt.sibling=Wr,qt=Wr);return i&&xt.forEach(function(Uu){return a(Te,Uu)}),sn&&Va(Te,Pt),vt}function Rt(Te,Ce,Ne,He){if(Ne==null)throw Error(r(151));for(var vt=null,qt=null,xt=Ce,Pt=Ce=0,Wr=null,un=Ne.next();xt!==null&&!un.done;Pt++,un=Ne.next()){xt.index>Pt?(Wr=xt,xt=null):Wr=xt.sibling;var Uu=Le(Te,xt,un.value,He);if(Uu===null){xt===null&&(xt=Wr);break}i&&xt&&Uu.alternate===null&&a(Te,xt),Ce=x(Uu,Ce,Pt),qt===null?vt=Uu:qt.sibling=Uu,qt=Uu,xt=Wr}if(un.done)return f(Te,xt),sn&&Va(Te,Pt),vt;if(xt===null){for(;!un.done;Pt++,un=Ne.next())un=We(Te,un.value,He),un!==null&&(Ce=x(un,Ce,Pt),qt===null?vt=un:qt.sibling=un,qt=un);return sn&&Va(Te,Pt),vt}for(xt=g(xt);!un.done;Pt++,un=Ne.next())un=Me(xt,Te,Pt,un.value,He),un!==null&&(i&&un.alternate!==null&&xt.delete(un.key===null?Pt:un.key),Ce=x(un,Ce,Pt),qt===null?vt=un:qt.sibling=un,qt=un);return i&&xt.forEach(function(kP){return a(Te,kP)}),sn&&Va(Te,Pt),vt}function Ln(Te,Ce,Ne,He){if(typeof Ne=="object"&&Ne!==null&&Ne.type===A&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case S:e:{for(var vt=Ne.key;Ce!==null;){if(Ce.key===vt){if(vt=Ne.type,vt===A){if(Ce.tag===7){f(Te,Ce.sibling),He=C(Ce,Ne.props.children),He.return=Te,Te=He;break e}}else if(Ce.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===U&&Mw(vt)===Ce.type){f(Te,Ce.sibling),He=C(Ce,Ne.props),wu(He,Ne),He.return=Te,Te=He;break e}f(Te,Ce);break}else a(Te,Ce);Ce=Ce.sibling}Ne.type===A?(He=Xa(Ne.props.children,Te.mode,He,Ne.key),He.return=Te,Te=He):(He=iu(Ne.type,Ne.key,Ne.props,null,Te.mode,He),wu(He,Ne),He.return=Te,Te=He)}return z(Te);case _:e:{for(vt=Ne.key;Ce!==null;){if(Ce.key===vt)if(Ce.tag===4&&Ce.stateNode.containerInfo===Ne.containerInfo&&Ce.stateNode.implementation===Ne.implementation){f(Te,Ce.sibling),He=C(Ce,Ne.children||[]),He.return=Te,Te=He;break e}else{f(Te,Ce);break}else a(Te,Ce);Ce=Ce.sibling}He=Eg(Ne,Te.mode,He),He.return=Te,Te=He}return z(Te);case U:return vt=Ne._init,Ne=vt(Ne._payload),Ln(Te,Ce,Ne,He)}if(V(Ne))return Ut(Te,Ce,Ne,He);if(K(Ne)){if(vt=K(Ne),typeof vt!="function")throw Error(r(150));return Ne=vt.call(Ne),Rt(Te,Ce,Ne,He)}if(typeof Ne.then=="function")return Ln(Te,Ce,mh(Ne),He);if(Ne.$$typeof===F)return Ln(Te,Ce,Qd(Te,Ne),He);ap(Te,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint"?(Ne=""+Ne,Ce!==null&&Ce.tag===6?(f(Te,Ce.sibling),He=C(Ce,Ne),He.return=Te,Te=He):(f(Te,Ce),He=Hf(Ne,Te.mode,He),He.return=Te,Te=He),z(Te)):f(Te,Ce)}return function(Te,Ce,Ne,He){try{ph=0;var vt=Ln(Te,Ce,Ne,He);return bu=null,vt}catch(xt){if(xt===lu||xt===th)throw xt;var qt=Ws(29,xt,null,Te.mode);return qt.lanes=He,qt.return=Te,qt}finally{}}}var vu=Uw(!0),gh=Uw(!1),li=fe(null),bo=null;function ac(i){var a=i.alternate;ke(wr,wr.current&1),ke(li,i),bo===null&&(a===null||mo.current!==null||a.memoizedState!==null)&&(bo=i)}function $w(i){if(i.tag===22){if(ke(wr,wr.current),ke(li,i),bo===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(bo=i)}}else ui()}function ui(){ke(wr,wr.current),ke(li,li.current)}function zi(i){Ae(li),bo===i&&(bo=null),Ae(wr)}var wr=fe(0);function cl(i){for(var a=i;a!==null;){if(a.tag===13){var f=a.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||hE(f)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Kg(i,a,f,g){a=i.memoizedState,f=f(g,a),f=f==null?a:y({},a,f),i.memoizedState=f,i.lanes===0&&(i.updateQueue.baseState=f)}var Eu={enqueueSetState:function(i,a,f){i=i._reactInternals;var g=Qs(),C=fo(g);C.payload=a,f!=null&&(C.callback=f),a=ta(i,C,g),a!==null&&(Js(a,i,g),na(a,i,g))},enqueueReplaceState:function(i,a,f){i=i._reactInternals;var g=Qs(),C=fo(g);C.tag=1,C.payload=a,f!=null&&(C.callback=f),a=ta(i,C,g),a!==null&&(Js(a,i,g),na(a,i,g))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var f=Qs(),g=fo(f);g.tag=2,a!=null&&(g.callback=a),a=ta(i,g,f),a!==null&&(Js(a,i,f),na(a,i,f))}};function jw(i,a,f,g,C,x,z){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,x,z):a.prototype&&a.prototype.isPureReactComponent?!Bd(f,g)||!Bd(C,x):!0}function Bw(i,a,f,g){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(f,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(f,g),a.state!==i&&Eu.enqueueReplaceState(a,a.state,null)}function ll(i,a){var f=a;if("ref"in a){f={};for(var g in a)g!=="ref"&&(f[g]=a[g])}if(i=i.defaultProps){f===a&&(f=y({},f));for(var C in i)f[C]===void 0&&(f[C]=i[C])}return f}var cp=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Cu(i){cp(i)}function Yg(i){console.error(i)}function Fw(i){cp(i)}function ul(i,a){try{var f=i.onUncaughtError;f(a.value,{componentStack:a.stack})}catch(g){setTimeout(function(){throw g})}}function cc(i,a,f){try{var g=i.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function qg(i,a,f){return f=fo(f),f.tag=3,f.payload={element:null},f.callback=function(){ul(i,a)},f}function Zw(i){return i=fo(i),i.tag=3,i}function Ks(i,a,f,g){var C=f.type.getDerivedStateFromError;if(typeof C=="function"){var x=g.value;i.payload=function(){return C(x)},i.callback=function(){cc(a,f,g)}}var z=f.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(i.callback=function(){cc(a,f,g),typeof C!="function"&&(mc===null?mc=new Set([this]):mc.add(this));var J=g.stack;this.componentDidCatch(g.value,{componentStack:J!==null?J:""})})}function zw(i,a,f,g,C){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(a=f.alternate,a!==null&&au(a,f,C,!0),f=li.current,f!==null){switch(f.tag){case 13:return bo===null?Np():f.alternate===null&&Yn===0&&(Yn=3),f.flags&=-257,f.flags|=65536,f.lanes=C,g===Yf?f.flags|=16384:(a=f.updateQueue,a===null?f.updateQueue=new Set([g]):a.add(g),gl(i,g,C)),!1;case 22:return f.flags|=65536,g===Yf?f.flags|=16384:(a=f.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=a):(f=a.retryQueue,f===null?a.retryQueue=new Set([g]):f.add(g)),gl(i,g,C)),!1}throw Error(r(435,f.tag))}return gl(i,g,C),Np(),!1}if(sn)return a=li.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=C,g!==Ui&&(i=Error(r(422),{cause:g}),Yd(ss(i,f)))):(g!==Ui&&(a=Error(r(423),{cause:g}),Yd(ss(a,f))),i=i.current.alternate,i.flags|=65536,C&=-C,i.lanes|=C,g=ss(g,f),C=qg(i.stateNode,g,C),rl(i,C),Yn!==4&&(Yn=2)),!1;var x=Error(r(520),{cause:g});if(x=ss(x,f),pc===null?pc=[x]:pc.push(x),Yn!==4&&(Yn=2),a===null)return!0;g=ss(g,f),f=a;do{switch(f.tag){case 3:return f.flags|=65536,i=C&-C,f.lanes|=i,i=qg(f.stateNode,g,i),rl(f,i),!1;case 1:if(a=f.type,x=f.stateNode,(f.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(mc===null||!mc.has(x))))return f.flags|=65536,C&=-C,f.lanes|=C,C=Zw(C),Ks(C,i,f,g),rl(f,C),!1}f=f.return}while(f!==null);return!1}var Qg=Error(r(461)),Sr=!1;function _r(i,a,f,g){a.child=i===null?gh(a,null,f,g):vu(a,i.child,f,g)}function yh(i,a,f,g,C){f=f.render;var x=a.ref;if("ref"in g){var z={};for(var J in g)J!=="ref"&&(z[J]=g[J])}else z=g;return qa(a),g=Qf(i,a,f,z,x,C),J=ep(),i!==null&&!Sr?(tp(i,a,C),vo(i,a,C)):(sn&&J&&Cg(a),a.flags|=1,_r(i,a,g,C),a.child)}function bh(i,a,f,g,C){if(i===null){var x=f.type;return typeof x=="function"&&!Yo(x)&&x.defaultProps===void 0&&f.compare===null?(a.tag=15,a.type=x,wo(i,a,x,g,C)):(i=iu(f.type,null,g,a,a.mode,C),i.ref=a.ref,i.return=a,a.child=i)}if(x=i.child,!n0(i,C)){var z=x.memoizedProps;if(f=f.compare,f=f!==null?f:Bd,f(z,g)&&i.ref===a.ref)return vo(i,a,C)}return a.flags|=1,i=qo(x,g),i.ref=a.ref,i.return=a,a.child=i}function wo(i,a,f,g,C){if(i!==null){var x=i.memoizedProps;if(Bd(x,g)&&i.ref===a.ref)if(Sr=!1,a.pendingProps=g=x,n0(i,C))(i.flags&131072)!==0&&(Sr=!0);else return a.lanes=i.lanes,vo(i,a,C)}return Su(i,a,f,g,C)}function lp(i,a,f){var g=a.pendingProps,C=g.children,x=i!==null?i.memoizedState:null;if(g.mode==="hidden"){if((a.flags&128)!==0){if(g=x!==null?x.baseLanes|f:f,i!==null){for(C=a.child=i.child,x=0;C!==null;)x=x|C.lanes|C.childLanes,C=C.sibling;a.childLanes=x&~g}else a.childLanes=0,a.child=null;return up(i,a,g,f)}if((f&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&eh(a,x!==null?x.cachePool:null),x!==null?uu(a,x):ch(),$w(a);else return a.lanes=a.childLanes=536870912,up(i,a,x!==null?x.baseLanes|f:f,f)}else x!==null?(eh(a,x.cachePool),uu(a,x),ui(),a.memoizedState=null):(i!==null&&eh(a,null),ch(),ui());return _r(i,a,C,f),a.child}function up(i,a,f,g){var C=Rg();return C=C===null?null:{parent:fr._currentValue,pool:C},a.memoizedState={baseLanes:f,cachePool:C},i!==null&&eh(a,null),ch(),$w(a),i!==null&&au(i,a,g,!0),null}function dl(i,a){var f=a.ref;if(f===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(i===null||i.ref!==f)&&(a.flags|=4194816)}}function Su(i,a,f,g,C){return qa(a),f=Qf(i,a,f,g,void 0,C),g=ep(),i!==null&&!Sr?(tp(i,a,C),vo(i,a,C)):(sn&&g&&Cg(a),a.flags|=1,_r(i,a,f,C),a.child)}function dp(i,a,f,g,C,x){return qa(a),a.updateQueue=null,f=Mg(a,g,f,C),Jf(i),g=ep(),i!==null&&!Sr?(tp(i,a,x),vo(i,a,x)):(sn&&g&&Cg(a),a.flags|=1,_r(i,a,f,x),a.child)}function Un(i,a,f,g,C){if(qa(a),a.stateNode===null){var x=su,z=f.contextType;typeof z=="object"&&z!==null&&(x=Ir(z)),x=new f(g,x),a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Eu,a.stateNode=x,x._reactInternals=a,x=a.stateNode,x.props=g,x.state=a.memoizedState,x.refs={},ih(a),z=f.contextType,x.context=typeof z=="object"&&z!==null?Ir(z):su,x.state=a.memoizedState,z=f.getDerivedStateFromProps,typeof z=="function"&&(Kg(a,f,z,g),x.state=a.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(z=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),z!==x.state&&Eu.enqueueReplaceState(x,x.state,null),ah(a,g,x,C),nc(),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308),g=!0}else if(i===null){x=a.stateNode;var J=a.memoizedProps,ge=ll(f,J);x.props=ge;var Re=x.context,Ge=f.contextType;z=su,typeof Ge=="object"&&Ge!==null&&(z=Ir(Ge));var We=f.getDerivedStateFromProps;Ge=typeof We=="function"||typeof x.getSnapshotBeforeUpdate=="function",J=a.pendingProps!==J,Ge||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(J||Re!==z)&&Bw(a,x,g,z),ec=!1;var Le=a.memoizedState;x.state=Le,ah(a,g,x,C),nc(),Re=a.memoizedState,J||Le!==Re||ec?(typeof We=="function"&&(Kg(a,f,We,g),Re=a.memoizedState),(ge=ec||jw(a,f,ge,g,Le,Re,z))?(Ge||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=Re),x.props=g,x.state=Re,x.context=z,g=ge):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{x=a.stateNode,tc(i,a),z=a.memoizedProps,Ge=ll(f,z),x.props=Ge,We=a.pendingProps,Le=x.context,Re=f.contextType,ge=su,typeof Re=="object"&&Re!==null&&(ge=Ir(Re)),J=f.getDerivedStateFromProps,(Re=typeof J=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(z!==We||Le!==ge)&&Bw(a,x,g,ge),ec=!1,Le=a.memoizedState,x.state=Le,ah(a,g,x,C),nc();var Me=a.memoizedState;z!==We||Le!==Me||ec||i!==null&&i.dependencies!==null&&Vf(i.dependencies)?(typeof J=="function"&&(Kg(a,f,J,g),Me=a.memoizedState),(Ge=ec||jw(a,f,Ge,g,Le,Me,ge)||i!==null&&i.dependencies!==null&&Vf(i.dependencies))?(Re||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(g,Me,ge),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(g,Me,ge)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||z===i.memoizedProps&&Le===i.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||z===i.memoizedProps&&Le===i.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=Me),x.props=g,x.state=Me,x.context=ge,g=Ge):(typeof x.componentDidUpdate!="function"||z===i.memoizedProps&&Le===i.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||z===i.memoizedProps&&Le===i.memoizedState||(a.flags|=1024),g=!1)}return x=g,dl(i,a),g=(a.flags&128)!==0,x||g?(x=a.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:x.render(),a.flags|=1,i!==null&&g?(a.child=vu(a,i.child,null,C),a.child=vu(a,null,f,C)):_r(i,a,f,C),a.memoizedState=x.state,i=a.child):i=vo(i,a,C),i}function Jg(i,a,f,g){return Kd(),a.flags|=256,_r(i,a,f,g),a.child}var e0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ua(i){return{baseLanes:i,cachePool:Og()}}function hp(i,a,f){return i=i!==null?i.childLanes&~f:0,a&&(i|=mi),i}function t0(i,a,f){var g=a.pendingProps,C=!1,x=(a.flags&128)!==0,z;if((z=x)||(z=i!==null&&i.memoizedState===null?!1:(wr.current&2)!==0),z&&(C=!0,a.flags&=-129),z=(a.flags&32)!==0,a.flags&=-33,i===null){if(sn){if(C?ac(a):ui(),sn){var J=rr,ge;if(ge=J){e:{for(ge=J,J=ho;ge.nodeType!==8;){if(!J){J=null;break e}if(ge=ga(ge.nextSibling),ge===null){J=null;break e}}J=ge}J!==null?(a.memoizedState={dehydrated:J,treeContext:el!==null?{id:uo,overflow:Qo}:null,retryLane:536870912,hydrationErrors:null},ge=Ws(18,null,null,0),ge.stateNode=J,ge.return=a,a.child=ge,zr=a,rr=null,ge=!0):ge=!1}ge||tl(a)}if(J=a.memoizedState,J!==null&&(J=J.dehydrated,J!==null))return hE(J)?a.lanes=32:a.lanes=536870912,null;zi(a)}return J=g.children,g=g.fallback,C?(ui(),C=a.mode,J=wh({mode:"hidden",children:J},C),g=Xa(g,C,f,null),J.return=a,g.return=a,J.sibling=g,a.child=J,C=a.child,C.memoizedState=ua(f),C.childLanes=hp(i,z,f),a.memoizedState=e0,g):(ac(a),fp(a,J))}if(ge=i.memoizedState,ge!==null&&(J=ge.dehydrated,J!==null)){if(x)a.flags&256?(ac(a),a.flags&=-257,a=vh(i,a,f)):a.memoizedState!==null?(ui(),a.child=i.child,a.flags|=128,a=null):(ui(),C=g.fallback,J=a.mode,g=wh({mode:"visible",children:g.children},J),C=Xa(C,J,f,null),C.flags|=2,g.return=a,C.return=a,g.sibling=C,a.child=g,vu(a,i.child,null,f),g=a.child,g.memoizedState=ua(f),g.childLanes=hp(i,z,f),a.memoizedState=e0,a=C);else if(ac(a),hE(J)){if(z=J.nextSibling&&J.nextSibling.dataset,z)var Re=z.dgst;z=Re,g=Error(r(419)),g.stack="",g.digest=z,Yd({value:g,source:null,stack:null}),a=vh(i,a,f)}else if(Sr||au(i,a,f,!1),z=(f&i.childLanes)!==0,Sr||z){if(z=kn,z!==null&&(g=f&-f,g=(g&42)!==0?1:Af(g),g=(g&(z.suspendedLanes|f))!==0?0:g,g!==0&&g!==ge.retryLane))throw ge.retryLane=g,ru(i,g),Js(z,i,g),Qg;J.data==="$?"||Np(),a=vh(i,a,f)}else J.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=ge.treeContext,rr=ga(J.nextSibling),zr=a,sn=!0,Jo=null,ho=!1,i!==null&&(is[ai++]=uo,is[ai++]=Qo,is[ai++]=el,uo=i.id,Qo=i.overflow,el=a),a=fp(a,g.children),a.flags|=4096);return a}return C?(ui(),C=g.fallback,J=a.mode,ge=i.child,Re=ge.sibling,g=qo(ge,{mode:"hidden",children:g.children}),g.subtreeFlags=ge.subtreeFlags&65011712,Re!==null?C=qo(Re,C):(C=Xa(C,J,f,null),C.flags|=2),C.return=a,g.return=a,g.sibling=C,a.child=g,g=C,C=a.child,J=i.child.memoizedState,J===null?J=ua(f):(ge=J.cachePool,ge!==null?(Re=fr._currentValue,ge=ge.parent!==Re?{parent:Re,pool:Re}:ge):ge=Og(),J={baseLanes:J.baseLanes|f,cachePool:ge}),C.memoizedState=J,C.childLanes=hp(i,z,f),a.memoizedState=e0,g):(ac(a),f=i.child,i=f.sibling,f=qo(f,{mode:"visible",children:g.children}),f.return=a,f.sibling=null,i!==null&&(z=a.deletions,z===null?(a.deletions=[i],a.flags|=16):z.push(i)),a.child=f,a.memoizedState=null,f)}function fp(i,a){return a=wh({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function wh(i,a){return i=Ws(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function vh(i,a,f){return vu(a,i.child,null,f),i=fp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function pp(i,a,f){i.lanes|=a;var g=i.alternate;g!==null&&(g.lanes|=a),Tg(i.return,a,f)}function mp(i,a,f,g,C){var x=i.memoizedState;x===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:C}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=g,x.tail=f,x.tailMode=C)}function Gw(i,a,f){var g=a.pendingProps,C=g.revealOrder,x=g.tail;if(_r(i,a,g.children,f),g=wr.current,(g&2)!==0)g=g&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&pp(i,f,a);else if(i.tag===19)pp(i,f,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}switch(ke(wr,g),C){case"forwards":for(f=a.child,C=null;f!==null;)i=f.alternate,i!==null&&cl(i)===null&&(C=f),f=f.sibling;f=C,f===null?(C=a.child,a.child=null):(C=f.sibling,f.sibling=null),mp(a,!1,C,f,x);break;case"backwards":for(f=null,C=a.child,a.child=null;C!==null;){if(i=C.alternate,i!==null&&cl(i)===null){a.child=C;break}i=C.sibling,C.sibling=f,f=C,C=i}mp(a,!0,f,null,x);break;case"together":mp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function vo(i,a,f){if(i!==null&&(a.dependencies=i.dependencies),us|=a.lanes,(f&a.childLanes)===0)if(i!==null){if(au(i,a,f,!1),(f&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,f=qo(i,i.pendingProps),a.child=f,f.return=a;i.sibling!==null;)i=i.sibling,f=f.sibling=qo(i,i.pendingProps),f.return=a;f.sibling=null}return a.child}function n0(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Vf(i)))}function da(i,a,f){switch(a.tag){case 3:De(a,a.stateNode.containerInfo),Ya(a,fr,i.memoizedState.cache),Kd();break;case 27:case 5:ue(a);break;case 4:De(a,a.stateNode.containerInfo);break;case 10:Ya(a,a.type,a.memoizedProps.value);break;case 13:var g=a.memoizedState;if(g!==null)return g.dehydrated!==null?(ac(a),a.flags|=128,null):(f&a.child.childLanes)!==0?t0(i,a,f):(ac(a),i=vo(i,a,f),i!==null?i.sibling:null);ac(a);break;case 19:var C=(i.flags&128)!==0;if(g=(f&a.childLanes)!==0,g||(au(i,a,f,!1),g=(f&a.childLanes)!==0),C){if(g)return Gw(i,a,f);a.flags|=128}if(C=a.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),ke(wr,wr.current),g)break;return null;case 22:case 23:return a.lanes=0,lp(i,a,f);case 24:Ya(a,fr,i.memoizedState.cache)}return vo(i,a,f)}function Hw(i,a,f){if(i!==null)if(i.memoizedProps!==a.pendingProps)Sr=!0;else{if(!n0(i,f)&&(a.flags&128)===0)return Sr=!1,da(i,a,f);Sr=(i.flags&131072)!==0}else Sr=!1,sn&&(a.flags&1048576)!==0&&hw(a,Wf,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var g=a.elementType,C=g._init;if(g=C(g._payload),a.type=g,typeof g=="function")Yo(g)?(i=ll(g,i),a.tag=1,a=Un(null,a,g,i,f)):(a.tag=0,a=Su(null,a,g,i,f));else{if(g!=null){if(C=g.$$typeof,C===X){a.tag=11,a=yh(null,a,g,i,f);break e}else if(C===Z){a.tag=14,a=bh(null,a,g,i,f);break e}}throw a=pe(g)||g,Error(r(306,a,""))}}return a;case 0:return Su(i,a,a.type,a.pendingProps,f);case 1:return g=a.type,C=ll(g,a.pendingProps),Un(i,a,g,C,f);case 3:e:{if(De(a,a.stateNode.containerInfo),i===null)throw Error(r(387));g=a.pendingProps;var x=a.memoizedState;C=x.element,tc(i,a),ah(a,g,null,f);var z=a.memoizedState;if(g=z.cache,Ya(a,fr,g),g!==x.cache&&qd(a,[fr],f,!0),nc(),g=z.element,x.isDehydrated)if(x={element:g,isDehydrated:!1,cache:z.cache},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){a=Jg(i,a,g,f);break e}else if(g!==C){C=ss(Error(r(424)),a),Yd(C),a=Jg(i,a,g,f);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(rr=ga(i.firstChild),zr=a,sn=!0,Jo=null,ho=!0,f=gh(a,null,g,f),a.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Kd(),g===C){a=vo(i,a,f);break e}_r(i,a,g,f)}a=a.child}return a;case 26:return dl(i,a),i===null?(f=gx(a.type,null,a.pendingProps,null))?a.memoizedState=f:sn||(f=a.type,i=a.pendingProps,g=r1(Fe.current).createElement(f),g[Vn]=a,g[Fr]=i,qn(g,f,i),je(g),a.stateNode=g):a.memoizedState=gx(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return ue(a),i===null&&sn&&(g=a.stateNode=fx(a.type,a.pendingProps,Fe.current),zr=a,ho=!0,C=rr,Pu(a.type)?(fE=C,rr=ga(g.firstChild)):rr=C),_r(i,a,a.pendingProps.children,f),dl(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&sn&&((C=g=rr)&&(g=cP(g,a.type,a.pendingProps,ho),g!==null?(a.stateNode=g,zr=a,rr=ga(g.firstChild),ho=!1,C=!0):C=!1),C||tl(a)),ue(a),C=a.type,x=a.pendingProps,z=i!==null?i.memoizedProps:null,g=x.children,lE(C,x)?g=null:z!==null&&lE(C,z)&&(a.flags|=32),a.memoizedState!==null&&(C=Qf(i,a,Ug,null,null,f),_0._currentValue=C),dl(i,a),_r(i,a,g,f),a.child;case 6:return i===null&&sn&&((i=f=rr)&&(f=lP(f,a.pendingProps,ho),f!==null?(a.stateNode=f,zr=a,rr=null,i=!0):i=!1),i||tl(a)),null;case 13:return t0(i,a,f);case 4:return De(a,a.stateNode.containerInfo),g=a.pendingProps,i===null?a.child=vu(a,null,g,f):_r(i,a,g,f),a.child;case 11:return yh(i,a,a.type,a.pendingProps,f);case 7:return _r(i,a,a.pendingProps,f),a.child;case 8:return _r(i,a,a.pendingProps.children,f),a.child;case 12:return _r(i,a,a.pendingProps.children,f),a.child;case 10:return g=a.pendingProps,Ya(a,a.type,g.value),_r(i,a,g.children,f),a.child;case 9:return C=a.type._context,g=a.pendingProps.children,qa(a),C=Ir(C),g=g(C),a.flags|=1,_r(i,a,g,f),a.child;case 14:return bh(i,a,a.type,a.pendingProps,f);case 15:return wo(i,a,a.type,a.pendingProps,f);case 19:return Gw(i,a,f);case 31:return g=a.pendingProps,f=a.mode,g={mode:g.mode,children:g.children},i===null?(f=wh(g,f),f.ref=a.ref,a.child=f,f.return=a,a=f):(f=qo(i.child,g),f.ref=a.ref,a.child=f,f.return=a,a=f),a;case 22:return lp(i,a,f);case 24:return qa(a),g=Ir(fr),i===null?(C=Rg(),C===null&&(C=kn,x=Ig(),C.pooledCache=x,x.refCount++,x!==null&&(C.pooledCacheLanes|=f),C=x),a.memoizedState={parent:g,cache:C},ih(a),Ya(a,fr,C)):((i.lanes&f)!==0&&(tc(i,a),ah(a,null,null,f),nc()),C=i.memoizedState,x=a.memoizedState,C.parent!==g?(C={parent:g,cache:g},a.memoizedState=C,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=C),Ya(a,fr,g)):(g=x.cache,Ya(a,fr,g),g!==C.cache&&qd(a,[fr],f,!0))),_r(i,a,a.pendingProps.children,f),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Eo(i){i.flags|=4}function Xw(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Ex(a)){if(a=li.current,a!==null&&((Yt&4194048)===Yt?bo!==null:(Yt&62914560)!==Yt&&(Yt&536870912)===0||a!==bo))throw rh=Yf,vw;i.flags|=8192}}function gp(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Hm():536870912,i.lanes|=a,fc|=a)}function ha(i,a){if(!sn)switch(i.tailMode){case"hidden":a=i.tail;for(var f=null;a!==null;)a.alternate!==null&&(f=a),a=a.sibling;f===null?i.tail=null:f.sibling=null;break;case"collapsed":f=i.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function $n(i){var a=i.alternate!==null&&i.alternate.child===i.child,f=0,g=0;if(a)for(var C=i.child;C!==null;)f|=C.lanes|C.childLanes,g|=C.subtreeFlags&65011712,g|=C.flags&65011712,C.return=i,C=C.sibling;else for(C=i.child;C!==null;)f|=C.lanes|C.childLanes,g|=C.subtreeFlags,g|=C.flags,C.return=i,C=C.sibling;return i.subtreeFlags|=g,i.childLanes=f,a}function r0(i,a,f){var g=a.pendingProps;switch(Sg(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $n(a),null;case 1:return $n(a),null;case 3:return f=a.stateNode,g=null,i!==null&&(g=i.memoizedState.cache),a.memoizedState.cache!==g&&(a.flags|=2048),ea(fr),Q(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(Vd(a)?Eo(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,pw())),$n(a),null;case 26:return f=a.memoizedState,i===null?(Eo(a),f!==null?($n(a),Xw(a,f)):($n(a),a.flags&=-16777217)):f?f!==i.memoizedState?(Eo(a),$n(a),Xw(a,f)):($n(a),a.flags&=-16777217):(i.memoizedProps!==g&&Eo(a),$n(a),a.flags&=-16777217),null;case 27:Ee(a),f=Fe.current;var C=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==g&&Eo(a);else{if(!g){if(a.stateNode===null)throw Error(r(166));return $n(a),null}i=$e.current,Vd(a)?fw(a):(i=fx(C,g,f),a.stateNode=i,Eo(a))}return $n(a),null;case 5:if(Ee(a),f=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==g&&Eo(a);else{if(!g){if(a.stateNode===null)throw Error(r(166));return $n(a),null}if(i=$e.current,Vd(a))fw(a);else{switch(C=r1(Fe.current),i){case 1:i=C.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:i=C.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":i=C.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":i=C.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":i=C.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof g.is=="string"?C.createElement("select",{is:g.is}):C.createElement("select"),g.multiple?i.multiple=!0:g.size&&(i.size=g.size);break;default:i=typeof g.is=="string"?C.createElement(f,{is:g.is}):C.createElement(f)}}i[Vn]=a,i[Fr]=g;e:for(C=a.child;C!==null;){if(C.tag===5||C.tag===6)i.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===a)break e;for(;C.sibling===null;){if(C.return===null||C.return===a)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}a.stateNode=i;e:switch(qn(i,f,g),f){case"button":case"input":case"select":case"textarea":i=!!g.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Eo(a)}}return $n(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==g&&Eo(a);else{if(typeof g!="string"&&a.stateNode===null)throw Error(r(166));if(i=Fe.current,Vd(a)){if(i=a.stateNode,f=a.memoizedProps,g=null,C=zr,C!==null)switch(C.tag){case 27:case 5:g=C.memoizedProps}i[Vn]=a,i=!!(i.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||Ls(i.nodeValue,f)),i||tl(a)}else i=r1(i).createTextNode(g),i[Vn]=a,a.stateNode=i}return $n(a),null;case 13:if(g=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(C=Vd(a),g!==null&&g.dehydrated!==null){if(i===null){if(!C)throw Error(r(318));if(C=a.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[Vn]=a}else Kd(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;$n(a),C=!1}else C=pw(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=C),C=!0;if(!C)return a.flags&256?(zi(a),a):(zi(a),null)}if(zi(a),(a.flags&128)!==0)return a.lanes=f,a;if(f=g!==null,i=i!==null&&i.memoizedState!==null,f){g=a.child,C=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(C=g.alternate.memoizedState.cachePool.pool);var x=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(x=g.memoizedState.cachePool.pool),x!==C&&(g.flags|=2048)}return f!==i&&f&&(a.child.flags|=8192),gp(a,a.updateQueue),$n(a),null;case 4:return Q(),i===null&&Ct(a.stateNode.containerInfo),$n(a),null;case 10:return ea(a.type),$n(a),null;case 19:if(Ae(wr),C=a.memoizedState,C===null)return $n(a),null;if(g=(a.flags&128)!==0,x=C.rendering,x===null)if(g)ha(C,!1);else{if(Yn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(x=cl(i),x!==null){for(a.flags|=128,ha(C,!1),i=x.updateQueue,a.updateQueue=i,gp(a,i),a.subtreeFlags=0,i=f,f=a.child;f!==null;)dw(f,i),f=f.sibling;return ke(wr,wr.current&1|2),a.child}i=i.sibling}C.tail!==null&&Wt()>Ih&&(a.flags|=128,g=!0,ha(C,!1),a.lanes=4194304)}else{if(!g)if(i=cl(x),i!==null){if(a.flags|=128,g=!0,i=i.updateQueue,a.updateQueue=i,gp(a,i),ha(C,!0),C.tail===null&&C.tailMode==="hidden"&&!x.alternate&&!sn)return $n(a),null}else 2*Wt()-C.renderingStartTime>Ih&&f!==536870912&&(a.flags|=128,g=!0,ha(C,!1),a.lanes=4194304);C.isBackwards?(x.sibling=a.child,a.child=x):(i=C.last,i!==null?i.sibling=x:a.child=x,C.last=x)}return C.tail!==null?(a=C.tail,C.rendering=a,C.tail=a.sibling,C.renderingStartTime=Wt(),a.sibling=null,i=wr.current,ke(wr,g?i&1|2:i&1),a):($n(a),null);case 22:case 23:return zi(a),du(),g=a.memoizedState!==null,i!==null?i.memoizedState!==null!==g&&(a.flags|=8192):g&&(a.flags|=8192),g?(f&536870912)!==0&&(a.flags&128)===0&&($n(a),a.subtreeFlags&6&&(a.flags|=8192)):$n(a),f=a.updateQueue,f!==null&&gp(a,f.retryQueue),f=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),g=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(g=a.memoizedState.cachePool.pool),g!==f&&(a.flags|=2048),i!==null&&Ae(Ja),null;case 24:return f=null,i!==null&&(f=i.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),ea(fr),$n(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function rE(i,a){switch(Sg(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return ea(fr),Q(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Ee(a),null;case 13:if(zi(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Kd()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Ae(wr),null;case 4:return Q(),null;case 10:return ea(a.type),null;case 22:case 23:return zi(a),du(),i!==null&&Ae(Ja),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return ea(fr),null;case 25:return null;default:return null}}function s0(i,a){switch(Sg(a),a.tag){case 3:ea(fr),Q();break;case 26:case 27:case 5:Ee(a);break;case 4:Q();break;case 13:zi(a);break;case 19:Ae(wr);break;case 10:ea(a.type);break;case 22:case 23:zi(a),du(),i!==null&&Ae(Ja);break;case 24:ea(fr)}}function Eh(i,a){try{var f=a.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var C=g.next;f=C;do{if((f.tag&i)===i){g=void 0;var x=f.create,z=f.inst;g=x(),z.destroy=g}f=f.next}while(f!==C)}}catch(J){ln(a,a.return,J)}}function di(i,a,f){try{var g=a.updateQueue,C=g!==null?g.lastEffect:null;if(C!==null){var x=C.next;g=x;do{if((g.tag&i)===i){var z=g.inst,J=z.destroy;if(J!==void 0){z.destroy=void 0,C=a;var ge=f,Re=J;try{Re()}catch(Ge){ln(C,ge,Ge)}}}g=g.next}while(g!==x)}}catch(Ge){ln(a,a.return,Ge)}}function yp(i){var a=i.updateQueue;if(a!==null){var f=i.stateNode;try{po(a,f)}catch(g){ln(i,i.return,g)}}}function Ww(i,a,f){f.props=ll(i.type,i.memoizedProps),f.state=i.memoizedState;try{f.componentWillUnmount()}catch(g){ln(i,a,g)}}function Ch(i,a){try{var f=i.ref;if(f!==null){switch(i.tag){case 26:case 27:case 5:var g=i.stateNode;break;case 30:g=i.stateNode;break;default:g=i.stateNode}typeof f=="function"?i.refCleanup=f(g):f.current=g}}catch(C){ln(i,a,C)}}function Co(i,a){var f=i.ref,g=i.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(C){ln(i,a,C)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(C){ln(i,a,C)}else f.current=null}function Vw(i){var a=i.type,f=i.memoizedProps,g=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(C){ln(i,i.return,C)}}function i0(i,a,f){try{var g=i.stateNode;rP(g,i.type,f,a),g[Fr]=a}catch(C){ln(i,i.return,C)}}function Kw(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Pu(i.type)||i.tag===4}function o0(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Kw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Pu(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function a0(i,a,f){var g=i.tag;if(g===5||g===6)i=i.stateNode,a?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(i,a):(a=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,a.appendChild(i),f=f._reactRootContainer,f!=null||a.onclick!==null||(a.onclick=Xr));else if(g!==4&&(g===27&&Pu(i.type)&&(f=i.stateNode,a=null),i=i.child,i!==null))for(a0(i,a,f),i=i.sibling;i!==null;)a0(i,a,f),i=i.sibling}function bp(i,a,f){var g=i.tag;if(g===5||g===6)i=i.stateNode,a?f.insertBefore(i,a):f.appendChild(i);else if(g!==4&&(g===27&&Pu(i.type)&&(f=i.stateNode),i=i.child,i!==null))for(bp(i,a,f),i=i.sibling;i!==null;)bp(i,a,f),i=i.sibling}function Yw(i){var a=i.stateNode,f=i.memoizedProps;try{for(var g=i.type,C=a.attributes;C.length;)a.removeAttributeNode(C[0]);qn(a,g,f),a[Vn]=i,a[Fr]=f}catch(x){ln(i,i.return,x)}}var fa=!1,cr=!1,In=!1,qw=typeof WeakSet=="function"?WeakSet:Set,xr=null;function sE(i,a){if(i=i.containerInfo,aE=l1,i=aw(i),yg(i)){if("selectionStart"in i)var f={start:i.selectionStart,end:i.selectionEnd};else e:{f=(f=i.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var C=g.anchorOffset,x=g.focusNode;g=g.focusOffset;try{f.nodeType,x.nodeType}catch{f=null;break e}var z=0,J=-1,ge=-1,Re=0,Ge=0,We=i,Le=null;t:for(;;){for(var Me;We!==f||C!==0&&We.nodeType!==3||(J=z+C),We!==x||g!==0&&We.nodeType!==3||(ge=z+g),We.nodeType===3&&(z+=We.nodeValue.length),(Me=We.firstChild)!==null;)Le=We,We=Me;for(;;){if(We===i)break t;if(Le===f&&++Re===C&&(J=z),Le===x&&++Ge===g&&(ge=z),(Me=We.nextSibling)!==null)break;We=Le,Le=We.parentNode}We=Me}f=J===-1||ge===-1?null:{start:J,end:ge}}else f=null}f=f||{start:0,end:0}}else f=null;for(cE={focusedElem:i,selectionRange:f},l1=!1,xr=a;xr!==null;)if(a=xr,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,xr=i;else for(;xr!==null;){switch(a=xr,x=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&x!==null){i=void 0,f=a,C=x.memoizedProps,x=x.memoizedState,g=f.stateNode;try{var Ut=ll(f.type,C,f.elementType===f.type);i=g.getSnapshotBeforeUpdate(Ut,x),g.__reactInternalSnapshotBeforeUpdate=i}catch(Rt){ln(f,f.return,Rt)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,f=i.nodeType,f===9)dE(i);else if(f===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":dE(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,xr=i;break}xr=a.return}}function Qw(i,a,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:lc(i,f),g&4&&Eh(5,f);break;case 1:if(lc(i,f),g&4)if(i=f.stateNode,a===null)try{i.componentDidMount()}catch(z){ln(f,f.return,z)}else{var C=ll(f.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(C,a,i.__reactInternalSnapshotBeforeUpdate)}catch(z){ln(f,f.return,z)}}g&64&&yp(f),g&512&&Ch(f,f.return);break;case 3:if(lc(i,f),g&64&&(i=f.updateQueue,i!==null)){if(a=null,f.child!==null)switch(f.child.tag){case 27:case 5:a=f.child.stateNode;break;case 1:a=f.child.stateNode}try{po(i,a)}catch(z){ln(f,f.return,z)}}break;case 27:a===null&&g&4&&Yw(f);case 26:case 5:lc(i,f),a===null&&g&4&&Vw(f),g&512&&Ch(f,f.return);break;case 12:lc(i,f);break;case 13:lc(i,f),g&4&&Je(i,f),g&64&&(i=f.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(f=h.bind(null,f),uP(i,f))));break;case 22:if(g=f.memoizedState!==null||fa,!g){a=a!==null&&a.memoizedState!==null||cr,C=fa;var x=cr;fa=g,(cr=a)&&!x?fi(i,f,(f.subtreeFlags&8772)!==0):lc(i,f),fa=C,cr=x}break;case 30:break;default:lc(i,f)}}function Ys(i){var a=i.alternate;a!==null&&(i.alternate=null,Ys(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Vm(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var en=null,ls=!1;function So(i,a,f){for(f=f.child;f!==null;)wp(i,a,f),f=f.sibling}function wp(i,a,f){if(jr&&typeof jr.onCommitFiberUnmount=="function")try{jr.onCommitFiberUnmount($r,f)}catch{}switch(f.tag){case 26:cr||Co(f,a),So(i,a,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:cr||Co(f,a);var g=en,C=ls;Pu(f.type)&&(en=f.stateNode,ls=!1),So(i,a,f),v0(f.stateNode),en=g,ls=C;break;case 5:cr||Co(f,a);case 6:if(g=en,C=ls,en=null,So(i,a,f),en=g,ls=C,en!==null)if(ls)try{(en.nodeType===9?en.body:en.nodeName==="HTML"?en.ownerDocument.body:en).removeChild(f.stateNode)}catch(x){ln(f,a,x)}else try{en.removeChild(f.stateNode)}catch(x){ln(f,a,x)}break;case 18:en!==null&&(ls?(i=en,dx(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,f.stateNode),I0(i)):dx(en,f.stateNode));break;case 4:g=en,C=ls,en=f.stateNode.containerInfo,ls=!0,So(i,a,f),en=g,ls=C;break;case 0:case 11:case 14:case 15:cr||di(2,f,a),cr||di(4,f,a),So(i,a,f);break;case 1:cr||(Co(f,a),g=f.stateNode,typeof g.componentWillUnmount=="function"&&Ww(f,a,g)),So(i,a,f);break;case 21:So(i,a,f);break;case 22:cr=(g=cr)||f.memoizedState!==null,So(i,a,f),cr=g;break;default:So(i,a,f)}}function Je(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{I0(i)}catch(f){ln(a,a.return,f)}}function Jw(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new qw),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new qw),a;default:throw Error(r(435,i.tag))}}function vp(i,a){var f=Jw(i);a.forEach(function(g){var C=d.bind(null,i,g);f.has(g)||(f.add(g),g.then(C,C))})}function Ps(i,a){var f=a.deletions;if(f!==null)for(var g=0;g<f.length;g++){var C=f[g],x=i,z=a,J=z;e:for(;J!==null;){switch(J.tag){case 27:if(Pu(J.type)){en=J.stateNode,ls=!1;break e}break;case 5:en=J.stateNode,ls=!1;break e;case 3:case 4:en=J.stateNode.containerInfo,ls=!0;break e}J=J.return}if(en===null)throw Error(r(160));wp(x,z,C),en=null,ls=!1,x=C.alternate,x!==null&&(x.return=null),C.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)Sn(a,i),a=a.sibling}var Gi=null;function Sn(i,a){var f=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Ps(a,i),jn(i),g&4&&(di(3,i,i.return),Eh(3,i),di(5,i,i.return));break;case 1:Ps(a,i),jn(i),g&512&&(cr||f===null||Co(f,f.return)),g&64&&fa&&(i=i.updateQueue,i!==null&&(g=i.callbacks,g!==null&&(f=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var C=Gi;if(Ps(a,i),jn(i),g&512&&(cr||f===null||Co(f,f.return)),g&4){var x=f!==null?f.memoizedState:null;if(g=i.memoizedState,f===null)if(g===null)if(i.stateNode===null){e:{g=i.type,f=i.memoizedProps,C=C.ownerDocument||C;t:switch(g){case"title":x=C.getElementsByTagName("title")[0],(!x||x[La]||x[Vn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=C.createElement(g),C.head.insertBefore(x,C.querySelector("head > title"))),qn(x,g,f),x[Vn]=i,je(x),g=x;break e;case"link":var z=wx("link","href",C).get(g+(f.href||""));if(z){for(var J=0;J<z.length;J++)if(x=z[J],x.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&x.getAttribute("rel")===(f.rel==null?null:f.rel)&&x.getAttribute("title")===(f.title==null?null:f.title)&&x.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){z.splice(J,1);break t}}x=C.createElement(g),qn(x,g,f),C.head.appendChild(x);break;case"meta":if(z=wx("meta","content",C).get(g+(f.content||""))){for(J=0;J<z.length;J++)if(x=z[J],x.getAttribute("content")===(f.content==null?null:""+f.content)&&x.getAttribute("name")===(f.name==null?null:f.name)&&x.getAttribute("property")===(f.property==null?null:f.property)&&x.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&x.getAttribute("charset")===(f.charSet==null?null:f.charSet)){z.splice(J,1);break t}}x=C.createElement(g),qn(x,g,f),C.head.appendChild(x);break;default:throw Error(r(468,g))}x[Vn]=i,je(x),g=x}i.stateNode=g}else vx(C,i.type,i.stateNode);else i.stateNode=bx(C,g,i.memoizedProps);else x!==g?(x===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):x.count--,g===null?vx(C,i.type,i.stateNode):bx(C,g,i.memoizedProps)):g===null&&i.stateNode!==null&&i0(i,i.memoizedProps,f.memoizedProps)}break;case 27:Ps(a,i),jn(i),g&512&&(cr||f===null||Co(f,f.return)),f!==null&&g&4&&i0(i,i.memoizedProps,f.memoizedProps);break;case 5:if(Ps(a,i),jn(i),g&512&&(cr||f===null||Co(f,f.return)),i.flags&32){C=i.stateNode;try{ql(C,"")}catch(Me){ln(i,i.return,Me)}}g&4&&i.stateNode!=null&&(C=i.memoizedProps,i0(i,C,f!==null?f.memoizedProps:C)),g&1024&&(In=!0);break;case 6:if(Ps(a,i),jn(i),g&4){if(i.stateNode===null)throw Error(r(162));g=i.memoizedProps,f=i.stateNode;try{f.nodeValue=g}catch(Me){ln(i,i.return,Me)}}break;case 3:if(o1=null,C=Gi,Gi=s1(a.containerInfo),Ps(a,i),Gi=C,jn(i),g&4&&f!==null&&f.memoizedState.isDehydrated)try{I0(a.containerInfo)}catch(Me){ln(i,i.return,Me)}In&&(In=!1,hi(i));break;case 4:g=Gi,Gi=s1(i.stateNode.containerInfo),Ps(a,i),jn(i),Gi=g;break;case 12:Ps(a,i),jn(i);break;case 13:Ps(a,i),jn(i),i.child.flags&8192&&i.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(xp=Wt()),g&4&&(g=i.updateQueue,g!==null&&(i.updateQueue=null,vp(i,g)));break;case 22:C=i.memoizedState!==null;var ge=f!==null&&f.memoizedState!==null,Re=fa,Ge=cr;if(fa=Re||C,cr=Ge||ge,Ps(a,i),cr=Ge,fa=Re,jn(i),g&8192)e:for(a=i.stateNode,a._visibility=C?a._visibility&-2:a._visibility|1,C&&(f===null||ge||fa||cr||Hi(i)),f=null,a=i;;){if(a.tag===5||a.tag===26){if(f===null){ge=f=a;try{if(x=ge.stateNode,C)z=x.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{J=ge.stateNode;var We=ge.memoizedProps.style,Le=We!=null&&We.hasOwnProperty("display")?We.display:null;J.style.display=Le==null||typeof Le=="boolean"?"":(""+Le).trim()}}catch(Me){ln(ge,ge.return,Me)}}}else if(a.tag===6){if(f===null){ge=a;try{ge.stateNode.nodeValue=C?"":ge.memoizedProps}catch(Me){ln(ge,ge.return,Me)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;f===a&&(f=null),a=a.return}f===a&&(f=null),a.sibling.return=a.return,a=a.sibling}g&4&&(g=i.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,vp(i,f))));break;case 19:Ps(a,i),jn(i),g&4&&(g=i.updateQueue,g!==null&&(i.updateQueue=null,vp(i,g)));break;case 30:break;case 21:break;default:Ps(a,i),jn(i)}}function jn(i){var a=i.flags;if(a&2){try{for(var f,g=i.return;g!==null;){if(Kw(g)){f=g;break}g=g.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var C=f.stateNode,x=o0(i);bp(i,x,C);break;case 5:var z=f.stateNode;f.flags&32&&(ql(z,""),f.flags&=-33);var J=o0(i);bp(i,J,z);break;case 3:case 4:var ge=f.stateNode.containerInfo,Re=o0(i);a0(i,Re,ge);break;default:throw Error(r(161))}}catch(Ge){ln(i,i.return,Ge)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function hi(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;hi(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function lc(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Qw(i,a.alternate,a),a=a.sibling}function Hi(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:di(4,a,a.return),Hi(a);break;case 1:Co(a,a.return);var f=a.stateNode;typeof f.componentWillUnmount=="function"&&Ww(a,a.return,f),Hi(a);break;case 27:v0(a.stateNode);case 26:case 5:Co(a,a.return),Hi(a);break;case 22:a.memoizedState===null&&Hi(a);break;case 30:Hi(a);break;default:Hi(a)}i=i.sibling}}function fi(i,a,f){for(f=f&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var g=a.alternate,C=i,x=a,z=x.flags;switch(x.tag){case 0:case 11:case 15:fi(C,x,f),Eh(4,x);break;case 1:if(fi(C,x,f),g=x,C=g.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(Re){ln(g,g.return,Re)}if(g=x,C=g.updateQueue,C!==null){var J=g.stateNode;try{var ge=C.shared.hiddenCallbacks;if(ge!==null)for(C.shared.hiddenCallbacks=null,C=0;C<ge.length;C++)Dg(ge[C],J)}catch(Re){ln(g,g.return,Re)}}f&&z&64&&yp(x),Ch(x,x.return);break;case 27:Yw(x);case 26:case 5:fi(C,x,f),f&&g===null&&z&4&&Vw(x),Ch(x,x.return);break;case 12:fi(C,x,f);break;case 13:fi(C,x,f),f&&z&4&&Je(C,x);break;case 22:x.memoizedState===null&&fi(C,x,f),Ch(x,x.return);break;case 30:break;default:fi(C,x,f)}a=a.sibling}}function Ep(i,a){var f=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==f&&(i!=null&&i.refCount++,f!=null&&Jd(f))}function Sh(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Jd(i))}function Gr(i,a,f,g){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)c0(i,a,f,g),a=a.sibling}function c0(i,a,f,g){var C=a.flags;switch(a.tag){case 0:case 11:case 15:Gr(i,a,f,g),C&2048&&Eh(9,a);break;case 1:Gr(i,a,f,g);break;case 3:Gr(i,a,f,g),C&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Jd(i)));break;case 12:if(C&2048){Gr(i,a,f,g),i=a.stateNode;try{var x=a.memoizedProps,z=x.id,J=x.onPostCommit;typeof J=="function"&&J(z,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(ge){ln(a,a.return,ge)}}else Gr(i,a,f,g);break;case 13:Gr(i,a,f,g);break;case 23:break;case 22:x=a.stateNode,z=a.alternate,a.memoizedState!==null?x._visibility&2?Gr(i,a,f,g):_u(i,a):x._visibility&2?Gr(i,a,f,g):(x._visibility|=2,Xi(i,a,f,g,(a.subtreeFlags&10256)!==0)),C&2048&&Ep(z,a);break;case 24:Gr(i,a,f,g),C&2048&&Sh(a.alternate,a);break;default:Gr(i,a,f,g)}}function Xi(i,a,f,g,C){for(C=C&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var x=i,z=a,J=f,ge=g,Re=z.flags;switch(z.tag){case 0:case 11:case 15:Xi(x,z,J,ge,C),Eh(8,z);break;case 23:break;case 22:var Ge=z.stateNode;z.memoizedState!==null?Ge._visibility&2?Xi(x,z,J,ge,C):_u(x,z):(Ge._visibility|=2,Xi(x,z,J,ge,C)),C&&Re&2048&&Ep(z.alternate,z);break;case 24:Xi(x,z,J,ge,C),C&&Re&2048&&Sh(z.alternate,z);break;default:Xi(x,z,J,ge,C)}a=a.sibling}}function _u(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var f=i,g=a,C=g.flags;switch(g.tag){case 22:_u(f,g),C&2048&&Ep(g.alternate,g);break;case 24:_u(f,g),C&2048&&Sh(g.alternate,g);break;default:_u(f,g)}a=a.sibling}}var _h=8192;function xu(i){if(i.subtreeFlags&_h)for(i=i.child;i!==null;)Cp(i),i=i.sibling}function Cp(i){switch(i.tag){case 26:xu(i),i.flags&_h&&i.memoizedState!==null&&SP(Gi,i.memoizedState,i.memoizedProps);break;case 5:xu(i);break;case 3:case 4:var a=Gi;Gi=s1(i.stateNode.containerInfo),xu(i),Gi=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=_h,_h=16777216,xu(i),_h=a):xu(i));break;default:xu(i)}}function Sp(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function uc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var f=0;f<a.length;f++){var g=a[f];xr=g,Tu(g,i)}Sp(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)l0(i),i=i.sibling}function l0(i){switch(i.tag){case 0:case 11:case 15:uc(i),i.flags&2048&&di(9,i,i.return);break;case 3:uc(i);break;case 12:uc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,xh(i)):uc(i);break;default:uc(i)}}function xh(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var f=0;f<a.length;f++){var g=a[f];xr=g,Tu(g,i)}Sp(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:di(8,a,a.return),xh(a);break;case 22:f=a.stateNode,f._visibility&2&&(f._visibility&=-3,xh(a));break;default:xh(a)}i=i.sibling}}function Tu(i,a){for(;xr!==null;){var f=xr;switch(f.tag){case 0:case 11:case 15:di(8,f,a);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Jd(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,xr=g;else e:for(f=i;xr!==null;){g=xr;var C=g.sibling,x=g.return;if(Ys(g),g===f){xr=null;break e}if(C!==null){C.return=x,xr=C;break e}xr=x}}}var u0={getCacheForType:function(i){var a=Ir(fr),f=a.data.get(i);return f===void 0&&(f=i(),a.data.set(i,f)),f}},Th=typeof WeakMap=="function"?WeakMap:Map,an=0,kn=null,Ot=null,Yt=0,ht=0,lr=null,pi=!1,qs=!1,dc=!1,_o=0,Yn=0,us=0,hc=0,_p=0,mi=0,fc=0,pc=null,ds=null,Ah=!1,xp=0,Ih=1/0,Au=null,mc=null,vr=0,pa=null,ma=null,hl=0,d0=0,Nh=null,Tp=null,fl=0,Ap=null;function Qs(){if((an&2)!==0&&Yt!==0)return Yt&-Yt;if(P.T!==null){var i=Qa;return i!==0?i:we()}return Wm()}function ks(){mi===0&&(mi=(Yt&536870912)===0||sn?Hc():536870912);var i=li.current;return i!==null&&(i.flags|=32),mi}function Js(i,a,f){(i===kn&&(ht===2||ht===9)||i.cancelPendingCommit!==null)&&(yc(i,0),gc(i,Yt,mi,!1)),Xl(i,f),((an&2)===0||i!==kn)&&(i===kn&&((an&2)===0&&(hc|=f),Yn===4&&gc(i,Yt,mi,!1)),O(i))}function Iu(i,a,f){if((an&6)!==0)throw Error(r(327));var g=!f&&(a&124)===0&&(a&i.expiredLanes)===0||_s(i,a),C=g?bc(i,a):Ru(i,a,!0),x=g;do{if(C===0){qs&&!g&&gc(i,a,0,!1);break}else{if(f=i.current.alternate,x&&!iE(f)){C=Ru(i,a,!1),x=!1;continue}if(C===2){if(x=a,i.errorRecoveryDisabledLanes&x)var z=0;else z=i.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){a=z;e:{var J=i;C=pc;var ge=J.current.memoizedState.isDehydrated;if(ge&&(yc(J,z).flags|=256),z=Ru(J,z,!1),z!==2){if(dc&&!ge){J.errorRecoveryDisabledLanes|=x,hc|=x,C=4;break e}x=ds,ds=C,x!==null&&(ds===null?ds=x:ds.push.apply(ds,x))}C=z}if(x=!1,C!==2)continue}}if(C===1){yc(i,0),gc(i,a,0,!0);break}e:{switch(g=i,x=C,x){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:gc(g,a,mi,!pi);break e;case 2:ds=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(C=xp+300-Wt(),10<C)){if(gc(g,a,mi,!pi),oo(g,0,!0)!==0)break e;g.timeoutHandle=lx(Hr.bind(null,g,f,ds,Au,Ah,a,mi,hc,fc,pi,x,2,-0,0),C);break e}Hr(g,f,ds,Au,Ah,a,mi,hc,fc,pi,x,0,-0,0)}}break}while(!0);O(i)}function Hr(i,a,f,g,C,x,z,J,ge,Re,Ge,We,Le,Me){if(i.timeoutHandle=-1,We=a.subtreeFlags,(We&8192||(We&16785408)===16785408)&&(S0={stylesheets:null,count:0,unsuspend:CP},Cp(a),We=_P(),We!==null)){i.cancelPendingCommit=We(Rp.bind(null,i,a,x,f,g,C,z,J,ge,Ge,1,Le,Me)),gc(i,x,z,!Re);return}Rp(i,a,x,f,g,C,z,J,ge)}function iE(i){for(var a=i;;){var f=a.tag;if((f===0||f===11||f===15)&&a.flags&16384&&(f=a.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var C=f[g],x=C.getSnapshot;C=C.value;try{if(!Xs(x(),C))return!1}catch{return!1}}if(f=a.child,a.subtreeFlags&16384&&f!==null)f.return=a,a=f;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function gc(i,a,f,g){a&=~_p,a&=~hc,i.suspendedLanes|=a,i.pingedLanes&=~a,g&&(i.warmLanes|=a),g=i.expirationTimes;for(var C=a;0<C;){var x=31-Vt(C),z=1<<x;g[x]=-1,C&=~z}f!==0&&Xm(i,f,a)}function Nu(){return(an&6)===0?(M(0),!1):!0}function Ip(){if(Ot!==null){if(ht===0)var i=Ot.return;else i=Ot,$i=Ka=null,np(i),bu=null,ph=0,i=Ot;for(;i!==null;)s0(i.alternate,i),i=i.return;Ot=null}}function yc(i,a){var f=i.timeoutHandle;f!==-1&&(i.timeoutHandle=-1,iP(f)),f=i.cancelPendingCommit,f!==null&&(i.cancelPendingCommit=null,f()),Ip(),kn=i,Ot=f=qo(i.current,null),Yt=a,ht=0,lr=null,pi=!1,qs=_s(i,a),dc=!1,fc=mi=_p=hc=us=Yn=0,ds=pc=null,Ah=!1,(a&8)!==0&&(a|=a&32);var g=i.entangledLanes;if(g!==0)for(i=i.entanglements,g&=a;0<g;){var C=31-Vt(g),x=1<<C;a|=i[C],g&=~x}return _o=a,nu(),f}function h0(i,a){Ft=null,P.H=fh,a===lu||a===th?(a=sh(),ht=3):a===vw?(a=sh(),ht=4):ht=a===Qg?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,lr=a,Ot===null&&(Yn=1,ul(i,ss(a,i.current)))}function f0(){var i=P.H;return P.H=fh,i===null?fh:i}function e1(){var i=P.A;return P.A=u0,i}function Np(){Yn=4,pi||(Yt&4194048)!==Yt&&li.current!==null||(qs=!0),(us&134217727)===0&&(hc&134217727)===0||kn===null||gc(kn,Yt,mi,!1)}function Ru(i,a,f){var g=an;an|=2;var C=f0(),x=e1();(kn!==i||Yt!==a)&&(Au=null,yc(i,a)),a=!1;var z=Yn;e:do try{if(ht!==0&&Ot!==null){var J=Ot,ge=lr;switch(ht){case 8:Ip(),z=6;break e;case 3:case 2:case 9:case 6:li.current===null&&(a=!0);var Re=ht;if(ht=0,lr=null,Wi(i,J,ge,Re),f&&qs){z=0;break e}break;default:Re=ht,ht=0,lr=null,Wi(i,J,ge,Re)}}oE(),z=Yn;break}catch(Ge){h0(i,Ge)}while(!0);return a&&i.shellSuspendCounter++,$i=Ka=null,an=g,P.H=C,P.A=x,Ot===null&&(kn=null,Yt=0,nu()),z}function oE(){for(;Ot!==null;)Rh(Ot)}function bc(i,a){var f=an;an|=2;var g=f0(),C=e1();kn!==i||Yt!==a?(Au=null,Ih=Wt()+500,yc(i,a)):qs=_s(i,a);e:do try{if(ht!==0&&Ot!==null){a=Ot;var x=lr;t:switch(ht){case 1:ht=0,lr=null,Wi(i,a,x,1);break;case 2:case 9:if(Pg(x)){ht=0,lr=null,_n(a);break}a=function(){ht!==2&&ht!==9||kn!==i||(ht=7),O(i)},x.then(a,a);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:Pg(x)?(ht=0,lr=null,_n(a)):(ht=0,lr=null,Wi(i,a,x,7));break;case 5:var z=null;switch(Ot.tag){case 26:z=Ot.memoizedState;case 5:case 27:var J=Ot;if(!z||Ex(z)){ht=0,lr=null;var ge=J.sibling;if(ge!==null)Ot=ge;else{var Re=J.return;Re!==null?(Ot=Re,wc(Re)):Ot=null}break t}}ht=0,lr=null,Wi(i,a,x,5);break;case 6:ht=0,lr=null,Wi(i,a,x,6);break;case 8:Ip(),Yn=6;break e;default:throw Error(r(462))}}p0();break}catch(Ge){h0(i,Ge)}while(!0);return $i=Ka=null,P.H=g,P.A=C,an=f,Ot!==null?0:(kn=null,Yt=0,nu(),Yn)}function p0(){for(;Ot!==null&&!Bt();)Rh(Ot)}function Rh(i){var a=Hw(i.alternate,i,_o);i.memoizedProps=i.pendingProps,a===null?wc(i):Ot=a}function _n(i){var a=i,f=a.alternate;switch(a.tag){case 15:case 0:a=dp(f,a,a.pendingProps,a.type,void 0,Yt);break;case 11:a=dp(f,a,a.pendingProps,a.type.render,a.ref,Yt);break;case 5:np(a);default:s0(f,a),a=Ot=dw(a,_o),a=Hw(f,a,_o)}i.memoizedProps=i.pendingProps,a===null?wc(i):Ot=a}function Wi(i,a,f,g){$i=Ka=null,np(a),bu=null,ph=0;var C=a.return;try{if(zw(i,C,a,f,Yt)){Yn=1,ul(i,ss(f,i.current)),Ot=null;return}}catch(x){if(C!==null)throw Ot=C,x;Yn=1,ul(i,ss(f,i.current)),Ot=null;return}a.flags&32768?(sn||g===1?i=!0:qs||(Yt&536870912)!==0?i=!1:(pi=i=!0,(g===2||g===9||g===3||g===6)&&(g=li.current,g!==null&&g.tag===13&&(g.flags|=16384))),m0(a,i)):wc(a)}function wc(i){var a=i;do{if((a.flags&32768)!==0){m0(a,pi);return}i=a.return;var f=r0(a.alternate,a,_o);if(f!==null){Ot=f;return}if(a=a.sibling,a!==null){Ot=a;return}Ot=a=i}while(a!==null);Yn===0&&(Yn=5)}function m0(i,a){do{var f=rE(i.alternate,i);if(f!==null){f.flags&=32767,Ot=f;return}if(f=i.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!a&&(i=i.sibling,i!==null)){Ot=i;return}Ot=i=f}while(i!==null);Yn=6,Ot=null}function Rp(i,a,f,g,C,x,z,J,ge){i.cancelPendingCommit=null;do ml();while(vr!==0);if((an&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(x=a.lanes|a.childLanes,x|=wg,kb(i,f,x,z,J,ge),i===kn&&(Ot=kn=null,Yt=0),ma=a,pa=i,hl=f,d0=x,Nh=C,Tp=g,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,u(Nt,function(){return t1(),null})):(i.callbackNode=null,i.callbackPriority=0),g=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||g){g=P.T,P.T=null,C=ne.p,ne.p=2,z=an,an|=4;try{sE(i,a,f)}finally{an=z,ne.p=C,P.T=g}}vr=1,g0(),y0(),Ou()}}function g0(){if(vr===1){vr=0;var i=pa,a=ma,f=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||f){f=P.T,P.T=null;var g=ne.p;ne.p=2;var C=an;an|=4;try{Sn(a,i);var x=cE,z=aw(i.containerInfo),J=x.focusedElem,ge=x.selectionRange;if(z!==J&&J&&J.ownerDocument&&gg(J.ownerDocument.documentElement,J)){if(ge!==null&&yg(J)){var Re=ge.start,Ge=ge.end;if(Ge===void 0&&(Ge=Re),"selectionStart"in J)J.selectionStart=Re,J.selectionEnd=Math.min(Ge,J.value.length);else{var We=J.ownerDocument||document,Le=We&&We.defaultView||window;if(Le.getSelection){var Me=Le.getSelection(),Ut=J.textContent.length,Rt=Math.min(ge.start,Ut),Ln=ge.end===void 0?Rt:Math.min(ge.end,Ut);!Me.extend&&Rt>Ln&&(z=Ln,Ln=Rt,Rt=z);var Te=Zf(J,Rt),Ce=Zf(J,Ln);if(Te&&Ce&&(Me.rangeCount!==1||Me.anchorNode!==Te.node||Me.anchorOffset!==Te.offset||Me.focusNode!==Ce.node||Me.focusOffset!==Ce.offset)){var Ne=We.createRange();Ne.setStart(Te.node,Te.offset),Me.removeAllRanges(),Rt>Ln?(Me.addRange(Ne),Me.extend(Ce.node,Ce.offset)):(Ne.setEnd(Ce.node,Ce.offset),Me.addRange(Ne))}}}}for(We=[],Me=J;Me=Me.parentNode;)Me.nodeType===1&&We.push({element:Me,left:Me.scrollLeft,top:Me.scrollTop});for(typeof J.focus=="function"&&J.focus(),J=0;J<We.length;J++){var He=We[J];He.element.scrollLeft=He.left,He.element.scrollTop=He.top}}l1=!!aE,cE=aE=null}finally{an=C,ne.p=g,P.T=f}}i.current=a,vr=2}}function y0(){if(vr===2){vr=0;var i=pa,a=ma,f=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||f){f=P.T,P.T=null;var g=ne.p;ne.p=2;var C=an;an|=4;try{Qw(i,a.alternate,a)}finally{an=C,ne.p=g,P.T=f}}vr=3}}function Ou(){if(vr===4||vr===3){vr=0,bn();var i=pa,a=ma,f=hl,g=Tp;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?vr=5:(vr=0,ma=pa=null,pl(i,i.pendingLanes));var C=i.pendingLanes;if(C===0&&(mc=null),co(f),a=a.stateNode,jr&&typeof jr.onCommitFiberRoot=="function")try{jr.onCommitFiberRoot($r,a,void 0,(a.current.flags&128)===128)}catch{}if(g!==null){a=P.T,C=ne.p,ne.p=2,P.T=null;try{for(var x=i.onRecoverableError,z=0;z<g.length;z++){var J=g[z];x(J.value,{componentStack:J.stack})}}finally{P.T=a,ne.p=C}}(hl&3)!==0&&ml(),O(i),C=i.pendingLanes,(f&4194090)!==0&&(C&42)!==0?i===Ap?fl++:(fl=0,Ap=i):fl=0,M(0)}}function pl(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Jd(a)))}function ml(i){return g0(),y0(),Ou(),t1()}function t1(){if(vr!==5)return!1;var i=pa,a=d0;d0=0;var f=co(hl),g=P.T,C=ne.p;try{ne.p=32>f?32:f,P.T=null,f=Nh,Nh=null;var x=pa,z=hl;if(vr=0,ma=pa=null,hl=0,(an&6)!==0)throw Error(r(331));var J=an;if(an|=4,l0(x.current),c0(x,x.current,z,f),an=J,M(0,!1),jr&&typeof jr.onPostCommitFiberRoot=="function")try{jr.onPostCommitFiberRoot($r,x)}catch{}return!0}finally{ne.p=C,P.T=g,pl(i,a)}}function b0(i,a,f){a=ss(f,a),a=qg(i.stateNode,a,2),i=ta(i,a,2),i!==null&&(Xl(i,2),O(i))}function ln(i,a,f){if(i.tag===3)b0(i,i,f);else for(;a!==null;){if(a.tag===3){b0(a,i,f);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(mc===null||!mc.has(g))){i=ss(f,i),f=Zw(2),g=ta(a,f,2),g!==null&&(Ks(f,g,a,i),Xl(g,2),O(g));break}}a=a.return}}function gl(i,a,f){var g=i.pingCache;if(g===null){g=i.pingCache=new Th;var C=new Set;g.set(a,C)}else C=g.get(a),C===void 0&&(C=new Set,g.set(a,C));C.has(f)||(dc=!0,C.add(f),i=n1.bind(null,i,a,f),a.then(i,i))}function n1(i,a,f){var g=i.pingCache;g!==null&&g.delete(a),i.pingedLanes|=i.suspendedLanes&f,i.warmLanes&=~f,kn===i&&(Yt&f)===f&&(Yn===4||Yn===3&&(Yt&62914560)===Yt&&300>Wt()-xp?(an&2)===0&&yc(i,0):_p|=f,fc===Yt&&(fc=0)),O(i)}function w0(i,a){a===0&&(a=Hm()),i=ru(i,a),i!==null&&(Xl(i,a),O(i))}function h(i){var a=i.memoizedState,f=0;a!==null&&(f=a.retryLane),w0(i,f)}function d(i,a){var f=0;switch(i.tag){case 13:var g=i.stateNode,C=i.memoizedState;C!==null&&(f=C.retryLane);break;case 19:g=i.stateNode;break;case 22:g=i.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(a),w0(i,f)}function u(i,a){return qe(i,a)}var b=null,w=null,E=!1,T=!1,I=!1,k=0;function O(i){i!==w&&i.next===null&&(w===null?b=w=i:w=w.next=i),T=!0,E||(E=!0,oe())}function M(i,a){if(!I&&T){I=!0;do for(var f=!1,g=b;g!==null;){if(i!==0){var C=g.pendingLanes;if(C===0)var x=0;else{var z=g.suspendedLanes,J=g.pingedLanes;x=(1<<31-Vt(42|i)+1)-1,x&=C&~(z&~J),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(f=!0,Pe(g,x))}else x=Yt,x=oo(g,g===kn?x:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(x&3)===0||_s(g,x)||(f=!0,Pe(g,x));g=g.next}while(f);I=!1}}function re(){se()}function se(){T=E=!1;var i=0;k!==0&&(sP()&&(i=k),k=0);for(var a=Wt(),f=null,g=b;g!==null;){var C=g.next,x=Y(g,a);x===0?(g.next=null,f===null?b=C:f.next=C,C===null&&(w=f)):(f=g,(i!==0||(x&3)!==0)&&(T=!0)),g=C}M(i)}function Y(i,a){for(var f=i.suspendedLanes,g=i.pingedLanes,C=i.expirationTimes,x=i.pendingLanes&-62914561;0<x;){var z=31-Vt(x),J=1<<z,ge=C[z];ge===-1?((J&f)===0||(J&g)!==0)&&(C[z]=Kt(J,a)):ge<=a&&(i.expiredLanes|=J),x&=~J}if(a=kn,f=Yt,f=oo(i,i===a?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),g=i.callbackNode,f===0||i===a&&(ht===2||ht===9)||i.cancelPendingCommit!==null)return g!==null&&g!==null&&it(g),i.callbackNode=null,i.callbackPriority=0;if((f&3)===0||_s(i,f)){if(a=f&-f,a===i.callbackPriority)return a;switch(g!==null&&it(g),co(f)){case 2:case 8:f=Jt;break;case 32:f=Nt;break;case 268435456:f=Wn;break;default:f=Nt}return g=be.bind(null,i),f=qe(f,g),i.callbackPriority=a,i.callbackNode=f,a}return g!==null&&g!==null&&it(g),i.callbackPriority=2,i.callbackNode=null,2}function be(i,a){if(vr!==0&&vr!==5)return i.callbackNode=null,i.callbackPriority=0,null;var f=i.callbackNode;if(ml()&&i.callbackNode!==f)return null;var g=Yt;return g=oo(i,i===kn?g:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),g===0?null:(Iu(i,g,a),Y(i,Wt()),i.callbackNode!=null&&i.callbackNode===f?be.bind(null,i):null)}function Pe(i,a){if(ml())return null;Iu(i,a,!0)}function oe(){oP(function(){(an&6)!==0?qe(Xn,re):se()})}function we(){return k===0&&(k=Hc()),k}function ve(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:kf(""+i)}function xe(i,a){var f=a.ownerDocument.createElement("input");return f.name=a.name,f.value=a.value,i.id&&f.setAttribute("form",i.id),a.parentNode.insertBefore(f,a),i=new FormData(i),f.parentNode.removeChild(f),i}function ye(i,a,f,g,C){if(a==="submit"&&f&&f.stateNode===C){var x=ve((C[Fr]||null).action),z=g.submitter;z&&(a=(a=z[Fr]||null)?ve(a.formAction):z.getAttribute("formAction"),a!==null&&(x=a,z=null));var J=new Cn("action","action",null,g,C);i.push({event:J,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(k!==0){var ge=z?xe(C,z):new FormData(C);ip(f,{pending:!0,data:ge,method:C.method,action:x},null,ge)}}else typeof x=="function"&&(J.preventDefault(),ge=z?xe(C,z):new FormData(C),ip(f,{pending:!0,data:ge,method:C.method,action:x},x,ge))},currentTarget:C}]})}}for(var ee=0;ee<Ko.length;ee++){var te=Ko[ee],ie=te.toLowerCase(),ce=te[0].toUpperCase()+te.slice(1);Is(ie,"on"+ce)}Is(Gd,"onAnimationEnd"),Is(Cr,"onAnimationIteration"),Is(Hd,"onAnimationStart"),Is("dblclick","onDoubleClick"),Is("focusin","onFocus"),Is("focusout","onBlur"),Is(cw,"onTransitionRun"),Is(eE,"onTransitionStart"),Is(tE,"onTransitionCancel"),Is(Xd,"onTransitionEnd"),Gs("onMouseEnter",["mouseout","mouseover"]),Gs("onMouseLeave",["mouseout","mouseover"]),Gs("onPointerEnter",["pointerout","pointerover"]),Gs("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var le="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ue=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(le));function Qe(i,a){a=(a&4)!==0;for(var f=0;f<i.length;f++){var g=i[f],C=g.event;g=g.listeners;e:{var x=void 0;if(a)for(var z=g.length-1;0<=z;z--){var J=g[z],ge=J.instance,Re=J.currentTarget;if(J=J.listener,ge!==x&&C.isPropagationStopped())break e;x=J,C.currentTarget=Re;try{x(C)}catch(Ge){cp(Ge)}C.currentTarget=null,x=ge}else for(z=0;z<g.length;z++){if(J=g[z],ge=J.instance,Re=J.currentTarget,J=J.listener,ge!==x&&C.isPropagationStopped())break e;x=J,C.currentTarget=Re;try{x(C)}catch(Ge){cp(Ge)}C.currentTarget=null,x=ge}}}}function ze(i,a){var f=a[If];f===void 0&&(f=a[If]=new Set);var g=i+"__bubble";f.has(g)||(zn(a,i,2,!1),f.add(g))}function St(i,a,f){var g=0;a&&(g|=4),zn(f,i,g,a)}var kt="_reactListening"+Math.random().toString(36).slice(2);function Ct(i){if(!i[kt]){i[kt]=!0,Nf.forEach(function(f){f!=="selectionchange"&&(Ue.has(f)||St(f,!1,i),St(f,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[kt]||(a[kt]=!0,St("selectionchange",!1,a))}}function zn(i,a,f,g){switch(Ax(a)){case 2:var C=AP;break;case 8:C=IP;break;default:C=bE}f=C.bind(null,a,f,i),C=void 0,!tg||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(C=!0),g?C!==void 0?i.addEventListener(a,f,{capture:!0,passive:C}):i.addEventListener(a,f,!0):C!==void 0?i.addEventListener(a,f,{passive:C}):i.addEventListener(a,f,!1)}function Gn(i,a,f,g,C){var x=g;if((a&1)===0&&(a&2)===0&&g!==null)e:for(;;){if(g===null)return;var z=g.tag;if(z===3||z===4){var J=g.stateNode.containerInfo;if(J===C)break;if(z===4)for(z=g.return;z!==null;){var ge=z.tag;if((ge===3||ge===4)&&z.stateNode.containerInfo===C)return;z=z.return}for(;J!==null;){if(z=Mi(J),z===null)return;if(ge=z.tag,ge===5||ge===6||ge===26||ge===27){g=x=z;continue e}J=J.parentNode}}g=g.return}zb(function(){var Re=x,Ge=Jm(f),We=[];e:{var Le=Vo.get(i);if(Le!==void 0){var Me=Cn,Ut=i;switch(i){case"keypress":if(Rd(f)===0)break e;case"keydown":case"keyup":Me=Wb;break;case"focusin":Ut="focus",Me=Pd;break;case"focusout":Ut="blur",Me=Pd;break;case"beforeblur":case"afterblur":Me=Pd;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=ii;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=F2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=Yb;break;case Gd:case Cr:case Hd:Me=Lf;break;case Xd:Me=cg;break;case"scroll":case"scrollend":Me=rg;break;case"wheel":Me=V2;break;case"copy":case"cut":case"paste":Me=z2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=Vb;break;case"toggle":case"beforetoggle":Me=Qb}var Rt=(a&4)!==0,Ln=!Rt&&(i==="scroll"||i==="scrollend"),Te=Rt?Le!==null?Le+"Capture":null:Le;Rt=[];for(var Ce=Re,Ne;Ce!==null;){var He=Ce;if(Ne=He.stateNode,He=He.tag,He!==5&&He!==26&&He!==27||Ne===null||Te===null||(He=Id(Ce,Te),He!=null&&Rt.push(Xe(Ce,He,Ne))),Ln)break;Ce=Ce.return}0<Rt.length&&(Le=new Me(Le,Ut,null,f,Ge),We.push({event:Le,listeners:Rt}))}}if((a&7)===0){e:{if(Le=i==="mouseover"||i==="pointerover",Me=i==="mouseout"||i==="pointerout",Le&&f!==$a&&(Ut=f.relatedTarget||f.fromElement)&&(Mi(Ut)||Ut[Wl]))break e;if((Me||Le)&&(Le=Ge.window===Ge?Ge:(Le=Ge.ownerDocument)?Le.defaultView||Le.parentWindow:window,Me?(Ut=f.relatedTarget||f.toElement,Me=Re,Ut=Ut?Mi(Ut):null,Ut!==null&&(Ln=o(Ut),Rt=Ut.tag,Ut!==Ln||Rt!==5&&Rt!==27&&Rt!==6)&&(Ut=null)):(Me=null,Ut=Re),Me!==Ut)){if(Rt=ii,He="onMouseLeave",Te="onMouseEnter",Ce="mouse",(i==="pointerout"||i==="pointerover")&&(Rt=Vb,He="onPointerLeave",Te="onPointerEnter",Ce="pointer"),Ln=Me==null?Le:Vl(Me),Ne=Ut==null?Le:Vl(Ut),Le=new Rt(He,Ce+"leave",Me,f,Ge),Le.target=Ln,Le.relatedTarget=Ne,He=null,Mi(Ge)===Re&&(Rt=new Rt(Te,Ce+"enter",Ut,f,Ge),Rt.target=Ne,Rt.relatedTarget=Ln,He=Rt),Ln=He,Me&&Ut)t:{for(Rt=Me,Te=Ut,Ce=0,Ne=Rt;Ne;Ne=Ie(Ne))Ce++;for(Ne=0,He=Te;He;He=Ie(He))Ne++;for(;0<Ce-Ne;)Rt=Ie(Rt),Ce--;for(;0<Ne-Ce;)Te=Ie(Te),Ne--;for(;Ce--;){if(Rt===Te||Te!==null&&Rt===Te.alternate)break t;Rt=Ie(Rt),Te=Ie(Te)}Rt=null}else Rt=null;Me!==null&&Ze(We,Le,Me,Rt,!1),Ut!==null&&Ln!==null&&Ze(We,Ln,Ut,Rt,!0)}}e:{if(Le=Re?Vl(Re):window,Me=Le.nodeName&&Le.nodeName.toLowerCase(),Me==="select"||Me==="input"&&Le.type==="file")var vt=fg;else if(tu(Le))if(tw)vt=Q2;else{vt=iw;var qt=$d}else Me=Le.nodeName,!Me||Me.toLowerCase()!=="input"||Le.type!=="checkbox"&&Le.type!=="radio"?Re&&Pf(Re.elementType)&&(vt=fg):vt=jd;if(vt&&(vt=vt(i,Re))){jf(We,vt,f,Ge);break e}qt&&qt(i,Le,Re),i==="focusout"&&Re&&Le.type==="number"&&Re.memoizedProps.value!=null&&Ad(Le,"number",Le.value)}switch(qt=Re?Vl(Re):window,i){case"focusin":(tu(qt)||qt.contentEditable==="true")&&(za=qt,Fd=Re,Zd=null);break;case"focusout":Zd=Fd=za=null;break;case"mousedown":Qc=!0;break;case"contextmenu":case"mouseup":case"dragend":Qc=!1,bg(We,f,Ge);break;case"selectionchange":if(J2)break;case"keydown":case"keyup":bg(We,f,Ge)}var xt;if(ug)e:{switch(i){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else qc?dg(i,f)&&(Pt="onCompositionEnd"):i==="keydown"&&f.keyCode===229&&(Pt="onCompositionStart");Pt&&(Mf&&f.locale!=="ko"&&(qc||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&qc&&(xt=Gb()):(ja=Ge,ng="value"in ja?ja.value:ja.textContent,qc=!0)),qt=_e(Re,Pt),0<qt.length&&(Pt=new Ld(Pt,i,null,f,Ge),We.push({event:Pt,listeners:qt}),xt?Pt.data=xt:(xt=hg(f),xt!==null&&(Pt.data=xt)))),(xt=ew?K2(i,f):Y2(i,f))&&(Pt=_e(Re,"onBeforeInput"),0<Pt.length&&(qt=new Ld("onBeforeInput","beforeinput",null,f,Ge),We.push({event:qt,listeners:Pt}),qt.data=xt)),ye(We,i,Re,f,Ge)}Qe(We,a)})}function Xe(i,a,f){return{instance:i,listener:a,currentTarget:f}}function _e(i,a){for(var f=a+"Capture",g=[];i!==null;){var C=i,x=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||x===null||(C=Id(i,f),C!=null&&g.unshift(Xe(i,C,x)),C=Id(i,a),C!=null&&g.push(Xe(i,C,x))),i.tag===3)return g;i=i.return}return[]}function Ie(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Ze(i,a,f,g,C){for(var x=a._reactName,z=[];f!==null&&f!==g;){var J=f,ge=J.alternate,Re=J.stateNode;if(J=J.tag,ge!==null&&ge===g)break;J!==5&&J!==26&&J!==27||Re===null||(ge=Re,C?(Re=Id(f,x),Re!=null&&z.unshift(Xe(f,Re,ge))):C||(Re=Id(f,x),Re!=null&&z.push(Xe(f,Re,ge)))),f=f.return}z.length!==0&&i.push({event:a,listeners:z})}var Be=/\r\n?/g,xn=/\u0000|\uFFFD/g;function gr(i){return(typeof i=="string"?i:""+i).replace(Be,`
`).replace(xn,"")}function Ls(i,a){return a=gr(a),gr(i)===a}function Xr(){}function tn(i,a,f,g,C,x){switch(f){case"children":typeof g=="string"?a==="body"||a==="textarea"&&g===""||ql(i,g):(typeof g=="number"||typeof g=="bigint")&&a!=="body"&&ql(i,""+g);break;case"className":Da(i,"class",g);break;case"tabIndex":Da(i,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Da(i,f,g);break;case"style":Fb(i,g,x);break;case"data":if(a!=="object"){Da(i,"data",g);break}case"src":case"href":if(g===""&&(a!=="a"||f!=="href")){i.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){i.removeAttribute(f);break}g=kf(""+g),i.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){i.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(f==="formAction"?(a!=="input"&&tn(i,a,"name",C.name,C,null),tn(i,a,"formEncType",C.formEncType,C,null),tn(i,a,"formMethod",C.formMethod,C,null),tn(i,a,"formTarget",C.formTarget,C,null)):(tn(i,a,"encType",C.encType,C,null),tn(i,a,"method",C.method,C,null),tn(i,a,"target",C.target,C,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){i.removeAttribute(f);break}g=kf(""+g),i.setAttribute(f,g);break;case"onClick":g!=null&&(i.onclick=Xr);break;case"onScroll":g!=null&&ze("scroll",i);break;case"onScrollEnd":g!=null&&ze("scrollend",i);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(C.children!=null)throw Error(r(60));i.innerHTML=f}}break;case"multiple":i.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":i.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){i.removeAttribute("xlink:href");break}f=kf(""+g),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(f,""+g):i.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(f,""):i.removeAttribute(f);break;case"capture":case"download":g===!0?i.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(f,g):i.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?i.setAttribute(f,g):i.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?i.removeAttribute(f):i.setAttribute(f,g);break;case"popover":ze("beforetoggle",i),ze("toggle",i),_d(i,"popover",g);break;case"xlinkActuate":Pn(i,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Pn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Pn(i,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Pn(i,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Pn(i,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Pn(i,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Pn(i,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Pn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Pn(i,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":_d(i,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=j2.get(f)||f,_d(i,f,g))}}function yl(i,a,f,g,C,x){switch(f){case"style":Fb(i,g,x);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(C.children!=null)throw Error(r(60));i.innerHTML=f}}break;case"children":typeof g=="string"?ql(i,g):(typeof g=="number"||typeof g=="bigint")&&ql(i,""+g);break;case"onScroll":g!=null&&ze("scroll",i);break;case"onScrollEnd":g!=null&&ze("scrollend",i);break;case"onClick":g!=null&&(i.onclick=Xr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Km.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(C=f.endsWith("Capture"),a=f.slice(2,C?f.length-7:void 0),x=i[Fr]||null,x=x!=null?x[f]:null,typeof x=="function"&&i.removeEventListener(a,x,C),typeof g=="function")){typeof x!="function"&&x!==null&&(f in i?i[f]=null:i.hasAttribute(f)&&i.removeAttribute(f)),i.addEventListener(a,g,C);break e}f in i?i[f]=g:g===!0?i.setAttribute(f,""):_d(i,f,g)}}}function qn(i,a,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",i),ze("load",i);var g=!1,C=!1,x;for(x in f)if(f.hasOwnProperty(x)){var z=f[x];if(z!=null)switch(x){case"src":g=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:tn(i,a,x,z,f,null)}}C&&tn(i,a,"srcSet",f.srcSet,f,null),g&&tn(i,a,"src",f.src,f,null);return;case"input":ze("invalid",i);var J=x=z=C=null,ge=null,Re=null;for(g in f)if(f.hasOwnProperty(g)){var Ge=f[g];if(Ge!=null)switch(g){case"name":C=Ge;break;case"type":z=Ge;break;case"checked":ge=Ge;break;case"defaultChecked":Re=Ge;break;case"value":x=Ge;break;case"defaultValue":J=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(r(137,a));break;default:tn(i,a,g,Ge,f,null)}}Ub(i,x,J,ge,Re,z,C,!1),Of(i);return;case"select":ze("invalid",i),g=z=x=null;for(C in f)if(f.hasOwnProperty(C)&&(J=f[C],J!=null))switch(C){case"value":x=J;break;case"defaultValue":z=J;break;case"multiple":g=J;default:tn(i,a,C,J,f,null)}a=x,f=z,i.multiple=!!g,a!=null?Vc(i,!!g,a,!1):f!=null&&Vc(i,!!g,f,!0);return;case"textarea":ze("invalid",i),x=C=g=null;for(z in f)if(f.hasOwnProperty(z)&&(J=f[z],J!=null))switch(z){case"value":g=J;break;case"defaultValue":C=J;break;case"children":x=J;break;case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(91));break;default:tn(i,a,z,J,f,null)}jb(i,g,C,x),Of(i);return;case"option":for(ge in f)if(f.hasOwnProperty(ge)&&(g=f[ge],g!=null))switch(ge){case"selected":i.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:tn(i,a,ge,g,f,null)}return;case"dialog":ze("beforetoggle",i),ze("toggle",i),ze("cancel",i),ze("close",i);break;case"iframe":case"object":ze("load",i);break;case"video":case"audio":for(g=0;g<le.length;g++)ze(le[g],i);break;case"image":ze("error",i),ze("load",i);break;case"details":ze("toggle",i);break;case"embed":case"source":case"link":ze("error",i),ze("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Re in f)if(f.hasOwnProperty(Re)&&(g=f[Re],g!=null))switch(Re){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:tn(i,a,Re,g,f,null)}return;default:if(Pf(a)){for(Ge in f)f.hasOwnProperty(Ge)&&(g=f[Ge],g!==void 0&&yl(i,a,Ge,g,f,void 0));return}}for(J in f)f.hasOwnProperty(J)&&(g=f[J],g!=null&&tn(i,a,J,g,f,null))}function rP(i,a,f,g){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,x=null,z=null,J=null,ge=null,Re=null,Ge=null;for(Me in f){var We=f[Me];if(f.hasOwnProperty(Me)&&We!=null)switch(Me){case"checked":break;case"value":break;case"defaultValue":ge=We;default:g.hasOwnProperty(Me)||tn(i,a,Me,null,g,We)}}for(var Le in g){var Me=g[Le];if(We=f[Le],g.hasOwnProperty(Le)&&(Me!=null||We!=null))switch(Le){case"type":x=Me;break;case"name":C=Me;break;case"checked":Re=Me;break;case"defaultChecked":Ge=Me;break;case"value":z=Me;break;case"defaultValue":J=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(r(137,a));break;default:Me!==We&&tn(i,a,Le,Me,g,We)}}Qm(i,z,J,ge,Re,Ge,x,C);return;case"select":Me=z=J=Le=null;for(x in f)if(ge=f[x],f.hasOwnProperty(x)&&ge!=null)switch(x){case"value":break;case"multiple":Me=ge;default:g.hasOwnProperty(x)||tn(i,a,x,null,g,ge)}for(C in g)if(x=g[C],ge=f[C],g.hasOwnProperty(C)&&(x!=null||ge!=null))switch(C){case"value":Le=x;break;case"defaultValue":J=x;break;case"multiple":z=x;default:x!==ge&&tn(i,a,C,x,g,ge)}a=J,f=z,g=Me,Le!=null?Vc(i,!!f,Le,!1):!!g!=!!f&&(a!=null?Vc(i,!!f,a,!0):Vc(i,!!f,f?[]:"",!1));return;case"textarea":Me=Le=null;for(J in f)if(C=f[J],f.hasOwnProperty(J)&&C!=null&&!g.hasOwnProperty(J))switch(J){case"value":break;case"children":break;default:tn(i,a,J,null,g,C)}for(z in g)if(C=g[z],x=f[z],g.hasOwnProperty(z)&&(C!=null||x!=null))switch(z){case"value":Le=C;break;case"defaultValue":Me=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:C!==x&&tn(i,a,z,C,g,x)}$b(i,Le,Me);return;case"option":for(var Ut in f)if(Le=f[Ut],f.hasOwnProperty(Ut)&&Le!=null&&!g.hasOwnProperty(Ut))switch(Ut){case"selected":i.selected=!1;break;default:tn(i,a,Ut,null,g,Le)}for(ge in g)if(Le=g[ge],Me=f[ge],g.hasOwnProperty(ge)&&Le!==Me&&(Le!=null||Me!=null))switch(ge){case"selected":i.selected=Le&&typeof Le!="function"&&typeof Le!="symbol";break;default:tn(i,a,ge,Le,g,Me)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Rt in f)Le=f[Rt],f.hasOwnProperty(Rt)&&Le!=null&&!g.hasOwnProperty(Rt)&&tn(i,a,Rt,null,g,Le);for(Re in g)if(Le=g[Re],Me=f[Re],g.hasOwnProperty(Re)&&Le!==Me&&(Le!=null||Me!=null))switch(Re){case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(r(137,a));break;default:tn(i,a,Re,Le,g,Me)}return;default:if(Pf(a)){for(var Ln in f)Le=f[Ln],f.hasOwnProperty(Ln)&&Le!==void 0&&!g.hasOwnProperty(Ln)&&yl(i,a,Ln,void 0,g,Le);for(Ge in g)Le=g[Ge],Me=f[Ge],!g.hasOwnProperty(Ge)||Le===Me||Le===void 0&&Me===void 0||yl(i,a,Ge,Le,g,Me);return}}for(var Te in f)Le=f[Te],f.hasOwnProperty(Te)&&Le!=null&&!g.hasOwnProperty(Te)&&tn(i,a,Te,null,g,Le);for(We in g)Le=g[We],Me=f[We],!g.hasOwnProperty(We)||Le===Me||Le==null&&Me==null||tn(i,a,We,Le,g,Me)}var aE=null,cE=null;function r1(i){return i.nodeType===9?i:i.ownerDocument}function ax(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cx(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function lE(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var uE=null;function sP(){var i=window.event;return i&&i.type==="popstate"?i===uE?!1:(uE=i,!0):(uE=null,!1)}var lx=typeof setTimeout=="function"?setTimeout:void 0,iP=typeof clearTimeout=="function"?clearTimeout:void 0,ux=typeof Promise=="function"?Promise:void 0,oP=typeof queueMicrotask=="function"?queueMicrotask:typeof ux<"u"?function(i){return ux.resolve(null).then(i).catch(aP)}:lx;function aP(i){setTimeout(function(){throw i})}function Pu(i){return i==="head"}function dx(i,a){var f=a,g=0,C=0;do{var x=f.nextSibling;if(i.removeChild(f),x&&x.nodeType===8)if(f=x.data,f==="/$"){if(0<g&&8>g){f=g;var z=i.ownerDocument;if(f&1&&v0(z.documentElement),f&2&&v0(z.body),f&4)for(f=z.head,v0(f),z=f.firstChild;z;){var J=z.nextSibling,ge=z.nodeName;z[La]||ge==="SCRIPT"||ge==="STYLE"||ge==="LINK"&&z.rel.toLowerCase()==="stylesheet"||f.removeChild(z),z=J}}if(C===0){i.removeChild(x),I0(a);return}C--}else f==="$"||f==="$?"||f==="$!"?C++:g=f.charCodeAt(0)-48;else g=0;f=x}while(f);I0(a)}function dE(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var f=a;switch(a=a.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":dE(f),Vm(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}i.removeChild(f)}}function cP(i,a,f,g){for(;i.nodeType===1;){var C=f;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!g&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(g){if(!i[La])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(x=i.getAttribute("rel"),x==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(x!==C.rel||i.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||i.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||i.getAttribute("title")!==(C.title==null?null:C.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(x=i.getAttribute("src"),(x!==(C.src==null?null:C.src)||i.getAttribute("type")!==(C.type==null?null:C.type)||i.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&x&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var x=C.name==null?null:""+C.name;if(C.type==="hidden"&&i.getAttribute("name")===x)return i}else return i;if(i=ga(i.nextSibling),i===null)break}return null}function lP(i,a,f){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!f||(i=ga(i.nextSibling),i===null))return null;return i}function hE(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function uP(i,a){var f=i.ownerDocument;if(i.data!=="$?"||f.readyState==="complete")a();else{var g=function(){a(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),i._reactRetry=g}}function ga(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var fE=null;function hx(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var f=i.data;if(f==="$"||f==="$!"||f==="$?"){if(a===0)return i;a--}else f==="/$"&&a++}i=i.previousSibling}return null}function fx(i,a,f){switch(a=r1(f),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function v0(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Vm(i)}var xo=new Map,px=new Set;function s1(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var bl=ne.d;ne.d={f:dP,r:hP,D:fP,C:pP,L:mP,m:gP,X:bP,S:yP,M:wP};function dP(){var i=bl.f(),a=Nu();return i||a}function hP(i){var a=Xc(i);a!==null&&a.tag===5&&a.type==="form"?al(a):bl.r(i)}var Op=typeof document>"u"?null:document;function mx(i,a,f){var g=Op;if(g&&typeof a=="string"&&a){var C=ns(a);C='link[rel="'+i+'"][href="'+C+'"]',typeof f=="string"&&(C+='[crossorigin="'+f+'"]'),px.has(C)||(px.add(C),i={rel:i,crossOrigin:f,href:a},g.querySelector(C)===null&&(a=g.createElement("link"),qn(a,"link",i),je(a),g.head.appendChild(a)))}}function fP(i){bl.D(i),mx("dns-prefetch",i,null)}function pP(i,a){bl.C(i,a),mx("preconnect",i,a)}function mP(i,a,f){bl.L(i,a,f);var g=Op;if(g&&i&&a){var C='link[rel="preload"][as="'+ns(a)+'"]';a==="image"&&f&&f.imageSrcSet?(C+='[imagesrcset="'+ns(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(C+='[imagesizes="'+ns(f.imageSizes)+'"]')):C+='[href="'+ns(i)+'"]';var x=C;switch(a){case"style":x=Pp(i);break;case"script":x=kp(i)}xo.has(x)||(i=y({rel:"preload",href:a==="image"&&f&&f.imageSrcSet?void 0:i,as:a},f),xo.set(x,i),g.querySelector(C)!==null||a==="style"&&g.querySelector(E0(x))||a==="script"&&g.querySelector(C0(x))||(a=g.createElement("link"),qn(a,"link",i),je(a),g.head.appendChild(a)))}}function gP(i,a){bl.m(i,a);var f=Op;if(f&&i){var g=a&&typeof a.as=="string"?a.as:"script",C='link[rel="modulepreload"][as="'+ns(g)+'"][href="'+ns(i)+'"]',x=C;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=kp(i)}if(!xo.has(x)&&(i=y({rel:"modulepreload",href:i},a),xo.set(x,i),f.querySelector(C)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(C0(x)))return}g=f.createElement("link"),qn(g,"link",i),je(g),f.head.appendChild(g)}}}function yP(i,a,f){bl.S(i,a,f);var g=Op;if(g&&i){var C=Wc(g).hoistableStyles,x=Pp(i);a=a||"default";var z=C.get(x);if(!z){var J={loading:0,preload:null};if(z=g.querySelector(E0(x)))J.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":a},f),(f=xo.get(x))&&pE(i,f);var ge=z=g.createElement("link");je(ge),qn(ge,"link",i),ge._p=new Promise(function(Re,Ge){ge.onload=Re,ge.onerror=Ge}),ge.addEventListener("load",function(){J.loading|=1}),ge.addEventListener("error",function(){J.loading|=2}),J.loading|=4,i1(z,a,g)}z={type:"stylesheet",instance:z,count:1,state:J},C.set(x,z)}}}function bP(i,a){bl.X(i,a);var f=Op;if(f&&i){var g=Wc(f).hoistableScripts,C=kp(i),x=g.get(C);x||(x=f.querySelector(C0(C)),x||(i=y({src:i,async:!0},a),(a=xo.get(C))&&mE(i,a),x=f.createElement("script"),je(x),qn(x,"link",i),f.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},g.set(C,x))}}function wP(i,a){bl.M(i,a);var f=Op;if(f&&i){var g=Wc(f).hoistableScripts,C=kp(i),x=g.get(C);x||(x=f.querySelector(C0(C)),x||(i=y({src:i,async:!0,type:"module"},a),(a=xo.get(C))&&mE(i,a),x=f.createElement("script"),je(x),qn(x,"link",i),f.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},g.set(C,x))}}function gx(i,a,f,g){var C=(C=Fe.current)?s1(C):null;if(!C)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(a=Pp(f.href),f=Wc(C).hoistableStyles,g=f.get(a),g||(g={type:"style",instance:null,count:0,state:null},f.set(a,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){i=Pp(f.href);var x=Wc(C).hoistableStyles,z=x.get(i);if(z||(C=C.ownerDocument||C,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(i,z),(x=C.querySelector(E0(i)))&&!x._p&&(z.instance=x,z.state.loading=5),xo.has(i)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},xo.set(i,f),x||vP(C,i,f,z.state))),a&&g===null)throw Error(r(528,""));return z}if(a&&g!==null)throw Error(r(529,""));return null;case"script":return a=f.async,f=f.src,typeof f=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=kp(f),f=Wc(C).hoistableScripts,g=f.get(a),g||(g={type:"script",instance:null,count:0,state:null},f.set(a,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Pp(i){return'href="'+ns(i)+'"'}function E0(i){return'link[rel="stylesheet"]['+i+"]"}function yx(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function vP(i,a,f,g){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?g.loading=1:(a=i.createElement("link"),g.preload=a,a.addEventListener("load",function(){return g.loading|=1}),a.addEventListener("error",function(){return g.loading|=2}),qn(a,"link",f),je(a),i.head.appendChild(a))}function kp(i){return'[src="'+ns(i)+'"]'}function C0(i){return"script[async]"+i}function bx(i,a,f){if(a.count++,a.instance===null)switch(a.type){case"style":var g=i.querySelector('style[data-href~="'+ns(f.href)+'"]');if(g)return a.instance=g,je(g),g;var C=y({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(i.ownerDocument||i).createElement("style"),je(g),qn(g,"style",C),i1(g,f.precedence,i),a.instance=g;case"stylesheet":C=Pp(f.href);var x=i.querySelector(E0(C));if(x)return a.state.loading|=4,a.instance=x,je(x),x;g=yx(f),(C=xo.get(C))&&pE(g,C),x=(i.ownerDocument||i).createElement("link"),je(x);var z=x;return z._p=new Promise(function(J,ge){z.onload=J,z.onerror=ge}),qn(x,"link",g),a.state.loading|=4,i1(x,f.precedence,i),a.instance=x;case"script":return x=kp(f.src),(C=i.querySelector(C0(x)))?(a.instance=C,je(C),C):(g=f,(C=xo.get(x))&&(g=y({},f),mE(g,C)),i=i.ownerDocument||i,C=i.createElement("script"),je(C),qn(C,"link",g),i.head.appendChild(C),a.instance=C);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(g=a.instance,a.state.loading|=4,i1(g,f.precedence,i));return a.instance}function i1(i,a,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=g.length?g[g.length-1]:null,x=C,z=0;z<g.length;z++){var J=g[z];if(J.dataset.precedence===a)x=J;else if(x!==C)break}x?x.parentNode.insertBefore(i,x.nextSibling):(a=f.nodeType===9?f.head:f,a.insertBefore(i,a.firstChild))}function pE(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function mE(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var o1=null;function wx(i,a,f){if(o1===null){var g=new Map,C=o1=new Map;C.set(f,g)}else C=o1,g=C.get(f),g||(g=new Map,C.set(f,g));if(g.has(i))return g;for(g.set(i,null),f=f.getElementsByTagName(i),C=0;C<f.length;C++){var x=f[C];if(!(x[La]||x[Vn]||i==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var z=x.getAttribute(a)||"";z=i+z;var J=g.get(z);J?J.push(x):g.set(z,[x])}}return g}function vx(i,a,f){i=i.ownerDocument||i,i.head.insertBefore(f,a==="title"?i.querySelector("head > title"):null)}function EP(i,a,f){if(f===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Ex(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var S0=null;function CP(){}function SP(i,a,f){if(S0===null)throw Error(r(475));var g=S0;if(a.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var C=Pp(f.href),x=i.querySelector(E0(C));if(x){i=x._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(g.count++,g=a1.bind(g),i.then(g,g)),a.state.loading|=4,a.instance=x,je(x);return}x=i.ownerDocument||i,f=yx(f),(C=xo.get(C))&&pE(f,C),x=x.createElement("link"),je(x);var z=x;z._p=new Promise(function(J,ge){z.onload=J,z.onerror=ge}),qn(x,"link",f),a.instance=x}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(g.count++,a=a1.bind(g),i.addEventListener("load",a),i.addEventListener("error",a))}}function _P(){if(S0===null)throw Error(r(475));var i=S0;return i.stylesheets&&i.count===0&&gE(i,i.stylesheets),0<i.count?function(a){var f=setTimeout(function(){if(i.stylesheets&&gE(i,i.stylesheets),i.unsuspend){var g=i.unsuspend;i.unsuspend=null,g()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(f)}}:null}function a1(){if(this.count--,this.count===0){if(this.stylesheets)gE(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var c1=null;function gE(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,c1=new Map,a.forEach(xP,i),c1=null,a1.call(i))}function xP(i,a){if(!(a.state.loading&4)){var f=c1.get(i);if(f)var g=f.get(null);else{f=new Map,c1.set(i,f);for(var C=i.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<C.length;x++){var z=C[x];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(f.set(z.dataset.precedence,z),g=z)}g&&f.set(null,g)}C=a.instance,z=C.getAttribute("data-precedence"),x=f.get(z)||g,x===g&&f.set(null,C),f.set(z,C),this.count++,g=a1.bind(this),C.addEventListener("load",g),C.addEventListener("error",g),x?x.parentNode.insertBefore(C,x.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(C,i.firstChild)),a.state.loading|=4}}var _0={$$typeof:F,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function TP(i,a,f,g,C,x,z,J){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Sd(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sd(0),this.hiddenUpdates=Sd(null),this.identifierPrefix=g,this.onUncaughtError=C,this.onCaughtError=x,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=J,this.incompleteTransitions=new Map}function Cx(i,a,f,g,C,x,z,J,ge,Re,Ge,We){return i=new TP(i,a,f,z,J,ge,Re,We),a=1,x===!0&&(a|=24),x=Ws(3,null,null,a),i.current=x,x.stateNode=i,a=Ig(),a.refCount++,i.pooledCache=a,a.refCount++,x.memoizedState={element:g,isDehydrated:f,cache:a},ih(x),i}function Sx(i){return i?(i=su,i):su}function _x(i,a,f,g,C,x){C=Sx(C),g.context===null?g.context=C:g.pendingContext=C,g=fo(a),g.payload={element:f},x=x===void 0?null:x,x!==null&&(g.callback=x),f=ta(i,g,a),f!==null&&(Js(f,i,a),na(f,i,a))}function xx(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var f=i.retryLane;i.retryLane=f!==0&&f<a?f:a}}function yE(i,a){xx(i,a),(i=i.alternate)&&xx(i,a)}function Tx(i){if(i.tag===13){var a=ru(i,67108864);a!==null&&Js(a,i,67108864),yE(i,67108864)}}var l1=!0;function AP(i,a,f,g){var C=P.T;P.T=null;var x=ne.p;try{ne.p=2,bE(i,a,f,g)}finally{ne.p=x,P.T=C}}function IP(i,a,f,g){var C=P.T;P.T=null;var x=ne.p;try{ne.p=8,bE(i,a,f,g)}finally{ne.p=x,P.T=C}}function bE(i,a,f,g){if(l1){var C=wE(g);if(C===null)Gn(i,a,g,u1,f),Ix(i,g);else if(RP(C,i,a,f,g))g.stopPropagation();else if(Ix(i,g),a&4&&-1<NP.indexOf(i)){for(;C!==null;){var x=Xc(C);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var z=ri(x.pendingLanes);if(z!==0){var J=x;for(J.pendingLanes|=2,J.entangledLanes|=2;z;){var ge=1<<31-Vt(z);J.entanglements[1]|=ge,z&=~ge}O(x),(an&6)===0&&(Ih=Wt()+500,M(0))}}break;case 13:J=ru(x,2),J!==null&&Js(J,x,2),Nu(),yE(x,2)}if(x=wE(g),x===null&&Gn(i,a,g,u1,f),x===C)break;C=x}C!==null&&g.stopPropagation()}else Gn(i,a,g,null,f)}}function wE(i){return i=Jm(i),vE(i)}var u1=null;function vE(i){if(u1=null,i=Mi(i),i!==null){var a=o(i);if(a===null)i=null;else{var f=a.tag;if(f===13){if(i=c(a),i!==null)return i;i=null}else if(f===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return u1=i,null}function Ax(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hr()){case Xn:return 2;case Jt:return 8;case Nt:case An:return 32;case Wn:return 268435456;default:return 32}default:return 32}}var EE=!1,ku=null,Lu=null,Du=null,x0=new Map,T0=new Map,Mu=[],NP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ix(i,a){switch(i){case"focusin":case"focusout":ku=null;break;case"dragenter":case"dragleave":Lu=null;break;case"mouseover":case"mouseout":Du=null;break;case"pointerover":case"pointerout":x0.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":T0.delete(a.pointerId)}}function A0(i,a,f,g,C,x){return i===null||i.nativeEvent!==x?(i={blockedOn:a,domEventName:f,eventSystemFlags:g,nativeEvent:x,targetContainers:[C]},a!==null&&(a=Xc(a),a!==null&&Tx(a)),i):(i.eventSystemFlags|=g,a=i.targetContainers,C!==null&&a.indexOf(C)===-1&&a.push(C),i)}function RP(i,a,f,g,C){switch(a){case"focusin":return ku=A0(ku,i,a,f,g,C),!0;case"dragenter":return Lu=A0(Lu,i,a,f,g,C),!0;case"mouseover":return Du=A0(Du,i,a,f,g,C),!0;case"pointerover":var x=C.pointerId;return x0.set(x,A0(x0.get(x)||null,i,a,f,g,C)),!0;case"gotpointercapture":return x=C.pointerId,T0.set(x,A0(T0.get(x)||null,i,a,f,g,C)),!0}return!1}function Nx(i){var a=Mi(i.target);if(a!==null){var f=o(a);if(f!==null){if(a=f.tag,a===13){if(a=c(f),a!==null){i.blockedOn=a,Br(i.priority,function(){if(f.tag===13){var g=Qs();g=Af(g);var C=ru(f,g);C!==null&&Js(C,f,g),yE(f,g)}});return}}else if(a===3&&f.stateNode.current.memoizedState.isDehydrated){i.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}i.blockedOn=null}function d1(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var f=wE(i.nativeEvent);if(f===null){f=i.nativeEvent;var g=new f.constructor(f.type,f);$a=g,f.target.dispatchEvent(g),$a=null}else return a=Xc(f),a!==null&&Tx(a),i.blockedOn=f,!1;a.shift()}return!0}function Rx(i,a,f){d1(i)&&f.delete(a)}function OP(){EE=!1,ku!==null&&d1(ku)&&(ku=null),Lu!==null&&d1(Lu)&&(Lu=null),Du!==null&&d1(Du)&&(Du=null),x0.forEach(Rx),T0.forEach(Rx)}function h1(i,a){i.blockedOn===a&&(i.blockedOn=null,EE||(EE=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,OP)))}var f1=null;function Ox(i){f1!==i&&(f1=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){f1===i&&(f1=null);for(var a=0;a<i.length;a+=3){var f=i[a],g=i[a+1],C=i[a+2];if(typeof g!="function"){if(vE(g||f)===null)continue;break}var x=Xc(f);x!==null&&(i.splice(a,3),a-=3,ip(x,{pending:!0,data:C,method:f.method,action:g},g,C))}}))}function I0(i){function a(ge){return h1(ge,i)}ku!==null&&h1(ku,i),Lu!==null&&h1(Lu,i),Du!==null&&h1(Du,i),x0.forEach(a),T0.forEach(a);for(var f=0;f<Mu.length;f++){var g=Mu[f];g.blockedOn===i&&(g.blockedOn=null)}for(;0<Mu.length&&(f=Mu[0],f.blockedOn===null);)Nx(f),f.blockedOn===null&&Mu.shift();if(f=(i.ownerDocument||i).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var C=f[g],x=f[g+1],z=C[Fr]||null;if(typeof x=="function")z||Ox(f);else if(z){var J=null;if(x&&x.hasAttribute("formAction")){if(C=x,z=x[Fr]||null)J=z.formAction;else if(vE(C)!==null)continue}else J=z.action;typeof J=="function"?f[g+1]=J:(f.splice(g,3),g-=3),Ox(f)}}}function CE(i){this._internalRoot=i}p1.prototype.render=CE.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var f=a.current,g=Qs();_x(f,g,i,a,null,null)},p1.prototype.unmount=CE.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;_x(i.current,2,null,i,null,null),Nu(),a[Wl]=null}};function p1(i){this._internalRoot=i}p1.prototype.unstable_scheduleHydration=function(i){if(i){var a=Wm();i={blockedOn:null,target:i,priority:a};for(var f=0;f<Mu.length&&a!==0&&a<Mu[f].priority;f++);Mu.splice(f,0,i),f===0&&Nx(i)}};var Px=e.version;if(Px!=="19.1.0")throw Error(r(527,Px,"19.1.0"));ne.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=p(a),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var PP={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var m1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!m1.isDisabled&&m1.supportsFiber)try{$r=m1.inject(PP),jr=m1}catch{}}return R0.createRoot=function(i,a){if(!s(i))throw Error(r(299));var f=!1,g="",C=Cu,x=Yg,z=Fw,J=null;return a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(C=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(z=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(J=a.unstable_transitionCallbacks)),a=Cx(i,1,!1,null,null,f,g,C,x,z,J,null),i[Wl]=a.current,Ct(i),new CE(a)},R0.hydrateRoot=function(i,a,f){if(!s(i))throw Error(r(299));var g=!1,C="",x=Cu,z=Yg,J=Fw,ge=null,Re=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(C=f.identifierPrefix),f.onUncaughtError!==void 0&&(x=f.onUncaughtError),f.onCaughtError!==void 0&&(z=f.onCaughtError),f.onRecoverableError!==void 0&&(J=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(ge=f.unstable_transitionCallbacks),f.formState!==void 0&&(Re=f.formState)),a=Cx(i,1,!0,a,f??null,g,C,x,z,J,ge,Re),a.context=Sx(null),f=a.current,g=Qs(),g=Af(g),C=fo(g),C.callback=null,ta(f,C,g),f=g,a.current.lanes=f,Xl(a,f),O(a),i[Wl]=a.current,Ct(i),new p1(a)},R0.version="19.1.0",R0}var Zx;function ZP(){if(Zx)return xE.exports;Zx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),xE.exports=FP(),xE.exports}var zP=ZP(),vc={},Y1={exports:{}};/*!
 * Toastify js 1.12.0
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */var GP=Y1.exports,zx;function HP(){return zx||(zx=1,function(t){(function(e,n){t.exports?t.exports=n():e.Toastify=n()})(GP,function(e){var n=function(c){return new n.lib.init(c)},r="1.12.0";n.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},n.lib=n.prototype={toastify:r,constructor:n,init:function(c){return c||(c={}),this.options={},this.toastElement=null,this.options.text=c.text||n.defaults.text,this.options.node=c.node||n.defaults.node,this.options.duration=c.duration===0?0:c.duration||n.defaults.duration,this.options.selector=c.selector||n.defaults.selector,this.options.callback=c.callback||n.defaults.callback,this.options.destination=c.destination||n.defaults.destination,this.options.newWindow=c.newWindow||n.defaults.newWindow,this.options.close=c.close||n.defaults.close,this.options.gravity=c.gravity==="bottom"?"toastify-bottom":n.defaults.gravity,this.options.positionLeft=c.positionLeft||n.defaults.positionLeft,this.options.position=c.position||n.defaults.position,this.options.backgroundColor=c.backgroundColor||n.defaults.backgroundColor,this.options.avatar=c.avatar||n.defaults.avatar,this.options.className=c.className||n.defaults.className,this.options.stopOnFocus=c.stopOnFocus===void 0?n.defaults.stopOnFocus:c.stopOnFocus,this.options.onClick=c.onClick||n.defaults.onClick,this.options.offset=c.offset||n.defaults.offset,this.options.escapeMarkup=c.escapeMarkup!==void 0?c.escapeMarkup:n.defaults.escapeMarkup,this.options.ariaLive=c.ariaLive||n.defaults.ariaLive,this.options.style=c.style||n.defaults.style,c.backgroundColor&&(this.options.style.background=c.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var c=document.createElement("div");c.className="toastify on "+this.options.className,this.options.position?c.className+=" toastify-"+this.options.position:this.options.positionLeft===!0?(c.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):c.className+=" toastify-right",c.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.');for(var l in this.options.style)c.style[l]=this.options.style[l];if(this.options.ariaLive&&c.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)c.appendChild(this.options.node);else if(this.options.escapeMarkup?c.innerText=this.options.text:c.innerHTML=this.options.text,this.options.avatar!==""){var p=document.createElement("img");p.src=this.options.avatar,p.className="toastify-avatar",this.options.position=="left"||this.options.positionLeft===!0?c.appendChild(p):c.insertAdjacentElement("afterbegin",p)}if(this.options.close===!0){var m=document.createElement("button");m.type="button",m.setAttribute("aria-label","Close"),m.className="toast-close",m.innerHTML="&#10006;",m.addEventListener("click",(function(R){R.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}).bind(this));var y=window.innerWidth>0?window.innerWidth:screen.width;(this.options.position=="left"||this.options.positionLeft===!0)&&y>360?c.insertAdjacentElement("afterbegin",m):c.appendChild(m)}if(this.options.stopOnFocus&&this.options.duration>0){var v=this;c.addEventListener("mouseover",function(R){window.clearTimeout(c.timeOutValue)}),c.addEventListener("mouseleave",function(){c.timeOutValue=window.setTimeout(function(){v.removeElement(c)},v.options.duration)})}if(typeof this.options.destination<"u"&&c.addEventListener("click",(function(R){R.stopPropagation(),this.options.newWindow===!0?window.open(this.options.destination,"_blank"):window.location=this.options.destination}).bind(this)),typeof this.options.onClick=="function"&&typeof this.options.destination>"u"&&c.addEventListener("click",(function(R){R.stopPropagation(),this.options.onClick()}).bind(this)),typeof this.options.offset=="object"){var S=s("x",this.options),_=s("y",this.options),A=this.options.position=="left"?S:"-"+S,N=this.options.gravity=="toastify-top"?_:"-"+_;c.style.transform="translate("+A+","+N+")"}return c},showToast:function(){this.toastElement=this.buildToast();var c;if(typeof this.options.selector=="string"?c=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||typeof ShadowRoot<"u"&&this.options.selector instanceof ShadowRoot?c=this.options.selector:c=document.body,!c)throw"Root element is not defined";var l=n.defaults.oldestFirst?c.firstChild:c.lastChild;return c.insertBefore(this.toastElement,l),n.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout((function(){this.removeElement(this.toastElement)}).bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(c){c.className=c.className.replace(" on",""),window.setTimeout((function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),c.parentNode&&c.parentNode.removeChild(c),this.options.callback.call(c),n.reposition()}).bind(this),400)}},n.reposition=function(){for(var c={top:15,bottom:15},l={top:15,bottom:15},p={top:15,bottom:15},m=document.getElementsByClassName("toastify"),y,v=0;v<m.length;v++){o(m[v],"toastify-top")===!0?y="toastify-top":y="toastify-bottom";var S=m[v].offsetHeight;y=y.substr(9,y.length-1);var _=15,A=window.innerWidth>0?window.innerWidth:screen.width;A<=360?(m[v].style[y]=p[y]+"px",p[y]+=S+_):o(m[v],"toastify-left")===!0?(m[v].style[y]=c[y]+"px",c[y]+=S+_):(m[v].style[y]=l[y]+"px",l[y]+=S+_)}return this};function s(c,l){return l.offset[c]?isNaN(l.offset[c])?l.offset[c]:l.offset[c]+"px":"0px"}function o(c,l){return!c||typeof l!="string"?!1:!!(c.className&&c.className.trim().split(/\s+/gi).indexOf(l)>-1)}return n.lib.init.prototype=n.lib,n})}(Y1)),Y1.exports}var NE,Gx;function XP(){return Gx||(Gx=1,NE=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var n=typeof e.cycles=="boolean"?e.cycles:!1,r=e.cmp&&function(o){return function(c){return function(l,p){var m={key:l,value:c[l]},y={key:p,value:c[p]};return o(m,y)}}}(e.cmp),s=[];return function o(c){if(c&&c.toJSON&&typeof c.toJSON=="function"&&(c=c.toJSON()),c!==void 0){if(typeof c=="number")return isFinite(c)?""+c:"null";if(typeof c!="object")return JSON.stringify(c);var l,p;if(Array.isArray(c)){for(p="[",l=0;l<c.length;l++)l&&(p+=","),p+=o(c[l])||"null";return p+"]"}if(c===null)return"null";if(s.indexOf(c)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var m=s.push(c)-1,y=Object.keys(c).sort(r&&r(c));for(p="",l=0;l<y.length;l++){var v=y[l],S=o(c[v]);S&&(p&&(p+=","),p+=JSON.stringify(v)+":"+S)}return s.splice(m,1),"{"+p+"}"}}(t)}),NE}var RE,Hx;function WP(){if(Hx)return RE;Hx=1;var t=function(n,r){return n<r};function e(n){if(!(this instanceof e))return new e(n);this.array=[],this.size=0,this.compare=n||t}return e.prototype.clone=function(){var n=new e(this.compare);return n.size=this.size,n.array=this.array.slice(0,this.size),n},e.prototype.add=function(n){var r=this.size;this.array[this.size]=n,this.size+=1;for(var s,o;r>0&&(s=r-1>>1,o=this.array[s],!!this.compare(n,o));)this.array[r]=o,r=s;this.array[r]=n},e.prototype.heapify=function(n){this.array=n,this.size=n.length;var r;for(r=this.size>>1;r>=0;r--)this._percolateDown(r)},e.prototype._percolateUp=function(n,r){for(var s=this.array[n],o,c;n>0&&(o=n-1>>1,c=this.array[o],!(!r&&!this.compare(s,c)));)this.array[n]=c,n=o;this.array[n]=s},e.prototype._percolateDown=function(n){for(var r=this.size,s=this.size>>>1,o=this.array[n],c,l,p;n<s&&(c=(n<<1)+1,l=c+1,p=this.array[c],l<r&&this.compare(this.array[l],p)&&(c=l,p=this.array[l]),!!this.compare(p,o));)this.array[n]=p,n=c;this.array[n]=o},e.prototype._removeAt=function(n){if(!(n>this.size-1||n<0))return this._percolateUp(n,!0),this.poll()},e.prototype.remove=function(n){for(var r=0;r<this.size;r++)if(!this.compare(this.array[r],n)&&!this.compare(n,this.array[r]))return this._removeAt(r),!0;return!1},e.prototype.removeOne=function(n){if(typeof n=="function"){for(var r=0;r<this.size;r++)if(n(this.array[r]))return this._removeAt(r)}},e.prototype.removeMany=function(n,r){if(typeof n!="function"||this.size<1)return[];r=r?Math.min(r,this.size):this.size;for(var s=0,o=new Array(r),c=0,l=new Array(this.size);s<r&&!this.isEmpty();){var p=this.poll();n(p)?o[s++]=p:l[c++]=p}o.length=s;for(var m=0;m<c;)this.add(l[m++]);return o},e.prototype.peek=function(){if(this.size!=0)return this.array[0]},e.prototype.poll=function(){if(this.size!=0){var n=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,n}},e.prototype.replaceTop=function(n){if(this.size!=0){var r=this.array[0];return this.array[0]=n,this._percolateDown(0),r}},e.prototype.trim=function(){this.array=this.array.slice(0,this.size)},e.prototype.isEmpty=function(){return this.size===0},e.prototype.forEach=function(n){if(!(this.isEmpty()||typeof n!="function"))for(var r=0,s=this.clone();!s.isEmpty();)n(s.poll(),r++)},e.prototype.kSmallest=function(n){if(this.size==0||n<=0)return[];n=Math.min(this.size,n);const r=Math.min(this.size,2**(n-1)+1);if(r<2)return[this.peek()];const s=new e(this.compare);s.size=r,s.array=this.array.slice(0,r);const o=new Array(n);for(let c=0;c<n;c++)o[c]=s.poll();return o},RE=e,RE}var Xx;function VP(){if(Xx)return vc;Xx=1;var t=HP(),e=XP(),n=WP(),r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Lo<"u"?Lo:typeof self<"u"?self:{};function s(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}function o(h){if(Object.prototype.hasOwnProperty.call(h,"__esModule"))return h;var d=h.default;if(typeof d=="function"){var u=function b(){return this instanceof b?Reflect.construct(d,arguments,this.constructor):d.apply(this,arguments)};u.prototype=d.prototype}else u={};return Object.defineProperty(u,"__esModule",{value:!0}),Object.keys(h).forEach(function(b){var w=Object.getOwnPropertyDescriptor(h,b);Object.defineProperty(u,b,w.get?w:{enumerable:!0,get:function(){return h[b]}})}),u}var c,l={exports:{}};c||(c=1,function(h){var d=function(u){var b,w=Object.prototype,E=w.hasOwnProperty,T=Object.defineProperty||function(Xe,_e,Ie){Xe[_e]=Ie.value},I=typeof Symbol=="function"?Symbol:{},k=I.iterator||"@@iterator",O=I.asyncIterator||"@@asyncIterator",M=I.toStringTag||"@@toStringTag";function re(Xe,_e,Ie){return Object.defineProperty(Xe,_e,{value:Ie,enumerable:!0,configurable:!0,writable:!0}),Xe[_e]}try{re({},"")}catch{re=function(_e,Ie,Ze){return _e[Ie]=Ze}}function se(Xe,_e,Ie,Ze){var Be=_e&&_e.prototype instanceof xe?_e:xe,xn=Object.create(Be.prototype),gr=new zn(Ze||[]);return T(xn,"_invoke",{value:ze(Xe,Ie,gr)}),xn}function Y(Xe,_e,Ie){try{return{type:"normal",arg:Xe.call(_e,Ie)}}catch(Ze){return{type:"throw",arg:Ze}}}u.wrap=se;var be="suspendedStart",Pe="suspendedYield",oe="executing",we="completed",ve={};function xe(){}function ye(){}function ee(){}var te={};re(te,k,function(){return this});var ie=Object.getPrototypeOf,ce=ie&&ie(ie(Gn([])));ce&&ce!==w&&E.call(ce,k)&&(te=ce);var le=ee.prototype=xe.prototype=Object.create(te);function Ue(Xe){["next","throw","return"].forEach(function(_e){re(Xe,_e,function(Ie){return this._invoke(_e,Ie)})})}function Qe(Xe,_e){function Ie(Be,xn,gr,Ls){var Xr=Y(Xe[Be],Xe,xn);if(Xr.type!=="throw"){var tn=Xr.arg,yl=tn.value;return yl&&typeof yl=="object"&&E.call(yl,"__await")?_e.resolve(yl.__await).then(function(qn){Ie("next",qn,gr,Ls)},function(qn){Ie("throw",qn,gr,Ls)}):_e.resolve(yl).then(function(qn){tn.value=qn,gr(tn)},function(qn){return Ie("throw",qn,gr,Ls)})}Ls(Xr.arg)}var Ze;T(this,"_invoke",{value:function(Be,xn){function gr(){return new _e(function(Ls,Xr){Ie(Be,xn,Ls,Xr)})}return Ze=Ze?Ze.then(gr,gr):gr()}})}function ze(Xe,_e,Ie){var Ze=be;return function(Be,xn){if(Ze===oe)throw new Error("Generator is already running");if(Ze===we){if(Be==="throw")throw xn;return{value:b,done:!0}}for(Ie.method=Be,Ie.arg=xn;;){var gr=Ie.delegate;if(gr){var Ls=St(gr,Ie);if(Ls){if(Ls===ve)continue;return Ls}}if(Ie.method==="next")Ie.sent=Ie._sent=Ie.arg;else if(Ie.method==="throw"){if(Ze===be)throw Ze=we,Ie.arg;Ie.dispatchException(Ie.arg)}else Ie.method==="return"&&Ie.abrupt("return",Ie.arg);Ze=oe;var Xr=Y(Xe,_e,Ie);if(Xr.type==="normal"){if(Ze=Ie.done?we:Pe,Xr.arg===ve)continue;return{value:Xr.arg,done:Ie.done}}Xr.type==="throw"&&(Ze=we,Ie.method="throw",Ie.arg=Xr.arg)}}}function St(Xe,_e){var Ie=_e.method,Ze=Xe.iterator[Ie];if(Ze===b)return _e.delegate=null,Ie==="throw"&&Xe.iterator.return&&(_e.method="return",_e.arg=b,St(Xe,_e),_e.method==="throw")||Ie!=="return"&&(_e.method="throw",_e.arg=new TypeError("The iterator does not provide a '"+Ie+"' method")),ve;var Be=Y(Ze,Xe.iterator,_e.arg);if(Be.type==="throw")return _e.method="throw",_e.arg=Be.arg,_e.delegate=null,ve;var xn=Be.arg;return xn?xn.done?(_e[Xe.resultName]=xn.value,_e.next=Xe.nextLoc,_e.method!=="return"&&(_e.method="next",_e.arg=b),_e.delegate=null,ve):xn:(_e.method="throw",_e.arg=new TypeError("iterator result is not an object"),_e.delegate=null,ve)}function kt(Xe){var _e={tryLoc:Xe[0]};1 in Xe&&(_e.catchLoc=Xe[1]),2 in Xe&&(_e.finallyLoc=Xe[2],_e.afterLoc=Xe[3]),this.tryEntries.push(_e)}function Ct(Xe){var _e=Xe.completion||{};_e.type="normal",delete _e.arg,Xe.completion=_e}function zn(Xe){this.tryEntries=[{tryLoc:"root"}],Xe.forEach(kt,this),this.reset(!0)}function Gn(Xe){if(Xe!=null){var _e=Xe[k];if(_e)return _e.call(Xe);if(typeof Xe.next=="function")return Xe;if(!isNaN(Xe.length)){var Ie=-1,Ze=function Be(){for(;++Ie<Xe.length;)if(E.call(Xe,Ie))return Be.value=Xe[Ie],Be.done=!1,Be;return Be.value=b,Be.done=!0,Be};return Ze.next=Ze}}throw new TypeError(typeof Xe+" is not iterable")}return ye.prototype=ee,T(le,"constructor",{value:ee,configurable:!0}),T(ee,"constructor",{value:ye,configurable:!0}),ye.displayName=re(ee,M,"GeneratorFunction"),u.isGeneratorFunction=function(Xe){var _e=typeof Xe=="function"&&Xe.constructor;return!!_e&&(_e===ye||(_e.displayName||_e.name)==="GeneratorFunction")},u.mark=function(Xe){return Object.setPrototypeOf?Object.setPrototypeOf(Xe,ee):(Xe.__proto__=ee,re(Xe,M,"GeneratorFunction")),Xe.prototype=Object.create(le),Xe},u.awrap=function(Xe){return{__await:Xe}},Ue(Qe.prototype),re(Qe.prototype,O,function(){return this}),u.AsyncIterator=Qe,u.async=function(Xe,_e,Ie,Ze,Be){Be===void 0&&(Be=Promise);var xn=new Qe(se(Xe,_e,Ie,Ze),Be);return u.isGeneratorFunction(_e)?xn:xn.next().then(function(gr){return gr.done?gr.value:xn.next()})},Ue(le),re(le,M,"Generator"),re(le,k,function(){return this}),re(le,"toString",function(){return"[object Generator]"}),u.keys=function(Xe){var _e=Object(Xe),Ie=[];for(var Ze in _e)Ie.push(Ze);return Ie.reverse(),function Be(){for(;Ie.length;){var xn=Ie.pop();if(xn in _e)return Be.value=xn,Be.done=!1,Be}return Be.done=!0,Be}},u.values=Gn,zn.prototype={constructor:zn,reset:function(Xe){if(this.prev=0,this.next=0,this.sent=this._sent=b,this.done=!1,this.delegate=null,this.method="next",this.arg=b,this.tryEntries.forEach(Ct),!Xe)for(var _e in this)_e.charAt(0)==="t"&&E.call(this,_e)&&!isNaN(+_e.slice(1))&&(this[_e]=b)},stop:function(){this.done=!0;var Xe=this.tryEntries[0].completion;if(Xe.type==="throw")throw Xe.arg;return this.rval},dispatchException:function(Xe){if(this.done)throw Xe;var _e=this;function Ie(Xr,tn){return xn.type="throw",xn.arg=Xe,_e.next=Xr,tn&&(_e.method="next",_e.arg=b),!!tn}for(var Ze=this.tryEntries.length-1;Ze>=0;--Ze){var Be=this.tryEntries[Ze],xn=Be.completion;if(Be.tryLoc==="root")return Ie("end");if(Be.tryLoc<=this.prev){var gr=E.call(Be,"catchLoc"),Ls=E.call(Be,"finallyLoc");if(gr&&Ls){if(this.prev<Be.catchLoc)return Ie(Be.catchLoc,!0);if(this.prev<Be.finallyLoc)return Ie(Be.finallyLoc)}else if(gr){if(this.prev<Be.catchLoc)return Ie(Be.catchLoc,!0)}else{if(!Ls)throw new Error("try statement without catch or finally");if(this.prev<Be.finallyLoc)return Ie(Be.finallyLoc)}}}},abrupt:function(Xe,_e){for(var Ie=this.tryEntries.length-1;Ie>=0;--Ie){var Ze=this.tryEntries[Ie];if(Ze.tryLoc<=this.prev&&E.call(Ze,"finallyLoc")&&this.prev<Ze.finallyLoc){var Be=Ze;break}}Be&&(Xe==="break"||Xe==="continue")&&Be.tryLoc<=_e&&_e<=Be.finallyLoc&&(Be=null);var xn=Be?Be.completion:{};return xn.type=Xe,xn.arg=_e,Be?(this.method="next",this.next=Be.finallyLoc,ve):this.complete(xn)},complete:function(Xe,_e){if(Xe.type==="throw")throw Xe.arg;return Xe.type==="break"||Xe.type==="continue"?this.next=Xe.arg:Xe.type==="return"?(this.rval=this.arg=Xe.arg,this.method="return",this.next="end"):Xe.type==="normal"&&_e&&(this.next=_e),ve},finish:function(Xe){for(var _e=this.tryEntries.length-1;_e>=0;--_e){var Ie=this.tryEntries[_e];if(Ie.finallyLoc===Xe)return this.complete(Ie.completion,Ie.afterLoc),Ct(Ie),ve}},catch:function(Xe){for(var _e=this.tryEntries.length-1;_e>=0;--_e){var Ie=this.tryEntries[_e];if(Ie.tryLoc===Xe){var Ze=Ie.completion;if(Ze.type==="throw"){var Be=Ze.arg;Ct(Ie)}return Be}}throw new Error("illegal catch attempt")},delegateYield:function(Xe,_e,Ie){return this.delegate={iterator:Gn(Xe),resultName:_e,nextLoc:Ie},this.method==="next"&&(this.arg=b),ve}},u}(h.exports);try{globalThis.regeneratorRuntime=d}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=d:Function("r","regeneratorRuntime = r")(d)}}(l));const p={CROQUET_VERSION:"2.0.4"},m=window&&window.location.hostname.endsWith("croquet.studio");let y="",v="";function S(h,d){if(d)for(const u of d.split("&")){const b=u.split("="),w=b[0];let E=!0;if(b.length>1&&(E=decodeURIComponent(b.slice(1).join("=")),E.match(/^(true|false|null|[0-9.]*|["[{].*)$/)))try{E=JSON.parse(E)}catch{E[0]==="["&&(E=E.slice(1,-1).split(","))}h[w]=E}}const _=new class{constructor(){this.getSession(),S(this,window.location.search.slice(1)),S(this,m?window.location.hash.slice(1):v),window.location.pathname.indexOf("/ar.html")>=0&&(this.ar=!0)}has(h,d){let u=arguments.length>2&&arguments[2]!==void 0&&arguments[2];typeof u=="string"&&(u=this.isHost(u));const b=this[h];if(typeof b!="string")return u;const w=b.split(",");return u===!0&&(d=`no${d}`),d.endsWith("s")&&(d=d.slice(0,-1)),w.includes(d)||w.includes(`${d}s`)?!u:u}getSession(){if(m){const h=/^\/([^/]+)\/(.*)$/,d=window.location.pathname.match(h);if(d)return y=d[1],d[2]}else{const h=/^#([^&]+)&?(.*)$/,d=window.location.hash.match(h);if(d)return d[1].includes("=")?(v=`${d[1]}&${d[2]}`,""):(v=d[2],d[1])}return typeof this.session=="string"?(v=window.location.hash.slice(1),this.session):""}setSession(h){let d=arguments.length>1&&arguments[1]!==void 0&&arguments[1];m==null&&this.getSession();const{search:u,hash:b}=window.location,w=m?`/${y}/${h}${u}${b}`:`#${h}${v?"&"+v:""}`;d?window.history.replaceState({},"",w):window.history.pushState({},"",w)}isHost(h){const d=window.location.hostname;return d===h?!0:h!=="localhost"?!1:d.endsWith(".ngrok.io")||d==="croquet.io"&&window.location.pathname.match(/^\/(dev|files)\//)?!0:window.location.protocol==="file:"||["127.0.0.1","[::1]"].includes(d)}isLocalhost(){return this.isHost("localhost")}};var A,N=256,R=Math.pow(N,6),$=Math.pow(2,52),G=2*$,F=255;function X(h,d){var u=[];if((d=d||{}).entropy)throw new Error("this version of seedrandom does not support entropy");if(h==null&&!d.state)throw new Error("this version of seedrandom requires a seed");(function(E,T){for(var I,k=E+"",O=0;O<k.length;)T[F&O]=F&(I^=19*T[F&O])+k.charCodeAt(O++);return M=T,String.fromCharCode.apply(0,M);var M})(Z(h,3),u);var b=new j(u),w=function(){for(var E=b.g(6),T=R,I=0;E<$;)E=(E+I)*N,T*=N,I=b.g(1);for(;E>=G;)E/=2,T/=2,I>>>=1;return(E+I)/T};return w.int32=function(){return 0|b.g(4)},w.quick=function(){return b.g(4)/4294967296},w.double=w,(d.pass||function(E,T){return T&&(T.S&&L(T,b),E.state=function(){return L(b,{})}),E})(w,d.state)}function j(h){var d,u=h.length,b=this,w=0,E=b.i=b.j=0,T=b.S=[];for(u||(h=[u++]);w<N;)T[w]=w++;for(w=0;w<N;w++)T[w]=T[E=F&E+h[w%u]+(d=T[w])],T[E]=d;(b.g=function(I){for(var k,O=0,M=b.i,re=b.j,se=b.S;I--;)k=se[M=F&M+1],O=O*N+se[F&(se[M]=se[re=F&re+k])+(se[re]=k)];return b.i=M,b.j=re,O})(N)}function L(h,d){return d.i=h.i,d.j=h.j,d.S=h.S.slice(),d}function Z(h,d){var u,b=[],w=typeof h;if(d&&w=="object")for(u in h)try{b.push(Z(h[u],d-1))}catch{}return b.length?b:w=="string"?h:h+"\0"}(function(){function h(ee){this.mode=u.MODE_8BIT_BYTE,this.data=ee,this.parsedData=[];for(var te=0,ie=this.data.length;te<ie;te++){var ce=[],le=this.data.charCodeAt(te);le>65536?(ce[0]=240|(1835008&le)>>>18,ce[1]=128|(258048&le)>>>12,ce[2]=128|(4032&le)>>>6,ce[3]=128|63&le):le>2048?(ce[0]=224|(61440&le)>>>12,ce[1]=128|(4032&le)>>>6,ce[2]=128|63&le):le>128?(ce[0]=192|(1984&le)>>>6,ce[1]=128|63&le):ce[0]=le,this.parsedData.push(ce)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function d(ee,te){this.typeNumber=ee,this.errorCorrectLevel=te,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}h.prototype={getLength:function(ee){return this.parsedData.length},write:function(ee){for(var te=0,ie=this.parsedData.length;te<ie;te++)ee.put(this.parsedData[te],8)}},d.prototype={addData:function(ee){var te=new h(ee);this.dataList.push(te),this.dataCache=null},isDark:function(ee,te){if(ee<0||this.moduleCount<=ee||te<0||this.moduleCount<=te)throw new Error(ee+","+te);return this.modules[ee][te]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(ee,te){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var ie=0;ie<this.moduleCount;ie++){this.modules[ie]=new Array(this.moduleCount);for(var ce=0;ce<this.moduleCount;ce++)this.modules[ie][ce]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(ee,te),this.typeNumber>=7&&this.setupTypeNumber(ee),this.dataCache==null&&(this.dataCache=d.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,te)},setupPositionProbePattern:function(ee,te){for(var ie=-1;ie<=7;ie++)if(!(ee+ie<=-1||this.moduleCount<=ee+ie))for(var ce=-1;ce<=7;ce++)te+ce<=-1||this.moduleCount<=te+ce||(this.modules[ee+ie][te+ce]=0<=ie&&ie<=6&&(ce==0||ce==6)||0<=ce&&ce<=6&&(ie==0||ie==6)||2<=ie&&ie<=4&&2<=ce&&ce<=4)},getBestMaskPattern:function(){for(var ee=0,te=0,ie=0;ie<8;ie++){this.makeImpl(!0,ie);var ce=se.getLostPoint(this);(ie==0||ee>ce)&&(ee=ce,te=ie)}return te},createMovieClip:function(ee,te,ie){var ce=ee.createEmptyMovieClip(te,ie);this.make();for(var le=0;le<this.modules.length;le++)for(var Ue=1*le,Qe=0;Qe<this.modules[le].length;Qe++){var ze=1*Qe;this.modules[le][Qe]&&(ce.beginFill(0,100),ce.moveTo(ze,Ue),ce.lineTo(ze+1,Ue),ce.lineTo(ze+1,Ue+1),ce.lineTo(ze,Ue+1),ce.endFill())}return ce},setupTimingPattern:function(){for(var ee=8;ee<this.moduleCount-8;ee++)this.modules[ee][6]==null&&(this.modules[ee][6]=ee%2==0);for(var te=8;te<this.moduleCount-8;te++)this.modules[6][te]==null&&(this.modules[6][te]=te%2==0)},setupPositionAdjustPattern:function(){for(var ee=se.getPatternPosition(this.typeNumber),te=0;te<ee.length;te++)for(var ie=0;ie<ee.length;ie++){var ce=ee[te],le=ee[ie];if(this.modules[ce][le]==null)for(var Ue=-2;Ue<=2;Ue++)for(var Qe=-2;Qe<=2;Qe++)this.modules[ce+Ue][le+Qe]=Ue==-2||Ue==2||Qe==-2||Qe==2||Ue==0&&Qe==0}},setupTypeNumber:function(ee){for(var te=se.getBCHTypeNumber(this.typeNumber),ie=0;ie<18;ie++){var ce=!ee&&(te>>ie&1)==1;this.modules[Math.floor(ie/3)][ie%3+this.moduleCount-8-3]=ce}for(ie=0;ie<18;ie++)ce=!ee&&(te>>ie&1)==1,this.modules[ie%3+this.moduleCount-8-3][Math.floor(ie/3)]=ce},setupTypeInfo:function(ee,te){for(var ie=this.errorCorrectLevel<<3|te,ce=se.getBCHTypeInfo(ie),le=0;le<15;le++){var Ue=!ee&&(ce>>le&1)==1;le<6?this.modules[le][8]=Ue:le<8?this.modules[le+1][8]=Ue:this.modules[this.moduleCount-15+le][8]=Ue}for(le=0;le<15;le++)Ue=!ee&&(ce>>le&1)==1,le<8?this.modules[8][this.moduleCount-le-1]=Ue:le<9?this.modules[8][15-le-1+1]=Ue:this.modules[8][15-le-1]=Ue;this.modules[this.moduleCount-8][8]=!ee},mapData:function(ee,te){for(var ie=-1,ce=this.moduleCount-1,le=7,Ue=0,Qe=this.moduleCount-1;Qe>0;Qe-=2)for(Qe==6&&Qe--;;){for(var ze=0;ze<2;ze++)if(this.modules[ce][Qe-ze]==null){var St=!1;Ue<ee.length&&(St=(ee[Ue]>>>le&1)==1),se.getMask(te,ce,Qe-ze)&&(St=!St),this.modules[ce][Qe-ze]=St,--le==-1&&(Ue++,le=7)}if((ce+=ie)<0||this.moduleCount<=ce){ce-=ie,ie=-ie;break}}}},d.PAD0=236,d.PAD1=17,d.createData=function(ee,te,ie){for(var ce=oe.getRSBlocks(ee,te),le=new we,Ue=0;Ue<ie.length;Ue++){var Qe=ie[Ue];le.put(Qe.mode,4),le.put(Qe.getLength(),se.getLengthInBits(Qe.mode,ee)),Qe.write(le)}var ze=0;for(Ue=0;Ue<ce.length;Ue++)ze+=ce[Ue].dataCount;if(le.getLengthInBits()>8*ze)throw new Error("code length overflow. ("+le.getLengthInBits()+">"+8*ze+")");for(le.getLengthInBits()+4<=8*ze&&le.put(0,4);le.getLengthInBits()%8!=0;)le.putBit(!1);for(;!(le.getLengthInBits()>=8*ze||(le.put(d.PAD0,8),le.getLengthInBits()>=8*ze));)le.put(d.PAD1,8);return d.createBytes(le,ce)},d.createBytes=function(ee,te){for(var ie=0,ce=0,le=0,Ue=new Array(te.length),Qe=new Array(te.length),ze=0;ze<te.length;ze++){var St=te[ze].dataCount,kt=te[ze].totalCount-St;ce=Math.max(ce,St),le=Math.max(le,kt),Ue[ze]=new Array(St);for(var Ct=0;Ct<Ue[ze].length;Ct++)Ue[ze][Ct]=255&ee.buffer[Ct+ie];ie+=St;var zn=se.getErrorCorrectPolynomial(kt),Gn=new Pe(Ue[ze],zn.getLength()-1).mod(zn);for(Qe[ze]=new Array(zn.getLength()-1),Ct=0;Ct<Qe[ze].length;Ct++){var Xe=Ct+Gn.getLength()-Qe[ze].length;Qe[ze][Ct]=Xe>=0?Gn.get(Xe):0}}var _e=0;for(Ct=0;Ct<te.length;Ct++)_e+=te[Ct].totalCount;var Ie=new Array(_e),Ze=0;for(Ct=0;Ct<ce;Ct++)for(ze=0;ze<te.length;ze++)Ct<Ue[ze].length&&(Ie[Ze++]=Ue[ze][Ct]);for(Ct=0;Ct<le;Ct++)for(ze=0;ze<te.length;ze++)Ct<Qe[ze].length&&(Ie[Ze++]=Qe[ze][Ct]);return Ie};for(var u={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},b={L:1,M:0,Q:3,H:2},w=0,E=1,T=2,I=3,k=4,O=5,M=6,re=7,se={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(ee){for(var te=ee<<10;se.getBCHDigit(te)-se.getBCHDigit(se.G15)>=0;)te^=se.G15<<se.getBCHDigit(te)-se.getBCHDigit(se.G15);return(ee<<10|te)^se.G15_MASK},getBCHTypeNumber:function(ee){for(var te=ee<<12;se.getBCHDigit(te)-se.getBCHDigit(se.G18)>=0;)te^=se.G18<<se.getBCHDigit(te)-se.getBCHDigit(se.G18);return ee<<12|te},getBCHDigit:function(ee){for(var te=0;ee!=0;)te++,ee>>>=1;return te},getPatternPosition:function(ee){return se.PATTERN_POSITION_TABLE[ee-1]},getMask:function(ee,te,ie){switch(ee){case w:return(te+ie)%2==0;case E:return te%2==0;case T:return ie%3==0;case I:return(te+ie)%3==0;case k:return(Math.floor(te/2)+Math.floor(ie/3))%2==0;case O:return te*ie%2+te*ie%3==0;case M:return(te*ie%2+te*ie%3)%2==0;case re:return(te*ie%3+(te+ie)%2)%2==0;default:throw new Error("bad maskPattern:"+ee)}},getErrorCorrectPolynomial:function(ee){for(var te=new Pe([1],0),ie=0;ie<ee;ie++)te=te.multiply(new Pe([1,Y.gexp(ie)],0));return te},getLengthInBits:function(ee,te){if(1<=te&&te<10)switch(ee){case u.MODE_NUMBER:return 10;case u.MODE_ALPHA_NUM:return 9;case u.MODE_8BIT_BYTE:case u.MODE_KANJI:return 8;default:throw new Error("mode:"+ee)}else if(te<27)switch(ee){case u.MODE_NUMBER:return 12;case u.MODE_ALPHA_NUM:return 11;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 10;default:throw new Error("mode:"+ee)}else{if(!(te<41))throw new Error("type:"+te);switch(ee){case u.MODE_NUMBER:return 14;case u.MODE_ALPHA_NUM:return 13;case u.MODE_8BIT_BYTE:return 16;case u.MODE_KANJI:return 12;default:throw new Error("mode:"+ee)}}},getLostPoint:function(ee){for(var te=ee.getModuleCount(),ie=0,ce=0;ce<te;ce++)for(var le=0;le<te;le++){for(var Ue=0,Qe=ee.isDark(ce,le),ze=-1;ze<=1;ze++)if(!(ce+ze<0||te<=ce+ze))for(var St=-1;St<=1;St++)le+St<0||te<=le+St||ze==0&&St==0||Qe==ee.isDark(ce+ze,le+St)&&Ue++;Ue>5&&(ie+=3+Ue-5)}for(ce=0;ce<te-1;ce++)for(le=0;le<te-1;le++){var kt=0;ee.isDark(ce,le)&&kt++,ee.isDark(ce+1,le)&&kt++,ee.isDark(ce,le+1)&&kt++,ee.isDark(ce+1,le+1)&&kt++,kt!=0&&kt!=4||(ie+=3)}for(ce=0;ce<te;ce++)for(le=0;le<te-6;le++)ee.isDark(ce,le)&&!ee.isDark(ce,le+1)&&ee.isDark(ce,le+2)&&ee.isDark(ce,le+3)&&ee.isDark(ce,le+4)&&!ee.isDark(ce,le+5)&&ee.isDark(ce,le+6)&&(ie+=40);for(le=0;le<te;le++)for(ce=0;ce<te-6;ce++)ee.isDark(ce,le)&&!ee.isDark(ce+1,le)&&ee.isDark(ce+2,le)&&ee.isDark(ce+3,le)&&ee.isDark(ce+4,le)&&!ee.isDark(ce+5,le)&&ee.isDark(ce+6,le)&&(ie+=40);var Ct=0;for(le=0;le<te;le++)for(ce=0;ce<te;ce++)ee.isDark(ce,le)&&Ct++;return ie+=10*(Math.abs(100*Ct/te/te-50)/5)}},Y={glog:function(ee){if(ee<1)throw new Error("glog("+ee+")");return Y.LOG_TABLE[ee]},gexp:function(ee){for(;ee<0;)ee+=255;for(;ee>=256;)ee-=255;return Y.EXP_TABLE[ee]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},be=0;be<8;be++)Y.EXP_TABLE[be]=1<<be;for(be=8;be<256;be++)Y.EXP_TABLE[be]=Y.EXP_TABLE[be-4]^Y.EXP_TABLE[be-5]^Y.EXP_TABLE[be-6]^Y.EXP_TABLE[be-8];for(be=0;be<255;be++)Y.LOG_TABLE[Y.EXP_TABLE[be]]=be;function Pe(ee,te){if(ee.length==null)throw new Error(ee.length+"/"+te);for(var ie=0;ie<ee.length&&ee[ie]==0;)ie++;this.num=new Array(ee.length-ie+te);for(var ce=0;ce<ee.length-ie;ce++)this.num[ce]=ee[ce+ie]}function oe(ee,te){this.totalCount=ee,this.dataCount=te}function we(){this.buffer=[],this.length=0}Pe.prototype={get:function(ee){return this.num[ee]},getLength:function(){return this.num.length},multiply:function(ee){for(var te=new Array(this.getLength()+ee.getLength()-1),ie=0;ie<this.getLength();ie++)for(var ce=0;ce<ee.getLength();ce++)te[ie+ce]^=Y.gexp(Y.glog(this.get(ie))+Y.glog(ee.get(ce)));return new Pe(te,0)},mod:function(ee){if(this.getLength()-ee.getLength()<0)return this;for(var te=Y.glog(this.get(0))-Y.glog(ee.get(0)),ie=new Array(this.getLength()),ce=0;ce<this.getLength();ce++)ie[ce]=this.get(ce);for(ce=0;ce<ee.getLength();ce++)ie[ce]^=Y.gexp(Y.glog(ee.get(ce))+te);return new Pe(ie,0).mod(ee)}},oe.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],oe.getRSBlocks=function(ee,te){var ie=oe.getRsBlockTable(ee,te);if(ie==null)throw new Error("bad rs block @ typeNumber:"+ee+"/errorCorrectLevel:"+te);for(var ce=ie.length/3,le=[],Ue=0;Ue<ce;Ue++)for(var Qe=ie[3*Ue+0],ze=ie[3*Ue+1],St=ie[3*Ue+2],kt=0;kt<Qe;kt++)le.push(new oe(ze,St));return le},oe.getRsBlockTable=function(ee,te){switch(te){case b.L:return oe.RS_BLOCK_TABLE[4*(ee-1)+0];case b.M:return oe.RS_BLOCK_TABLE[4*(ee-1)+1];case b.Q:return oe.RS_BLOCK_TABLE[4*(ee-1)+2];case b.H:return oe.RS_BLOCK_TABLE[4*(ee-1)+3];default:return}},we.prototype={get:function(ee){var te=Math.floor(ee/8);return(this.buffer[te]>>>7-ee%8&1)==1},put:function(ee,te){for(var ie=0;ie<te;ie++)this.putBit((ee>>>te-ie-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(ee){var te=Math.floor(this.length/8);this.buffer.length<=te&&this.buffer.push(0),ee&&(this.buffer[te]|=128>>>this.length%8),this.length++}};var ve=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],xe=function(){var ee=function(te,ie){this._bIsPainted=!1,this._htOption=ie,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=ie.width,this._elCanvas.height=ie.height,te.appendChild(this._elCanvas),this._el=te,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._bSupportDataURI=null};return ee.prototype.draw=function(te){var ie=this._oContext,ce=this._htOption,le=te.getModuleCount(),Ue=ce.width/le,Qe=ce.height/le,ze=Math.round(Ue),St=Math.round(Qe);this.clear();for(var kt=0;kt<le;kt++)for(var Ct=0;Ct<le;Ct++){var zn=te.isDark(kt,Ct),Gn=Ct*Ue,Xe=kt*Qe;ie.strokeStyle=zn?ce.colorDark:ce.colorLight,ie.lineWidth=1,ie.fillStyle=zn?ce.colorDark:ce.colorLight,ie.fillRect(Gn,Xe,Ue,Qe),ie.strokeRect(Math.floor(Gn)+.5,Math.floor(Xe)+.5,ze,St),ie.strokeRect(Math.ceil(Gn)-.5,Math.ceil(Xe)-.5,ze,St)}this._bIsPainted=!0},ee.prototype.isPainted=function(){return this._bIsPainted},ee.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},ee.prototype.round=function(te){return te&&Math.floor(1e3*te)/1e3},ee}();function ye(ee,te){for(var ie=1,ce=function(ze){var St=encodeURI(ze).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return St.length+(St.length!=ze?3:0)}(ee),le=0,Ue=ve.length;le<=Ue;le++){var Qe=0;switch(te){case b.L:Qe=ve[le][0];break;case b.M:Qe=ve[le][1];break;case b.Q:Qe=ve[le][2];break;case b.H:Qe=ve[le][3]}if(ce<=Qe)break;ie++}if(ie>ve.length)throw new Error("Too long data");return ie}A=function(ee,te){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:b.H},typeof te=="string"&&(te={text:te}),te)for(var ie in te)this._htOption[ie]=te[ie];typeof ee=="string"&&(ee=document.getElementById(ee)),this._htOption.useSVG&&(xe=svgDrawer),this._el=ee,this._oQRCode=null,this._oDrawing=new xe(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},A.prototype.makeCode=function(ee){this._oQRCode=new d(ye(ee,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(ee),this._oQRCode.make(),this._oDrawing.draw(this._oQRCode)},A.prototype.clear=function(){this._oDrawing.clear()},A.prototype.getCanvas=function(){for(let ee=0;ee<this._el.children.length;ee++){const te=this._el.children[ee];if(te.tagName==="CANVAS")return te}return null},A.CorrectLevel=b})();var U=A,D={exports:{}},B,W={exports:{}},K=o(Object.freeze({__proto__:null,default:{}}));function he(){return B||(B=1,W.exports=(h=h||function(d,u){var b;if(typeof window<"u"&&window.crypto&&(b=window.crypto),typeof self<"u"&&self.crypto&&(b=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(b=globalThis.crypto),!b&&typeof window<"u"&&window.msCrypto&&(b=window.msCrypto),!b&&r!==void 0&&r.crypto&&(b=r.crypto),!b)try{b=K}catch{}var w=function(){if(b){if(typeof b.getRandomValues=="function")try{return b.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof b.randomBytes=="function")try{return b.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},E=Object.create||function(){function oe(){}return function(we){var ve;return oe.prototype=we,ve=new oe,oe.prototype=null,ve}}(),T={},I=T.lib={},k=I.Base={extend:function(oe){var we=E(this);return oe&&we.mixIn(oe),we.hasOwnProperty("init")&&this.init!==we.init||(we.init=function(){we.$super.init.apply(this,arguments)}),we.init.prototype=we,we.$super=this,we},create:function(){var oe=this.extend();return oe.init.apply(oe,arguments),oe},init:function(){},mixIn:function(oe){for(var we in oe)oe.hasOwnProperty(we)&&(this[we]=oe[we]);oe.hasOwnProperty("toString")&&(this.toString=oe.toString)},clone:function(){return this.init.prototype.extend(this)}},O=I.WordArray=k.extend({init:function(oe,we){oe=this.words=oe||[],this.sigBytes=we!=u?we:4*oe.length},toString:function(oe){return(oe||re).stringify(this)},concat:function(oe){var we=this.words,ve=oe.words,xe=this.sigBytes,ye=oe.sigBytes;if(this.clamp(),xe%4)for(var ee=0;ee<ye;ee++){var te=ve[ee>>>2]>>>24-ee%4*8&255;we[xe+ee>>>2]|=te<<24-(xe+ee)%4*8}else for(var ie=0;ie<ye;ie+=4)we[xe+ie>>>2]=ve[ie>>>2];return this.sigBytes+=ye,this},clamp:function(){var oe=this.words,we=this.sigBytes;oe[we>>>2]&=4294967295<<32-we%4*8,oe.length=d.ceil(we/4)},clone:function(){var oe=k.clone.call(this);return oe.words=this.words.slice(0),oe},random:function(oe){for(var we=[],ve=0;ve<oe;ve+=4)we.push(w());return new O.init(we,oe)}}),M=T.enc={},re=M.Hex={stringify:function(oe){for(var we=oe.words,ve=oe.sigBytes,xe=[],ye=0;ye<ve;ye++){var ee=we[ye>>>2]>>>24-ye%4*8&255;xe.push((ee>>>4).toString(16)),xe.push((15&ee).toString(16))}return xe.join("")},parse:function(oe){for(var we=oe.length,ve=[],xe=0;xe<we;xe+=2)ve[xe>>>3]|=parseInt(oe.substr(xe,2),16)<<24-xe%8*4;return new O.init(ve,we/2)}},se=M.Latin1={stringify:function(oe){for(var we=oe.words,ve=oe.sigBytes,xe=[],ye=0;ye<ve;ye++){var ee=we[ye>>>2]>>>24-ye%4*8&255;xe.push(String.fromCharCode(ee))}return xe.join("")},parse:function(oe){for(var we=oe.length,ve=[],xe=0;xe<we;xe++)ve[xe>>>2]|=(255&oe.charCodeAt(xe))<<24-xe%4*8;return new O.init(ve,we)}},Y=M.Utf8={stringify:function(oe){try{return decodeURIComponent(escape(se.stringify(oe)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(oe){return se.parse(unescape(encodeURIComponent(oe)))}},be=I.BufferedBlockAlgorithm=k.extend({reset:function(){this._data=new O.init,this._nDataBytes=0},_append:function(oe){typeof oe=="string"&&(oe=Y.parse(oe)),this._data.concat(oe),this._nDataBytes+=oe.sigBytes},_process:function(oe){var we,ve=this._data,xe=ve.words,ye=ve.sigBytes,ee=this.blockSize,te=ye/(4*ee),ie=(te=oe?d.ceil(te):d.max((0|te)-this._minBufferSize,0))*ee,ce=d.min(4*ie,ye);if(ie){for(var le=0;le<ie;le+=ee)this._doProcessBlock(xe,le);we=xe.splice(0,ie),ve.sigBytes-=ce}return new O.init(we,ce)},clone:function(){var oe=k.clone.call(this);return oe._data=this._data.clone(),oe},_minBufferSize:0});I.Hasher=be.extend({cfg:k.extend(),init:function(oe){this.cfg=this.cfg.extend(oe),this.reset()},reset:function(){be.reset.call(this),this._doReset()},update:function(oe){return this._append(oe),this._process(),this},finalize:function(oe){return oe&&this._append(oe),this._doFinalize()},blockSize:16,_createHelper:function(oe){return function(we,ve){return new oe.init(ve).finalize(we)}},_createHmacHelper:function(oe){return function(we,ve){return new Pe.HMAC.init(oe,ve).finalize(we)}}});var Pe=T.algo={};return T}(Math),h)),W.exports;var h}var pe,V,P,ne=(pe||(pe=1,D.exports=(V=he(),function(){if(typeof ArrayBuffer=="function"){var h=V.lib.WordArray,d=h.init,u=h.init=function(b){if(b instanceof ArrayBuffer&&(b=new Uint8Array(b)),(b instanceof Int8Array||typeof Uint8ClampedArray<"u"&&b instanceof Uint8ClampedArray||b instanceof Int16Array||b instanceof Uint16Array||b instanceof Int32Array||b instanceof Uint32Array||b instanceof Float32Array||b instanceof Float64Array)&&(b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength)),b instanceof Uint8Array){for(var w=b.byteLength,E=[],T=0;T<w;T++)E[T>>>2]|=b[T]<<24-T%4*8;d.call(this,E,w)}else d.apply(this,arguments)};u.prototype=h}}(),V.lib.WordArray)),D.exports),de=s(ne),me={exports:{}};function H(){return P||(P=1,me.exports=function(h){return function(d){var u=h,b=u.lib,w=b.WordArray,E=b.Hasher,T=u.algo,I=[],k=[];(function(){function re(Pe){for(var oe=d.sqrt(Pe),we=2;we<=oe;we++)if(!(Pe%we))return!1;return!0}function se(Pe){return 4294967296*(Pe-(0|Pe))|0}for(var Y=2,be=0;be<64;)re(Y)&&(be<8&&(I[be]=se(d.pow(Y,.5))),k[be]=se(d.pow(Y,1/3)),be++),Y++})();var O=[],M=T.SHA256=E.extend({_doReset:function(){this._hash=new w.init(I.slice(0))},_doProcessBlock:function(re,se){for(var Y=this._hash.words,be=Y[0],Pe=Y[1],oe=Y[2],we=Y[3],ve=Y[4],xe=Y[5],ye=Y[6],ee=Y[7],te=0;te<64;te++){if(te<16)O[te]=0|re[se+te];else{var ie=O[te-15],ce=(ie<<25|ie>>>7)^(ie<<14|ie>>>18)^ie>>>3,le=O[te-2],Ue=(le<<15|le>>>17)^(le<<13|le>>>19)^le>>>10;O[te]=ce+O[te-7]+Ue+O[te-16]}var Qe=be&Pe^be&oe^Pe&oe,ze=(be<<30|be>>>2)^(be<<19|be>>>13)^(be<<10|be>>>22),St=ee+((ve<<26|ve>>>6)^(ve<<21|ve>>>11)^(ve<<7|ve>>>25))+(ve&xe^~ve&ye)+k[te]+O[te];ee=ye,ye=xe,xe=ve,ve=we+St|0,we=oe,oe=Pe,Pe=be,be=St+(ze+Qe)|0}Y[0]=Y[0]+be|0,Y[1]=Y[1]+Pe|0,Y[2]=Y[2]+oe|0,Y[3]=Y[3]+we|0,Y[4]=Y[4]+ve|0,Y[5]=Y[5]+xe|0,Y[6]=Y[6]+ye|0,Y[7]=Y[7]+ee|0},_doFinalize:function(){var re=this._data,se=re.words,Y=8*this._nDataBytes,be=8*re.sigBytes;return se[be>>>5]|=128<<24-be%32,se[14+(be+64>>>9<<4)]=d.floor(Y/4294967296),se[15+(be+64>>>9<<4)]=Y,re.sigBytes=4*se.length,this._process(),this._hash},clone:function(){var re=E.clone.call(this);return re._hash=this._hash.clone(),re}});u.SHA256=E._createHelper(M),u.HmacSHA256=E._createHmacHelper(M)}(Math),h.SHA256}(he())),me.exports}var fe=s(H());const Ae=p.CROQUET_PLATFORM==="node";let ke;function $e(h){const d=h.sigBytes,u=h.words,b=new Uint8Array(d);let w=0,E=0;for(;w<d;){const T=u[E++];if(b[w++]=(4278190080&T)>>>24,w===d||(b[w++]=(16711680&T)>>>16,w===d)||(b[w++]=(65280&T)>>>8,w===d))break;b[w++]=255&T}return b}function Ve(h){function d(b){const w=b.indexOf("{"),E=b.lastIndexOf("}");if(w===-1||E===-1||E<w)return b;const T=b.slice(0,w).replace(/\s+/g," ").replace(/\s\(/,"("),I=b.slice(w+1,E);return`${T.trim()}{${I.trim()}}`}let u=d(""+h);if(!u.startsWith("class")){const b=h.prototype;b&&(u+=Object.getOwnPropertyNames(b).map(w=>`${w}:${d(""+b[w])}`).join(""))}return u}function Fe(h){return btoa(String.fromCharCode(...new Uint8Array(h))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function wt(){return _.has("debug","hashing",!1)}ke=globalThis.crypto&&globalThis.crypto.subtle&&typeof globalThis.crypto.subtle.digest=="function"?globalThis.crypto.subtle.digest.bind(globalThis.crypto.subtle):(h,d)=>{if(h!=="SHA-256")throw Error(`${je.libName}: only SHA-256 available`);const u=de.create(d);return $e(fe(u)).buffer};let De={};const Q=new TextEncoder;async function ue(h){const d=Q.encode(h),u=await async function(b){return b.length===0?"47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU":Fe(await ke("SHA-256",b))}(d);return De[u]={string:h,buffer:d},u}const Ee=[],Ye={},qe=new Set,it=Date.now();typeof performance>"u"&&(window.performance={now:()=>Date.now()-it});const Bt=["simulate","update","render","snapshot"],bn={total:"black",update:"blue",render:"magenta",simulate:"yellow",snapshot:"green",backlog:"red",network:"lightgray"};let Wt,hr,Xn=null,Jt=null,Nt=null,An=0,Wn=null,ts=null;function xf(h){for(Xn=h;h.firstChild;)h.removeChild(h.firstChild);h.style.background="#faf0dc",Wn=document.createElement("canvas"),ts=Wn.getContext("2d"),Wn.id="text_stats",Wn.width=Math.min(140,window.innerWidth),Wn.height=36,Wn.style.width=Wn.width,Wn.style.height=Wn.height,ts.font="9.5pt sans-serif",h.appendChild(Wn),h.title=Object.entries(bn).map(u=>{let[b,w]=u;return`${w}: ${b}`}).join(`
`),Jt=document.createElement("canvas"),Jt.width=Math.min(125,window.innerWidth),Jt.height=125,Jt.style.width="100%";const d=document.createElement("div");d.id="innerDiv",h.appendChild(d),d.appendChild(Jt),Nt=Jt.getContext("2d")}const $r=[];let jr=0,zs=!1,Vt=Cd(0);const Ed=1e3/60;function Hl(h){return 20*(1-h/Ed)+60}function D2(h){Wt=function(d){const u=document.createElement("canvas");return u.width=d.width,u.height=d.height,u.style.width="100%",u.style.position="absolute",u.style.left="0px",Xn.querySelector("#innerDiv").appendChild(u),u}(h),hr=Wt.getContext("2d"),hr.strokeStyle="rgba(255, 255, 255, 0.5)";for(let d=0;d<60;d+=Ed){const u=Hl(d);hr.moveTo(0,u),hr.lineTo(Wt.width,u),hr.stroke()}}function Cd(h){return{start:h,total:0,items:{},users:0,backlog:0,network:0,latency:0,activity:1e3,connected:zs}}function Tf(h){Vt.total=h-Vt.start;const d=Math.min(120,window.innerWidth);if($r.length>=d&&$r.splice(0,$r.length-d+1),$r.push(Vt),$r.length<=1||!Xn||Xn.offsetHeight===0)return;const u=$r.slice(1).filter(T=>T.total),b=u.map(T=>T.total).reduce((T,I)=>T+I,0)/u.length,w=Math.max(...u.map(T=>T.total));Math.max(...u.map(T=>Math.max(T.backlog,T.network))),jr=1e3,function(T,I){ts.globalCompositeOperation="copy",ts.fillStyle="rgb(255, 255, 255, 0)",ts.fillRect(0,0,Wn.width,Wn.height),ts.fillStyle="rgb(0, 0, 0, 1)",ts.globalCompositeOperation="source-over";let k=`${Vt.users} users, ${Math.round(1e3/T)} fps`;I>70&&(k+=` ${Math.ceil(I).toLocaleString()}ms`),ts.fillText(k,2,15),k=Vt.backlog<100&&Vt.activity<1e3?`latency: ${Vt.latency} ms`:`backlog: ${Vt.backlog<100?"0.0":(Vt.backlog/1e3).toFixed(1)} s`,ts.fillText(k,2,33)}(b,w),Wt||D2(Jt),An===Jt.width?(Nt.globalCompositeOperation="copy",Nt.drawImage(Jt,1,0,Jt.width-1,Jt.height,0,0,Jt.width-1,Jt.height),Nt.globalCompositeOperation="source-over",Nt.fillStyle="transparent",Nt.fillRect(Jt.width-1,0,1,Jt.height)):An++;const E=T=>Hl(T/jr*-2*Ed)+5;{const T=$r[$r.length-1],I=An-.5;let k=Hl(0);Nt.beginPath(),Nt.moveTo(I,k),Nt.lineTo(I,Hl(T.total)),Nt.strokeStyle=bn[T.connected?"total":"network"],Nt.stroke(),Nt.beginPath(),Nt.moveTo(I,k),k=Hl(T.total);let O=0;for(const M of Bt)T.items[M]&&(O+=T.items[M],k=Hl(O),Nt.lineTo(I,k),Nt.strokeStyle=bn[M],Nt.stroke(),Nt.beginPath(),Nt.moveTo(I,k));T.network&&(Nt.beginPath(),Nt.moveTo(I,E(0)),Nt.lineTo(I,E(T.network)),Nt.strokeStyle=bn.network,Nt.stroke())}}const ri=[],oo={};let _s={};const Kt={frames:$r,animationFrame(h){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Tf(h),Vt=Cd(h);for(const[u,b]of Object.entries(d))this[u](b)},begin(h){const d=performance.now();Vt.items[h]=(Vt.items[h]||0)-d;const u=ri[ri.length-1];return u&&(Vt.items[u]+=d),ri.push(h),d},end(h){const d=performance.now();Vt.items[h]+=d;const u=ri.pop();if(u!==h)throw Error(`Unmatched stats calls: expected end("${u}"), got end("${h}")`);const b=ri[ri.length-1];return b&&(Vt.items[b]-=d),d},backlog(h){Vt.backlog=Math.max(h,Vt.backlog)},starvation(h){Vt.network=h},latency(h){Vt.latency=h},activity(h){Vt.activity=h},users(h){Vt.users=h},connected(h){const d=zs;Vt.connected=zs=h,d&&!zs&&Wt&&(Wt.remove(),hr=null)},networkTraffic:oo,addNetworkTraffic(h,d){let u=arguments.length>2&&arguments[2]!==void 0&&arguments[2];oo[h]=(oo[h]||0)+d,u&&(oo[`audit_${h}`]=(oo[`audit_${h}`]||0)+d)},resetAuditStats(){for(const h in oo)h.startsWith("audit_")&&(oo[h]=0)},perSecondTally(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(window.logMessageStats)for(const[d,u]of Object.entries(h))_s[d]=(_s[d]||0)+u},stepSession(h){let d=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const u=Math.floor(Date.now()/1e3);if(!window.logMessageStats)return _s={second:u},null;let b=null;if(u!==_s.second){if(_s.second&&d&&(_s.requestedMessages||_s.sentMessagesTotal)){b={..._s};const w=u-_s.second;w!==1&&(b.sampleSeconds=w),b.sentBundles&&(b.averageDelay=Math.round(10*b.sendDelay/b.sentMessagesTotal)/10,b.averageBundlePayload=Math.round(b.sentBundlePayload/b.sentBundles)),delete b.second,delete b.sendDelay,delete b.sentBundlePayload}_s={second:u}}return b}};globalThis.CROQUETSTATS=Kt;const Hc="ontouchstart"in document.documentElement,Hm=window&&window.parent!==window,Sd=Hc?20:12,Xl=Hc?0:15;let kb=!1,Xm=!1,ao,Af=!1;function co(h){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return h&&je.showMessage(h,{...d,level:"warning"})}function Wm(h){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return h&&je.showMessage(h,{...d,level:"status"})}function Br(h,d){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"error";console.error(`Error during ${h}`,d);const b=(d.stack||"").split(`
`).filter(w=>!w.match(/croquet-.*\.min.js/)).join(`
`);je.showMessage(`Error during ${h}: ${d.message}

${b}`,{level:u,duration:u==="error"?1e4:void 0,stopOnFocus:!0})}try{if(ao=window.localStorage,ao["croquet-debug-persist-allowed"]="true",ao["croquet-debug-persist-allowed"]!=="true")throw Error("localStorage not persisted");delete ao["croquet-debug-persist-allowed"]}catch{console.warn("localStorage not allowed"),ao={}}const br={get pinned(){return ao[window.location.pathname+"/croquet-debug-ui-pinned"]==="true"},set pinned(h){ao[window.location.pathname+"/croquet-debug-ui-pinned"]=!!h},get activePage(){return ao[window.location.pathname+"/croquet-debug-ui-activePage"]},set activePage(h){ao[window.location.pathname+"/croquet-debug-ui-activePage"]=h}},Vn=h=>{h.preventDefault(),h.stopPropagation()};function Fr(h,d,u){const b=document.createElement("canvas"),w=b.width=40*Sd/12,E=b.height=60,T=b.getContext("2d");T.font="36px Arial",T.textAlign="center",T.textBaseline="middle",T.fillStyle="black",T.fillText(h,w/2,.55*E);const I=document.createElement("button");I.id=d,I.className="croquet_dock_button";const k=O=>{O.preventDefault(),O.stopPropagation(),u()};return Hc?(I.ontouchstart=k,I.ontouchend=Vn,I.onpointerdown=Vn,I.onpointerup=Vn):(I.onclick=k,I.onpointerdown=Vn,I.onpointerup=Vn),I.appendChild(b),I}function Wl(h,d){if(je.badge===!1)return;const u=function(k){const O=new X(k),M=["bcdfghjklmnpqrstvwxyz","aeiou"];let re="";for(let se=0;se<5;se++)re+=M[se%2][O.quick()*M[se%2].length|0];return re}(d);for(document.title=document.title.replace(/:.*/,""),document.title+=":"+u;h.firstChild;)h.removeChild(h.firstChild);const b=document.createElement("canvas"),w=b.width=120,E=b.height=40;b.style.width="100%",h.appendChild(b);const T=b.getContext("2d"),I=function(k){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const M=new X(k),re=[];for(let se=0;se<O;se++)re.push(`hsl(${360*M.quick()}, 50%, 70%)`);return re}(d,2);T.fillStyle=I[0],T.beginPath(),T.moveTo(0,0),T.lineTo(0,E),T.lineTo(w,0),T.closePath(),T.fill(),T.fillStyle=I[1],T.beginPath(),T.moveTo(w,E),T.lineTo(w,0),T.lineTo(0,E),T.closePath(),T.fill(),T.font="30px Arial",T.textAlign="center",T.textBaseline="middle",T.fillStyle="black",T.fillText(u,w/2,E/2)}function If(h,d){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(;h.firstChild;)h.removeChild(h.firstChild);return new U(h,{text:d,width:128,height:128,colorDark:"#000000",colorLight:"#ffffff",correctLevel:U.CorrectLevel.L,...u})}function Lb(){if(je.root===!1||je.qrcode===!1||_.noqr)return;const h=je.sessionURL;if(!h)return void console.warn("App.sessionURL is not set");const d=Mi(je.qrcode);d&&(Hc||(d.onclick=u=>{u.preventDefault(),u.stopPropagation(),u.shiftKey?function(){const b=document.getElementById("croquet_dock");b&&b.classList.toggle("debug")}():window.open(h)}),If(d,h).getCanvas().style.width="100%")}let Di,ka,La=0;function Vm(){(function(){if(Xm)return;Xm=!0;const u=`
        ${Hm?"body { min-height: 100vh }":""}
        #croquet_spinnerOverlay {
            z-index: 1000;
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color:#333;
            opacity:0.9;
            display:flex;
            align-items:center;
            justify-content:center;
            transition: opacity 1.0s ease-out;
        }
        /* https://github.com/lukehaas/css-loaders */
        @keyframes croquet_dots {
            0%, 80%, 100% { box-shadow: 0 2.5em 0 -1.3em; }
            40% { box-shadow: 0 2.5em 0 0; }
        }
        #croquet_loader,
        #croquet_loader::before,
        #croquet_loader::after {
          border-radius: 50%;
          width: 2.5em;
          height: 2.5em;
          animation: croquet_dots 1.8s infinite ease-in-out;
        }
        #croquet_loader {
          color: #fff;
          font-size: 10px;
          margin: 80px auto;
          position: relative;
          text-indent: -9999em;
          animation-delay: -0.16s;
        }
        #croquet_loader::before,
        #croquet_loader::after {
          content: '';
          position: absolute;
          top: 0;
        }
        #croquet_loader::before { left: -3.5em; animation-delay: -0.32s; }
        #croquet_loader::after { left: 3.5em; }
        #croquet_spinnerOverlay.croquet_error>*,
        #croquet_spinnerOverlay.croquet_error>*::before,
        #croquet_spinnerOverlay.croquet_error>*::after {
            color: #f00;
        }
        #croquet_spinnerOverlay.croquet_fatal>*,
        #croquet_spinnerOverlay.croquet_fatal>*::before,
        #croquet_spinnerOverlay.croquet_fatal>*::after {
            color: #f00;
            box-shadow: 0 2.5em 0 0 !important;
            animation: none !important;
        }
`,b=document.createElement("style");b.innerHTML=u,document.head.insertBefore(b,document.head.querySelector("style,link[rel=stylesheet]"))})();const h=document.createElement("div");h.id="croquet_spinnerOverlay";const d=document.createElement("div");return d.id="croquet_loader",d.innerText="Catching up...",h.appendChild(d),h}function Mi(h,d){if(h===!1)return!1;if(h instanceof Element)return h;if(typeof h=="string"){const u=document.getElementById(h);if(u)return u}return d?d():null}function Xc(){const h=new Uint8Array(arguments.length>0&&arguments[0]!==void 0?arguments[0]:16);return window.crypto.getRandomValues(h),Fe(h.buffer)}const Vl=new Set;let Wc=function(){let h=null;const d=document.getElementsByTagName("link");for(const u of d)if(u.getAttribute("rel")==="canonical"){h=u.getAttribute("href");break}return h||window.location.href}();const je={get libName(){return globalThis.__MULTISYNQ__?"Multisynq":"Croquet"},get sessionURL(){return Wc},set sessionURL(h){Wc=h,Lb()},root:null,sync:!0,messages:!1,badge:!1,stats:!1,qrcode:!1,makeWidgetDock:function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(_.nodock)return;const d=h.debug||_.debug,u=document.getElementById("croquet_dock");u&&u.parentElement.removeChild(u);const b=Mi(je.root,()=>document.body);if(!b)return;(function(){if(kb)return;kb=!0;const Pe=`
        #croquet_dock { position: fixed; z-index: 2; border: 3px solid white; bottom: 6px; left: 6px; width: 36px; height: 36px; box-sizing: border-box; background: white; opacity: 0.4; transition: all 0.3s ease; }
        #croquet_dock.active { opacity: 0.95; border-radius: 12px; }
        #croquet_dock.debug { width: 84px; }
        #croquet_dock_bar { position: absolute; border: 3px solid white; width: 100%; height: 30px; box-sizing: border-box; background: white; }

        #croquet_badge { position: absolute; width: 72px; height: 24px; top: 50%; transform: translate(0px, -50%); cursor: none; }
        #croquet_dock.active #croquet_badge { left: 2%; }
        #croquet_dock:not(.debug) #croquet_badge { display: none; }

        .croquet_dock_button { position: absolute; width: ${Sd}%; height: 90%; top: 50%; transform: translate(0px, -50%); border-radius: 20%; }
        .croquet_dock_button:focus { outline: 0; }
        .croquet_dock_button canvas { position: absolute; width: 100%; height: 100%; top: 0px; left: 0px; }
        #croquet_dock:not(.active) .croquet_dock_button { display: none; }
        #croquet_dock_left { right: ${2+Xl+Sd+2}% }
        #croquet_dock:not(.debug) #croquet_dock_left { display: none; }
        #croquet_dock_right { right: ${2+Xl}%; }
        #croquet_dock:not(.debug) #croquet_dock_right { display: none; }
        #croquet_dock_pin { right: 2%; }
        #croquet_dock_pin.pinned { background: #cce6ff; }

        #croquet_dock_content { position: absolute; left: 2px; top: 2px; right: 2px; bottom: 2px; background: white; overflow: hidden; }
        #croquet_dock.debug:not(.active) #croquet_dock_content { display: none; }
        #croquet_dock.debug:not(.active) #croquet_dock_content div { display: none; }

        #croquet_qrcode { position: absolute; width: 100%; height: 100%;box-sizing: border-box; cursor: crosshair; }
        #croquet_dock.active #croquet_qrcode { border: 6px solid white; }
        #croquet_dock.debug #croquet_qrcode:not(.active) { display: none; }
        #croquet_qrcode canvas { image-rendering: pixelated; }

        #croquet_stats { position: absolute; width: 70%; height: 90%; left: 15%; top: 5%; opacity: 0.8; font-family: sans-serif; }
        #croquet_stats:not(.active) { display: none; }
`,oe=document.createElement("style");oe.innerHTML=Pe,document.head.insertBefore(oe,document.head.querySelector("style,link[rel=stylesheet]"))})();const w=document.createElement("div");w.id="croquet_dock",d&&w.classList.add("debug"),Hm&&h.iframe===!1&&(w.style.display="none"),b.appendChild(w);const E=document.createElement("div");let T;E.id="croquet_dock_bar",w.appendChild(E),h.badge!==!1&&(T=document.createElement("div"),T.id="croquet_badge",E.appendChild(T),je.badge=T);const I=document.createElement("div");I.id="croquet_dock_content",w.appendChild(I);const k=[];let O,M;if(h.qrcode!==!1&&je.sessionURL&&(O=document.createElement("div"),O.id="croquet_qrcode",I.appendChild(O),k.push(O.id),je.qrcode=O,d||(br.activePage=O.id)),h.stats!==!1&&(M=document.createElement("div"),M.id="croquet_stats",I.appendChild(M),k.push(M.id),je.stats=M),k.length){let Pe=function(oe){const we=k.length;let ve,xe=0;if(br.activePage){const te=k.indexOf(br.activePage);te>=0?(xe=te,ve=document.getElementById(br.activePage)):br.activePage=null}const ye=k[(xe+we+oe)%we];let ee;ye===br.activePage?ee=ve:(ve&&ve.classList.remove("active"),ee=document.getElementById(ye)),ee&&ee.classList.add("active"),br.activePage=ye};k.length>1&&(E.appendChild(Fr("<","croquet_dock_left",()=>Pe(-1))),E.appendChild(Fr(">","croquet_dock_right",()=>Pe(1)))),Pe(0)}if(!Hc&&!h.alwaysPinned){const Pe=Fr("📌","croquet_dock_pin",()=>{br.pinned=!br.pinned,oe()}),oe=()=>{br.pinned?Pe.classList.add("pinned"):Pe.classList.remove("pinned")};oe(),E.appendChild(Pe)}const re=Pe=>{w.style.width=`${Pe}px`;const oe=1.18*Pe;w.style.height=`${oe}px`;const we=18*Pe/100;E.style.height=`${we}px`,I.style.top=`${we+2}px`,T&&(T.style.height=.9*we+"px",T.style.width=.9*we*3+"px"),O&&(O.style.border=8*Pe/200+"px solid white")};let se=h.fixedSize||200;const Y=()=>{w.classList.add("active"),re(se),setTimeout(()=>w.style.transition="none",300)},be=()=>{w.style.transition="",w.classList.remove("active"),w.style.width=w.style.height="",E.style.height="",I.style.top="",T&&(T.style.height=T.style.width=""),O&&(O.style.border="")};if(Hc)be(),w.ontouchstart=Pe=>{Pe.preventDefault(),Pe.stopPropagation(),w.classList.contains("active")?be():Y()},w.ontouchend=Vn,w.onpointerdown=Vn,w.onpointerup=Vn;else if(h.alwaysPinned?Y():(br.pinned?Y():be(),w.onmouseenter=Y,w.onmouseleave=()=>{br.pinned||be()}),!h.fixedSize){let Pe=0;w.addEventListener("wheel",oe=>{oe.stopPropagation();const we=Date.now();if(we-Pe<100)return;Pe=we;let{deltaY:ve}=oe;ve=Math.sign(ve)*Math.min(5,Math.abs(ve));const xe=.8*Math.min(window.innerWidth,window.innerHeight);se=Math.max(166,Math.min(xe,w.offsetWidth/1.05**ve)),re(se)},{passive:!0})}},makeSessionWidgets:function(h){(function(d){if(!d||je.root===!1)return;const u=Mi(je.badge);u&&Wl(u,d)})(h),Lb(),function(){if(je.root===!1||_.nostats)return;const d=Mi(je.stats);d&&xf(d)}()},makeQRCanvas(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!je.sessionURL)return null;const d=If(document.createElement("div"),je.sessionURL,h);return d&&d.getCanvas()},clearSessionMoniker:function(){je.badge!==!1&&(document.title=document.title.replace(/:.*/,""))},showSyncWait(h){je.root===!1?h=!1:Di||(Di=Vm()),function(d){if(ka!==d&&(typeof ka!="string"||d!==!0))if(je.sync===!1&&(d=!1),ka=d,d)clearTimeout(La),La=setTimeout(()=>{ka&&(Mi(je.root,()=>document.body).appendChild(Di),Di.style.opacity=.9,Di.className=ka==="error"?"croquet_error":ka==="fatal"?"croquet_fatal":"")},500);else{if(!Di)return;clearTimeout(La),Di.style.opacity=0,Di.className="",La=setTimeout(()=>{ka||Di.parentElement&&Di.parentElement.removeChild(Di)},500)}}(h)},messageFunction:function(h){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const u=d.level;let b;return u==="error"?(b="orangered,red",console.error(h)):u==="warning"?(b="gold,orange",console.warn(h)):b="silver,gray",function(w,E){const T=Mi(je.root,()=>document.body);if(T===!1)return null;(function(){if(Af)return;Af=!0;const O=document.createElement("style");O.innerHTML=`/*!
        * Toastify js 1.5.0
        * https://github.com/apvarun/toastify-js
        * @license MIT licensed
        *
        * Copyright (C) 2018 Varun A P
        */
        .toastify {
            padding: 12px 20px;
            color: #ffffff;
            display: inline-block;
            box-shadow: 0 3px 6px -1px rgba(0, 0, 0, 0.12), 0 10px 36px -4px rgba(77, 96, 232, 0.3);
            background: -webkit-linear-gradient(315deg, #73a5ff, #5477f5);
            background: linear-gradient(135deg, #73a5ff, #5477f5);
            position: fixed;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.215, 0.61, 0.355, 1);
            border-radius: 2px;
            cursor: pointer;
            text-decoration: none;
            max-width: calc(50% - 20px);
            z-index: 2147483647;
        }
        .toastify.on {
            opacity: 1;
        }
        .toast-close {
            opacity: 0.4;
            padding: 0 5px;
        }
        .toastify-right {
            right: 15px;
        }
        .toastify-left {
            left: 15px;
        }
        .toastify-top {
            top: -150px;
        }
        .toastify-bottom {
            bottom: -150px;
        }
        .toastify-rounded {
            border-radius: 25px;
        }
        .toastify-avatar {
            width: 1.5em;
            height: 1.5em;
            margin: 0 5px;
            border-radius: 2px;
        }
        @media only screen and (max-width: 360px) {
            .toastify-right, .toastify-left {
                margin-left: auto;
                margin-right: auto;
                left: 0;
                right: 0;
                max-width: fit-content;
            }
        }

        .toastify {
            font-family: sans-serif;
            border-radius: 8px;
        }

        .toastify-center {
            margin-left: auto;
            margin-right: auto;
            left: 0;
            right: 0;
            max-width: fit-content;
            max-width: -moz-fit-content;
        }
`,document.head.insertBefore(O,document.head.querySelector("style,link[rel=stylesheet]"))})();const I={text:w,duration:3e3,gravity:"bottom",position:"right",stopOnFocus:!0,...E};let k;return T instanceof Element&&T!==document.body?(k=T.id,k||(T.id=k="_croquetToastParent")):typeof T=="string"&&(k=T),k&&(I.selector=k),t(I).showToast()}(h,{style:{background:`linear-gradient(90deg,${b})`},...d})},showMessage(h){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(d.only==="once"){if(Vl.has(h))return null;Vl.add(h)}return d.level==="fatal"&&(d.level="error",d.showSyncWait="fatal"),d.showSyncWait&&(d.showSyncWait!=="fatal"||d.duration||(d.duration=-1),je.showSyncWait(d.showSyncWait)),_.nomessages||je.root===!1||je.messages===!1||!je.messageFunction?(d.level==="warning"&&console.warn(h),d.level==="error"&&console.error(h),null):je.messageFunction(h,d)},isCroquetHost:h=>h.endsWith("croquet.io")||["localhost","127.0.0.1","[::1]"].includes(h)||h.endsWith("ngrok.io"),referrerURL(){const h=new URL(je.sessionURL),d=this.isCroquetHost(h.hostname);return`${h.protocol}//${h.host}${h.pathname}${d?h.search:""}`},autoSession(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{key:"q",force:!1,default:"",keyless:!1};typeof h=="string"&&(h={key:h}),h||(h={});const d=h.key||"q",u=new URL(je.sessionURL);let b="";if(!h.force){const E=u.search.slice(1).split("&"),T=E.find(I=>I.split("=")[0]===d);T?b=T.replace(/[^=]*=/,""):h.keyless&&(b=E.find(I=>!I.includes("=")),b||(b=u.hash.slice(1),b&&(u.hash="",u.search?u.searchParams.set(d,b):u.search=b)))}if(b)try{b=decodeURIComponent(b)}catch{}else b=h.default?h.default:this.randomSession(),u.searchParams.set(d,b);if(je.sessionURL=u.href,window.location.href!==u.href)try{window.history.replaceState({},"",u.href)}catch(E){je.showMessage(`Setting address bar to ${u.href}`,{only:"once"}),je.showMessage(`Failed to change address bar: ${E.message}`,{level:"warning",only:"once"})}_.has("debug","session")&&console.log(`${je.libName}.App.autoSession: "${b}"`);const w=Promise.resolve(b);return w[Symbol.toPrimitive]=()=>(console.warn(`Deprecated: ${je.libName}.App.autoSession() return value used directly. It returns a promise now!`),b),w},autoPassword(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{key:"pw",default:"",force:!1,scrub:!1,keyless:!1};typeof h=="string"&&(h={key:h});const d=h.key||"pw",u=h.scrub&&!_.has("debug","password"),b=h.keyless,w=new URL(je.sessionURL);let E="";const T=h.force?"":w.hash.slice(1);if(T){const k=T.split("&"),O=k.find(M=>M.split("=")[0]===d);O?(E=O.replace(/[^=]*=/,""),E&&u&&(w.hash=k.filter(M=>M.split("=")[0]!==d).join("&"))):b&&(E=k.find(M=>!M.includes("=")),E&&u&&(w.hash=k.filter(M=>M!==E).join("&")))}if(E||(E=h.default?h.default:this.randomPassword(),w.hash=T?`${T}&${d}=${E}`:b?E:`${d}=${E}`,je.sessionURL=w.href,u&&(w.hash=b?"":T)),_.has("debug","session")&&console.log(`${je.libName}.App.sessionUrl: ${je.sessionURL}`),window.location.href!==w.href)try{window.history.replaceState({},"",w.href)}catch(k){je.showMessage(`Setting address bar to ${w.href}`,{only:"once"}),je.showMessage(`Failed to change address bar: ${k.message}`,{level:"warning",only:"once"})}if(E)try{E=decodeURIComponent(E)}catch{}_.has("debug","session")&&console.log(`${je.libName}.App.autoPassword: "${E}"`);const I=Promise.resolve(E);return I[Symbol.toPrimitive]=()=>(console.warn(`Deprecated: ${je.libName}.App.autoPassword() return value used directly. It returns a promise now!`),E),I},randomSession(){return Xc(arguments.length>0&&arguments[0]!==void 0?arguments[0]:10)},randomPassword(){return Xc(arguments.length>0&&arguments[0]!==void 0?arguments[0]:16)}},Nf="#__vote";function Km(h,d){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,b="none";for(const w of["immediate","queued","oncePerFrame","oncePerFrameWhileSynced"])for(const E of h[w])E.for===d?u===null||E.unbound===u?h[w].delete(E):b="subscriber":b==="none"&&(b="others");return b}const Kn=globalThis.CROQUETVD=new class{constructor(){this.subscriptions={},this.subscribers=new Map,this.genericSubscriptions=!1,this.queuedEvents=[],this.perFrameEvents=new Map,this.perSyncedFrameEvents=new Map,this.subscriberIds=0,this.currentEvent=void 0,this.currentEventFromModel=!1}register(h){return"V"+ ++this.subscriberIds}deregister(h){}addSubscription(h,d,u,b,w){if(h.includes(":"))throw Error(`Invalid subscription scope "${h}" (must not contain ':')`);if(w==="vote")return void this.addSubscription(h,d+Nf,u,b,"immediate");h!=="*"&&d!=="*"||(this.genericSubscriptions=!0);const E=h+":"+d,T=b;T.for=u;let I=this.subscriptions[E];if(I||(I=this.subscriptions[E]={immediate:new Set,queued:new Set,oncePerFrame:new Set,oncePerFrameWhileSynced:new Set}),!I[w])throw Error(`Unknown subscribe() option: handling="${w}"`);I[w].add(T);let k=this.subscribers.get(u);k||this.subscribers.set(u,k=new Set),k.add(E)}removeSubscription(h,d,u){let b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;const w=h+":"+d,E=this.subscriptions[w];if(E){const T=Km(E,u,b);if(T==="none"&&delete this.subscriptions[w],T!=="subscriber"){const I=this.subscribers.get(u);I&&(I.delete(w),I.size===0&&this.subscribers.delete(u))}}d.endsWith(Nf)||this.removeSubscription(h,d+Nf,u)}removeAllSubscriptionsFor(h){const d=this.subscribers.get(h);if(d){for(const u of d){const b=this.subscriptions[u];b?Km(b,h)==="none"&&delete this.subscriptions[u]:console.error(`${je.libName}: topic ${u} not found in subscriptions table for ${h} during removeAllSubscriptionsFor()`)}this.subscribers.delete(h)}}subscriptionsFor(h){const d=this.subscriptions[h];if(!d&&!this.genericSubscriptions)return null;const u=[];let b=!!d;if(this.genericSubscriptions){const[w,E]=h.split(":");if(!(w.startsWith("__")&&w.endsWith("__")||E.startsWith("__")&&E.endsWith("__")))for(const I of["*:*",w+":*","*:"+E]){const k=this.subscriptions[I];k&&(u.push([k,I]),!b&&this.hasUserSubcription(k)&&(b=!0))}const T=!b;if(T)for(const I of u)I.push(T)}return d&&u.push([d,h]),u.length===0?null:u}hasUserSubcription(h){for(const d of["immediate","queued","oncePerFrame","oncePerFrameWhileSynced"])for(const u of h[d])if(!u.unbound.__CROQUET__)return!0;return!1}handleEvent(h,d){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const b=this.subscriptionsFor(h);if(!b)return;const w=!!u;let E=0,T=0,I=0;for(const[k,O,M]of b)E+=k.queued.size,T+=k.oncePerFrame.size,I+=k.oncePerFrameWhileSynced.size,k.immediate.size>0&&(u||(u=re=>re()),u(()=>{for(const re of k.immediate){const se=this.currentEvent,Y=this.currentEventFromModel,be=this.currentEventOnlyGeneric;this.currentEvent=h,this.currentEventFromModel=w,this.currentEventOnlyGeneric=M;try{re(d)}catch(Pe){console.error(Pe),console.warn(`${je.libName}: error "${Pe.message}" in "immediate" subscription ${O}`)}this.currentEvent=se,this.currentEventFromModel=Y,this.currentEventOnlyGeneric=be}}));E>0&&this.queuedEvents.push({topic:h,data:d,fromModel:w}),T>0&&this.perFrameEvents.set(h,{data:d,fromModel:w}),I>0&&this.perSyncedFrameEvents.set(h,{data:d,fromModel:w})}processFrameEvents(h,d){let u=0;const b=(w,E,T,I)=>{const k=this.subscriptionsFor(E);if(!k)return;const O=this.currentEvent,M=this.currentEventFromModel;this.currentEvent=E,this.currentEventFromModel=I;for(const[re,se,Y]of k){const be=this.currentEventOnlyGeneric;this.currentEventOnlyGeneric=Y;for(const Pe of re[w]){try{Pe(T)}catch(oe){console.error(oe),console.warn(`${je.libName}: error "${oe.message}" in "${w}" subscription ${E}`)}u++}this.currentEventOnlyGeneric=be}this.currentEvent=O,this.currentEventFromModel=M};for(const{topic:w,data:E,fromModel:T}of this.queuedEvents)b("queued",w,E,T);if(this.queuedEvents.length=0,h){for(const[w,{data:E,fromModel:T}]of this.perFrameEvents)b("oncePerFrame",w,E,T);if(this.perFrameEvents.clear(),d){for(const[w,{data:E,fromModel:T}]of this.perSyncedFrameEvents)b("oncePerFrameWhileSynced",w,E,T);this.perSyncedFrameEvents.clear()}for(const{topic:w,data:E,fromModel:T}of this.queuedEvents)b("queued",w,E,T);this.queuedEvents.length=0}return u}};let Gs={get subscribe(){return Gs={subscribe:_.has("debug","subscribe",!1)},Gs.subscribe}};class Ym{constructor(d){this.vm=d}register(d){return this.vm.registerModel(d)}deregister(d){this.vm.deregisterModel(d.id)}publish(d,u,b){this.vm.publishFromModel(b,d,u)}subscribe(d,u,b,w){return Gs.subscribe&&console.log(`Model.subscribe("${u}:${b}", ${d} ${(""+w).replace(/\([\s\S]*/,"")})`),this.vm.addSubscription(d,u,b,w)}unsubscribe(d,u,b){let w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"*";Gs.subscribe&&console.log(`Model.unsubscribe(${u}:${b}", ${d} ${(""+w).replace(/\([\s\S]*/,"")})`),this.vm.removeSubscription(d,u,b,w)}unsubscribeAll(d){Gs.subscribe&&console.log(`Model.unsubscribeAll(${d} ${d.id})`),this.vm.removeAllSubscriptionsFor(d)}future(d,u,b,w){if(xs&&xs.equal(this))return this.vm.future(d,u,b,w);throw Error(`Model.future() called from outside: ${d}`)}cancelFuture(d,u){if(xs&&xs.equal(this))return this.vm.cancelFuture(d,u);throw Error(`Model.cancelFuture() called from outside: ${d}`)}random(){return this.vm.random()}now(){return this.vm.time}equal(d){return d instanceof Ym&&d.vm===this.vm}isViewRealm(){return!1}}class Rf{constructor(d){this.vd=Kn,this.vm=d,this.controller=d.controller}valid(){return this.vm===this.controller.vm}register(d){return Kn.register(d)}deregister(d){Kn.deregister(d)}publish(d,u,b){this.vm.publishFromView(b,d,u)}subscribe(d,u,b,w){let E=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"queued";Gs.subscribe&&console.log(`View[${u}].subscribe("${w}:${d}" ${b?b.name||(""+b).replace(/\([\s\S]*/,""):""+b} [${E}])`),Kn.addSubscription(w,d,u,b,E)}unsubscribe(d,u){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,w=arguments.length>3?arguments[3]:void 0;Gs.subscribe&&console.log(`View[${u}].unsubscribe("${w}:${d}" ${b?b.name||(""+b).replace(/\([\s\S]*/,""):"*"})`),Kn.removeSubscription(w,d,u,b)}unsubscribeAll(d){Gs.subscribe&&console.log(`View[${d}].unsubscribeAll()`),Kn.removeAllSubscriptionsFor(d)}future(d,u){const b=this.vm;return new Proxy(d,{get(w,E){if(typeof d[E]=="function")return new Proxy(d[E],{apply(T,I,k){setTimeout(()=>{d.id&&Da(b,()=>d[E](...k),!0)},u)}});throw Error("Tried to call "+E+"() on future of "+Object.getPrototypeOf(d).constructor.name+" which is not a function")}})}random(){return Math.random()}now(){return this.vm.time}externalNow(){return this.controller.reflectorTime}extrapolatedNow(){return this.controller.extrapolatedTime}isSynced(){return!!this.controller.synced}equal(d){return d instanceof Rf&&d.vm===this.vm}isViewRealm(){return!0}}let xs=null;function Ho(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Tried to execute code that requires realm outside of realm.";if(!xs&&h)throw Error(h);return xs}function _d(h,d){if(xs!==null)throw Error("Can't switch realms from inside realm");try{return xs=new Ym(h),d()}finally{xs=null}}function Da(h,d){if(xs!==null&&!(arguments.length>2&&arguments[2]!==void 0&&arguments[2]))throw Error("Can't switch realms from inside realm");const u=xs;try{return xs=new Rf(h),d()}finally{xs=u}}var Pn=function(h){return h!=h},Ma=Math.sqrt,Kl=.7853981633974483,Yl=function(h){var d,u;return h===0?.16666666666666713:((h<0?-h:h)<=1?(d=h*(19.562619833175948+h*(h*(5.444622390564711+h*(.004253011369004428*h-.6019598008014124))-16.262479672107002))-8.198089802484825,u=h*(139.51056146574857+h*(h*(70.49610280856842+h*(1*h-14.740913729888538))-147.1791292232726))-49.18853881490881):(d=.004253011369004428+(h=1/h)*(h*(5.444622390564711+h*(h*(19.562619833175948+-8.198089802484825*h)-16.262479672107002))-.6019598008014124),u=1+h*(h*(70.49610280856842+h*(h*(139.51056146574857+-49.18853881490881*h)-147.1791292232726))-14.740913729888538)),d/u)},qm=function(h){var d,u;return h===0?.08333333333333809:((h<0?-h:h)<=1?(d=28.536655482610616+h*(h*(6.968710824104713+h*(.002967721961301243*h-.5634242780008963))-25.56901049652825),u=342.43986579130785+h*(h*(147.0656354026815+h*(1*h-21.947795316429207))-383.8770957603691)):(d=.002967721961301243+(h=1/h)*(h*(6.968710824104713+h*(28.536655482610616*h-25.56901049652825))-.5634242780008963),u=1+h*(h*(147.0656354026815+h*(342.43986579130785*h-383.8770957603691))-21.947795316429207)),d/u)},xd=function(h){var d,u,b,w,E;if(Pn(h))return NaN;if(h>0?b=h:(d=!0,b=-h),b>1)return NaN;if(b>.625)w=(u=1-b)*qm(u),u=Ma(u+u),E=Kl-u,E-=u=u*w-6123233995736766e-32,E+=Kl;else{if(b<1e-8)return h;E=b*(E=(u=b*b)*Yl(u))+b}return d?-E:E},M2=function(h){var d;return Pn(h)||h<-1||h>1?NaN:h>.5?2*xd(Ma(.5-.5*h)):(d=Kl-xd(h),d+=6123233995736766e-32,d+=Kl)},Db=function(){return typeof Symbol=="function"&&typeof Symbol("foo")=="symbol"}(),si=function(){return Db&&typeof Symbol.toStringTag=="symbol"},Td=Object.prototype.toString,U2=function(h){return Td.call(h)},Of=Object.prototype.hasOwnProperty,Mb=function(h,d){return h!=null&&Of.call(h,d)},Ua=typeof Symbol=="function"?Symbol.toStringTag:"",$2=function(h){var d,u,b;if(h==null)return Td.call(h);u=h[Ua],d=Mb(h,Ua);try{h[Ua]=void 0}catch{return Td.call(h)}return b=Td.call(h),d?h[Ua]=u:delete h[Ua],b},ns=si()?$2:U2,Qm=typeof Uint32Array=="function",Ub=function(h){return Qm&&h instanceof Uint32Array||ns(h)==="[object Uint32Array]"},Ad=4294967295,Vc=typeof Uint32Array=="function"?Uint32Array:null,$b=function(){var h,d;if(typeof Vc!="function")return!1;try{d=new Vc(d=[1,3.14,-3.14,Ad+1,Ad+2]),h=Ub(d)&&d[0]===1&&d[1]===3&&d[2]===Ad-2&&d[3]===0&&d[4]===1}catch{h=!1}return h},jb=typeof Uint32Array=="function"?Uint32Array:null,ql=function(){throw new Error("not implemented")},Ql=$b()?jb:ql,Bb=typeof Float64Array=="function",Fb=function(h){return Bb&&h instanceof Float64Array||ns(h)==="[object Float64Array]"},Pf=typeof Float64Array=="function"?Float64Array:null,j2=function(){var h,d;if(typeof Pf!="function")return!1;try{d=new Pf([1,3.14,-3.14,NaN]),h=Fb(d)&&d[0]===1&&d[1]===3.14&&d[2]===-3.14&&d[3]!=d[3]}catch{h=!1}return h},B2=typeof Float64Array=="function"?Float64Array:null,kf=function(){throw new Error("not implemented")},$a=j2()?B2:kf,Jm=typeof Uint8Array=="function",Jl=function(h){return Jm&&h instanceof Uint8Array||ns(h)==="[object Uint8Array]"},Kc=typeof Uint8Array=="function"?Uint8Array:null,Zb=function(){var h,d;if(typeof Kc!="function")return!1;try{d=new Kc(d=[1,3.14,-3.14,256,257]),h=Jl(d)&&d[0]===1&&d[1]===3&&d[2]===253&&d[3]===0&&d[4]===1}catch{h=!1}return h},eg=typeof Uint8Array=="function"?Uint8Array:null,zb=function(){throw new Error("not implemented")},Id=Zb()?eg:zb,Xo=typeof Uint16Array=="function",tg=function(h){return Xo&&h instanceof Uint16Array||ns(h)==="[object Uint16Array]"},eu=typeof Uint16Array=="function"?Uint16Array:null,ja=function(){var h,d;if(typeof eu!="function")return!1;try{d=new eu(d=[1,3.14,-3.14,65536,65537]),h=tg(d)&&d[0]===1&&d[1]===3&&d[2]===65533&&d[3]===0&&d[4]===1}catch{h=!1}return h},ng=typeof Uint16Array=="function"?Uint16Array:null,Nd,Gb=function(){throw new Error("not implemented")},Rd={uint16:ja()?ng:Gb,uint8:Id};(Nd=new Rd.uint16(1))[0]=4660;var Wo=new Rd.uint8(Nd.buffer)[0]===52,Hb=Wo===!0?1:0,rs=new $a(1),Yc=new Ql(rs.buffer),Cn=function(h){return rs[0]=h,Yc[Hb]},Od=Wo===!0?1:0,rg=new $a(1),sg=new Ql(rg.buffer),ig=function(h,d){return rg[0]=h,sg[Od]=d>>>0,rg[0]},Ts=ig,As=Number.POSITIVE_INFINITY,ii=Number.NEGATIVE_INFINITY,Ba=1023,F2=function(h){return h===0?.6666666666666735:.6666666666666735+h*(.3999999999940942+h*(.2857142874366239+h*(.22222198432149784+h*(.1818357216161805+h*(.15313837699209373+.14798198605116586*h)))))},og=.6931471803691238,Pd=19082149292705877e-26,kd=function(h){var d,u,b,w,E,T,I,k,O,M;if(h<-1||Pn(h))return NaN;if(h===-1)return ii;if(h===As||h===0)return h;if(M=1,(b=h<0?-h:h)<.41421356237309503){if(b<1862645149230957e-24)return b<5551115123125783e-32?h:h-h*h*.5;h>-.2928932188134525&&(M=0,w=h,u=1)}return M!==0&&(b<9007199254740992?(E=(M=((u=Cn(O=1+h))>>20)-Ba)>0?1-(O-h):h-(O-1),E/=O):(M=((u=Cn(O=h))>>20)-Ba,E=0),(u&=1048575)<434334?O=Ts(O,1072693248|u):(M+=1,O=Ts(O,1071644672|u),u=1048576-u>>2),w=O-1),d=.5*w*w,u===0?w===0?M*og+(E+=M*Pd):M*og-((k=d*(1-.6666666666666666*w))-(M*Pd+E)-w):(k=(I=(T=w/(2+w))*T)*F2(I),M===0?w-(d-T*(d+k)):M*og-(d-(T*(d+k)+(M*Pd+E))-w))},Lf=.6931471805599453,Z2=function(h){return h===0?.3999999999940942:.3999999999940942+h*(.22222198432149784+.15313837699209373*h)},z2=function(h){return h===0?.6666666666666735:.6666666666666735+h*(.2857142874366239+h*(.1818357216161805+.14798198605116586*h))},Df=.6931471803691238,Ld=19082149292705877e-26,Xb=1048575,Dd=function(h){var d,u,b,w,E,T,I,k,O,M,re;return h===0?ii:Pn(h)||h<0?NaN:(w=0,(u=Cn(h))<1048576&&(w-=54,u=Cn(h*=0x40000000000000)),u>=2146435072?h+h:(w+=(u>>20)-Ba|0,w+=(I=(u&=Xb)+614244&1048576)>>20,T=(h=Ts(h,u|1072693248^I))-1,(Xb&2+u)<3?T===0?w===0?0:w*Df+w*Ld:(E=T*T*(.5-.3333333333333333*T),w===0?T-E:w*Df-(E-w*Ld-T)):(I=u-398458|0,k=440401-u|0,b=(M=(re=(O=T/(2+T))*O)*re)*Z2(M),E=re*z2(M)+b,(I|=k)>0?(d=.5*T*T,w===0?T-(d-O*(d+E)):w*Df-(d-(O*(d+E)+w*Ld)-T)):w===0?T-O*(T-E):w*Df-(O*(T-E)-w*Ld-T))))},G2=function(h){var d;return Pn(h)||h<1?NaN:h===1?0:h>=268435456?Dd(h)+Lf:h>2?Dd(2*h-1/(h+Ma(h*h-1))):kd((d=h-1)+Ma(2*d+d*d))},Fa=function(h){return h===As||h===ii},ag=1/(1<<28),H2=function(h){var d,u,b;return Pn(h)||Fa(h)?h:(h<0&&(h=-h,d=!0),b=h<ag?h:h>268435456?Dd(h)+Lf:h>2?Dd(2*h+1/(Ma(h*h+1)+h)):kd(h+(u=h*h)/(1+Ma(1+u))),d?-b:b)},Wb=1.5707963267948966,X2=function(h){return h===0?-64.85021904942025:h*(h*(h*(-.8750608600031904*h-16.157537187333652)-75.00855792314705)-122.88666844901361)-64.85021904942025},Vb=function(h){return h===0?194.5506571482614:194.5506571482614+h*(485.3903996359137+h*(432.88106049129027+h*(165.02700983169885+h*(24.858464901423062+1*h))))},Kb=6123233995736766e-32,Yb=function(h){var d,u,b,w;return Pn(h)||h===0?h:h===As?Wb:h===ii?-1.5707963267948966:(h<0&&(u=!0,h=-h),d=0,h>2.414213562373095?(b=Wb,d=1,h=-1/h):h<=.66?b=0:(b=Kl,d=2,h=(h-1)/(h+1)),w=h*(w=(w=h*h)*X2(w)/Vb(w))+h,d===2?w+=.5*Kb:d===1&&(w+=Kb),b+=w,u?-b:b)},W2=1/(1<<28),cg,lg,V2=function(h){var d,u;return Pn(h)||h<-1||h>1?NaN:h===1?As:h===-1?ii:(h<0&&(d=!0,h=-h),h<W2?d?-h:h:(u=h<.5?.5*kd((u=h+h)+u*h/(1-h)):.5*kd((h+h)/(1-h)),d?-u:u))};Wo===!0?(cg=1,lg=0):(cg=0,lg=1);var qb={HIGH:cg,LOW:lg},Qb=new $a(1),Jb=new Ql(Qb.buffer),ug=qb.HIGH,Md=qb.LOW,ew=function(h,d){return Qb[0]=d,h[0]=Jb[ug],h[1]=Jb[Md],h},Mf,Uf,$f=function(h,d){return arguments.length===1?ew([0,0],h):ew(h,d)};Wo===!0?(Mf=1,Uf=0):(Mf=0,Uf=1);var dg={HIGH:Mf,LOW:Uf},hg=new $a(1),qc=new Ql(hg.buffer),K2=dg.HIGH,Y2=dg.LOW,q2=function(h,d){return qc[K2]=h,qc[Y2]=d,hg[0]},tu=q2,jf=[0,0],Hs=function(h,d){var u,b;return $f(jf,h),u=jf[0],u&=2147483647,b=Cn(d),tu(u|=b&=2147483648,jf[1])},Ud=function(h){return!!(Cn(h)>>>31)},Za=3.141592653589793,Bf=function(h,d){var u;return Pn(d)||Pn(h)?NaN:Fa(d)?d===As?Fa(h)?Hs(Za/4,h):Hs(0,h):Fa(h)?Hs(3*Za/4,h):Hs(Za,h):Fa(h)?Hs(Za/2,h):h===0?d>=0&&!Ud(d)?Hs(0,h):Hs(Za,h):d===0?Hs(Za/2,h):(u=Yb(h/d),d<0?u<=0?u+Za:u-Za:u)},fg=22250738585072014e-324,tw=function(h){return h===0?1.87595182427177:1.87595182427177+h*(h*(1.6214297201053545+h*(.14599619288661245*h-.758397934778766))-1.8849797954337717)},Ff=2147483647,pg=function(h){var d,u,b,w,E;return Pn(h)||Fa(h)||h===0?h:(u=-2147483648&(b=Cn(h)),b&=Ff,E=0,h<fg?(E=0x40000000000000,d=Cn(E*=h),E=tu(u|(d=(d&Ff)/3+696219795),0)):E=Ts(E,u|(d=b/3+715094163)),E*=tw(w=E*E*(E/h)),d=Cn(E),E=tu(d+1,0),E+=E*(w=((w=h/(E*E))-E)/(E+E+w)))},nw=pg,rw=function(h){return h===0?.0416666666666666:.0416666666666666+h*(2480158728947673e-20*h-.001388888888887411)},sw=function(h){return h===0?-27557314351390663e-23:h*(2087572321298175e-24+-11359647557788195e-27*h)-27557314351390663e-23},$d=function(h,d){var u,b,w,E;return w=(E=h*h)*E,b=E*rw(E),b+=w*w*sw(E),(w=1-(u=.5*E))+(1-w-u+(E*b-h*d))},iw=-.16666666666666632,jd=function(h,d){var u,b,w;return u=.00833333333332249+(w=h*h)*(27557313707070068e-22*w-.0001984126982985795)+w*(w*w)*(158969099521155e-24*w-25050760253406863e-24),b=w*h,d===0?h+b*(iw+w*u):h-(w*(.5*d-b*u)-d-b*iw)},Q2=Wo===!0?0:1,ow=new $a(1),Xs=new Ql(ow.buffer),Bd=function(h){return ow[0]=h,Xs[Q2]},mg=Math.floor,Zf=function(h){return h<0?-h:h===0?0:h},gg=function(h,d){return Pn(d)||Fa(d)?(h[0]=d,h[1]=0,h):d!==0&&Zf(d)<fg?(h[0]=4503599627370496*d,h[1]=-52,h):(h[0]=d,h[1]=0,h)},aw=function(h,d){return arguments.length===1?gg([0,0],h):gg(h,d)},yg=function(h){var d=Cn(h);return(d=(2146435072&d)>>>20)-Ba|0},J2=yg,za=[0,0],Fd=[0,0],Zd=function(h,d){var u,b;return h===0||Pn(h)||Fa(h)?h:(aw(za,h),d+=za[1],(d+=J2(h=za[0]))<-1074?Hs(0,h):d>1023?h<0?ii:As:(d<=-1023?(d+=52,b=2220446049250313e-31):b=1,$f(Fd,h),u=Fd[0],u&=2148532223,b*tu(u|=d+Ba<<20,Fd[1])))},Qc=Zd,bg=[10680707,7228996,1387004,2578385,16069853,12639074,9804092,4427841,16666979,11263675,12935607,2387514,4345298,14681673,3074569,13734428,16653803,1880361,10960616,8533493,3062596,8710556,7349940,6258241,3772886,3769171,3798172,8675211,12450088,3874808,9961438,366607,15675153,9132554,7151469,3571407,2607881,12013382,4155038,6285869,7677882,13102053,15825725,473591,9065106,15363067,6271263,9264392,5636912,4652155,7056368,13614112,10155062,1944035,9527646,15080200,6658437,6231200,6832269,16767104,5075751,3212806,1398474,7579849,6349435,12618859],Jc=[1.570796251296997,7549789415861596e-23,5390302529957765e-30,3282003415807913e-37,1270655753080676e-44,12293330898111133e-52,27337005381646456e-60,21674168387780482e-67],Ga=16777216,zd=5960464477539063e-23,zf=Hd(new Array(20)),Ha=Hd(new Array(20)),Gd=Hd(new Array(20)),Cr=Hd(new Array(20));function Hd(h){var d,u=h.length;for(d=0;d<u;d++)h[d]=0;return h}function cw(h,d,u,b,w,E,T,I,k){var O,M,re,se,Y,be,Pe,oe,we;for(se=E,we=b[u],oe=u,Y=0;oe>0;Y++)M=zd*we|0,Cr[Y]=we-Ga*M|0,we=b[oe-1]+M,oe-=1;if(we=Qc(we,w),we-=8*mg(.125*we),we-=Pe=0|we,re=0,w>0?(Pe+=Y=Cr[u-1]>>24-w,Cr[u-1]-=Y<<24-w,re=Cr[u-1]>>23-w):w===0?re=Cr[u-1]>>23:we>=.5&&(re=2),re>0){for(Pe+=1,O=0,Y=0;Y<u;Y++)oe=Cr[Y],O===0?oe!==0&&(O=1,Cr[Y]=16777216-oe):Cr[Y]=16777215-oe;if(w>0)switch(w){case 1:Cr[u-1]&=8388607;break;case 2:Cr[u-1]&=4194303}re===2&&(we=1-we,O!==0&&(we-=Qc(1,w)))}if(we===0){for(oe=0,Y=u-1;Y>=E;Y--)oe|=Cr[Y];if(oe===0){for(be=1;Cr[E-be]===0;be++);for(Y=u+1;Y<=u+be;Y++){for(k[I+Y]=bg[T+Y],M=0,oe=0;oe<=I;oe++)M+=h[oe]*k[I+(Y-oe)];b[Y]=M}return cw(h,d,u+=be,b,w,E,T,I,k)}}if(we===0)for(u-=1,w-=24;Cr[u]===0;)u-=1,w-=24;else(we=Qc(we,-w))>=Ga?(M=zd*we|0,Cr[u]=we-Ga*M|0,w+=24,Cr[u+=1]=M):Cr[u]=0|we;for(M=Qc(1,w),Y=u;Y>=0;Y--)b[Y]=M*Cr[Y],M*=zd;for(Y=u;Y>=0;Y--){for(M=0,be=0;be<=se&&be<=u-Y;be++)M+=Jc[be]*b[Y+be];Gd[u-Y]=M}for(M=0,Y=u;Y>=0;Y--)M+=Gd[Y];for(d[0]=re===0?M:-M,M=Gd[0]-M,Y=1;Y<=u;Y++)M+=Gd[Y];return d[1]=re===0?M:-M,7&Pe}var eE=function(h,d,u,b){var w,E,T,I,k,O,M;for((E=(u-3)/24|0)<0&&(E=0),I=u-24*(E+1),O=E-(T=b-1),M=T+4,k=0;k<=M;k++)zf[k]=O<0?0:bg[O],O+=1;for(k=0;k<=4;k++){for(w=0,O=0;O<=T;O++)w+=h[O]*zf[T+(k-O)];Ha[k]=w}return cw(h,d,4,Ha,I,4,E,T,zf)},tE=Math.round,Xd=function(h,d,u){var b,w,E,T,I;return E=h-1.5707963267341256*(b=tE(.6366197723675814*h)),T=6077100506506192e-26*b,I=d>>20,u[0]=E-T,I-(Cn(u[0])>>20&2047)>16&&(T=20222662487959506e-37*b-((w=E)-(E=w-(T=6077100506303966e-26*b))-T),u[0]=E-T,I-(Cn(u[0])>>20&2047)>49&&(T=84784276603689e-45*b-((w=E)-(E=w-(T=20222662487111665e-37*b))-T),u[0]=E-T)),u[1]=E-u[0]-T,b},Vo=1.5707963267341256,Ko=6077100506506192e-26,Is=2*Ko,Wd=3*Ko,ss=4*Ko,Zr=new Array(3),lo=new Array(2),wg=function(h,d){var u,b,w,E,T,I,k;if((w=2147483647&Cn(h))<=1072243195)return d[0]=h,d[1]=0,0;if(w<=1074752122)return(1048575&w)==598523?Xd(h,w,d):w<=1073928572?h>0?(k=h-Vo,d[0]=k-Ko,d[1]=k-d[0]-Ko,1):(k=h+Vo,d[0]=k+Ko,d[1]=k-d[0]+Ko,-1):h>0?(k=h-2*Vo,d[0]=k-Is,d[1]=k-d[0]-Is,2):(k=h+2*Vo,d[0]=k+Is,d[1]=k-d[0]+Is,-2);if(w<=1075594811)return w<=1075183036?w===1074977148?Xd(h,w,d):h>0?(k=h-3*Vo,d[0]=k-Wd,d[1]=k-d[0]-Wd,3):(k=h+3*Vo,d[0]=k+Wd,d[1]=k-d[0]+Wd,-3):w===1075388923?Xd(h,w,d):h>0?(k=h-4*Vo,d[0]=k-ss,d[1]=k-d[0]-ss,4):(k=h+4*Vo,d[0]=k+ss,d[1]=k-d[0]+ss,-4);if(w<1094263291)return Xd(h,w,d);if(w>=2146435072)return d[0]=NaN,d[1]=NaN,0;for(u=Bd(h),k=tu(w-((b=(w>>20)-1046)<<20),u),T=0;T<2;T++)Zr[T]=0|k,k=16777216*(k-Zr[T]);for(Zr[2]=k,E=3;Zr[E-1]===0;)E-=1;return I=eE(Zr,lo,b,E),h<0?(d[0]=-lo[0],d[1]=-lo[1],-I):(d[0]=lo[0],d[1]=lo[1],I)},nu=wg,oi=[0,0],vg=function(h){var d;if(d=Cn(h),(d&=2147483647)<=1072243195)return d<1044381696?1:$d(h,0);if(d>=2146435072)return NaN;switch(3&nu(h,oi)){case 0:return $d(oi[0],oi[1]);case 1:return-jd(oi[0],oi[1]);case 2:return-$d(oi[0],oi[1]);default:return jd(oi[0],oi[1])}},ru=Math.ceil,lw=function(h){return h<0?ru(h):mg(h)},Gf=function(h){return h===0?.16666666666666602:.16666666666666602+h*(h*(6613756321437934e-20+h*(41381367970572385e-24*h-16533902205465252e-22))-.0027777777777015593)},su=function(h,d,u){var b,w,E;return E=(b=h-d)-(w=b*b)*Gf(w),Qc(1-(d-b*E/(2-E)-h),u)},uw=1.4426950408889634,Ws=1/(1<<28),Yo=function(h){var d;return Pn(h)||h===As?h:h===ii?0:h>709.782712893384?As:h<-745.1332191019411?0:h>-3725290298461914e-24&&h<Ws?1+h:(d=lw(h<0?uw*h-.5:uw*h+.5),su(h-.6931471803691238*d,19082149292705877e-26*d,d))},qo=function(h){return Pn(h)?h:(h<0&&(h=-h),h>21?Yo(h)/2:(Yo(h)+Yo(-h))/2)},dw=function(h){return h===0?-.03333333333333313:h*(.0015873015872548146+h*(h*(4008217827329362e-21+-20109921818362437e-23*h)-793650757867488e-19))-.03333333333333313},iu=.6931471803691238,Xa=19082149292705877e-26,Hf=1.4426950408889634,Eg=function(h){var d,u,b,w,E,T,I,k,O,M,re,se;if(h===As||Pn(h))return h;if(h===ii)return-1;if(h===0)return h;if(h<0?(u=!0,I=-h):(u=!1,I=h),I>=38.816242111356935){if(u)return-1;if(I>=709.782712893384)return As}if(E=0|Cn(I),I>.34657359027997264)I<1.0397207708399179?u?(b=h+iu,w=-19082149292705877e-26,se=-1):(b=h-iu,w=Xa,se=1):(se=u?Hf*h-.5:Hf*h+.5,b=h-(M=se|=0)*iu,w=M*Xa),O=b-(h=b-w)-w;else{if(E<1016070144)return h;se=0}return re=(k=h*(d=.5*h))*(((T=1+k*dw(k))-(M=3-T*d))/(6-h*M)),se===0?h-(h*re-k):(re=h*(re-O)-O,re-=k,se===-1?.5*(h-re)-.5:se===1?h<-.25?-2*(re-(h+.5)):1+2*(h-re):se<=-2||se>56?(b=Cn(I=1-(re-h))+(se<<20)|0,(I=Ts(I,b))-1):(M=1,se<20?I=(M=Ts(M,b=1072693248-(2097152>>se)|0))-(re-h):(I=h-(re+(M=Ts(M,b=Ba-se<<20))),I+=1),b=Cn(I)+(se<<20)|0,Ts(I,b)))},ou=Wo===!0?0:1,Wa=new $a(1),Xf=new Ql(Wa.buffer),Wf=function(h,d){return Wa[0]=h,Xf[ou]=d>>>0,Wa[0]},is=Wf,ai=function(h){return h===0?.3999999999940942:.3999999999940942+h*(.22222198432149784+.15313837699209373*h)},el=function(h){return h===0?.6666666666666735:.6666666666666735+h*(.2857142874366239+h*(.1818357216161805+.14798198605116586*h))},uo=1048575,Qo=function(h){var d,u,b,w,E,T,I,k,O,M;return b=Cn(h),w=h-1,(uo&2+b)<3?w===0?0:w*w*(.3333333333333333*w-.5):(O=(b&=uo)-398458|0,M=440401-b|0,u=(k=(T=(E=w/(2+w))*E)*T)*ai(k),I=T*el(k)+u,(O|=M)>0?E*((d=.5*w*w)+I)-d:E*(I-w))},Va=.4342944818781689,hw=function(h){var d,u,b,w,E,T,I;return Pn(h)||h<0?NaN:h===0?ii:(E=0,(u=Cn(h))<1048576&&(E-=54,u=Cn(h*=0x40000000000000)),u>=2146435072?h+h:(E+=(u>>20)-Ba|0,h=Ts(h,(u&=1048575)|1072693248^(w=u+614244&1048576)),T=E+=w>>20,b=Qo(h),I=3694239077158931e-28*T+25082946711645275e-27*((h-=1)+b),(I+=(h-(d=is(h,0))+b)*Va+d*Va)+.30102999566361177*T))},Cg=function(h){return h===0?.3999999999940942:.3999999999940942+h*(.22222198432149784+.15313837699209373*h)},Sg=function(h){return h===0?.6666666666666735:.6666666666666735+h*(.2857142874366239+h*(.1818357216161805+.14798198605116586*h))},zr=1048575,rr=function(h){var d,u,b,w,E,T,I,k,O,M;return b=Cn(h),w=h-1,(zr&2+b)<3?w===0?0:w*w*(.3333333333333333*w-.5):(O=(b&=zr)-398458|0,M=440401-b|0,u=(k=(T=(E=w/(2+w))*E)*T)*Cg(k),I=T*Sg(k)+u,(O|=M)>0?E*((d=.5*w*w)+I)-d:E*(I-w))},sn=1.4426950407214463,Jo=[0,0],ho=function(h){var d,u,b,w,E;if(Pn(h)||h<0)return NaN;if($f(Jo,h),E=0,(u=Jo[0])<1048576){if(!(2147483647&u|Jo[1]))return ii;E-=54,u=Cn(h*=0x40000000000000)}return u>=2146435072?h+h:(E+=(u>>20)-Ba|0,h=Ts(h,(u&=1048575)|1072693248^(w=u+614244&1048576)),E+=w>>20,b=rr(h),16751713164886512e-26*((h-=1)+b)+(h-(d=is(h,0))+b)*sn+d*sn+E)},Ui=[0,0],tl=function(h){var d;if(d=Cn(h),(d&=2147483647)<=1072243195)return d<1045430272?h:jd(h,0);if(d>=2146435072)return NaN;switch(3&nu(h,Ui)){case 0:return jd(Ui[0],Ui[1]);case 1:return $d(Ui[0],Ui[1]);case 2:return-jd(Ui[0],Ui[1]);default:return-$d(Ui[0],Ui[1])}},fw=function(h){var d,u;return h===0?.16666666666666666:((h<0?-h:h)<=1?(d=h*(h*(-.789474443963537*h-163.72585752598383)-11561.443576500522)-351754.9648081514,u=h*(36157.827983443196+h*(1*h-277.7110814206028))-2.1105297888489086e6):(d=(h=1/h)*(h*(-351754.9648081514*h-11561.443576500522)-163.72585752598383)-.789474443963537,u=1+h*(h*(36157.827983443196+-2.1105297888489086e6*h)-277.7110814206028)),d/u)},_g=709.782712893384,Vd=_g+Lf,Kd=_g-Lf,pw=function(h){var d;return h===0?h:(d=Zf(h),h>Vd||h<-709.089565712824?h>0?As:ii:d>1?d>=Kd?(d=Yo(.5*d),d*=.5*d,h<0&&(d=-d),d):(d=.5*(d=Yo(d))-.5/d,h<0&&(d=-d),d):h+h*(d*=d)*fw(d))},Yd=function(h){return h===0?.13333333333320124:.13333333333320124+h*(.021869488294859542+h*(.0035920791075913124+h*(.0005880412408202641+h*(7817944429395571e-20+-18558637485527546e-21*h))))},xg=function(h){return h===0?.05396825397622605:.05396825397622605+h*(.0088632398235993+h*(.0014562094543252903+h*(.0002464631348184699+h*(7140724913826082e-20+2590730518636337e-20*h))))},Ka=function(h,d,u){var b,w,E,T,I,k,O,M,re;return(w=2147483647&(b=Cn(h)))>=1072010280&&(h<0&&(h=-h,d=-d),h=(re=.7853981633974483-h)+(M=3061616997868383e-32-d),d=0),T=d+(re=h*h)*((I=re*h)*((T=Yd(M=re*re))+(O=re*xg(M)))+d),M=h+(T+=.3333333333333341*I),w>=1072010280?(1-(b>>30&2))*((O=u)-2*(h-(M*M/(M+O)-T))):u===1?M:(is(re=M,0),O=T-(re-h),is(k=E=-1/M,0),k+E*((I=1+k*re)+k*O))},$i=[0,0],Ya=function(h){var d,u;return d=Cn(h),(d&=2147483647)<=1072243195?d<1044381696?h:Ka(h,0,1):d>=2146435072?NaN:(u=nu(h,$i),Ka($i[0],$i[1],1-((1&u)<<1)))},ea=function(h){var d,u;return h===0?-.3333333333333332:((h<0?-h:h)<=1?(d=h*(h*(0*h-.9643991794250523)-99.28772310019185)-1614.6876844170845,u=4844.063053251255+h*(2235.4883906010045+h*(112.81167849163293+1*h))):(d=0+(h=1/h)*(h*(-1614.6876844170845*h-99.28772310019185)-.9643991794250523),u=1+h*(112.81167849163293+h*(2235.4883906010045+4844.063053251255*h))),d/u)},Tg=function(h){var d,u;if((u=Zf(h))>44.014845965556525)return h<0?-1:1;if(u>=.625)u=1-2/((d=Yo(2*u))+1),h<0&&(u=-u);else{if(h===0)return h;u=h+h*(d=h*h)*ea(d)}return u};globalThis.CroquetMath===void 0&&(globalThis.CroquetMath={}),Object.assign(globalThis.CroquetMath,{acos:M2,acosh:G2,asin:xd,asinh:H2,atan:Yb,atanh:V2,atan2:Bf,cbrt:nw,cos:vg,cosh:qo,exp:Yo,expm1:Eg,log:Dd,log1p:kd,log10:hw,log2:ho,sin:tl,sinh:pw,tan:Ya,tanh:Tg});const qd=Math.pow;function au(h){return h===1/0||h===-1/0}globalThis.CroquetMath.pow=(h,d)=>{if(isNaN(h)||isNaN(d))return NaN;if(au(h)||au(d)||h===0||d===0)return qd(h,d);if(h<0&&!function(b){return Number.isInteger(b)}(d))return NaN;if(d===1)return h;if(d===2)return h*h;if(d===3)return h*h*h;if(d===4)return h*h*h*h;let u=1;return h<0&&(h*=-1,u=qd(-1,d)),globalThis.CroquetMath.exp(globalThis.CroquetMath.log(h)*d)*u};class Vf extends n{poll(){const d=super.poll();return this.array[this.size]=null,d}asArray(){const d=[];return this.forEach(u=>d.push(u)),d}asUnsortedArray(){return this.array.slice(0,this.size)}}var qa,Ir={exports:{}};function Qd(){return qa||(qa=1,Ir.exports=function(h){return function(){var d=h,u=d.lib.WordArray;function b(w,E,T){for(var I=[],k=0,O=0;O<E;O++)if(O%4){var M=T[w.charCodeAt(O-1)]<<O%4*2|T[w.charCodeAt(O)]>>>6-O%4*2;I[k>>>2]|=M<<24-k%4*8,k++}return u.create(I,k)}d.enc.Base64={stringify:function(w){var E=w.words,T=w.sigBytes,I=this._map;w.clamp();for(var k=[],O=0;O<T;O+=3)for(var M=(E[O>>>2]>>>24-O%4*8&255)<<16|(E[O+1>>>2]>>>24-(O+1)%4*8&255)<<8|E[O+2>>>2]>>>24-(O+2)%4*8&255,re=0;re<4&&O+.75*re<T;re++)k.push(I.charAt(M>>>6*(3-re)&63));var se=I.charAt(64);if(se)for(;k.length%4;)k.push(se);return k.join("")},parse:function(w){var E=w.length,T=this._map,I=this._reverseMap;if(!I){I=this._reverseMap=[];for(var k=0;k<T.length;k++)I[T.charCodeAt(k)]=k}var O=T.charAt(64);if(O){var M=w.indexOf(O);M!==-1&&(E=M)}return b(w,E,I)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),h.enc.Base64}(he())),Ir.exports}var Ag,Vs=s(Qd()),mw=he(),gw={exports:{}},fr,Ig=(Ag||(Ag=1,gw.exports=function(h){return h.enc.Utf8}(he())),gw.exports),Jd=s(Ig),cu={exports:{}},Kf={exports:{}};function Qa(){return fr||(fr=1,Kf.exports=function(h){(function(){var d=h,u=d.lib.Base,b=d.enc.Utf8;d.algo.HMAC=u.extend({init:function(w,E){w=this._hasher=new w.init,typeof E=="string"&&(E=b.parse(E));var T=w.blockSize,I=4*T;E.sigBytes>I&&(E=w.finalize(E)),E.clamp();for(var k=this._oKey=E.clone(),O=this._iKey=E.clone(),M=k.words,re=O.words,se=0;se<T;se++)M[se]^=1549556828,re[se]^=909522486;k.sigBytes=O.sigBytes=I,this.reset()},reset:function(){var w=this._hasher;w.reset(),w.update(this._iKey)},update:function(w){return this._hasher.update(w),this},finalize:function(w){var E=this._hasher,T=E.finalize(w);return E.reset(),E.finalize(this._oKey.clone().concat(T))}})})()}(he())),Kf.exports}var nl,yw,bw=(nl||(nl=1,cu.exports=function(h){return function(){var d=h,u=d.lib,b=u.Base,w=u.WordArray,E=d.algo,T=E.SHA256,I=E.HMAC,k=E.PBKDF2=b.extend({cfg:b.extend({keySize:4,hasher:T,iterations:25e4}),init:function(O){this.cfg=this.cfg.extend(O)},compute:function(O,M){for(var re=this.cfg,se=I.create(re.hasher,O),Y=w.create(),be=w.create([1]),Pe=Y.words,oe=be.words,we=re.keySize,ve=re.iterations;Pe.length<we;){var xe=se.update(M).finalize(be);se.reset();for(var ye=xe.words,ee=ye.length,te=xe,ie=1;ie<ve;ie++){te=se.finalize(te),se.reset();for(var ce=te.words,le=0;le<ee;le++)ye[le]^=ce[le]}Y.concat(xe),oe[0]++}return Y.sigBytes=4*we,Y}});d.PBKDF2=function(O,M,re){return k.create(re).compute(O,M)}}(),h.PBKDF2}(he(),H(),Qa())),cu.exports),ww=s(bw),Ng={exports:{}},Ja={exports:{}};function Rg(){return yw||(yw=1,Ja.exports=function(h){return function(d){var u=h,b=u.lib,w=b.WordArray,E=b.Hasher,T=u.algo,I=[];(function(){for(var Y=0;Y<64;Y++)I[Y]=4294967296*d.abs(d.sin(Y+1))|0})();var k=T.MD5=E.extend({_doReset:function(){this._hash=new w.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(Y,be){for(var Pe=0;Pe<16;Pe++){var oe=be+Pe,we=Y[oe];Y[oe]=16711935&(we<<8|we>>>24)|4278255360&(we<<24|we>>>8)}var ve=this._hash.words,xe=Y[be+0],ye=Y[be+1],ee=Y[be+2],te=Y[be+3],ie=Y[be+4],ce=Y[be+5],le=Y[be+6],Ue=Y[be+7],Qe=Y[be+8],ze=Y[be+9],St=Y[be+10],kt=Y[be+11],Ct=Y[be+12],zn=Y[be+13],Gn=Y[be+14],Xe=Y[be+15],_e=ve[0],Ie=ve[1],Ze=ve[2],Be=ve[3];_e=O(_e,Ie,Ze,Be,xe,7,I[0]),Be=O(Be,_e,Ie,Ze,ye,12,I[1]),Ze=O(Ze,Be,_e,Ie,ee,17,I[2]),Ie=O(Ie,Ze,Be,_e,te,22,I[3]),_e=O(_e,Ie,Ze,Be,ie,7,I[4]),Be=O(Be,_e,Ie,Ze,ce,12,I[5]),Ze=O(Ze,Be,_e,Ie,le,17,I[6]),Ie=O(Ie,Ze,Be,_e,Ue,22,I[7]),_e=O(_e,Ie,Ze,Be,Qe,7,I[8]),Be=O(Be,_e,Ie,Ze,ze,12,I[9]),Ze=O(Ze,Be,_e,Ie,St,17,I[10]),Ie=O(Ie,Ze,Be,_e,kt,22,I[11]),_e=O(_e,Ie,Ze,Be,Ct,7,I[12]),Be=O(Be,_e,Ie,Ze,zn,12,I[13]),Ze=O(Ze,Be,_e,Ie,Gn,17,I[14]),_e=M(_e,Ie=O(Ie,Ze,Be,_e,Xe,22,I[15]),Ze,Be,ye,5,I[16]),Be=M(Be,_e,Ie,Ze,le,9,I[17]),Ze=M(Ze,Be,_e,Ie,kt,14,I[18]),Ie=M(Ie,Ze,Be,_e,xe,20,I[19]),_e=M(_e,Ie,Ze,Be,ce,5,I[20]),Be=M(Be,_e,Ie,Ze,St,9,I[21]),Ze=M(Ze,Be,_e,Ie,Xe,14,I[22]),Ie=M(Ie,Ze,Be,_e,ie,20,I[23]),_e=M(_e,Ie,Ze,Be,ze,5,I[24]),Be=M(Be,_e,Ie,Ze,Gn,9,I[25]),Ze=M(Ze,Be,_e,Ie,te,14,I[26]),Ie=M(Ie,Ze,Be,_e,Qe,20,I[27]),_e=M(_e,Ie,Ze,Be,zn,5,I[28]),Be=M(Be,_e,Ie,Ze,ee,9,I[29]),Ze=M(Ze,Be,_e,Ie,Ue,14,I[30]),_e=re(_e,Ie=M(Ie,Ze,Be,_e,Ct,20,I[31]),Ze,Be,ce,4,I[32]),Be=re(Be,_e,Ie,Ze,Qe,11,I[33]),Ze=re(Ze,Be,_e,Ie,kt,16,I[34]),Ie=re(Ie,Ze,Be,_e,Gn,23,I[35]),_e=re(_e,Ie,Ze,Be,ye,4,I[36]),Be=re(Be,_e,Ie,Ze,ie,11,I[37]),Ze=re(Ze,Be,_e,Ie,Ue,16,I[38]),Ie=re(Ie,Ze,Be,_e,St,23,I[39]),_e=re(_e,Ie,Ze,Be,zn,4,I[40]),Be=re(Be,_e,Ie,Ze,xe,11,I[41]),Ze=re(Ze,Be,_e,Ie,te,16,I[42]),Ie=re(Ie,Ze,Be,_e,le,23,I[43]),_e=re(_e,Ie,Ze,Be,ze,4,I[44]),Be=re(Be,_e,Ie,Ze,Ct,11,I[45]),Ze=re(Ze,Be,_e,Ie,Xe,16,I[46]),_e=se(_e,Ie=re(Ie,Ze,Be,_e,ee,23,I[47]),Ze,Be,xe,6,I[48]),Be=se(Be,_e,Ie,Ze,Ue,10,I[49]),Ze=se(Ze,Be,_e,Ie,Gn,15,I[50]),Ie=se(Ie,Ze,Be,_e,ce,21,I[51]),_e=se(_e,Ie,Ze,Be,Ct,6,I[52]),Be=se(Be,_e,Ie,Ze,te,10,I[53]),Ze=se(Ze,Be,_e,Ie,St,15,I[54]),Ie=se(Ie,Ze,Be,_e,ye,21,I[55]),_e=se(_e,Ie,Ze,Be,Qe,6,I[56]),Be=se(Be,_e,Ie,Ze,Xe,10,I[57]),Ze=se(Ze,Be,_e,Ie,le,15,I[58]),Ie=se(Ie,Ze,Be,_e,zn,21,I[59]),_e=se(_e,Ie,Ze,Be,ie,6,I[60]),Be=se(Be,_e,Ie,Ze,kt,10,I[61]),Ze=se(Ze,Be,_e,Ie,ee,15,I[62]),Ie=se(Ie,Ze,Be,_e,ze,21,I[63]),ve[0]=ve[0]+_e|0,ve[1]=ve[1]+Ie|0,ve[2]=ve[2]+Ze|0,ve[3]=ve[3]+Be|0},_doFinalize:function(){var Y=this._data,be=Y.words,Pe=8*this._nDataBytes,oe=8*Y.sigBytes;be[oe>>>5]|=128<<24-oe%32;var we=d.floor(Pe/4294967296),ve=Pe;be[15+(oe+64>>>9<<4)]=16711935&(we<<8|we>>>24)|4278255360&(we<<24|we>>>8),be[14+(oe+64>>>9<<4)]=16711935&(ve<<8|ve>>>24)|4278255360&(ve<<24|ve>>>8),Y.sigBytes=4*(be.length+1),this._process();for(var xe=this._hash,ye=xe.words,ee=0;ee<4;ee++){var te=ye[ee];ye[ee]=16711935&(te<<8|te>>>24)|4278255360&(te<<24|te>>>8)}return xe},clone:function(){var Y=E.clone.call(this);return Y._hash=this._hash.clone(),Y}});function O(Y,be,Pe,oe,we,ve,xe){var ye=Y+(be&Pe|~be&oe)+we+xe;return(ye<<ve|ye>>>32-ve)+be}function M(Y,be,Pe,oe,we,ve,xe){var ye=Y+(be&oe|Pe&~oe)+we+xe;return(ye<<ve|ye>>>32-ve)+be}function re(Y,be,Pe,oe,we,ve,xe){var ye=Y+(be^Pe^oe)+we+xe;return(ye<<ve|ye>>>32-ve)+be}function se(Y,be,Pe,oe,we,ve,xe){var ye=Y+(Pe^(be|~oe))+we+xe;return(ye<<ve|ye>>>32-ve)+be}u.MD5=E._createHelper(k),u.HmacMD5=E._createHmacHelper(k)}(Math),h.MD5}(he())),Ja.exports}var eh,Og={exports:{}},lu={exports:{}};function vw(){return eh||(eh=1,lu.exports=function(h){return function(){var d=h,u=d.lib,b=u.WordArray,w=u.Hasher,E=d.algo,T=[],I=E.SHA1=w.extend({_doReset:function(){this._hash=new b.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(k,O){for(var M=this._hash.words,re=M[0],se=M[1],Y=M[2],be=M[3],Pe=M[4],oe=0;oe<80;oe++){if(oe<16)T[oe]=0|k[O+oe];else{var we=T[oe-3]^T[oe-8]^T[oe-14]^T[oe-16];T[oe]=we<<1|we>>>31}var ve=(re<<5|re>>>27)+Pe+T[oe];ve+=oe<20?1518500249+(se&Y|~se&be):oe<40?1859775393+(se^Y^be):oe<60?(se&Y|se&be|Y&be)-1894007588:(se^Y^be)-899497514,Pe=be,be=Y,Y=se<<30|se>>>2,se=re,re=ve}M[0]=M[0]+re|0,M[1]=M[1]+se|0,M[2]=M[2]+Y|0,M[3]=M[3]+be|0,M[4]=M[4]+Pe|0},_doFinalize:function(){var k=this._data,O=k.words,M=8*this._nDataBytes,re=8*k.sigBytes;return O[re>>>5]|=128<<24-re%32,O[14+(re+64>>>9<<4)]=Math.floor(M/4294967296),O[15+(re+64>>>9<<4)]=M,k.sigBytes=4*O.length,this._process(),this._hash},clone:function(){var k=w.clone.call(this);return k._hash=this._hash.clone(),k}});d.SHA1=w._createHelper(I),d.HmacSHA1=w._createHmacHelper(I)}(),h.SHA1}(he())),lu.exports}var th;function Yf(){return th||(th=1,Og.exports=function(h){return function(){var d=h,u=d.lib,b=u.Base,w=u.WordArray,E=d.algo,T=E.MD5,I=E.EvpKDF=b.extend({cfg:b.extend({keySize:4,hasher:T,iterations:1}),init:function(k){this.cfg=this.cfg.extend(k)},compute:function(k,O){for(var M,re=this.cfg,se=re.hasher.create(),Y=w.create(),be=Y.words,Pe=re.keySize,oe=re.iterations;be.length<Pe;){M&&se.update(M),M=se.update(k).finalize(O),se.reset();for(var we=1;we<oe;we++)M=se.finalize(M),se.reset();Y.concat(M)}return Y.sigBytes=4*Pe,Y}});d.EvpKDF=function(k,O,M){return I.create(M).compute(k,O)}}(),h.EvpKDF}(he(),vw(),Qa())),Og.exports}var Pg,nh,kg,rh=(nh||(nh=1,Ng.exports=function(h){return function(){var d=h,u=d.lib.BlockCipher,b=d.algo,w=[],E=[],T=[],I=[],k=[],O=[],M=[],re=[],se=[],Y=[];(function(){for(var oe=[],we=0;we<256;we++)oe[we]=we<128?we<<1:we<<1^283;var ve=0,xe=0;for(we=0;we<256;we++){var ye=xe^xe<<1^xe<<2^xe<<3^xe<<4;ye=ye>>>8^255&ye^99,w[ve]=ye,E[ye]=ve;var ee=oe[ve],te=oe[ee],ie=oe[te],ce=257*oe[ye]^16843008*ye;T[ve]=ce<<24|ce>>>8,I[ve]=ce<<16|ce>>>16,k[ve]=ce<<8|ce>>>24,O[ve]=ce,ce=16843009*ie^65537*te^257*ee^16843008*ve,M[ye]=ce<<24|ce>>>8,re[ye]=ce<<16|ce>>>16,se[ye]=ce<<8|ce>>>24,Y[ye]=ce,ve?(ve=ee^oe[oe[oe[ie^ee]]],xe^=oe[oe[xe]]):ve=xe=1}})();var be=[0,1,2,4,8,16,32,64,128,27,54],Pe=b.AES=u.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var oe=this._keyPriorReset=this._key,we=oe.words,ve=oe.sigBytes/4,xe=4*((this._nRounds=ve+6)+1),ye=this._keySchedule=[],ee=0;ee<xe;ee++)ee<ve?ye[ee]=we[ee]:(ce=ye[ee-1],ee%ve?ve>6&&ee%ve==4&&(ce=w[ce>>>24]<<24|w[ce>>>16&255]<<16|w[ce>>>8&255]<<8|w[255&ce]):(ce=w[(ce=ce<<8|ce>>>24)>>>24]<<24|w[ce>>>16&255]<<16|w[ce>>>8&255]<<8|w[255&ce],ce^=be[ee/ve|0]<<24),ye[ee]=ye[ee-ve]^ce);for(var te=this._invKeySchedule=[],ie=0;ie<xe;ie++){if(ee=xe-ie,ie%4)var ce=ye[ee];else ce=ye[ee-4];te[ie]=ie<4||ee<=4?ce:M[w[ce>>>24]]^re[w[ce>>>16&255]]^se[w[ce>>>8&255]]^Y[w[255&ce]]}}},encryptBlock:function(oe,we){this._doCryptBlock(oe,we,this._keySchedule,T,I,k,O,w)},decryptBlock:function(oe,we){var ve=oe[we+1];oe[we+1]=oe[we+3],oe[we+3]=ve,this._doCryptBlock(oe,we,this._invKeySchedule,M,re,se,Y,E),ve=oe[we+1],oe[we+1]=oe[we+3],oe[we+3]=ve},_doCryptBlock:function(oe,we,ve,xe,ye,ee,te,ie){for(var ce=this._nRounds,le=oe[we]^ve[0],Ue=oe[we+1]^ve[1],Qe=oe[we+2]^ve[2],ze=oe[we+3]^ve[3],St=4,kt=1;kt<ce;kt++){var Ct=xe[le>>>24]^ye[Ue>>>16&255]^ee[Qe>>>8&255]^te[255&ze]^ve[St++],zn=xe[Ue>>>24]^ye[Qe>>>16&255]^ee[ze>>>8&255]^te[255&le]^ve[St++],Gn=xe[Qe>>>24]^ye[ze>>>16&255]^ee[le>>>8&255]^te[255&Ue]^ve[St++],Xe=xe[ze>>>24]^ye[le>>>16&255]^ee[Ue>>>8&255]^te[255&Qe]^ve[St++];le=Ct,Ue=zn,Qe=Gn,ze=Xe}Ct=(ie[le>>>24]<<24|ie[Ue>>>16&255]<<16|ie[Qe>>>8&255]<<8|ie[255&ze])^ve[St++],zn=(ie[Ue>>>24]<<24|ie[Qe>>>16&255]<<16|ie[ze>>>8&255]<<8|ie[255&le])^ve[St++],Gn=(ie[Qe>>>24]<<24|ie[ze>>>16&255]<<16|ie[le>>>8&255]<<8|ie[255&Ue])^ve[St++],Xe=(ie[ze>>>24]<<24|ie[le>>>16&255]<<16|ie[Ue>>>8&255]<<8|ie[255&Qe])^ve[St++],oe[we]=Ct,oe[we+1]=zn,oe[we+2]=Gn,oe[we+3]=Xe},keySize:8});d.AES=u._createHelper(Pe)}(),h.AES}(he(),Qd(),Rg(),Yf(),Pg||(Pg=1,function(h){h.lib.Cipher||function(d){var u=h,b=u.lib,w=b.Base,E=b.WordArray,T=b.BufferedBlockAlgorithm,I=u.enc;I.Utf8;var k=I.Base64,O=u.algo.EvpKDF,M=b.Cipher=T.extend({cfg:w.extend(),createEncryptor:function(ye,ee){return this.create(this._ENC_XFORM_MODE,ye,ee)},createDecryptor:function(ye,ee){return this.create(this._DEC_XFORM_MODE,ye,ee)},init:function(ye,ee,te){this.cfg=this.cfg.extend(te),this._xformMode=ye,this._key=ee,this.reset()},reset:function(){T.reset.call(this),this._doReset()},process:function(ye){return this._append(ye),this._process()},finalize:function(ye){return ye&&this._append(ye),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function ye(ee){return typeof ee=="string"?xe:we}return function(ee){return{encrypt:function(te,ie,ce){return ye(ie).encrypt(ee,te,ie,ce)},decrypt:function(te,ie,ce){return ye(ie).decrypt(ee,te,ie,ce)}}}}()});b.StreamCipher=M.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var re=u.mode={},se=b.BlockCipherMode=w.extend({createEncryptor:function(ye,ee){return this.Encryptor.create(ye,ee)},createDecryptor:function(ye,ee){return this.Decryptor.create(ye,ee)},init:function(ye,ee){this._cipher=ye,this._iv=ee}}),Y=re.CBC=function(){var ye=se.extend();function ee(te,ie,ce){var le,Ue=this._iv;Ue?(le=Ue,this._iv=d):le=this._prevBlock;for(var Qe=0;Qe<ce;Qe++)te[ie+Qe]^=le[Qe]}return ye.Encryptor=ye.extend({processBlock:function(te,ie){var ce=this._cipher,le=ce.blockSize;ee.call(this,te,ie,le),ce.encryptBlock(te,ie),this._prevBlock=te.slice(ie,ie+le)}}),ye.Decryptor=ye.extend({processBlock:function(te,ie){var ce=this._cipher,le=ce.blockSize,Ue=te.slice(ie,ie+le);ce.decryptBlock(te,ie),ee.call(this,te,ie,le),this._prevBlock=Ue}}),ye}(),be=(u.pad={}).Pkcs7={pad:function(ye,ee){for(var te=4*ee,ie=te-ye.sigBytes%te,ce=ie<<24|ie<<16|ie<<8|ie,le=[],Ue=0;Ue<ie;Ue+=4)le.push(ce);var Qe=E.create(le,ie);ye.concat(Qe)},unpad:function(ye){var ee=255&ye.words[ye.sigBytes-1>>>2];ye.sigBytes-=ee}};b.BlockCipher=M.extend({cfg:M.cfg.extend({mode:Y,padding:be}),reset:function(){var ye;M.reset.call(this);var ee=this.cfg,te=ee.iv,ie=ee.mode;this._xformMode==this._ENC_XFORM_MODE?ye=ie.createEncryptor:(ye=ie.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==ye?this._mode.init(this,te&&te.words):(this._mode=ye.call(ie,this,te&&te.words),this._mode.__creator=ye)},_doProcessBlock:function(ye,ee){this._mode.processBlock(ye,ee)},_doFinalize:function(){var ye,ee=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(ee.pad(this._data,this.blockSize),ye=this._process(!0)):(ye=this._process(!0),ee.unpad(ye)),ye},blockSize:4});var Pe=b.CipherParams=w.extend({init:function(ye){this.mixIn(ye)},toString:function(ye){return(ye||this.formatter).stringify(this)}}),oe=(u.format={}).OpenSSL={stringify:function(ye){var ee=ye.ciphertext,te=ye.salt;return(te?E.create([1398893684,1701076831]).concat(te).concat(ee):ee).toString(k)},parse:function(ye){var ee,te=k.parse(ye),ie=te.words;return ie[0]==1398893684&&ie[1]==1701076831&&(ee=E.create(ie.slice(2,4)),ie.splice(0,4),te.sigBytes-=16),Pe.create({ciphertext:te,salt:ee})}},we=b.SerializableCipher=w.extend({cfg:w.extend({format:oe}),encrypt:function(ye,ee,te,ie){ie=this.cfg.extend(ie);var ce=ye.createEncryptor(te,ie),le=ce.finalize(ee),Ue=ce.cfg;return Pe.create({ciphertext:le,key:te,iv:Ue.iv,algorithm:ye,mode:Ue.mode,padding:Ue.padding,blockSize:ye.blockSize,formatter:ie.format})},decrypt:function(ye,ee,te,ie){return ie=this.cfg.extend(ie),ee=this._parse(ee,ie.format),ye.createDecryptor(te,ie).finalize(ee.ciphertext)},_parse:function(ye,ee){return typeof ye=="string"?ee.parse(ye,this):ye}}),ve=(u.kdf={}).OpenSSL={execute:function(ye,ee,te,ie,ce){if(ie||(ie=E.random(8)),ce)le=O.create({keySize:ee+te,hasher:ce}).compute(ye,ie);else var le=O.create({keySize:ee+te}).compute(ye,ie);var Ue=E.create(le.words.slice(ee),4*te);return le.sigBytes=4*ee,Pe.create({key:le,iv:Ue,salt:ie})}},xe=b.PasswordBasedCipher=we.extend({cfg:we.cfg.extend({kdf:ve}),encrypt:function(ye,ee,te,ie){var ce=(ie=this.cfg.extend(ie)).kdf.execute(te,ye.keySize,ye.ivSize,ie.salt,ie.hasher);ie.iv=ce.iv;var le=we.encrypt.call(this,ye,ee,ce.key,ie);return le.mixIn(ce),le},decrypt:function(ye,ee,te,ie){ie=this.cfg.extend(ie),ee=this._parse(ee,ie.format);var ce=ie.kdf.execute(te,ye.keySize,ye.ivSize,ee.salt,ie.hasher);return ie.iv=ce.iv,we.decrypt.call(this,ye,ee,ce.key,ie)}})}()}(he(),Yf())))),Ng.exports),sh=s(rh),Lg={exports:{}},ec=(kg||(kg=1,Lg.exports=function(h){return h.HmacSHA256}(he(),H(),Qa())),Lg.exports),ih=s(ec);function tc(h){let d=h.length;for(;--d>=0;)h[d]=0}const fo=256,ta=286,na=30,rl=15,oh=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),nc=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ah=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Dg=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),po=new Array(576);tc(po);const mo=new Array(60);tc(mo);const rc=new Array(512);tc(rc);const uu=new Array(256);tc(uu);const ch=new Array(29);tc(ch);const du=new Array(na);function go(h,d,u,b,w){this.static_tree=h,this.extra_bits=d,this.extra_base=u,this.elems=b,this.max_length=w,this.has_stree=h&&h.length}let Ft,wn,ar;function hu(h,d){this.dyn_tree=h,this.max_code=0,this.stat_desc=d}tc(du);const sl=h=>h<256?rc[h]:rc[256+(h>>>7)],ji=(h,d)=>{h.pending_buf[h.pending++]=255&d,h.pending_buf[h.pending++]=d>>>8&255},Nr=(h,d,u)=>{h.bi_valid>16-u?(h.bi_buf|=d<<h.bi_valid&65535,ji(h,h.bi_buf),h.bi_buf=d>>16-h.bi_valid,h.bi_valid+=u-16):(h.bi_buf|=d<<h.bi_valid&65535,h.bi_valid+=u)},Ns=(h,d,u)=>{Nr(h,u[2*d],u[2*d+1])},il=(h,d)=>{let u=0;do u|=1&h,h>>>=1,u<<=1;while(--d>0);return u>>>1},Ew=(h,d,u)=>{const b=new Array(16);let w,E,T=0;for(w=1;w<=rl;w++)T=T+u[w-1]<<1,b[w]=T;for(E=0;E<=d;E++){let I=h[2*E+1];I!==0&&(h[2*E]=il(b[I]++,I))}},sr=h=>{let d;for(d=0;d<ta;d++)h.dyn_ltree[2*d]=0;for(d=0;d<na;d++)h.dyn_dtree[2*d]=0;for(d=0;d<19;d++)h.bl_tree[2*d]=0;h.dyn_ltree[512]=1,h.opt_len=h.static_len=0,h.sym_next=h.matches=0},qf=h=>{h.bi_valid>8?ji(h,h.bi_buf):h.bi_valid>0&&(h.pending_buf[h.pending++]=h.bi_buf),h.bi_buf=0,h.bi_valid=0},Qf=(h,d,u,b)=>{const w=2*d,E=2*u;return h[w]<h[E]||h[w]===h[E]&&b[d]<=b[u]},Jf=(h,d,u)=>{const b=h.heap[u];let w=u<<1;for(;w<=h.heap_len&&(w<h.heap_len&&Qf(d,h.heap[w+1],h.heap[w],h.depth)&&w++,!Qf(d,b,h.heap[w],h.depth));)h.heap[u]=h.heap[w],u=w,w<<=1;h.heap[u]=b},Mg=(h,d,u)=>{let b,w,E,T,I=0;if(h.sym_next!==0)do b=255&h.pending_buf[h.sym_buf+I++],b+=(255&h.pending_buf[h.sym_buf+I++])<<8,w=h.pending_buf[h.sym_buf+I++],b===0?Ns(h,w,d):(E=uu[w],Ns(h,E+fo+1,d),T=oh[E],T!==0&&(w-=ch[E],Nr(h,w,T)),b--,E=sl(b),Ns(h,E,u),T=nc[E],T!==0&&(b-=du[E],Nr(h,b,T)));while(I<h.sym_next);Ns(h,256,d)},Ug=(h,d)=>{const u=d.dyn_tree,b=d.stat_desc.static_tree,w=d.stat_desc.has_stree,E=d.stat_desc.elems;let T,I,k,O=-1;for(h.heap_len=0,h.heap_max=573,T=0;T<E;T++)u[2*T]!==0?(h.heap[++h.heap_len]=O=T,h.depth[T]=0):u[2*T+1]=0;for(;h.heap_len<2;)k=h.heap[++h.heap_len]=O<2?++O:0,u[2*k]=1,h.depth[k]=0,h.opt_len--,w&&(h.static_len-=b[2*k+1]);for(d.max_code=O,T=h.heap_len>>1;T>=1;T--)Jf(h,u,T);k=E;do T=h.heap[1],h.heap[1]=h.heap[h.heap_len--],Jf(h,u,1),I=h.heap[1],h.heap[--h.heap_max]=T,h.heap[--h.heap_max]=I,u[2*k]=u[2*T]+u[2*I],h.depth[k]=(h.depth[T]>=h.depth[I]?h.depth[T]:h.depth[I])+1,u[2*T+1]=u[2*I+1]=k,h.heap[1]=k++,Jf(h,u,1);while(h.heap_len>=2);h.heap[--h.heap_max]=h.heap[1],((M,re)=>{const se=re.dyn_tree,Y=re.max_code,be=re.stat_desc.static_tree,Pe=re.stat_desc.has_stree,oe=re.stat_desc.extra_bits,we=re.stat_desc.extra_base,ve=re.stat_desc.max_length;let xe,ye,ee,te,ie,ce,le=0;for(te=0;te<=rl;te++)M.bl_count[te]=0;for(se[2*M.heap[M.heap_max]+1]=0,xe=M.heap_max+1;xe<573;xe++)ye=M.heap[xe],te=se[2*se[2*ye+1]+1]+1,te>ve&&(te=ve,le++),se[2*ye+1]=te,ye>Y||(M.bl_count[te]++,ie=0,ye>=we&&(ie=oe[ye-we]),ce=se[2*ye],M.opt_len+=ce*(te+ie),Pe&&(M.static_len+=ce*(be[2*ye+1]+ie)));if(le!==0){do{for(te=ve-1;M.bl_count[te]===0;)te--;M.bl_count[te]--,M.bl_count[te+1]+=2,M.bl_count[ve]--,le-=2}while(le>0);for(te=ve;te!==0;te--)for(ye=M.bl_count[te];ye!==0;)ee=M.heap[--xe],ee>Y||(se[2*ee+1]!==te&&(M.opt_len+=(te-se[2*ee+1])*se[2*ee],se[2*ee+1]=te),ye--)}})(h,d),Ew(u,O,h.bl_count)},ep=(h,d,u)=>{let b,w,E=-1,T=d[1],I=0,k=7,O=4;for(T===0&&(k=138,O=3),d[2*(u+1)+1]=65535,b=0;b<=u;b++)w=T,T=d[2*(b+1)+1],++I<k&&w===T||(I<O?h.bl_tree[2*w]+=I:w!==0?(w!==E&&h.bl_tree[2*w]++,h.bl_tree[32]++):I<=10?h.bl_tree[34]++:h.bl_tree[36]++,I=0,E=w,T===0?(k=138,O=3):w===T?(k=6,O=3):(k=7,O=4))},tp=(h,d,u)=>{let b,w,E=-1,T=d[1],I=0,k=7,O=4;for(T===0&&(k=138,O=3),b=0;b<=u;b++)if(w=T,T=d[2*(b+1)+1],!(++I<k&&w===T)){if(I<O)do Ns(h,w,h.bl_tree);while(--I!=0);else w!==0?(w!==E&&(Ns(h,w,h.bl_tree),I--),Ns(h,16,h.bl_tree),Nr(h,I-3,2)):I<=10?(Ns(h,17,h.bl_tree),Nr(h,I-3,3)):(Ns(h,18,h.bl_tree),Nr(h,I-11,7));I=0,E=w,T===0?(k=138,O=3):w===T?(k=6,O=3):(k=7,O=4)}};let np=!1;const os=(h,d,u,b)=>{Nr(h,0+(b?1:0),3),qf(h),ji(h,u),ji(h,~u),u&&h.pending_buf.set(h.window.subarray(d,d+u),h.pending),h.pending+=u};var pr=(h,d,u,b)=>{let w,E,T=0;h.level>0?(h.strm.data_type===2&&(h.strm.data_type=(I=>{let k,O=4093624447;for(k=0;k<=31;k++,O>>>=1)if(1&O&&I.dyn_ltree[2*k]!==0)return 0;if(I.dyn_ltree[18]!==0||I.dyn_ltree[20]!==0||I.dyn_ltree[26]!==0)return 1;for(k=32;k<fo;k++)if(I.dyn_ltree[2*k]!==0)return 1;return 0})(h)),Ug(h,h.l_desc),Ug(h,h.d_desc),T=(I=>{let k;for(ep(I,I.dyn_ltree,I.l_desc.max_code),ep(I,I.dyn_dtree,I.d_desc.max_code),Ug(I,I.bl_desc),k=18;k>=3&&I.bl_tree[2*Dg[k]+1]===0;k--);return I.opt_len+=3*(k+1)+5+5+4,k})(h),w=h.opt_len+3+7>>>3,E=h.static_len+3+7>>>3,E<=w&&(w=E)):w=E=u+5,u+4<=w&&d!==-1?os(h,d,u,b):h.strategy===4||E===w?(Nr(h,2+(b?1:0),3),Mg(h,po,mo)):(Nr(h,4+(b?1:0),3),((I,k,O,M)=>{let re;for(Nr(I,k-257,5),Nr(I,O-1,5),Nr(I,M-4,4),re=0;re<M;re++)Nr(I,I.bl_tree[2*Dg[re]+1],3);tp(I,I.dyn_ltree,k-1),tp(I,I.dyn_dtree,O-1)})(h,h.l_desc.max_code+1,h.d_desc.max_code+1,T+1),Mg(h,h.dyn_ltree,h.dyn_dtree)),sr(h),b&&qf(h)},$g={_tr_init:h=>{np||((()=>{let d,u,b,w,E;const T=new Array(16);for(b=0,w=0;w<28;w++)for(ch[w]=b,d=0;d<1<<oh[w];d++)uu[b++]=w;for(uu[b-1]=w,E=0,w=0;w<16;w++)for(du[w]=E,d=0;d<1<<nc[w];d++)rc[E++]=w;for(E>>=7;w<na;w++)for(du[w]=E<<7,d=0;d<1<<nc[w]-7;d++)rc[256+E++]=w;for(u=0;u<=rl;u++)T[u]=0;for(d=0;d<=143;)po[2*d+1]=8,d++,T[8]++;for(;d<=255;)po[2*d+1]=9,d++,T[9]++;for(;d<=279;)po[2*d+1]=7,d++,T[7]++;for(;d<=287;)po[2*d+1]=8,d++,T[8]++;for(Ew(po,287,T),d=0;d<na;d++)mo[2*d+1]=5,mo[2*d]=il(d,5);Ft=new go(po,oh,257,ta,rl),wn=new go(mo,nc,0,na,rl),ar=new go(new Array(0),ah,0,19,7)})(),np=!0),h.l_desc=new hu(h.dyn_ltree,Ft),h.d_desc=new hu(h.dyn_dtree,wn),h.bl_desc=new hu(h.bl_tree,ar),h.bi_buf=0,h.bi_valid=0,sr(h)},_tr_stored_block:os,_tr_flush_block:pr,_tr_tally:(h,d,u)=>(h.pending_buf[h.sym_buf+h.sym_next++]=d,h.pending_buf[h.sym_buf+h.sym_next++]=d>>8,h.pending_buf[h.sym_buf+h.sym_next++]=u,d===0?h.dyn_ltree[2*u]++:(h.matches++,d--,h.dyn_ltree[2*(uu[u]+fo+1)]++,h.dyn_dtree[2*sl(d)]++),h.sym_next===h.sym_end),_tr_align:h=>{Nr(h,2,3),Ns(h,256,po),(d=>{d.bi_valid===16?(ji(d,d.bi_buf),d.bi_buf=0,d.bi_valid=0):d.bi_valid>=8&&(d.pending_buf[d.pending++]=255&d.bi_buf,d.bi_buf>>=8,d.bi_valid-=8)})(h)}},ra=(h,d,u,b)=>{let w=65535&h,E=h>>>16&65535,T=0;for(;u!==0;){T=u>2e3?2e3:u,u-=T;do w=w+d[b++]|0,E=E+w|0;while(--T);w%=65521,E%=65521}return w|E<<16};const rp=new Uint32Array((()=>{let h,d=[];for(var u=0;u<256;u++){h=u;for(var b=0;b<8;b++)h=1&h?3988292384^h>>>1:h>>>1;d[u]=h}return d})());var mr=(h,d,u,b)=>{const w=rp,E=b+u;h^=-1;for(let T=b;T<E;T++)h=h>>>8^w[255&(h^d[T])];return~h},as={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},sc={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:jg,_tr_stored_block:lh,_tr_flush_block:Cw,_tr_tally:sa,_tr_align:Sw}=$g,{Z_NO_FLUSH:ia,Z_PARTIAL_FLUSH:_w,Z_FULL_FLUSH:xw,Z_FINISH:Rs,Z_BLOCK:Bg,Z_OK:Rr,Z_STREAM_END:Fg,Z_STREAM_ERROR:Bi,Z_DATA_ERROR:Tw,Z_BUF_ERROR:uh,Z_DEFAULT_COMPRESSION:Aw,Z_FILTERED:Iw,Z_HUFFMAN_ONLY:dh,Z_RLE:Nw,Z_FIXED:Rw,Z_DEFAULT_STRATEGY:nE,Z_UNKNOWN:Ow,Z_DEFLATED:oa}=sc,yo=258,Fi=262,aa=42,Zi=113,fu=666,ic=(h,d)=>(h.msg=as[d],d),Zg=h=>2*h-(h>4?9:0),ca=h=>{let d=h.length;for(;--d>=0;)h[d]=0},Pw=h=>{let d,u,b,w=h.w_size;d=h.hash_size,b=d;do u=h.head[--b],h.head[b]=u>=w?u-w:0;while(--d);d=w,b=d;do u=h.prev[--b],h.prev[b]=u>=w?u-w:0;while(--d)};let la=(h,d,u)=>(d<<h.hash_shift^u)&h.hash_mask;const cs=h=>{const d=h.state;let u=d.pending;u>h.avail_out&&(u=h.avail_out),u!==0&&(h.output.set(d.pending_buf.subarray(d.pending_out,d.pending_out+u),h.next_out),h.next_out+=u,d.pending_out+=u,h.total_out+=u,h.avail_out-=u,d.pending-=u,d.pending===0&&(d.pending_out=0))},Os=(h,d)=>{Cw(h,h.block_start>=0?h.block_start:-1,h.strstart-h.block_start,d),h.block_start=h.strstart,cs(h.strm)},on=(h,d)=>{h.pending_buf[h.pending++]=d},ol=(h,d)=>{h.pending_buf[h.pending++]=d>>>8&255,h.pending_buf[h.pending++]=255&d},sp=(h,d,u,b)=>{let w=h.avail_in;return w>b&&(w=b),w===0?0:(h.avail_in-=w,d.set(h.input.subarray(h.next_in,h.next_in+w),u),h.state.wrap===1?h.adler=ra(h.adler,d,w,u):h.state.wrap===2&&(h.adler=mr(h.adler,d,w,u)),h.next_in+=w,h.total_in+=w,w)},zg=(h,d)=>{let u,b,w=h.max_chain_length,E=h.strstart,T=h.prev_length,I=h.nice_match;const k=h.strstart>h.w_size-Fi?h.strstart-(h.w_size-Fi):0,O=h.window,M=h.w_mask,re=h.prev,se=h.strstart+yo;let Y=O[E+T-1],be=O[E+T];h.prev_length>=h.good_match&&(w>>=2),I>h.lookahead&&(I=h.lookahead);do if(u=d,O[u+T]===be&&O[u+T-1]===Y&&O[u]===O[E]&&O[++u]===O[E+1]){E+=2,u++;do;while(O[++E]===O[++u]&&O[++E]===O[++u]&&O[++E]===O[++u]&&O[++E]===O[++u]&&O[++E]===O[++u]&&O[++E]===O[++u]&&O[++E]===O[++u]&&O[++E]===O[++u]&&E<se);if(b=yo-(se-E),E=se-yo,b>T){if(h.match_start=d,T=b,b>=I)break;Y=O[E+T-1],be=O[E+T]}}while((d=re[d&M])>k&&--w!=0);return T<=h.lookahead?T:h.lookahead},pu=h=>{const d=h.w_size;let u,b,w;do{if(b=h.window_size-h.lookahead-h.strstart,h.strstart>=d+(d-Fi)&&(h.window.set(h.window.subarray(d,d+d-b),0),h.match_start-=d,h.strstart-=d,h.block_start-=d,h.insert>h.strstart&&(h.insert=h.strstart),Pw(h),b+=d),h.strm.avail_in===0)break;if(u=sp(h.strm,h.window,h.strstart+h.lookahead,b),h.lookahead+=u,h.lookahead+h.insert>=3)for(w=h.strstart-h.insert,h.ins_h=h.window[w],h.ins_h=la(h,h.ins_h,h.window[w+1]);h.insert&&(h.ins_h=la(h,h.ins_h,h.window[w+3-1]),h.prev[w&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=w,w++,h.insert--,!(h.lookahead+h.insert<3)););}while(h.lookahead<Fi&&h.strm.avail_in!==0)},ip=(h,d)=>{let u,b,w,E=h.pending_buf_size-5>h.w_size?h.w_size:h.pending_buf_size-5,T=0,I=h.strm.avail_in;do{if(u=65535,w=h.bi_valid+42>>3,h.strm.avail_out<w||(w=h.strm.avail_out-w,b=h.strstart-h.block_start,u>b+h.strm.avail_in&&(u=b+h.strm.avail_in),u>w&&(u=w),u<E&&(u===0&&d!==Rs||d===ia||u!==b+h.strm.avail_in)))break;T=d===Rs&&u===b+h.strm.avail_in?1:0,lh(h,0,0,T),h.pending_buf[h.pending-4]=u,h.pending_buf[h.pending-3]=u>>8,h.pending_buf[h.pending-2]=~u,h.pending_buf[h.pending-1]=~u>>8,cs(h.strm),b&&(b>u&&(b=u),h.strm.output.set(h.window.subarray(h.block_start,h.block_start+b),h.strm.next_out),h.strm.next_out+=b,h.strm.avail_out-=b,h.strm.total_out+=b,h.block_start+=b,u-=b),u&&(sp(h.strm,h.strm.output,h.strm.next_out,u),h.strm.next_out+=u,h.strm.avail_out-=u,h.strm.total_out+=u)}while(T===0);return I-=h.strm.avail_in,I&&(I>=h.w_size?(h.matches=2,h.window.set(h.strm.input.subarray(h.strm.next_in-h.w_size,h.strm.next_in),0),h.strstart=h.w_size,h.insert=h.strstart):(h.window_size-h.strstart<=I&&(h.strstart-=h.w_size,h.window.set(h.window.subarray(h.w_size,h.w_size+h.strstart),0),h.matches<2&&h.matches++,h.insert>h.strstart&&(h.insert=h.strstart)),h.window.set(h.strm.input.subarray(h.strm.next_in-I,h.strm.next_in),h.strstart),h.strstart+=I,h.insert+=I>h.w_size-h.insert?h.w_size-h.insert:I),h.block_start=h.strstart),h.high_water<h.strstart&&(h.high_water=h.strstart),T?4:d!==ia&&d!==Rs&&h.strm.avail_in===0&&h.strstart===h.block_start?2:(w=h.window_size-h.strstart,h.strm.avail_in>w&&h.block_start>=h.w_size&&(h.block_start-=h.w_size,h.strstart-=h.w_size,h.window.set(h.window.subarray(h.w_size,h.w_size+h.strstart),0),h.matches<2&&h.matches++,w+=h.w_size,h.insert>h.strstart&&(h.insert=h.strstart)),w>h.strm.avail_in&&(w=h.strm.avail_in),w&&(sp(h.strm,h.window,h.strstart,w),h.strstart+=w,h.insert+=w>h.w_size-h.insert?h.w_size-h.insert:w),h.high_water<h.strstart&&(h.high_water=h.strstart),w=h.bi_valid+42>>3,w=h.pending_buf_size-w>65535?65535:h.pending_buf_size-w,E=w>h.w_size?h.w_size:w,b=h.strstart-h.block_start,(b>=E||(b||d===Rs)&&d!==ia&&h.strm.avail_in===0&&b<=w)&&(u=b>w?w:b,T=d===Rs&&h.strm.avail_in===0&&u===b?1:0,lh(h,h.block_start,u,T),h.block_start+=u,cs(h.strm)),T?3:1)},op=(h,d)=>{let u,b;for(;;){if(h.lookahead<Fi){if(pu(h),h.lookahead<Fi&&d===ia)return 1;if(h.lookahead===0)break}if(u=0,h.lookahead>=3&&(h.ins_h=la(h,h.ins_h,h.window[h.strstart+3-1]),u=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),u!==0&&h.strstart-u<=h.w_size-Fi&&(h.match_length=zg(h,u)),h.match_length>=3)if(b=sa(h,h.strstart-h.match_start,h.match_length-3),h.lookahead-=h.match_length,h.match_length<=h.max_lazy_match&&h.lookahead>=3){h.match_length--;do h.strstart++,h.ins_h=la(h,h.ins_h,h.window[h.strstart+3-1]),u=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart;while(--h.match_length!=0);h.strstart++}else h.strstart+=h.match_length,h.match_length=0,h.ins_h=h.window[h.strstart],h.ins_h=la(h,h.ins_h,h.window[h.strstart+1]);else b=sa(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++;if(b&&(Os(h,!1),h.strm.avail_out===0))return 1}return h.insert=h.strstart<2?h.strstart:2,d===Rs?(Os(h,!0),h.strm.avail_out===0?3:4):h.sym_next&&(Os(h,!1),h.strm.avail_out===0)?1:2},al=(h,d)=>{let u,b,w;for(;;){if(h.lookahead<Fi){if(pu(h),h.lookahead<Fi&&d===ia)return 1;if(h.lookahead===0)break}if(u=0,h.lookahead>=3&&(h.ins_h=la(h,h.ins_h,h.window[h.strstart+3-1]),u=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),h.prev_length=h.match_length,h.prev_match=h.match_start,h.match_length=2,u!==0&&h.prev_length<h.max_lazy_match&&h.strstart-u<=h.w_size-Fi&&(h.match_length=zg(h,u),h.match_length<=5&&(h.strategy===Iw||h.match_length===3&&h.strstart-h.match_start>4096)&&(h.match_length=2)),h.prev_length>=3&&h.match_length<=h.prev_length){w=h.strstart+h.lookahead-3,b=sa(h,h.strstart-1-h.prev_match,h.prev_length-3),h.lookahead-=h.prev_length-1,h.prev_length-=2;do++h.strstart<=w&&(h.ins_h=la(h,h.ins_h,h.window[h.strstart+3-1]),u=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart);while(--h.prev_length!=0);if(h.match_available=0,h.match_length=2,h.strstart++,b&&(Os(h,!1),h.strm.avail_out===0))return 1}else if(h.match_available){if(b=sa(h,0,h.window[h.strstart-1]),b&&Os(h,!1),h.strstart++,h.lookahead--,h.strm.avail_out===0)return 1}else h.match_available=1,h.strstart++,h.lookahead--}return h.match_available&&(b=sa(h,0,h.window[h.strstart-1]),h.match_available=0),h.insert=h.strstart<2?h.strstart:2,d===Rs?(Os(h,!0),h.strm.avail_out===0?3:4):h.sym_next&&(Os(h,!1),h.strm.avail_out===0)?1:2};function ci(h,d,u,b,w){this.good_length=h,this.max_lazy=d,this.nice_length=u,this.max_chain=b,this.func=w}const mu=[new ci(0,0,0,0,ip),new ci(4,4,8,4,op),new ci(4,5,16,8,op),new ci(4,6,32,32,op),new ci(4,4,16,16,al),new ci(8,16,32,32,al),new ci(8,16,128,128,al),new ci(8,32,128,256,al),new ci(32,128,258,1024,al),new ci(32,258,258,4096,al)];function kw(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=oa,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ca(this.dyn_ltree),ca(this.dyn_dtree),ca(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ca(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ca(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const hh=h=>{if(!h)return 1;const d=h.state;return!d||d.strm!==h||d.status!==aa&&d.status!==57&&d.status!==69&&d.status!==73&&d.status!==91&&d.status!==103&&d.status!==Zi&&d.status!==fu?1:0},Lw=h=>{if(hh(h))return ic(h,Bi);h.total_in=h.total_out=0,h.data_type=Ow;const d=h.state;return d.pending=0,d.pending_out=0,d.wrap<0&&(d.wrap=-d.wrap),d.status=d.wrap===2?57:d.wrap?aa:Zi,h.adler=d.wrap===2?0:1,d.last_flush=-2,jg(d),Rr},Gg=h=>{const d=Lw(h);var u;return d===Rr&&((u=h.state).window_size=2*u.w_size,ca(u.head),u.max_lazy_match=mu[u.level].max_lazy,u.good_match=mu[u.level].good_length,u.nice_match=mu[u.level].nice_length,u.max_chain_length=mu[u.level].max_chain,u.strstart=0,u.block_start=0,u.lookahead=0,u.insert=0,u.match_length=u.prev_length=2,u.match_available=0,u.ins_h=0),d},gu=(h,d,u,b,w,E)=>{if(!h)return Bi;let T=1;if(d===Aw&&(d=6),b<0?(T=0,b=-b):b>15&&(T=2,b-=16),w<1||w>9||u!==oa||b<8||b>15||d<0||d>9||E<0||E>Rw||b===8&&T!==1)return ic(h,Bi);b===8&&(b=9);const I=new kw;return h.state=I,I.strm=h,I.status=aa,I.wrap=T,I.gzhead=null,I.w_bits=b,I.w_size=1<<I.w_bits,I.w_mask=I.w_size-1,I.hash_bits=w+7,I.hash_size=1<<I.hash_bits,I.hash_mask=I.hash_size-1,I.hash_shift=~~((I.hash_bits+3-1)/3),I.window=new Uint8Array(2*I.w_size),I.head=new Uint16Array(I.hash_size),I.prev=new Uint16Array(I.w_size),I.lit_bufsize=1<<w+6,I.pending_buf_size=4*I.lit_bufsize,I.pending_buf=new Uint8Array(I.pending_buf_size),I.sym_buf=I.lit_bufsize,I.sym_end=3*(I.lit_bufsize-1),I.level=d,I.strategy=E,I.method=u,Gg(h)};var Hg=(h,d)=>{if(hh(h)||d>Bg||d<0)return h?ic(h,Bi):Bi;const u=h.state;if(!h.output||h.avail_in!==0&&!h.input||u.status===fu&&d!==Rs)return ic(h,h.avail_out===0?uh:Bi);const b=u.last_flush;if(u.last_flush=d,u.pending!==0){if(cs(h),h.avail_out===0)return u.last_flush=-1,Rr}else if(h.avail_in===0&&Zg(d)<=Zg(b)&&d!==Rs)return ic(h,uh);if(u.status===fu&&h.avail_in!==0)return ic(h,uh);if(u.status===aa&&u.wrap===0&&(u.status=Zi),u.status===aa){let w=oa+(u.w_bits-8<<4)<<8,E=-1;if(E=u.strategy>=dh||u.level<2?0:u.level<6?1:u.level===6?2:3,w|=E<<6,u.strstart!==0&&(w|=32),w+=31-w%31,ol(u,w),u.strstart!==0&&(ol(u,h.adler>>>16),ol(u,65535&h.adler)),h.adler=1,u.status=Zi,cs(h),u.pending!==0)return u.last_flush=-1,Rr}if(u.status===57){if(h.adler=0,on(u,31),on(u,139),on(u,8),u.gzhead)on(u,(u.gzhead.text?1:0)+(u.gzhead.hcrc?2:0)+(u.gzhead.extra?4:0)+(u.gzhead.name?8:0)+(u.gzhead.comment?16:0)),on(u,255&u.gzhead.time),on(u,u.gzhead.time>>8&255),on(u,u.gzhead.time>>16&255),on(u,u.gzhead.time>>24&255),on(u,u.level===9?2:u.strategy>=dh||u.level<2?4:0),on(u,255&u.gzhead.os),u.gzhead.extra&&u.gzhead.extra.length&&(on(u,255&u.gzhead.extra.length),on(u,u.gzhead.extra.length>>8&255)),u.gzhead.hcrc&&(h.adler=mr(h.adler,u.pending_buf,u.pending,0)),u.gzindex=0,u.status=69;else if(on(u,0),on(u,0),on(u,0),on(u,0),on(u,0),on(u,u.level===9?2:u.strategy>=dh||u.level<2?4:0),on(u,3),u.status=Zi,cs(h),u.pending!==0)return u.last_flush=-1,Rr}if(u.status===69){if(u.gzhead.extra){let w=u.pending,E=(65535&u.gzhead.extra.length)-u.gzindex;for(;u.pending+E>u.pending_buf_size;){let I=u.pending_buf_size-u.pending;if(u.pending_buf.set(u.gzhead.extra.subarray(u.gzindex,u.gzindex+I),u.pending),u.pending=u.pending_buf_size,u.gzhead.hcrc&&u.pending>w&&(h.adler=mr(h.adler,u.pending_buf,u.pending-w,w)),u.gzindex+=I,cs(h),u.pending!==0)return u.last_flush=-1,Rr;w=0,E-=I}let T=new Uint8Array(u.gzhead.extra);u.pending_buf.set(T.subarray(u.gzindex,u.gzindex+E),u.pending),u.pending+=E,u.gzhead.hcrc&&u.pending>w&&(h.adler=mr(h.adler,u.pending_buf,u.pending-w,w)),u.gzindex=0}u.status=73}if(u.status===73){if(u.gzhead.name){let w,E=u.pending;do{if(u.pending===u.pending_buf_size){if(u.gzhead.hcrc&&u.pending>E&&(h.adler=mr(h.adler,u.pending_buf,u.pending-E,E)),cs(h),u.pending!==0)return u.last_flush=-1,Rr;E=0}w=u.gzindex<u.gzhead.name.length?255&u.gzhead.name.charCodeAt(u.gzindex++):0,on(u,w)}while(w!==0);u.gzhead.hcrc&&u.pending>E&&(h.adler=mr(h.adler,u.pending_buf,u.pending-E,E)),u.gzindex=0}u.status=91}if(u.status===91){if(u.gzhead.comment){let w,E=u.pending;do{if(u.pending===u.pending_buf_size){if(u.gzhead.hcrc&&u.pending>E&&(h.adler=mr(h.adler,u.pending_buf,u.pending-E,E)),cs(h),u.pending!==0)return u.last_flush=-1,Rr;E=0}w=u.gzindex<u.gzhead.comment.length?255&u.gzhead.comment.charCodeAt(u.gzindex++):0,on(u,w)}while(w!==0);u.gzhead.hcrc&&u.pending>E&&(h.adler=mr(h.adler,u.pending_buf,u.pending-E,E))}u.status=103}if(u.status===103){if(u.gzhead.hcrc){if(u.pending+2>u.pending_buf_size&&(cs(h),u.pending!==0))return u.last_flush=-1,Rr;on(u,255&h.adler),on(u,h.adler>>8&255),h.adler=0}if(u.status=Zi,cs(h),u.pending!==0)return u.last_flush=-1,Rr}if(h.avail_in!==0||u.lookahead!==0||d!==ia&&u.status!==fu){let w=u.level===0?ip(u,d):u.strategy===dh?((E,T)=>{let I;for(;;){if(E.lookahead===0&&(pu(E),E.lookahead===0)){if(T===ia)return 1;break}if(E.match_length=0,I=sa(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++,I&&(Os(E,!1),E.strm.avail_out===0))return 1}return E.insert=0,T===Rs?(Os(E,!0),E.strm.avail_out===0?3:4):E.sym_next&&(Os(E,!1),E.strm.avail_out===0)?1:2})(u,d):u.strategy===Nw?((E,T)=>{let I,k,O,M;const re=E.window;for(;;){if(E.lookahead<=yo){if(pu(E),E.lookahead<=yo&&T===ia)return 1;if(E.lookahead===0)break}if(E.match_length=0,E.lookahead>=3&&E.strstart>0&&(O=E.strstart-1,k=re[O],k===re[++O]&&k===re[++O]&&k===re[++O])){M=E.strstart+yo;do;while(k===re[++O]&&k===re[++O]&&k===re[++O]&&k===re[++O]&&k===re[++O]&&k===re[++O]&&k===re[++O]&&k===re[++O]&&O<M);E.match_length=yo-(M-O),E.match_length>E.lookahead&&(E.match_length=E.lookahead)}if(E.match_length>=3?(I=sa(E,1,E.match_length-3),E.lookahead-=E.match_length,E.strstart+=E.match_length,E.match_length=0):(I=sa(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++),I&&(Os(E,!1),E.strm.avail_out===0))return 1}return E.insert=0,T===Rs?(Os(E,!0),E.strm.avail_out===0?3:4):E.sym_next&&(Os(E,!1),E.strm.avail_out===0)?1:2})(u,d):mu[u.level].func(u,d);if(w!==3&&w!==4||(u.status=fu),w===1||w===3)return h.avail_out===0&&(u.last_flush=-1),Rr;if(w===2&&(d===_w?Sw(u):d!==Bg&&(lh(u,0,0,!1),d===xw&&(ca(u.head),u.lookahead===0&&(u.strstart=0,u.block_start=0,u.insert=0))),cs(h),h.avail_out===0))return u.last_flush=-1,Rr}return d!==Rs?Rr:u.wrap<=0?Fg:(u.wrap===2?(on(u,255&h.adler),on(u,h.adler>>8&255),on(u,h.adler>>16&255),on(u,h.adler>>24&255),on(u,255&h.total_in),on(u,h.total_in>>8&255),on(u,h.total_in>>16&255),on(u,h.total_in>>24&255)):(ol(u,h.adler>>>16),ol(u,65535&h.adler)),cs(h),u.wrap>0&&(u.wrap=-u.wrap),u.pending!==0?Rr:Fg)},oc={deflateInit:(h,d)=>gu(h,d,oa,15,8,nE),deflateInit2:gu,deflateReset:Gg,deflateResetKeep:Lw,deflateSetHeader:(h,d)=>hh(h)||h.state.wrap!==2?Bi:(h.state.gzhead=d,Rr),deflate:Hg,deflateEnd:h=>{if(hh(h))return Bi;const d=h.state.status;return h.state=null,d===Zi?ic(h,Tw):Rr},deflateSetDictionary:(h,d)=>{let u=d.length;if(hh(h))return Bi;const b=h.state,w=b.wrap;if(w===2||w===1&&b.status!==aa||b.lookahead)return Bi;if(w===1&&(h.adler=ra(h.adler,d,u,0)),b.wrap=0,u>=b.w_size){w===0&&(ca(b.head),b.strstart=0,b.block_start=0,b.insert=0);let k=new Uint8Array(b.w_size);k.set(d.subarray(u-b.w_size,u),0),d=k,u=b.w_size}const E=h.avail_in,T=h.next_in,I=h.input;for(h.avail_in=u,h.next_in=0,h.input=d,pu(b);b.lookahead>=3;){let k=b.strstart,O=b.lookahead-2;do b.ins_h=la(b,b.ins_h,b.window[k+3-1]),b.prev[k&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=k,k++;while(--O);b.strstart=k,b.lookahead=2,pu(b)}return b.strstart+=b.lookahead,b.block_start=b.strstart,b.insert=b.lookahead,b.lookahead=0,b.match_length=b.prev_length=2,b.match_available=0,h.next_in=T,h.input=I,h.avail_in=E,b.wrap=w,Rr},deflateInfo:"pako deflate (from Nodeca project)"};const Dw=(h,d)=>Object.prototype.hasOwnProperty.call(h,d);var Xg=function(h){const d=Array.prototype.slice.call(arguments,1);for(;d.length;){const u=d.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(const b in u)Dw(u,b)&&(h[b]=u[b])}}return h},fh=h=>{let d=0;for(let b=0,w=h.length;b<w;b++)d+=h[b].length;const u=new Uint8Array(d);for(let b=0,w=0,E=h.length;b<E;b++){let T=h[b];u.set(T,w),w+=T.length}return u};let Wg=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Wg=!1}const yu=new Uint8Array(256);for(let h=0;h<256;h++)yu[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;yu[254]=yu[254]=1;var Vg=h=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(h);let d,u,b,w,E,T=h.length,I=0;for(w=0;w<T;w++)u=h.charCodeAt(w),(64512&u)==55296&&w+1<T&&(b=h.charCodeAt(w+1),(64512&b)==56320&&(u=65536+(u-55296<<10)+(b-56320),w++)),I+=u<128?1:u<2048?2:u<65536?3:4;for(d=new Uint8Array(I),E=0,w=0;E<I;w++)u=h.charCodeAt(w),(64512&u)==55296&&w+1<T&&(b=h.charCodeAt(w+1),(64512&b)==56320&&(u=65536+(u-55296<<10)+(b-56320),w++)),u<128?d[E++]=u:u<2048?(d[E++]=192|u>>>6,d[E++]=128|63&u):u<65536?(d[E++]=224|u>>>12,d[E++]=128|u>>>6&63,d[E++]=128|63&u):(d[E++]=240|u>>>18,d[E++]=128|u>>>12&63,d[E++]=128|u>>>6&63,d[E++]=128|63&u);return d},bu=(h,d)=>{const u=d||h.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(h.subarray(0,d));let b,w;const E=new Array(2*u);for(w=0,b=0;b<u;){let T=h[b++];if(T<128){E[w++]=T;continue}let I=yu[T];if(I>4)E[w++]=65533,b+=I-1;else{for(T&=I===2?31:I===3?15:7;I>1&&b<u;)T=T<<6|63&h[b++],I--;I>1?E[w++]=65533:T<65536?E[w++]=T:(T-=65536,E[w++]=55296|T>>10&1023,E[w++]=56320|1023&T)}}return((T,I)=>{if(I<65534&&T.subarray&&Wg)return String.fromCharCode.apply(null,T.length===I?T:T.subarray(0,I));let k="";for(let O=0;O<I;O++)k+=String.fromCharCode(T[O]);return k})(E,w)},ph=(h,d)=>{(d=d||h.length)>h.length&&(d=h.length);let u=d-1;for(;u>=0&&(192&h[u])==128;)u--;return u<0||u===0?d:u+yu[h[u]]>d?u:d},mh=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const wu=Object.prototype.toString,{Z_NO_FLUSH:ap,Z_SYNC_FLUSH:Mw,Z_FULL_FLUSH:Uw,Z_FINISH:vu,Z_OK:gh,Z_STREAM_END:li,Z_DEFAULT_COMPRESSION:bo,Z_DEFAULT_STRATEGY:ac,Z_DEFLATED:$w}=sc;function ui(h){this.options=Xg({level:bo,method:$w,chunkSize:16384,windowBits:15,memLevel:8,strategy:ac},h||{});let d=this.options;d.raw&&d.windowBits>0?d.windowBits=-d.windowBits:d.gzip&&d.windowBits>0&&d.windowBits<16&&(d.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new mh,this.strm.avail_out=0;let u=oc.deflateInit2(this.strm,d.level,d.method,d.windowBits,d.memLevel,d.strategy);if(u!==gh)throw new Error(as[u]);if(d.header&&oc.deflateSetHeader(this.strm,d.header),d.dictionary){let b;if(b=typeof d.dictionary=="string"?Vg(d.dictionary):wu.call(d.dictionary)==="[object ArrayBuffer]"?new Uint8Array(d.dictionary):d.dictionary,u=oc.deflateSetDictionary(this.strm,b),u!==gh)throw new Error(as[u]);this._dict_set=!0}}function zi(h,d){const u=new ui(d);if(u.push(h,!0),u.err)throw u.msg||as[u.err];return u.result}ui.prototype.push=function(h,d){const u=this.strm,b=this.options.chunkSize;let w,E;if(this.ended)return!1;for(E=d===~~d?d:d===!0?vu:ap,typeof h=="string"?u.input=Vg(h):wu.call(h)==="[object ArrayBuffer]"?u.input=new Uint8Array(h):u.input=h,u.next_in=0,u.avail_in=u.input.length;;)if(u.avail_out===0&&(u.output=new Uint8Array(b),u.next_out=0,u.avail_out=b),(E===Mw||E===Uw)&&u.avail_out<=6)this.onData(u.output.subarray(0,u.next_out)),u.avail_out=0;else{if(w=oc.deflate(u,E),w===li)return u.next_out>0&&this.onData(u.output.subarray(0,u.next_out)),w=oc.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===gh;if(u.avail_out!==0){if(E>0&&u.next_out>0)this.onData(u.output.subarray(0,u.next_out)),u.avail_out=0;else if(u.avail_in===0)break}else this.onData(u.output)}return!0},ui.prototype.onData=function(h){this.chunks.push(h)},ui.prototype.onEnd=function(h){h===gh&&(this.result=fh(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};var wr={Deflate:ui,deflate:zi,deflateRaw:function(h,d){return(d=d||{}).raw=!0,zi(h,d)},gzip:function(h,d){return(d=d||{}).gzip=!0,zi(h,d)}};const cl=16209;var Kg=function(h,d){let u,b,w,E,T,I,k,O,M,re,se,Y,be,Pe,oe,we,ve,xe,ye,ee,te,ie,ce,le;const Ue=h.state;u=h.next_in,ce=h.input,b=u+(h.avail_in-5),w=h.next_out,le=h.output,E=w-(d-h.avail_out),T=w+(h.avail_out-257),I=Ue.dmax,k=Ue.wsize,O=Ue.whave,M=Ue.wnext,re=Ue.window,se=Ue.hold,Y=Ue.bits,be=Ue.lencode,Pe=Ue.distcode,oe=(1<<Ue.lenbits)-1,we=(1<<Ue.distbits)-1;e:do{Y<15&&(se+=ce[u++]<<Y,Y+=8,se+=ce[u++]<<Y,Y+=8),ve=be[se&oe];t:for(;;){if(xe=ve>>>24,se>>>=xe,Y-=xe,xe=ve>>>16&255,xe===0)le[w++]=65535&ve;else{if(!(16&xe)){if(64&xe){if(32&xe){Ue.mode=16191;break e}h.msg="invalid literal/length code",Ue.mode=cl;break e}ve=be[(65535&ve)+(se&(1<<xe)-1)];continue t}for(ye=65535&ve,xe&=15,xe&&(Y<xe&&(se+=ce[u++]<<Y,Y+=8),ye+=se&(1<<xe)-1,se>>>=xe,Y-=xe),Y<15&&(se+=ce[u++]<<Y,Y+=8,se+=ce[u++]<<Y,Y+=8),ve=Pe[se&we];;){if(xe=ve>>>24,se>>>=xe,Y-=xe,xe=ve>>>16&255,16&xe){if(ee=65535&ve,xe&=15,Y<xe&&(se+=ce[u++]<<Y,Y+=8,Y<xe&&(se+=ce[u++]<<Y,Y+=8)),ee+=se&(1<<xe)-1,ee>I){h.msg="invalid distance too far back",Ue.mode=cl;break e}if(se>>>=xe,Y-=xe,xe=w-E,ee>xe){if(xe=ee-xe,xe>O&&Ue.sane){h.msg="invalid distance too far back",Ue.mode=cl;break e}if(te=0,ie=re,M===0){if(te+=k-xe,xe<ye){ye-=xe;do le[w++]=re[te++];while(--xe);te=w-ee,ie=le}}else if(M<xe){if(te+=k+M-xe,xe-=M,xe<ye){ye-=xe;do le[w++]=re[te++];while(--xe);if(te=0,M<ye){xe=M,ye-=xe;do le[w++]=re[te++];while(--xe);te=w-ee,ie=le}}}else if(te+=M-xe,xe<ye){ye-=xe;do le[w++]=re[te++];while(--xe);te=w-ee,ie=le}for(;ye>2;)le[w++]=ie[te++],le[w++]=ie[te++],le[w++]=ie[te++],ye-=3;ye&&(le[w++]=ie[te++],ye>1&&(le[w++]=ie[te++]))}else{te=w-ee;do le[w++]=le[te++],le[w++]=le[te++],le[w++]=le[te++],ye-=3;while(ye>2);ye&&(le[w++]=le[te++],ye>1&&(le[w++]=le[te++]))}break}if(64&xe){h.msg="invalid distance code",Ue.mode=cl;break e}ve=Pe[(65535&ve)+(se&(1<<xe)-1)]}}break}}while(u<b&&w<T);ye=Y>>3,u-=ye,Y-=ye<<3,se&=(1<<Y)-1,h.next_in=u,h.next_out=w,h.avail_in=u<b?b-u+5:5-(u-b),h.avail_out=w<T?T-w+257:257-(w-T),Ue.hold=se,Ue.bits=Y};const Eu=15,jw=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Bw=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ll=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),cp=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Cu=(h,d,u,b,w,E,T,I)=>{const k=I.bits;let O,M,re,se,Y,be,Pe=0,oe=0,we=0,ve=0,xe=0,ye=0,ee=0,te=0,ie=0,ce=0,le=null;const Ue=new Uint16Array(16),Qe=new Uint16Array(16);let ze,St,kt,Ct=null;for(Pe=0;Pe<=Eu;Pe++)Ue[Pe]=0;for(oe=0;oe<b;oe++)Ue[d[u+oe]]++;for(xe=k,ve=Eu;ve>=1&&Ue[ve]===0;ve--);if(xe>ve&&(xe=ve),ve===0)return w[E++]=20971520,w[E++]=20971520,I.bits=1,0;for(we=1;we<ve&&Ue[we]===0;we++);for(xe<we&&(xe=we),te=1,Pe=1;Pe<=Eu;Pe++)if(te<<=1,te-=Ue[Pe],te<0)return-1;if(te>0&&(h===0||ve!==1))return-1;for(Qe[1]=0,Pe=1;Pe<Eu;Pe++)Qe[Pe+1]=Qe[Pe]+Ue[Pe];for(oe=0;oe<b;oe++)d[u+oe]!==0&&(T[Qe[d[u+oe]]++]=oe);if(h===0?(le=Ct=T,be=20):h===1?(le=jw,Ct=Bw,be=257):(le=ll,Ct=cp,be=0),ce=0,oe=0,Pe=we,Y=E,ye=xe,ee=0,re=-1,ie=1<<xe,se=ie-1,h===1&&ie>852||h===2&&ie>592)return 1;for(;;){ze=Pe-ee,T[oe]+1<be?(St=0,kt=T[oe]):T[oe]>=be?(St=Ct[T[oe]-be],kt=le[T[oe]-be]):(St=96,kt=0),O=1<<Pe-ee,M=1<<ye,we=M;do M-=O,w[Y+(ce>>ee)+M]=ze<<24|St<<16|kt;while(M!==0);for(O=1<<Pe-1;ce&O;)O>>=1;if(O!==0?(ce&=O-1,ce+=O):ce=0,oe++,--Ue[Pe]==0){if(Pe===ve)break;Pe=d[u+T[oe]]}if(Pe>xe&&(ce&se)!==re){for(ee===0&&(ee=xe),Y+=we,ye=Pe-ee,te=1<<ye;ye+ee<ve&&(te-=Ue[ye+ee],!(te<=0));)ye++,te<<=1;if(ie+=1<<ye,h===1&&ie>852||h===2&&ie>592)return 1;re=ce&se,w[re]=xe<<24|ye<<16|Y-E}}return ce!==0&&(w[Y+ce]=Pe-ee<<24|64<<16),I.bits=xe,0};const{Z_FINISH:Yg,Z_BLOCK:Fw,Z_TREES:ul,Z_OK:cc,Z_STREAM_END:qg,Z_NEED_DICT:Zw,Z_STREAM_ERROR:Ks,Z_DATA_ERROR:zw,Z_MEM_ERROR:Qg,Z_BUF_ERROR:Sr,Z_DEFLATED:_r}=sc,yh=16180,bh=16190,wo=16191,lp=16192,up=16194,dl=16199,Su=16200,dp=16206,Un=16209,Jg=h=>(h>>>24&255)+(h>>>8&65280)+((65280&h)<<8)+((255&h)<<24);function e0(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ua=h=>{if(!h)return 1;const d=h.state;return!d||d.strm!==h||d.mode<yh||d.mode>16211?1:0},hp=h=>{if(ua(h))return Ks;const d=h.state;return h.total_in=h.total_out=d.total=0,h.msg="",d.wrap&&(h.adler=1&d.wrap),d.mode=yh,d.last=0,d.havedict=0,d.flags=-1,d.dmax=32768,d.head=null,d.hold=0,d.bits=0,d.lencode=d.lendyn=new Int32Array(852),d.distcode=d.distdyn=new Int32Array(592),d.sane=1,d.back=-1,cc},t0=h=>{if(ua(h))return Ks;const d=h.state;return d.wsize=0,d.whave=0,d.wnext=0,hp(h)},fp=(h,d)=>{let u;if(ua(h))return Ks;const b=h.state;return d<0?(u=0,d=-d):(u=5+(d>>4),d<48&&(d&=15)),d&&(d<8||d>15)?Ks:(b.window!==null&&b.wbits!==d&&(b.window=null),b.wrap=u,b.wbits=d,t0(h))},wh=(h,d)=>{if(!h)return Ks;const u=new e0;h.state=u,u.strm=h,u.window=null,u.mode=yh;const b=fp(h,d);return b!==cc&&(h.state=null),b};let vh,pp,mp=!0;const Gw=h=>{if(mp){vh=new Int32Array(512),pp=new Int32Array(32);let d=0;for(;d<144;)h.lens[d++]=8;for(;d<256;)h.lens[d++]=9;for(;d<280;)h.lens[d++]=7;for(;d<288;)h.lens[d++]=8;for(Cu(1,h.lens,0,288,vh,0,h.work,{bits:9}),d=0;d<32;)h.lens[d++]=5;Cu(2,h.lens,0,32,pp,0,h.work,{bits:5}),mp=!1}h.lencode=vh,h.lenbits=9,h.distcode=pp,h.distbits=5},vo=(h,d,u,b)=>{let w;const E=h.state;return E.window===null&&(E.wsize=1<<E.wbits,E.wnext=0,E.whave=0,E.window=new Uint8Array(E.wsize)),b>=E.wsize?(E.window.set(d.subarray(u-E.wsize,u),0),E.wnext=0,E.whave=E.wsize):(w=E.wsize-E.wnext,w>b&&(w=b),E.window.set(d.subarray(u-b,u-b+w),E.wnext),(b-=w)?(E.window.set(d.subarray(u-b,u),0),E.wnext=b,E.whave=E.wsize):(E.wnext+=w,E.wnext===E.wsize&&(E.wnext=0),E.whave<E.wsize&&(E.whave+=w))),0};var n0=(h,d)=>{let u,b,w,E,T,I,k,O,M,re,se,Y,be,Pe,oe,we,ve,xe,ye,ee,te,ie,ce=0;const le=new Uint8Array(4);let Ue,Qe;const ze=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ua(h)||!h.output||!h.input&&h.avail_in!==0)return Ks;u=h.state,u.mode===wo&&(u.mode=lp),T=h.next_out,w=h.output,k=h.avail_out,E=h.next_in,b=h.input,I=h.avail_in,O=u.hold,M=u.bits,re=I,se=k,ie=cc;e:for(;;)switch(u.mode){case yh:if(u.wrap===0){u.mode=lp;break}for(;M<16;){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}if(2&u.wrap&&O===35615){u.wbits===0&&(u.wbits=15),u.check=0,le[0]=255&O,le[1]=O>>>8&255,u.check=mr(u.check,le,2,0),O=0,M=0,u.mode=16181;break}if(u.head&&(u.head.done=!1),!(1&u.wrap)||(((255&O)<<8)+(O>>8))%31){h.msg="incorrect header check",u.mode=Un;break}if((15&O)!==_r){h.msg="unknown compression method",u.mode=Un;break}if(O>>>=4,M-=4,te=8+(15&O),u.wbits===0&&(u.wbits=te),te>15||te>u.wbits){h.msg="invalid window size",u.mode=Un;break}u.dmax=1<<u.wbits,u.flags=0,h.adler=u.check=1,u.mode=512&O?16189:wo,O=0,M=0;break;case 16181:for(;M<16;){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}if(u.flags=O,(255&u.flags)!==_r){h.msg="unknown compression method",u.mode=Un;break}if(57344&u.flags){h.msg="unknown header flags set",u.mode=Un;break}u.head&&(u.head.text=O>>8&1),512&u.flags&&4&u.wrap&&(le[0]=255&O,le[1]=O>>>8&255,u.check=mr(u.check,le,2,0)),O=0,M=0,u.mode=16182;case 16182:for(;M<32;){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}u.head&&(u.head.time=O),512&u.flags&&4&u.wrap&&(le[0]=255&O,le[1]=O>>>8&255,le[2]=O>>>16&255,le[3]=O>>>24&255,u.check=mr(u.check,le,4,0)),O=0,M=0,u.mode=16183;case 16183:for(;M<16;){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}u.head&&(u.head.xflags=255&O,u.head.os=O>>8),512&u.flags&&4&u.wrap&&(le[0]=255&O,le[1]=O>>>8&255,u.check=mr(u.check,le,2,0)),O=0,M=0,u.mode=16184;case 16184:if(1024&u.flags){for(;M<16;){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}u.length=O,u.head&&(u.head.extra_len=O),512&u.flags&&4&u.wrap&&(le[0]=255&O,le[1]=O>>>8&255,u.check=mr(u.check,le,2,0)),O=0,M=0}else u.head&&(u.head.extra=null);u.mode=16185;case 16185:if(1024&u.flags&&(Y=u.length,Y>I&&(Y=I),Y&&(u.head&&(te=u.head.extra_len-u.length,u.head.extra||(u.head.extra=new Uint8Array(u.head.extra_len)),u.head.extra.set(b.subarray(E,E+Y),te)),512&u.flags&&4&u.wrap&&(u.check=mr(u.check,b,Y,E)),I-=Y,E+=Y,u.length-=Y),u.length))break e;u.length=0,u.mode=16186;case 16186:if(2048&u.flags){if(I===0)break e;Y=0;do te=b[E+Y++],u.head&&te&&u.length<65536&&(u.head.name+=String.fromCharCode(te));while(te&&Y<I);if(512&u.flags&&4&u.wrap&&(u.check=mr(u.check,b,Y,E)),I-=Y,E+=Y,te)break e}else u.head&&(u.head.name=null);u.length=0,u.mode=16187;case 16187:if(4096&u.flags){if(I===0)break e;Y=0;do te=b[E+Y++],u.head&&te&&u.length<65536&&(u.head.comment+=String.fromCharCode(te));while(te&&Y<I);if(512&u.flags&&4&u.wrap&&(u.check=mr(u.check,b,Y,E)),I-=Y,E+=Y,te)break e}else u.head&&(u.head.comment=null);u.mode=16188;case 16188:if(512&u.flags){for(;M<16;){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}if(4&u.wrap&&O!==(65535&u.check)){h.msg="header crc mismatch",u.mode=Un;break}O=0,M=0}u.head&&(u.head.hcrc=u.flags>>9&1,u.head.done=!0),h.adler=u.check=0,u.mode=wo;break;case 16189:for(;M<32;){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}h.adler=u.check=Jg(O),O=0,M=0,u.mode=bh;case bh:if(u.havedict===0)return h.next_out=T,h.avail_out=k,h.next_in=E,h.avail_in=I,u.hold=O,u.bits=M,Zw;h.adler=u.check=1,u.mode=wo;case wo:if(d===Fw||d===ul)break e;case lp:if(u.last){O>>>=7&M,M-=7&M,u.mode=dp;break}for(;M<3;){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}switch(u.last=1&O,O>>>=1,M-=1,3&O){case 0:u.mode=16193;break;case 1:if(Gw(u),u.mode=dl,d===ul){O>>>=2,M-=2;break e}break;case 2:u.mode=16196;break;case 3:h.msg="invalid block type",u.mode=Un}O>>>=2,M-=2;break;case 16193:for(O>>>=7&M,M-=7&M;M<32;){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}if((65535&O)!=(O>>>16^65535)){h.msg="invalid stored block lengths",u.mode=Un;break}if(u.length=65535&O,O=0,M=0,u.mode=up,d===ul)break e;case up:u.mode=16195;case 16195:if(Y=u.length,Y){if(Y>I&&(Y=I),Y>k&&(Y=k),Y===0)break e;w.set(b.subarray(E,E+Y),T),I-=Y,E+=Y,k-=Y,T+=Y,u.length-=Y;break}u.mode=wo;break;case 16196:for(;M<14;){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}if(u.nlen=257+(31&O),O>>>=5,M-=5,u.ndist=1+(31&O),O>>>=5,M-=5,u.ncode=4+(15&O),O>>>=4,M-=4,u.nlen>286||u.ndist>30){h.msg="too many length or distance symbols",u.mode=Un;break}u.have=0,u.mode=16197;case 16197:for(;u.have<u.ncode;){for(;M<3;){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}u.lens[ze[u.have++]]=7&O,O>>>=3,M-=3}for(;u.have<19;)u.lens[ze[u.have++]]=0;if(u.lencode=u.lendyn,u.lenbits=7,Ue={bits:u.lenbits},ie=Cu(0,u.lens,0,19,u.lencode,0,u.work,Ue),u.lenbits=Ue.bits,ie){h.msg="invalid code lengths set",u.mode=Un;break}u.have=0,u.mode=16198;case 16198:for(;u.have<u.nlen+u.ndist;){for(;ce=u.lencode[O&(1<<u.lenbits)-1],oe=ce>>>24,we=ce>>>16&255,ve=65535&ce,!(oe<=M);){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}if(ve<16)O>>>=oe,M-=oe,u.lens[u.have++]=ve;else{if(ve===16){for(Qe=oe+2;M<Qe;){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}if(O>>>=oe,M-=oe,u.have===0){h.msg="invalid bit length repeat",u.mode=Un;break}te=u.lens[u.have-1],Y=3+(3&O),O>>>=2,M-=2}else if(ve===17){for(Qe=oe+3;M<Qe;){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}O>>>=oe,M-=oe,te=0,Y=3+(7&O),O>>>=3,M-=3}else{for(Qe=oe+7;M<Qe;){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}O>>>=oe,M-=oe,te=0,Y=11+(127&O),O>>>=7,M-=7}if(u.have+Y>u.nlen+u.ndist){h.msg="invalid bit length repeat",u.mode=Un;break}for(;Y--;)u.lens[u.have++]=te}}if(u.mode===Un)break;if(u.lens[256]===0){h.msg="invalid code -- missing end-of-block",u.mode=Un;break}if(u.lenbits=9,Ue={bits:u.lenbits},ie=Cu(1,u.lens,0,u.nlen,u.lencode,0,u.work,Ue),u.lenbits=Ue.bits,ie){h.msg="invalid literal/lengths set",u.mode=Un;break}if(u.distbits=6,u.distcode=u.distdyn,Ue={bits:u.distbits},ie=Cu(2,u.lens,u.nlen,u.ndist,u.distcode,0,u.work,Ue),u.distbits=Ue.bits,ie){h.msg="invalid distances set",u.mode=Un;break}if(u.mode=dl,d===ul)break e;case dl:u.mode=Su;case Su:if(I>=6&&k>=258){h.next_out=T,h.avail_out=k,h.next_in=E,h.avail_in=I,u.hold=O,u.bits=M,Kg(h,se),T=h.next_out,w=h.output,k=h.avail_out,E=h.next_in,b=h.input,I=h.avail_in,O=u.hold,M=u.bits,u.mode===wo&&(u.back=-1);break}for(u.back=0;ce=u.lencode[O&(1<<u.lenbits)-1],oe=ce>>>24,we=ce>>>16&255,ve=65535&ce,!(oe<=M);){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}if(we&&!(240&we)){for(xe=oe,ye=we,ee=ve;ce=u.lencode[ee+((O&(1<<xe+ye)-1)>>xe)],oe=ce>>>24,we=ce>>>16&255,ve=65535&ce,!(xe+oe<=M);){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}O>>>=xe,M-=xe,u.back+=xe}if(O>>>=oe,M-=oe,u.back+=oe,u.length=ve,we===0){u.mode=16205;break}if(32&we){u.back=-1,u.mode=wo;break}if(64&we){h.msg="invalid literal/length code",u.mode=Un;break}u.extra=15&we,u.mode=16201;case 16201:if(u.extra){for(Qe=u.extra;M<Qe;){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}u.length+=O&(1<<u.extra)-1,O>>>=u.extra,M-=u.extra,u.back+=u.extra}u.was=u.length,u.mode=16202;case 16202:for(;ce=u.distcode[O&(1<<u.distbits)-1],oe=ce>>>24,we=ce>>>16&255,ve=65535&ce,!(oe<=M);){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}if(!(240&we)){for(xe=oe,ye=we,ee=ve;ce=u.distcode[ee+((O&(1<<xe+ye)-1)>>xe)],oe=ce>>>24,we=ce>>>16&255,ve=65535&ce,!(xe+oe<=M);){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}O>>>=xe,M-=xe,u.back+=xe}if(O>>>=oe,M-=oe,u.back+=oe,64&we){h.msg="invalid distance code",u.mode=Un;break}u.offset=ve,u.extra=15&we,u.mode=16203;case 16203:if(u.extra){for(Qe=u.extra;M<Qe;){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}u.offset+=O&(1<<u.extra)-1,O>>>=u.extra,M-=u.extra,u.back+=u.extra}if(u.offset>u.dmax){h.msg="invalid distance too far back",u.mode=Un;break}u.mode=16204;case 16204:if(k===0)break e;if(Y=se-k,u.offset>Y){if(Y=u.offset-Y,Y>u.whave&&u.sane){h.msg="invalid distance too far back",u.mode=Un;break}Y>u.wnext?(Y-=u.wnext,be=u.wsize-Y):be=u.wnext-Y,Y>u.length&&(Y=u.length),Pe=u.window}else Pe=w,be=T-u.offset,Y=u.length;Y>k&&(Y=k),k-=Y,u.length-=Y;do w[T++]=Pe[be++];while(--Y);u.length===0&&(u.mode=Su);break;case 16205:if(k===0)break e;w[T++]=u.length,k--,u.mode=Su;break;case dp:if(u.wrap){for(;M<32;){if(I===0)break e;I--,O|=b[E++]<<M,M+=8}if(se-=k,h.total_out+=se,u.total+=se,4&u.wrap&&se&&(h.adler=u.check=u.flags?mr(u.check,w,se,T-se):ra(u.check,w,se,T-se)),se=k,4&u.wrap&&(u.flags?O:Jg(O))!==u.check){h.msg="incorrect data check",u.mode=Un;break}O=0,M=0}u.mode=16207;case 16207:if(u.wrap&&u.flags){for(;M<32;){if(I===0)break e;I--,O+=b[E++]<<M,M+=8}if(4&u.wrap&&O!==(4294967295&u.total)){h.msg="incorrect length check",u.mode=Un;break}O=0,M=0}u.mode=16208;case 16208:ie=qg;break e;case Un:ie=zw;break e;case 16210:return Qg;default:return Ks}return h.next_out=T,h.avail_out=k,h.next_in=E,h.avail_in=I,u.hold=O,u.bits=M,(u.wsize||se!==h.avail_out&&u.mode<Un&&(u.mode<dp||d!==Yg))&&vo(h,h.output,h.next_out,se-h.avail_out),re-=h.avail_in,se-=h.avail_out,h.total_in+=re,h.total_out+=se,u.total+=se,4&u.wrap&&se&&(h.adler=u.check=u.flags?mr(u.check,w,se,h.next_out-se):ra(u.check,w,se,h.next_out-se)),h.data_type=u.bits+(u.last?64:0)+(u.mode===wo?128:0)+(u.mode===dl||u.mode===up?256:0),(re===0&&se===0||d===Yg)&&ie===cc&&(ie=Sr),ie},da={inflateReset:t0,inflateReset2:fp,inflateResetKeep:hp,inflateInit:h=>wh(h,15),inflateInit2:wh,inflate:n0,inflateEnd:h=>{if(ua(h))return Ks;let d=h.state;return d.window&&(d.window=null),h.state=null,cc},inflateGetHeader:(h,d)=>{if(ua(h))return Ks;const u=h.state;return 2&u.wrap?(u.head=d,d.done=!1,cc):Ks},inflateSetDictionary:(h,d)=>{const u=d.length;let b,w,E;return ua(h)?Ks:(b=h.state,b.wrap!==0&&b.mode!==bh?Ks:b.mode===bh&&(w=1,w=ra(w,d,u,0),w!==b.check)?zw:(E=vo(h,d,u,u),E?(b.mode=16210,Qg):(b.havedict=1,cc)))},inflateInfo:"pako inflate (from Nodeca project)"},Hw=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Eo=Object.prototype.toString,{Z_NO_FLUSH:Xw,Z_FINISH:gp,Z_OK:ha,Z_STREAM_END:$n,Z_NEED_DICT:r0,Z_STREAM_ERROR:rE,Z_DATA_ERROR:s0,Z_MEM_ERROR:Eh}=sc;function di(h){this.options=Xg({chunkSize:65536,windowBits:15,to:""},h||{});const d=this.options;d.raw&&d.windowBits>=0&&d.windowBits<16&&(d.windowBits=-d.windowBits,d.windowBits===0&&(d.windowBits=-15)),!(d.windowBits>=0&&d.windowBits<16)||h&&h.windowBits||(d.windowBits+=32),d.windowBits>15&&d.windowBits<48&&(15&d.windowBits||(d.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new mh,this.strm.avail_out=0;let u=da.inflateInit2(this.strm,d.windowBits);if(u!==ha)throw new Error(as[u]);if(this.header=new Hw,da.inflateGetHeader(this.strm,this.header),d.dictionary&&(typeof d.dictionary=="string"?d.dictionary=Vg(d.dictionary):Eo.call(d.dictionary)==="[object ArrayBuffer]"&&(d.dictionary=new Uint8Array(d.dictionary)),d.raw&&(u=da.inflateSetDictionary(this.strm,d.dictionary),u!==ha)))throw new Error(as[u])}function yp(h,d){const u=new di(d);if(u.push(h),u.err)throw u.msg||as[u.err];return u.result}di.prototype.push=function(h,d){const u=this.strm,b=this.options.chunkSize,w=this.options.dictionary;let E,T,I;if(this.ended)return!1;for(T=d===~~d?d:d===!0?gp:Xw,Eo.call(h)==="[object ArrayBuffer]"?u.input=new Uint8Array(h):u.input=h,u.next_in=0,u.avail_in=u.input.length;;){for(u.avail_out===0&&(u.output=new Uint8Array(b),u.next_out=0,u.avail_out=b),E=da.inflate(u,T),E===r0&&w&&(E=da.inflateSetDictionary(u,w),E===ha?E=da.inflate(u,T):E===s0&&(E=r0));u.avail_in>0&&E===$n&&u.state.wrap>0&&h[u.next_in]!==0;)da.inflateReset(u),E=da.inflate(u,T);switch(E){case rE:case s0:case r0:case Eh:return this.onEnd(E),this.ended=!0,!1}if(I=u.avail_out,u.next_out&&(u.avail_out===0||E===$n))if(this.options.to==="string"){let k=ph(u.output,u.next_out),O=u.next_out-k,M=bu(u.output,k);u.next_out=O,u.avail_out=b-O,O&&u.output.set(u.output.subarray(k,k+O),0),this.onData(M)}else this.onData(u.output.length===u.next_out?u.output:u.output.subarray(0,u.next_out));if(E!==ha||I!==0){if(E===$n)return E=da.inflateEnd(this.strm),this.onEnd(E),this.ended=!0,!0;if(u.avail_in===0)break}}return!0},di.prototype.onData=function(h){this.chunks.push(h)},di.prototype.onEnd=function(h){h===ha&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=fh(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};var Ww={Inflate:di,inflate:yp,inflateRaw:function(h,d){return(d=d||{}).raw=!0,yp(h,d)},ungzip:yp};const{Deflate:Ch,deflate:Co,deflateRaw:Vw,gzip:i0}=wr,{Inflate:Kw,inflate:o0,inflateRaw:a0,ungzip:bp}=Ww;var Yw={Deflate:Ch,deflate:Co,deflateRaw:Vw,gzip:i0,Inflate:Kw,inflate:o0,inflateRaw:a0,ungzip:bp,constants:sc};class fa{constructor(){this.url="(offline)",this.readyState=WebSocket.CONNECTING,this.bufferedAmount=0,setTimeout(()=>{this.readyState=WebSocket.OPEN,this.onopen&&this.onopen()},50),this.start=Date.now()}send(d){const{id:u,action:b,args:w}=JSON.parse(d);switch(b){case"JOIN":return this.id=u,this.ticks=w.ticks.tick,this.seq=-16>>>0,this.reply("SYNC",{messages:[],time:this.time,seq:this.seq,tove:w.tove,reflector:"offline"}),this.reply("RECV",[this.time,++this.seq,{what:"users",joined:[w.user],active:1,total:1}]),void this.tick();case"SEND":{const E=[...w];return E[0]=this.time,E[1]=++this.seq,void this.reply("RECV",E)}case"PULSE":return;default:throw Error("Offline unhandled "+b)}}close(d,u){this.readyState=WebSocket.CLOSING,setTimeout(()=>{this.readyState=WebSocket.CLOSED,this.onclose&&this.onclose({code:d,reason:u})},50)}get time(){return Date.now()-this.start}tick(){clearInterval(this.ticker),this.ticker=setInterval(()=>{this.reply("TICK",{time:this.time})},this.ticks)}reply(d,u){setTimeout(()=>{this.onmessage&&this.onmessage({data:JSON.stringify({id:this.id,action:d,args:u})})},50)}}const cr=!!globalThis.navigator?.userAgent.toLowerCase().includes("firefox");let In={get connection(){return In={connection:_.has("debug","connection",!1)},In.connection}};class qw{static get name(){return`${je.libName}WebRTCConnection`}constructor(d){var u;this.clientId=(u=4,Math.random().toString(36).substring(2,2+u)),In.connection&&console.log(`${this.clientId} WebRTCConnection created`),this.pc=null,this.dataChannel=null,this.signaling=null,this.connectionTypes={},this.onopen=null,this.onmessage=null,this.onerror=null,this.onclose=null,this.onconnected=null,this.twoStageConnection=!0,this.url="synchronizer",this.bufferedAmount=0,this.openConnection(d)}isConnecting(){return this.signaling?.readyState===WebSocket.OPEN}async openConnection(d){try{await this.openSignalingChannel(d),In.connection&&console.log(`${this.clientId} signaling ready`),this.onopen&&this.onopen(),await this.createPeerConnection(),In.connection&&console.log(`${this.clientId} peer connection created`),this.dataChannel=this.pc.createDataChannel(`client-${this.clientId}`),In.connection&&console.log(`${this.clientId} data channel created`),this.dataChannel.onopen=w=>this.onDataChannelOpen(w),this.dataChannel.onmessage=w=>this.onDataChannelMessage(w),this.dataChannel.onclosing=w=>this.onDataChannelClosing(w),this.dataChannel.onclose=w=>this.onDataChannelClose(w),this.dataChannel.onerror=w=>this.onDataChannelError(w);const u=await this.pc.createOffer();if(this.signaling?.readyState!==WebSocket.OPEN||(this.negotiationTimeout=setTimeout(()=>{delete this.negotiationTimeout,this.dataChannelFlowing?this.signalingCloseScheduled||(In.connection&&console.log(`${this.clientId} ICE negotiation timed out but appears to have succeeded`),this.scheduleSignalingClose()):this.synchronizerDisconnected(4003,"ICE negotiation timed out")},15e3),this.signalToSessionRunner({type:"offer",sdp:u.sdp}),await this.pc.setLocalDescription(u),!this.pc.sctp))return;const b=this.pc.sctp.transport.iceTransport;b.onselectedcandidatepairchange=w=>{In.connection&&console.log(`${this.clientId} ICE candidate pair changed`);const E=b.getSelectedCandidatePair();this.connectionTypes.local=E.local.type,this.connectionTypes.remote=E.remote.type,this.logConnectionState()}}catch(u){this.synchronizerDisconnected(u.code||4003,u.message)}}openSignalingChannel(d){return this.signaling?(console.warn(`${this.clientId} signaling channel already open`),Promise.resolve()):(this.synchronizerGatheringComplete=!1,this.localGatheringComplete=!1,this.dataChannelFlowing=!1,this.signalingCloseScheduled=!1,this.signalingKey=Math.random(),new Promise(u=>{this.signaling=new WebSocket(d),this.signaling.onopen=()=>{In.connection&&console.log(`${this.clientId} signaling socket opened`)},this.signaling.onmessage=b=>{const w=JSON.parse(b.data);if(w.what==="READY")return this.clientId+=`_${w.id}`,this.iceServers=w.iceServers,void u();if(w.what!=="ERROR")if(w.type)switch(In.connection&&console.log(`${this.clientId} received signal of type "${w.type}"`),w.type){case"answer":this.handleAnswer(w);break;case"candidate":this.handleCandidate(w);break;case"gathering-complete":this.synchronizerGatheringComplete=!0;break;default:In.connection&&console.log(`${this.clientId} unhandled: ${w.type}`)}else console.error(`${this.clientId} unexpected message: ${b.data}`);else console.error(`${this.clientId} registry error: ${w.reason}`)},this.signaling.onclose=b=>{In.connection&&console.log(`${this.clientId} signaling socket closed unexpectedly (${b.code})`),this.synchronizerDisconnected(b.code,b.reason)},this.signaling.onerror=b=>{In.connection&&console.log(`${this.clientId} signaling socket error`,b),this.synchronizerError()}}))}clearNegotiationTimeout(){this.negotiationTimeout&&(clearTimeout(this.negotiationTimeout),delete this.negotiationTimeout)}signalToSessionRunner(d){const u=JSON.stringify(d);try{this.signaling.send(u)}catch(b){console.error(`${this.clientId} WebRTC signaling send error`,b)}}async logConnectionState(){if(cr&&this.pc)try{const b=await this.pc.getStats();if(b){let w=null;for(const T of b.values())if(T.type==="transport"){w=T.selectedCandidatePairId;break}let E=b.get(w);if(!E){for(const T of b.values())if(T.type==="candidate-pair"&&T.selected){E=T;break}}E&&(this.connectionTypes.local=b.get(E.localCandidateId).candidateType,this.connectionTypes.remote=b.get(E.remoteCandidateId).candidateType)}}catch{}const d=this.connectionTypes.local||"",u=this.connectionTypes.remote||"";if(In.connection&&console.log(`${this.clientId} RTCDataChannel connection state: "${this.dataChannel.readyState}" (client connection="${d}"; synchronizer connection="${u}")`),this.signaling?.readyState===WebSocket.OPEN){const b={type:"selectedCandidatePair",clientType:d,syncType:u};this.signalToSessionRunner(b)}}close(d,u){this.cleanUpConnection()}synchronizerDisconnected(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1006,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"connection to synchronizer lost";this.synchronizerCloseReason&&(d=this.synchronizerCloseReason[0],u=this.synchronizerCloseReason[1]),this.cleanUpConnection(),this.onclose&&this.onclose({code:d,reason:u})}synchronizerError(d){this.onerror&&this.onerror(),this.synchronizerDisconnected(void 0,d)}cleanUpConnection(){this.closeSignalingChannel();const{pc:d}=this;d&&(this.pc=null,d.close(),clearInterval(this.peerConnectionStatsInterval)),this.dataChannel=null}closeSignalingChannel(){this.clearNegotiationTimeout(),this.signaling&&(this.signaling.onclose=null,this.signaling.onerror=null,this.signaling.close(),this.signaling=null)}async createPeerConnection(){const{iceServers:d}=this,u=new Set,b=this.pc=new globalThis.RTCPeerConnection({iceServers:d});b.onnegotiationneeded=w=>{b===this.pc&&In.connection&&console.log(`${this.clientId} negotiationneeded event fired`)},b.onsignalingstatechange=w=>{b===this.pc&&In.connection&&console.log(`${this.clientId} signaling state: "${b.signalingState}"`)},b.onconnectionstatechange=w=>{if(b!==this.pc)return;const{connectionState:E,iceConnectionState:T}=b;In.connection&&console.log(`${this.clientId} connection state: "${E}" (cf. ICE connection state: "${T}")`),E!=="disconnected"&&E!=="failed"||this.synchronizerDisconnected()},b.oniceconnectionstatechange=w=>{if(b!==this.pc)return;const E=b.iceConnectionState,T=this.dataChannel.readyState;In.connection&&console.log(`${this.clientId} ICE connection state: "${E}"; data channel: "${T}"`),E==="failed"&&this.synchronizerDisconnected(4003,"ICE negotiation failed")},b.onicegatheringstatechange=w=>{if(b!==this.pc)return;const E=b.iceGatheringState;In.connection&&console.log(`${this.clientId} ICE gathering state: "${E}"`),E==="complete"&&(this.localGatheringComplete=!0)},b.onicecandidate=w=>{if(b===this.pc)if(w.candidate){if(this.signaling?.readyState===WebSocket.OPEN){const E={type:"candidate",candidate:w.candidate.candidate,sdpMid:w.candidate.sdpMid,sdpMLineIndex:w.candidate.sdpMLineIndex};this.signalToSessionRunner(E)}}else this.localGatheringComplete=!0},b.onicecandidateerror=w=>{if(b===this.pc&&In.connection){const E=`${w.errorCode}|${w.url}`;u.has(E)||(w.errorCode===701?console.log(`${this.clientId} ICE 701 warning on ${w.url}`):console.log(`${this.clientId} ICE error from ${w.url}: ${w.errorCode} ${w.errorText}`),u.add(E))}}}async handleAnswer(d){this.pc?await this.pc.setRemoteDescription(d):console.error("no peerconnection")}async handleCandidate(d){this.pc?d.candidate?await this.pc.addIceCandidate(d):await this.pc.addIceCandidate(null):console.error("no peerconnection")}send(d){this.dataChannel?this.dataChannel.send(d):console.warn(`${this.clientId} no data channel to send: ${d}`)}onDataChannelOpen(d){In.connection&&console.log(`${this.clientId} RTCDataChannel open`),this.onconnected&&this.onconnected(),this.logConnectionState()}onDataChannelMessage(d){if(!this.onmessage)return;this.dataChannelFlowing=!0,!this.signalingCloseScheduled&&this.synchronizerGatheringComplete&&this.localGatheringComplete&&(this.clearNegotiationTimeout(),this.scheduleSignalingClose());const u=d.data;if(u.startsWith("!ping"))this.send(u.replace("ping","pong"));else if(u.startsWith("!close")){const b=u.split("|");this.synchronizerCloseReason=[Number(b[1]),b[2]]}else this.onmessage(d)}onDataChannelError(d){console.error(`${this.clientId} RTCDataChannel error`,d),this.synchronizerError(d.errorDetail)}onDataChannelClosing(d){this.pc&&(In.connection&&console.log(`${this.clientId} data channel closing`),this.synchronizerDisconnected())}onDataChannelClose(d){this.pc&&(In.connection&&console.log(`${this.clientId} data channel closed`),this.synchronizerDisconnected())}scheduleSignalingClose(){this.signalingCloseScheduled=!0,In.connection&&console.log(`${this.clientId} signaling channel closure scheduled`);const{signalingKey:d}=this;setTimeout(()=>{d===this.signalingKey&&(In.connection&&console.log(`${this.clientId} closing signaling channel`),this.closeSignalingChannel())},1e3)}async defunct_readConnectionType(){const d=await this.pc.getStats();if(d){let u=null;for(const[w,E]of d)if(E.type==="transport"){u=E.selectedCandidatePairId;break}let b=d.get(u);if(!b){for(const[w,E]of d)if(E.type==="candidate-pair"&&E.selected){b=E;break}}if(b){for(const[w,E]of d)if(w===b.remoteCandidateId)return E.candidateType}}return""}}function xr(h,d,u){var b=function(I){return atob(I)}(h),w=b.indexOf(`
`,10)+1,E=b.substring(w)+"",T=new Blob([E],{type:"application/javascript"});return URL.createObjectURL(T)}function sE(h,d,u){var b;return function(w){return b=b||xr(h),new Worker(b,w)}}var Qw=sE("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwovKioKICogQ29weXJpZ2h0IENyb3F1ZXQgTGFicyAyMDI1CiAqIEJ1bmRsZSBvZiBAY3JvcXVldC9jcm9xdWV0CiAqIERhdGU6IDIwMjUtMDYtMDkKICogVmVyc2lvbjogMi4wLjQKICovCgohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIHQ9InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWxUaGlzP2dsb2JhbFRoaXM6InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp7fTtmdW5jdGlvbiBlKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGUmJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCJkZWZhdWx0Iik/dC5kZWZhdWx0OnR9ZnVuY3Rpb24gcih0KXtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwiX19lc01vZHVsZSIpKXJldHVybiB0O3ZhciBlPXQuZGVmYXVsdDtpZigiZnVuY3Rpb24iPT10eXBlb2YgZSl7dmFyIHI9ZnVuY3Rpb24gdCgpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgdD9SZWZsZWN0LmNvbnN0cnVjdChlLGFyZ3VtZW50cyx0aGlzLmNvbnN0cnVjdG9yKTplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07ci5wcm90b3R5cGU9ZS5wcm90b3R5cGV9ZWxzZSByPXt9O3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksT2JqZWN0LmtleXModCkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGUpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLGUsbi5nZXQ/bjp7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdFtlXX19KX0pKSxyfXZhciBuLGk9e2V4cG9ydHM6e319O258fChuPTEsZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7dmFyIGUscj1PYmplY3QucHJvdG90eXBlLG49ci5oYXNPd25Qcm9wZXJ0eSxpPU9iamVjdC5kZWZpbmVQcm9wZXJ0eXx8ZnVuY3Rpb24odCxlLHIpe3RbZV09ci52YWx1ZX0sYT0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sP1N5bWJvbDp7fSxzPWEuaXRlcmF0b3J8fCJAQGl0ZXJhdG9yIixvPWEuYXN5bmNJdGVyYXRvcnx8IkBAYXN5bmNJdGVyYXRvciIsbD1hLnRvU3RyaW5nVGFnfHwiQEB0b1N0cmluZ1RhZyI7ZnVuY3Rpb24gaCh0LGUscil7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse3ZhbHVlOnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KSx0W2VdfXRyeXtoKHt9LCIiKX1jYXRjaCh0KXtoPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdFtlXT1yfX1mdW5jdGlvbiBjKHQsZSxyLG4pe3ZhciBhPWUmJmUucHJvdG90eXBlIGluc3RhbmNlb2YgeT9lOnkscz1PYmplY3QuY3JlYXRlKGEucHJvdG90eXBlKSxvPW5ldyBMKG58fFtdKTtyZXR1cm4gaShzLCJfaW52b2tlIix7dmFsdWU6RSh0LHIsbyl9KSxzfWZ1bmN0aW9uIHUodCxlLHIpe3RyeXtyZXR1cm57dHlwZToibm9ybWFsIixhcmc6dC5jYWxsKGUscil9fWNhdGNoKHQpe3JldHVybnt0eXBlOiJ0aHJvdyIsYXJnOnR9fX10LndyYXA9Yzt2YXIgXz0ic3VzcGVuZGVkU3RhcnQiLGQ9InN1c3BlbmRlZFlpZWxkIixmPSJleGVjdXRpbmciLHA9ImNvbXBsZXRlZCIsZz17fTtmdW5jdGlvbiB5KCl7fWZ1bmN0aW9uIHcoKXt9ZnVuY3Rpb24gdigpe312YXIgbT17fTtoKG0scywoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pKTt2YXIgYj1PYmplY3QuZ2V0UHJvdG90eXBlT2YseD1iJiZiKGIoUihbXSkpKTt4JiZ4IT09ciYmbi5jYWxsKHgscykmJihtPXgpO3ZhciBrPXYucHJvdG90eXBlPXkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobSk7ZnVuY3Rpb24geih0KXtbIm5leHQiLCJ0aHJvdyIsInJldHVybiJdLmZvckVhY2goKGZ1bmN0aW9uKGUpe2godCxlLChmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faW52b2tlKGUsdCl9KSl9KSl9ZnVuY3Rpb24gQSh0LGUpe2Z1bmN0aW9uIHIoaSxhLHMsbyl7dmFyIGw9dSh0W2ldLHQsYSk7aWYoInRocm93IiE9PWwudHlwZSl7dmFyIGg9bC5hcmcsYz1oLnZhbHVlO3JldHVybiBjJiYib2JqZWN0Ij09dHlwZW9mIGMmJm4uY2FsbChjLCJfX2F3YWl0Iik/ZS5yZXNvbHZlKGMuX19hd2FpdCkudGhlbigoZnVuY3Rpb24odCl7cigibmV4dCIsdCxzLG8pfSksKGZ1bmN0aW9uKHQpe3IoInRocm93Iix0LHMsbyl9KSk6ZS5yZXNvbHZlKGMpLnRoZW4oKGZ1bmN0aW9uKHQpe2gudmFsdWU9dCxzKGgpfSksKGZ1bmN0aW9uKHQpe3JldHVybiByKCJ0aHJvdyIsdCxzLG8pfSkpfW8obC5hcmcpfXZhciBhO2kodGhpcywiX2ludm9rZSIse3ZhbHVlOmZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gaSgpe3JldHVybiBuZXcgZSgoZnVuY3Rpb24oZSxpKXtyKHQsbixlLGkpfSkpfXJldHVybiBhPWE/YS50aGVuKGksaSk6aSgpfX0pfWZ1bmN0aW9uIEUodCxyLG4pe3ZhciBpPV87cmV0dXJuIGZ1bmN0aW9uKGEscyl7aWYoaT09PWYpdGhyb3cgbmV3IEVycm9yKCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nIik7aWYoaT09PXApe2lmKCJ0aHJvdyI9PT1hKXRocm93IHM7cmV0dXJue3ZhbHVlOmUsZG9uZTohMH19Zm9yKG4ubWV0aG9kPWEsbi5hcmc9czs7KXt2YXIgbz1uLmRlbGVnYXRlO2lmKG8pe3ZhciBsPVMobyxuKTtpZihsKXtpZihsPT09Zyljb250aW51ZTtyZXR1cm4gbH19aWYoIm5leHQiPT09bi5tZXRob2Qpbi5zZW50PW4uX3NlbnQ9bi5hcmc7ZWxzZSBpZigidGhyb3ciPT09bi5tZXRob2Qpe2lmKGk9PT1fKXRocm93IGk9cCxuLmFyZztuLmRpc3BhdGNoRXhjZXB0aW9uKG4uYXJnKX1lbHNlInJldHVybiI9PT1uLm1ldGhvZCYmbi5hYnJ1cHQoInJldHVybiIsbi5hcmcpO2k9Zjt2YXIgaD11KHQscixuKTtpZigibm9ybWFsIj09PWgudHlwZSl7aWYoaT1uLmRvbmU/cDpkLGguYXJnPT09Zyljb250aW51ZTtyZXR1cm57dmFsdWU6aC5hcmcsZG9uZTpuLmRvbmV9fSJ0aHJvdyI9PT1oLnR5cGUmJihpPXAsbi5tZXRob2Q9InRocm93IixuLmFyZz1oLmFyZyl9fX1mdW5jdGlvbiBTKHQscil7dmFyIG49ci5tZXRob2QsaT10Lml0ZXJhdG9yW25dO2lmKGk9PT1lKXJldHVybiByLmRlbGVnYXRlPW51bGwsInRocm93Ij09PW4mJnQuaXRlcmF0b3IucmV0dXJuJiYoci5tZXRob2Q9InJldHVybiIsci5hcmc9ZSxTKHQsciksInRocm93Ij09PXIubWV0aG9kKXx8InJldHVybiIhPT1uJiYoci5tZXRob2Q9InRocm93IixyLmFyZz1uZXcgVHlwZUVycm9yKCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICciK24rIicgbWV0aG9kIikpLGc7dmFyIGE9dShpLHQuaXRlcmF0b3Isci5hcmcpO2lmKCJ0aHJvdyI9PT1hLnR5cGUpcmV0dXJuIHIubWV0aG9kPSJ0aHJvdyIsci5hcmc9YS5hcmcsci5kZWxlZ2F0ZT1udWxsLGc7dmFyIHM9YS5hcmc7cmV0dXJuIHM/cy5kb25lPyhyW3QucmVzdWx0TmFtZV09cy52YWx1ZSxyLm5leHQ9dC5uZXh0TG9jLCJyZXR1cm4iIT09ci5tZXRob2QmJihyLm1ldGhvZD0ibmV4dCIsci5hcmc9ZSksci5kZWxlZ2F0ZT1udWxsLGcpOnM6KHIubWV0aG9kPSJ0aHJvdyIsci5hcmc9bmV3IFR5cGVFcnJvcigiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3QiKSxyLmRlbGVnYXRlPW51bGwsZyl9ZnVuY3Rpb24gQih0KXt2YXIgZT17dHJ5TG9jOnRbMF19OzEgaW4gdCYmKGUuY2F0Y2hMb2M9dFsxXSksMiBpbiB0JiYoZS5maW5hbGx5TG9jPXRbMl0sZS5hZnRlckxvYz10WzNdKSx0aGlzLnRyeUVudHJpZXMucHVzaChlKX1mdW5jdGlvbiBPKHQpe3ZhciBlPXQuY29tcGxldGlvbnx8e307ZS50eXBlPSJub3JtYWwiLGRlbGV0ZSBlLmFyZyx0LmNvbXBsZXRpb249ZX1mdW5jdGlvbiBMKHQpe3RoaXMudHJ5RW50cmllcz1be3RyeUxvYzoicm9vdCJ9XSx0LmZvckVhY2goQix0aGlzKSx0aGlzLnJlc2V0KCEwKX1mdW5jdGlvbiBSKHQpe2lmKG51bGwhPXQpe3ZhciByPXRbc107aWYocilyZXR1cm4gci5jYWxsKHQpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0Lm5leHQpcmV0dXJuIHQ7aWYoIWlzTmFOKHQubGVuZ3RoKSl7dmFyIGk9LTEsYT1mdW5jdGlvbiByKCl7Zm9yKDsrK2k8dC5sZW5ndGg7KWlmKG4uY2FsbCh0LGkpKXJldHVybiByLnZhbHVlPXRbaV0sci5kb25lPSExLHI7cmV0dXJuIHIudmFsdWU9ZSxyLmRvbmU9ITAscn07cmV0dXJuIGEubmV4dD1hfX10aHJvdyBuZXcgVHlwZUVycm9yKHR5cGVvZiB0KyIgaXMgbm90IGl0ZXJhYmxlIil9cmV0dXJuIHcucHJvdG90eXBlPXYsaShrLCJjb25zdHJ1Y3RvciIse3ZhbHVlOnYsY29uZmlndXJhYmxlOiEwfSksaSh2LCJjb25zdHJ1Y3RvciIse3ZhbHVlOncsY29uZmlndXJhYmxlOiEwfSksdy5kaXNwbGF5TmFtZT1oKHYsbCwiR2VuZXJhdG9yRnVuY3Rpb24iKSx0LmlzR2VuZXJhdG9yRnVuY3Rpb249ZnVuY3Rpb24odCl7dmFyIGU9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQuY29uc3RydWN0b3I7cmV0dXJuISFlJiYoZT09PXd8fCJHZW5lcmF0b3JGdW5jdGlvbiI9PT0oZS5kaXNwbGF5TmFtZXx8ZS5uYW1lKSl9LHQubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LHYpOih0Ll9fcHJvdG9fXz12LGgodCxsLCJHZW5lcmF0b3JGdW5jdGlvbiIpKSx0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGspLHR9LHQuYXdyYXA9ZnVuY3Rpb24odCl7cmV0dXJue19fYXdhaXQ6dH19LHooQS5wcm90b3R5cGUpLGgoQS5wcm90b3R5cGUsbywoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pKSx0LkFzeW5jSXRlcmF0b3I9QSx0LmFzeW5jPWZ1bmN0aW9uKGUscixuLGksYSl7dm9pZCAwPT09YSYmKGE9UHJvbWlzZSk7dmFyIHM9bmV3IEEoYyhlLHIsbixpKSxhKTtyZXR1cm4gdC5pc0dlbmVyYXRvckZ1bmN0aW9uKHIpP3M6cy5uZXh0KCkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIHQuZG9uZT90LnZhbHVlOnMubmV4dCgpfSkpfSx6KGspLGgoayxsLCJHZW5lcmF0b3IiKSxoKGsscywoZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pKSxoKGssInRvU3RyaW5nIiwoZnVuY3Rpb24oKXtyZXR1cm4iW29iamVjdCBHZW5lcmF0b3JdIn0pKSx0LmtleXM9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0KHQpLHI9W107Zm9yKHZhciBuIGluIGUpci5wdXNoKG4pO3JldHVybiByLnJldmVyc2UoKSxmdW5jdGlvbiB0KCl7Zm9yKDtyLmxlbmd0aDspe3ZhciBuPXIucG9wKCk7aWYobiBpbiBlKXJldHVybiB0LnZhbHVlPW4sdC5kb25lPSExLHR9cmV0dXJuIHQuZG9uZT0hMCx0fX0sdC52YWx1ZXM9UixMLnByb3RvdHlwZT17Y29uc3RydWN0b3I6TCxyZXNldDpmdW5jdGlvbih0KXtpZih0aGlzLnByZXY9MCx0aGlzLm5leHQ9MCx0aGlzLnNlbnQ9dGhpcy5fc2VudD1lLHRoaXMuZG9uZT0hMSx0aGlzLmRlbGVnYXRlPW51bGwsdGhpcy5tZXRob2Q9Im5leHQiLHRoaXMuYXJnPWUsdGhpcy50cnlFbnRyaWVzLmZvckVhY2goTyksIXQpZm9yKHZhciByIGluIHRoaXMpInQiPT09ci5jaGFyQXQoMCkmJm4uY2FsbCh0aGlzLHIpJiYhaXNOYU4oK3Iuc2xpY2UoMSkpJiYodGhpc1tyXT1lKX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuZG9uZT0hMDt2YXIgdD10aGlzLnRyeUVudHJpZXNbMF0uY29tcGxldGlvbjtpZigidGhyb3ciPT09dC50eXBlKXRocm93IHQuYXJnO3JldHVybiB0aGlzLnJ2YWx9LGRpc3BhdGNoRXhjZXB0aW9uOmZ1bmN0aW9uKHQpe2lmKHRoaXMuZG9uZSl0aHJvdyB0O3ZhciByPXRoaXM7ZnVuY3Rpb24gaShuLGkpe3JldHVybiBvLnR5cGU9InRocm93IixvLmFyZz10LHIubmV4dD1uLGkmJihyLm1ldGhvZD0ibmV4dCIsci5hcmc9ZSksISFpfWZvcih2YXIgYT10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7YT49MDstLWEpe3ZhciBzPXRoaXMudHJ5RW50cmllc1thXSxvPXMuY29tcGxldGlvbjtpZigicm9vdCI9PT1zLnRyeUxvYylyZXR1cm4gaSgiZW5kIik7aWYocy50cnlMb2M8PXRoaXMucHJldil7dmFyIGw9bi5jYWxsKHMsImNhdGNoTG9jIiksaD1uLmNhbGwocywiZmluYWxseUxvYyIpO2lmKGwmJmgpe2lmKHRoaXMucHJldjxzLmNhdGNoTG9jKXJldHVybiBpKHMuY2F0Y2hMb2MsITApO2lmKHRoaXMucHJldjxzLmZpbmFsbHlMb2MpcmV0dXJuIGkocy5maW5hbGx5TG9jKX1lbHNlIGlmKGwpe2lmKHRoaXMucHJldjxzLmNhdGNoTG9jKXJldHVybiBpKHMuY2F0Y2hMb2MsITApfWVsc2V7aWYoIWgpdGhyb3cgbmV3IEVycm9yKCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseSIpO2lmKHRoaXMucHJldjxzLmZpbmFsbHlMb2MpcmV0dXJuIGkocy5maW5hbGx5TG9jKX19fX0sYWJydXB0OmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtyPj0wOy0tcil7dmFyIGk9dGhpcy50cnlFbnRyaWVzW3JdO2lmKGkudHJ5TG9jPD10aGlzLnByZXYmJm4uY2FsbChpLCJmaW5hbGx5TG9jIikmJnRoaXMucHJldjxpLmZpbmFsbHlMb2Mpe3ZhciBhPWk7YnJlYWt9fWEmJigiYnJlYWsiPT09dHx8ImNvbnRpbnVlIj09PXQpJiZhLnRyeUxvYzw9ZSYmZTw9YS5maW5hbGx5TG9jJiYoYT1udWxsKTt2YXIgcz1hP2EuY29tcGxldGlvbjp7fTtyZXR1cm4gcy50eXBlPXQscy5hcmc9ZSxhPyh0aGlzLm1ldGhvZD0ibmV4dCIsdGhpcy5uZXh0PWEuZmluYWxseUxvYyxnKTp0aGlzLmNvbXBsZXRlKHMpfSxjb21wbGV0ZTpmdW5jdGlvbih0LGUpe2lmKCJ0aHJvdyI9PT10LnR5cGUpdGhyb3cgdC5hcmc7cmV0dXJuImJyZWFrIj09PXQudHlwZXx8ImNvbnRpbnVlIj09PXQudHlwZT90aGlzLm5leHQ9dC5hcmc6InJldHVybiI9PT10LnR5cGU/KHRoaXMucnZhbD10aGlzLmFyZz10LmFyZyx0aGlzLm1ldGhvZD0icmV0dXJuIix0aGlzLm5leHQ9ImVuZCIpOiJub3JtYWwiPT09dC50eXBlJiZlJiYodGhpcy5uZXh0PWUpLGd9LGZpbmlzaDpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2U+PTA7LS1lKXt2YXIgcj10aGlzLnRyeUVudHJpZXNbZV07aWYoci5maW5hbGx5TG9jPT09dClyZXR1cm4gdGhpcy5jb21wbGV0ZShyLmNvbXBsZXRpb24sci5hZnRlckxvYyksTyhyKSxnfX0sY2F0Y2g6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtlPj0wOy0tZSl7dmFyIHI9dGhpcy50cnlFbnRyaWVzW2VdO2lmKHIudHJ5TG9jPT09dCl7dmFyIG49ci5jb21wbGV0aW9uO2lmKCJ0aHJvdyI9PT1uLnR5cGUpe3ZhciBpPW4uYXJnO08ocil9cmV0dXJuIGl9fXRocm93IG5ldyBFcnJvcigiaWxsZWdhbCBjYXRjaCBhdHRlbXB0Iil9LGRlbGVnYXRlWWllbGQ6ZnVuY3Rpb24odCxyLG4pe3JldHVybiB0aGlzLmRlbGVnYXRlPXtpdGVyYXRvcjpSKHQpLHJlc3VsdE5hbWU6cixuZXh0TG9jOm59LCJuZXh0Ij09PXRoaXMubWV0aG9kJiYodGhpcy5hcmc9ZSksZ319LHR9KHQuZXhwb3J0cyk7dHJ5e2dsb2JhbFRoaXMucmVnZW5lcmF0b3JSdW50aW1lPWV9Y2F0Y2godCl7Im9iamVjdCI9PXR5cGVvZiBnbG9iYWxUaGlzP2dsb2JhbFRoaXMucmVnZW5lcmF0b3JSdW50aW1lPWU6RnVuY3Rpb24oInIiLCJyZWdlbmVyYXRvclJ1bnRpbWUgPSByIikoZSl9fShpKSk7dmFyIGEscz17ZXhwb3J0czp7fX07dmFyIG89KGF8fChhPTEsZnVuY3Rpb24odCl7Y29uc3QgZT00LHI9MCxuPTEsaT0yO2Z1bmN0aW9uIGEodCl7bGV0IGU9dC5sZW5ndGg7Zm9yKDstLWU+PTA7KXRbZV09MH1jb25zdCBzPTAsbz0xLGw9MixoPTMsYz0yNTgsdT0yOSxfPTI1NixkPV8rMSt1LGY9MzAscD0xOSxnPTIqZCsxLHk9MTUsdz0xNix2PTcsbT0yNTYsYj0xNix4PTE3LGs9MTgsej1uZXcgVWludDhBcnJheShbMCwwLDAsMCwwLDAsMCwwLDEsMSwxLDEsMiwyLDIsMiwzLDMsMywzLDQsNCw0LDQsNSw1LDUsNSwwXSksQT1uZXcgVWludDhBcnJheShbMCwwLDAsMCwxLDEsMiwyLDMsMyw0LDQsNSw1LDYsNiw3LDcsOCw4LDksOSwxMCwxMCwxMSwxMSwxMiwxMiwxMywxM10pLEU9bmV3IFVpbnQ4QXJyYXkoWzAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMiwzLDddKSxTPW5ldyBVaW50OEFycmF5KFsxNiwxNywxOCwwLDgsNyw5LDYsMTAsNSwxMSw0LDEyLDMsMTMsMiwxNCwxLDE1XSksQj01MTIsTz1uZXcgQXJyYXkoMiooZCsyKSk7YShPKTtjb25zdCBMPW5ldyBBcnJheSgyKmYpO2EoTCk7Y29uc3QgUj1uZXcgQXJyYXkoQik7YShSKTtjb25zdCBEPW5ldyBBcnJheShjLWgrMSk7YShEKTtjb25zdCBVPW5ldyBBcnJheSh1KTthKFUpO2NvbnN0IEM9bmV3IEFycmF5KGYpO2Z1bmN0aW9uIFQodCxlLHIsbixpKXt0aGlzLnN0YXRpY190cmVlPXQsdGhpcy5leHRyYV9iaXRzPWUsdGhpcy5leHRyYV9iYXNlPXIsdGhpcy5lbGVtcz1uLHRoaXMubWF4X2xlbmd0aD1pLHRoaXMuaGFzX3N0cmVlPXQmJnQubGVuZ3RofWxldCBGLEgsWjtmdW5jdGlvbiBNKHQsZSl7dGhpcy5keW5fdHJlZT10LHRoaXMubWF4X2NvZGU9MCx0aGlzLnN0YXRfZGVzYz1lfWEoQyk7Y29uc3QgTj10PT50PDI1Nj9SW3RdOlJbMjU2Kyh0Pj4+NyldLEk9KHQsZSk9Pnt0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT0yNTUmZSx0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT1lPj4+OCYyNTV9LGo9KHQsZSxyKT0+e3QuYmlfdmFsaWQ+dy1yPyh0LmJpX2J1Znw9ZTw8dC5iaV92YWxpZCY2NTUzNSxJKHQsdC5iaV9idWYpLHQuYmlfYnVmPWU+PnctdC5iaV92YWxpZCx0LmJpX3ZhbGlkKz1yLXcpOih0LmJpX2J1Znw9ZTw8dC5iaV92YWxpZCY2NTUzNSx0LmJpX3ZhbGlkKz1yKX0sUD0odCxlLHIpPT57aih0LHJbMiplXSxyWzIqZSsxXSl9LCQ9KHQsZSk9PntsZXQgcj0wO2Rve3J8PTEmdCx0Pj4+PTEscjw8PTF9d2hpbGUoLS1lPjApO3JldHVybiByPj4+MX0sSz10PT57MTY9PT10LmJpX3ZhbGlkPyhJKHQsdC5iaV9idWYpLHQuYmlfYnVmPTAsdC5iaV92YWxpZD0wKTp0LmJpX3ZhbGlkPj04JiYodC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmcrK109MjU1JnQuYmlfYnVmLHQuYmlfYnVmPj49OCx0LmJpX3ZhbGlkLT04KX0sWD0odCxlKT0+e2NvbnN0IHI9ZS5keW5fdHJlZSxuPWUubWF4X2NvZGUsaT1lLnN0YXRfZGVzYy5zdGF0aWNfdHJlZSxhPWUuc3RhdF9kZXNjLmhhc19zdHJlZSxzPWUuc3RhdF9kZXNjLmV4dHJhX2JpdHMsbz1lLnN0YXRfZGVzYy5leHRyYV9iYXNlLGw9ZS5zdGF0X2Rlc2MubWF4X2xlbmd0aDtsZXQgaCxjLHUsXyxkLGYscD0wO2ZvcihfPTA7Xzw9eTtfKyspdC5ibF9jb3VudFtfXT0wO2ZvcihyWzIqdC5oZWFwW3QuaGVhcF9tYXhdKzFdPTAsaD10LmhlYXBfbWF4KzE7aDxnO2grKyljPXQuaGVhcFtoXSxfPXJbMipyWzIqYysxXSsxXSsxLF8+bCYmKF89bCxwKyspLHJbMipjKzFdPV8sYz5ufHwodC5ibF9jb3VudFtfXSsrLGQ9MCxjPj1vJiYoZD1zW2Mtb10pLGY9clsyKmNdLHQub3B0X2xlbis9ZiooXytkKSxhJiYodC5zdGF0aWNfbGVuKz1mKihpWzIqYysxXStkKSkpO2lmKDAhPT1wKXtkb3tmb3IoXz1sLTE7MD09PXQuYmxfY291bnRbX107KV8tLTt0LmJsX2NvdW50W19dLS0sdC5ibF9jb3VudFtfKzFdKz0yLHQuYmxfY291bnRbbF0tLSxwLT0yfXdoaWxlKHA+MCk7Zm9yKF89bDswIT09XztfLS0pZm9yKGM9dC5ibF9jb3VudFtfXTswIT09YzspdT10LmhlYXBbLS1oXSx1Pm58fChyWzIqdSsxXSE9PV8mJih0Lm9wdF9sZW4rPShfLXJbMip1KzFdKSpyWzIqdV0sclsyKnUrMV09XyksYy0tKX19LEc9KHQsZSxyKT0+e2NvbnN0IG49bmV3IEFycmF5KHkrMSk7bGV0IGksYSxzPTA7Zm9yKGk9MTtpPD15O2krKylzPXMrcltpLTFdPDwxLG5baV09cztmb3IoYT0wO2E8PWU7YSsrKXtsZXQgZT10WzIqYSsxXTswIT09ZSYmKHRbMiphXT0kKG5bZV0rKyxlKSl9fSxXPSgpPT57bGV0IHQsZSxyLG4saTtjb25zdCBhPW5ldyBBcnJheSh5KzEpO2ZvcihyPTAsbj0wO248dS0xO24rKylmb3IoVVtuXT1yLHQ9MDt0PDE8PHpbbl07dCsrKURbcisrXT1uO2ZvcihEW3ItMV09bixpPTAsbj0wO248MTY7bisrKWZvcihDW25dPWksdD0wO3Q8MTw8QVtuXTt0KyspUltpKytdPW47Zm9yKGk+Pj03O248ZjtuKyspZm9yKENbbl09aTw8Nyx0PTA7dDwxPDxBW25dLTc7dCsrKVJbMjU2K2krK109bjtmb3IoZT0wO2U8PXk7ZSsrKWFbZV09MDtmb3IodD0wO3Q8PTE0MzspT1syKnQrMV09OCx0KyssYVs4XSsrO2Zvcig7dDw9MjU1OylPWzIqdCsxXT05LHQrKyxhWzldKys7Zm9yKDt0PD0yNzk7KU9bMip0KzFdPTcsdCsrLGFbN10rKztmb3IoO3Q8PTI4NzspT1syKnQrMV09OCx0KyssYVs4XSsrO2ZvcihHKE8sZCsxLGEpLHQ9MDt0PGY7dCsrKUxbMip0KzFdPTUsTFsyKnRdPSQodCw1KTtGPW5ldyBUKE8seixfKzEsZCx5KSxIPW5ldyBUKEwsQSwwLGYseSksWj1uZXcgVChuZXcgQXJyYXkoMCksRSwwLHAsdil9LFk9dD0+e2xldCBlO2ZvcihlPTA7ZTxkO2UrKyl0LmR5bl9sdHJlZVsyKmVdPTA7Zm9yKGU9MDtlPGY7ZSsrKXQuZHluX2R0cmVlWzIqZV09MDtmb3IoZT0wO2U8cDtlKyspdC5ibF90cmVlWzIqZV09MDt0LmR5bl9sdHJlZVsyKm1dPTEsdC5vcHRfbGVuPXQuc3RhdGljX2xlbj0wLHQuc3ltX25leHQ9dC5tYXRjaGVzPTB9LHE9dD0+e3QuYmlfdmFsaWQ+OD9JKHQsdC5iaV9idWYpOnQuYmlfdmFsaWQ+MCYmKHQucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPXQuYmlfYnVmKSx0LmJpX2J1Zj0wLHQuYmlfdmFsaWQ9MH0sVj0odCxlLHIsbik9Pntjb25zdCBpPTIqZSxhPTIqcjtyZXR1cm4gdFtpXTx0W2FdfHx0W2ldPT09dFthXSYmbltlXTw9bltyXX0sUT0odCxlLHIpPT57Y29uc3Qgbj10LmhlYXBbcl07bGV0IGk9cjw8MTtmb3IoO2k8PXQuaGVhcF9sZW4mJihpPHQuaGVhcF9sZW4mJlYoZSx0LmhlYXBbaSsxXSx0LmhlYXBbaV0sdC5kZXB0aCkmJmkrKywhVihlLG4sdC5oZWFwW2ldLHQuZGVwdGgpKTspdC5oZWFwW3JdPXQuaGVhcFtpXSxyPWksaTw8PTE7dC5oZWFwW3JdPW59LEo9KHQsZSxyKT0+e2xldCBuLGksYSxzLG89MDtpZigwIT09dC5zeW1fbmV4dClkb3tuPTI1NSZ0LnBlbmRpbmdfYnVmW3Quc3ltX2J1ZitvKytdLG4rPSgyNTUmdC5wZW5kaW5nX2J1Zlt0LnN5bV9idWYrbysrXSk8PDgsaT10LnBlbmRpbmdfYnVmW3Quc3ltX2J1ZitvKytdLDA9PT1uP1AodCxpLGUpOihhPURbaV0sUCh0LGErXysxLGUpLHM9elthXSwwIT09cyYmKGktPVVbYV0saih0LGkscykpLG4tLSxhPU4obiksUCh0LGEscikscz1BW2FdLDAhPT1zJiYobi09Q1thXSxqKHQsbixzKSkpfXdoaWxlKG88dC5zeW1fbmV4dCk7UCh0LG0sZSl9LHR0PSh0LGUpPT57Y29uc3Qgcj1lLmR5bl90cmVlLG49ZS5zdGF0X2Rlc2Muc3RhdGljX3RyZWUsaT1lLnN0YXRfZGVzYy5oYXNfc3RyZWUsYT1lLnN0YXRfZGVzYy5lbGVtcztsZXQgcyxvLGwsaD0tMTtmb3IodC5oZWFwX2xlbj0wLHQuaGVhcF9tYXg9ZyxzPTA7czxhO3MrKykwIT09clsyKnNdPyh0LmhlYXBbKyt0LmhlYXBfbGVuXT1oPXMsdC5kZXB0aFtzXT0wKTpyWzIqcysxXT0wO2Zvcig7dC5oZWFwX2xlbjwyOylsPXQuaGVhcFsrK3QuaGVhcF9sZW5dPWg8Mj8rK2g6MCxyWzIqbF09MSx0LmRlcHRoW2xdPTAsdC5vcHRfbGVuLS0saSYmKHQuc3RhdGljX2xlbi09blsyKmwrMV0pO2ZvcihlLm1heF9jb2RlPWgscz10LmhlYXBfbGVuPj4xO3M+PTE7cy0tKVEodCxyLHMpO2w9YTtkb3tzPXQuaGVhcFsxXSx0LmhlYXBbMV09dC5oZWFwW3QuaGVhcF9sZW4tLV0sUSh0LHIsMSksbz10LmhlYXBbMV0sdC5oZWFwWy0tdC5oZWFwX21heF09cyx0LmhlYXBbLS10LmhlYXBfbWF4XT1vLHJbMipsXT1yWzIqc10rclsyKm9dLHQuZGVwdGhbbF09KHQuZGVwdGhbc10+PXQuZGVwdGhbb10/dC5kZXB0aFtzXTp0LmRlcHRoW29dKSsxLHJbMipzKzFdPXJbMipvKzFdPWwsdC5oZWFwWzFdPWwrKyxRKHQsciwxKX13aGlsZSh0LmhlYXBfbGVuPj0yKTt0LmhlYXBbLS10LmhlYXBfbWF4XT10LmhlYXBbMV0sWCh0LGUpLEcocixoLHQuYmxfY291bnQpfSxldD0odCxlLHIpPT57bGV0IG4saSxhPS0xLHM9ZVsxXSxvPTAsbD03LGg9NDtmb3IoMD09PXMmJihsPTEzOCxoPTMpLGVbMioocisxKSsxXT02NTUzNSxuPTA7bjw9cjtuKyspaT1zLHM9ZVsyKihuKzEpKzFdLCsrbzxsJiZpPT09c3x8KG88aD90LmJsX3RyZWVbMippXSs9bzowIT09aT8oaSE9PWEmJnQuYmxfdHJlZVsyKmldKyssdC5ibF90cmVlWzIqYl0rKyk6bzw9MTA/dC5ibF90cmVlWzIqeF0rKzp0LmJsX3RyZWVbMiprXSsrLG89MCxhPWksMD09PXM/KGw9MTM4LGg9Myk6aT09PXM/KGw9NixoPTMpOihsPTcsaD00KSl9LHJ0PSh0LGUscik9PntsZXQgbixpLGE9LTEscz1lWzFdLG89MCxsPTcsaD00O2ZvcigwPT09cyYmKGw9MTM4LGg9Myksbj0wO248PXI7bisrKWlmKGk9cyxzPWVbMioobisxKSsxXSwhKCsrbzxsJiZpPT09cykpe2lmKG88aClkb3tQKHQsaSx0LmJsX3RyZWUpfXdoaWxlKDAhPS0tbyk7ZWxzZSAwIT09aT8oaSE9PWEmJihQKHQsaSx0LmJsX3RyZWUpLG8tLSksUCh0LGIsdC5ibF90cmVlKSxqKHQsby0zLDIpKTpvPD0xMD8oUCh0LHgsdC5ibF90cmVlKSxqKHQsby0zLDMpKTooUCh0LGssdC5ibF90cmVlKSxqKHQsby0xMSw3KSk7bz0wLGE9aSwwPT09cz8obD0xMzgsaD0zKTppPT09cz8obD02LGg9Myk6KGw9NyxoPTQpfX0sbnQ9dD0+e2xldCBlO2ZvcihldCh0LHQuZHluX2x0cmVlLHQubF9kZXNjLm1heF9jb2RlKSxldCh0LHQuZHluX2R0cmVlLHQuZF9kZXNjLm1heF9jb2RlKSx0dCh0LHQuYmxfZGVzYyksZT1wLTE7ZT49MyYmMD09PXQuYmxfdHJlZVsyKlNbZV0rMV07ZS0tKTtyZXR1cm4gdC5vcHRfbGVuKz0zKihlKzEpKzUrNSs0LGV9LGl0PSh0LGUscixuKT0+e2xldCBpO2ZvcihqKHQsZS0yNTcsNSksaih0LHItMSw1KSxqKHQsbi00LDQpLGk9MDtpPG47aSsrKWoodCx0LmJsX3RyZWVbMipTW2ldKzFdLDMpO3J0KHQsdC5keW5fbHRyZWUsZS0xKSxydCh0LHQuZHluX2R0cmVlLHItMSl9LGF0PXQ9PntsZXQgZSxpPTQwOTM2MjQ0NDc7Zm9yKGU9MDtlPD0zMTtlKyssaT4+Pj0xKWlmKDEmaSYmMCE9PXQuZHluX2x0cmVlWzIqZV0pcmV0dXJuIHI7aWYoMCE9PXQuZHluX2x0cmVlWzE4XXx8MCE9PXQuZHluX2x0cmVlWzIwXXx8MCE9PXQuZHluX2x0cmVlWzI2XSlyZXR1cm4gbjtmb3IoZT0zMjtlPF87ZSsrKWlmKDAhPT10LmR5bl9sdHJlZVsyKmVdKXJldHVybiBuO3JldHVybiByfTtsZXQgc3Q9ITE7Y29uc3Qgb3Q9KHQsZSxyLG4pPT57aih0LChzPDwxKSsobj8xOjApLDMpLHEodCksSSh0LHIpLEkodCx+ciksciYmdC5wZW5kaW5nX2J1Zi5zZXQodC53aW5kb3cuc3ViYXJyYXkoZSxlK3IpLHQucGVuZGluZyksdC5wZW5kaW5nKz1yfSxsdD0odCxyLG4sYSk9PntsZXQgcyxoLGM9MDt0LmxldmVsPjA/KHQuc3RybS5kYXRhX3R5cGU9PT1pJiYodC5zdHJtLmRhdGFfdHlwZT1hdCh0KSksdHQodCx0LmxfZGVzYyksdHQodCx0LmRfZGVzYyksYz1udCh0KSxzPXQub3B0X2xlbiszKzc+Pj4zLGg9dC5zdGF0aWNfbGVuKzMrNz4+PjMsaDw9cyYmKHM9aCkpOnM9aD1uKzUsbis0PD1zJiYtMSE9PXI/b3QodCxyLG4sYSk6dC5zdHJhdGVneT09PWV8fGg9PT1zPyhqKHQsKG88PDEpKyhhPzE6MCksMyksSih0LE8sTCkpOihqKHQsKGw8PDEpKyhhPzE6MCksMyksaXQodCx0LmxfZGVzYy5tYXhfY29kZSsxLHQuZF9kZXNjLm1heF9jb2RlKzEsYysxKSxKKHQsdC5keW5fbHRyZWUsdC5keW5fZHRyZWUpKSxZKHQpLGEmJnEodCl9O3ZhciBodD17X3RyX2luaXQ6dD0+e3N0fHwoVygpLHN0PSEwKSx0LmxfZGVzYz1uZXcgTSh0LmR5bl9sdHJlZSxGKSx0LmRfZGVzYz1uZXcgTSh0LmR5bl9kdHJlZSxIKSx0LmJsX2Rlc2M9bmV3IE0odC5ibF90cmVlLFopLHQuYmlfYnVmPTAsdC5iaV92YWxpZD0wLFkodCl9LF90cl9zdG9yZWRfYmxvY2s6b3QsX3RyX2ZsdXNoX2Jsb2NrOmx0LF90cl90YWxseToodCxlLHIpPT4odC5wZW5kaW5nX2J1Zlt0LnN5bV9idWYrdC5zeW1fbmV4dCsrXT1lLHQucGVuZGluZ19idWZbdC5zeW1fYnVmK3Quc3ltX25leHQrK109ZT4+OCx0LnBlbmRpbmdfYnVmW3Quc3ltX2J1Zit0LnN5bV9uZXh0KytdPXIsMD09PWU/dC5keW5fbHRyZWVbMipyXSsrOih0Lm1hdGNoZXMrKyxlLS0sdC5keW5fbHRyZWVbMiooRFtyXStfKzEpXSsrLHQuZHluX2R0cmVlWzIqTihlKV0rKyksdC5zeW1fbmV4dD09PXQuc3ltX2VuZCksX3RyX2FsaWduOnQ9PntqKHQsbzw8MSwzKSxQKHQsbSxPKSxLKHQpfX0sY3Q9KHQsZSxyLG4pPT57bGV0IGk9NjU1MzUmdCxhPXQ+Pj4xNiY2NTUzNSxzPTA7Zm9yKDswIT09cjspe3M9cj4yZTM/MmUzOnIsci09cztkb3tpPWkrZVtuKytdfDAsYT1hK2l8MH13aGlsZSgtLXMpO2klPTY1NTIxLGElPTY1NTIxfXJldHVybiBpfGE8PDE2fTtjb25zdCB1dD1uZXcgVWludDMyQXJyYXkoKCgpPT57bGV0IHQsZT1bXTtmb3IodmFyIHI9MDtyPDI1NjtyKyspe3Q9cjtmb3IodmFyIG49MDtuPDg7bisrKXQ9MSZ0PzM5ODgyOTIzODRedD4+PjE6dD4+PjE7ZVtyXT10fXJldHVybiBlfSkoKSk7dmFyIF90PSh0LGUscixuKT0+e2NvbnN0IGk9dXQsYT1uK3I7dF49LTE7Zm9yKGxldCByPW47cjxhO3IrKyl0PXQ+Pj44XmlbMjU1Jih0XmVbcl0pXTtyZXR1cm5+dH0sZHQ9ezI6Im5lZWQgZGljdGlvbmFyeSIsMToic3RyZWFtIGVuZCIsMDoiIiwiLTEiOiJmaWxlIGVycm9yIiwiLTIiOiJzdHJlYW0gZXJyb3IiLCItMyI6ImRhdGEgZXJyb3IiLCItNCI6Imluc3VmZmljaWVudCBtZW1vcnkiLCItNSI6ImJ1ZmZlciBlcnJvciIsIi02IjoiaW5jb21wYXRpYmxlIHZlcnNpb24ifSxmdD17Wl9OT19GTFVTSDowLFpfUEFSVElBTF9GTFVTSDoxLFpfU1lOQ19GTFVTSDoyLFpfRlVMTF9GTFVTSDozLFpfRklOSVNIOjQsWl9CTE9DSzo1LFpfVFJFRVM6NixaX09LOjAsWl9TVFJFQU1fRU5EOjEsWl9ORUVEX0RJQ1Q6MixaX0VSUk5POi0xLFpfU1RSRUFNX0VSUk9SOi0yLFpfREFUQV9FUlJPUjotMyxaX01FTV9FUlJPUjotNCxaX0JVRl9FUlJPUjotNSxaX05PX0NPTVBSRVNTSU9OOjAsWl9CRVNUX1NQRUVEOjEsWl9CRVNUX0NPTVBSRVNTSU9OOjksWl9ERUZBVUxUX0NPTVBSRVNTSU9OOi0xLFpfRklMVEVSRUQ6MSxaX0hVRkZNQU5fT05MWToyLFpfUkxFOjMsWl9GSVhFRDo0LFpfREVGQVVMVF9TVFJBVEVHWTowLFpfQklOQVJZOjAsWl9URVhUOjEsWl9VTktOT1dOOjIsWl9ERUZMQVRFRDo4fTtjb25zdHtfdHJfaW5pdDpwdCxfdHJfc3RvcmVkX2Jsb2NrOmd0LF90cl9mbHVzaF9ibG9jazp5dCxfdHJfdGFsbHk6d3QsX3RyX2FsaWduOnZ0fT1odCx7Wl9OT19GTFVTSDptdCxaX1BBUlRJQUxfRkxVU0g6YnQsWl9GVUxMX0ZMVVNIOnh0LFpfRklOSVNIOmt0LFpfQkxPQ0s6enQsWl9PSzpBdCxaX1NUUkVBTV9FTkQ6RXQsWl9TVFJFQU1fRVJST1I6U3QsWl9EQVRBX0VSUk9SOkJ0LFpfQlVGX0VSUk9SOk90LFpfREVGQVVMVF9DT01QUkVTU0lPTjpMdCxaX0ZJTFRFUkVEOlJ0LFpfSFVGRk1BTl9PTkxZOkR0LFpfUkxFOlV0LFpfRklYRUQ6Q3QsWl9ERUZBVUxUX1NUUkFURUdZOlR0LFpfVU5LTk9XTjpGdCxaX0RFRkxBVEVEOkh0fT1mdCxadD05LE10PTE1LE50PTgsSXQ9Mjg2LGp0PTMwLFB0PTE5LCR0PTIqSXQrMSxLdD0xNSxYdD0zLEd0PTI1OCxXdD1HdCtYdCsxLFl0PTMyLHF0PTQyLFZ0PTU3LFF0PTY5LEp0PTczLHRlPTkxLGVlPTEwMyxyZT0xMTMsbmU9NjY2LGllPTEsYWU9MixzZT0zLG9lPTQsbGU9MyxoZT0odCxlKT0+KHQubXNnPWR0W2VdLGUpLGNlPXQ9PjIqdC0odD40Pzk6MCksdWU9dD0+e2xldCBlPXQubGVuZ3RoO2Zvcig7LS1lPj0wOyl0W2VdPTB9LF9lPXQ9PntsZXQgZSxyLG4saT10Lndfc2l6ZTtlPXQuaGFzaF9zaXplLG49ZTtkb3tyPXQuaGVhZFstLW5dLHQuaGVhZFtuXT1yPj1pP3ItaTowfXdoaWxlKC0tZSk7ZT1pLG49ZTtkb3tyPXQucHJldlstLW5dLHQucHJldltuXT1yPj1pP3ItaTowfXdoaWxlKC0tZSl9O2xldCBkZT0odCxlLHIpPT4oZTw8dC5oYXNoX3NoaWZ0XnIpJnQuaGFzaF9tYXNrO2NvbnN0IGZlPXQ9Pntjb25zdCBlPXQuc3RhdGU7bGV0IHI9ZS5wZW5kaW5nO3I+dC5hdmFpbF9vdXQmJihyPXQuYXZhaWxfb3V0KSwwIT09ciYmKHQub3V0cHV0LnNldChlLnBlbmRpbmdfYnVmLnN1YmFycmF5KGUucGVuZGluZ19vdXQsZS5wZW5kaW5nX291dCtyKSx0Lm5leHRfb3V0KSx0Lm5leHRfb3V0Kz1yLGUucGVuZGluZ19vdXQrPXIsdC50b3RhbF9vdXQrPXIsdC5hdmFpbF9vdXQtPXIsZS5wZW5kaW5nLT1yLDA9PT1lLnBlbmRpbmcmJihlLnBlbmRpbmdfb3V0PTApKX0scGU9KHQsZSk9Pnt5dCh0LHQuYmxvY2tfc3RhcnQ+PTA/dC5ibG9ja19zdGFydDotMSx0LnN0cnN0YXJ0LXQuYmxvY2tfc3RhcnQsZSksdC5ibG9ja19zdGFydD10LnN0cnN0YXJ0LGZlKHQuc3RybSl9LGdlPSh0LGUpPT57dC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmcrK109ZX0seWU9KHQsZSk9Pnt0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT1lPj4+OCYyNTUsdC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmcrK109MjU1JmV9LHdlPSh0LGUscixuKT0+e2xldCBpPXQuYXZhaWxfaW47cmV0dXJuIGk+biYmKGk9biksMD09PWk/MDoodC5hdmFpbF9pbi09aSxlLnNldCh0LmlucHV0LnN1YmFycmF5KHQubmV4dF9pbix0Lm5leHRfaW4raSksciksMT09PXQuc3RhdGUud3JhcD90LmFkbGVyPWN0KHQuYWRsZXIsZSxpLHIpOjI9PT10LnN0YXRlLndyYXAmJih0LmFkbGVyPV90KHQuYWRsZXIsZSxpLHIpKSx0Lm5leHRfaW4rPWksdC50b3RhbF9pbis9aSxpKX0sdmU9KHQsZSk9PntsZXQgcixuLGk9dC5tYXhfY2hhaW5fbGVuZ3RoLGE9dC5zdHJzdGFydCxzPXQucHJldl9sZW5ndGgsbz10Lm5pY2VfbWF0Y2g7Y29uc3QgbD10LnN0cnN0YXJ0PnQud19zaXplLVd0P3Quc3Ryc3RhcnQtKHQud19zaXplLVd0KTowLGg9dC53aW5kb3csYz10LndfbWFzayx1PXQucHJldixfPXQuc3Ryc3RhcnQrR3Q7bGV0IGQ9aFthK3MtMV0sZj1oW2Erc107dC5wcmV2X2xlbmd0aD49dC5nb29kX21hdGNoJiYoaT4+PTIpLG8+dC5sb29rYWhlYWQmJihvPXQubG9va2FoZWFkKTtkb3tpZihyPWUsaFtyK3NdPT09ZiYmaFtyK3MtMV09PT1kJiZoW3JdPT09aFthXSYmaFsrK3JdPT09aFthKzFdKXthKz0yLHIrKztkb3t9d2hpbGUoaFsrK2FdPT09aFsrK3JdJiZoWysrYV09PT1oWysrcl0mJmhbKythXT09PWhbKytyXSYmaFsrK2FdPT09aFsrK3JdJiZoWysrYV09PT1oWysrcl0mJmhbKythXT09PWhbKytyXSYmaFsrK2FdPT09aFsrK3JdJiZoWysrYV09PT1oWysrcl0mJmE8Xyk7aWYobj1HdC0oXy1hKSxhPV8tR3Qsbj5zKXtpZih0Lm1hdGNoX3N0YXJ0PWUscz1uLG4+PW8pYnJlYWs7ZD1oW2Ercy0xXSxmPWhbYStzXX19fXdoaWxlKChlPXVbZSZjXSk+bCYmMCE9LS1pKTtyZXR1cm4gczw9dC5sb29rYWhlYWQ/czp0Lmxvb2thaGVhZH0sbWU9dD0+e2NvbnN0IGU9dC53X3NpemU7bGV0IHIsbixpO2Rve2lmKG49dC53aW5kb3dfc2l6ZS10Lmxvb2thaGVhZC10LnN0cnN0YXJ0LHQuc3Ryc3RhcnQ+PWUrKGUtV3QpJiYodC53aW5kb3cuc2V0KHQud2luZG93LnN1YmFycmF5KGUsZStlLW4pLDApLHQubWF0Y2hfc3RhcnQtPWUsdC5zdHJzdGFydC09ZSx0LmJsb2NrX3N0YXJ0LT1lLHQuaW5zZXJ0PnQuc3Ryc3RhcnQmJih0Lmluc2VydD10LnN0cnN0YXJ0KSxfZSh0KSxuKz1lKSwwPT09dC5zdHJtLmF2YWlsX2luKWJyZWFrO2lmKHI9d2UodC5zdHJtLHQud2luZG93LHQuc3Ryc3RhcnQrdC5sb29rYWhlYWQsbiksdC5sb29rYWhlYWQrPXIsdC5sb29rYWhlYWQrdC5pbnNlcnQ+PVh0KWZvcihpPXQuc3Ryc3RhcnQtdC5pbnNlcnQsdC5pbnNfaD10LndpbmRvd1tpXSx0Lmluc19oPWRlKHQsdC5pbnNfaCx0LndpbmRvd1tpKzFdKTt0Lmluc2VydCYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W2krWHQtMV0pLHQucHJldltpJnQud19tYXNrXT10LmhlYWRbdC5pbnNfaF0sdC5oZWFkW3QuaW5zX2hdPWksaSsrLHQuaW5zZXJ0LS0sISh0Lmxvb2thaGVhZCt0Lmluc2VydDxYdCkpOyk7fXdoaWxlKHQubG9va2FoZWFkPFd0JiYwIT09dC5zdHJtLmF2YWlsX2luKX0sYmU9KHQsZSk9PntsZXQgcixuLGksYT10LnBlbmRpbmdfYnVmX3NpemUtNT50Lndfc2l6ZT90Lndfc2l6ZTp0LnBlbmRpbmdfYnVmX3NpemUtNSxzPTAsbz10LnN0cm0uYXZhaWxfaW47ZG97aWYocj02NTUzNSxpPXQuYmlfdmFsaWQrNDI+PjMsdC5zdHJtLmF2YWlsX291dDxpKWJyZWFrO2lmKGk9dC5zdHJtLmF2YWlsX291dC1pLG49dC5zdHJzdGFydC10LmJsb2NrX3N0YXJ0LHI+bit0LnN0cm0uYXZhaWxfaW4mJihyPW4rdC5zdHJtLmF2YWlsX2luKSxyPmkmJihyPWkpLHI8YSYmKDA9PT1yJiZlIT09a3R8fGU9PT1tdHx8ciE9PW4rdC5zdHJtLmF2YWlsX2luKSlicmVhaztzPWU9PT1rdCYmcj09PW4rdC5zdHJtLmF2YWlsX2luPzE6MCxndCh0LDAsMCxzKSx0LnBlbmRpbmdfYnVmW3QucGVuZGluZy00XT1yLHQucGVuZGluZ19idWZbdC5wZW5kaW5nLTNdPXI+PjgsdC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmctMl09fnIsdC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmctMV09fnI+PjgsZmUodC5zdHJtKSxuJiYobj5yJiYobj1yKSx0LnN0cm0ub3V0cHV0LnNldCh0LndpbmRvdy5zdWJhcnJheSh0LmJsb2NrX3N0YXJ0LHQuYmxvY2tfc3RhcnQrbiksdC5zdHJtLm5leHRfb3V0KSx0LnN0cm0ubmV4dF9vdXQrPW4sdC5zdHJtLmF2YWlsX291dC09bix0LnN0cm0udG90YWxfb3V0Kz1uLHQuYmxvY2tfc3RhcnQrPW4sci09biksciYmKHdlKHQuc3RybSx0LnN0cm0ub3V0cHV0LHQuc3RybS5uZXh0X291dCxyKSx0LnN0cm0ubmV4dF9vdXQrPXIsdC5zdHJtLmF2YWlsX291dC09cix0LnN0cm0udG90YWxfb3V0Kz1yKX13aGlsZSgwPT09cyk7cmV0dXJuIG8tPXQuc3RybS5hdmFpbF9pbixvJiYobz49dC53X3NpemU/KHQubWF0Y2hlcz0yLHQud2luZG93LnNldCh0LnN0cm0uaW5wdXQuc3ViYXJyYXkodC5zdHJtLm5leHRfaW4tdC53X3NpemUsdC5zdHJtLm5leHRfaW4pLDApLHQuc3Ryc3RhcnQ9dC53X3NpemUsdC5pbnNlcnQ9dC5zdHJzdGFydCk6KHQud2luZG93X3NpemUtdC5zdHJzdGFydDw9byYmKHQuc3Ryc3RhcnQtPXQud19zaXplLHQud2luZG93LnNldCh0LndpbmRvdy5zdWJhcnJheSh0Lndfc2l6ZSx0Lndfc2l6ZSt0LnN0cnN0YXJ0KSwwKSx0Lm1hdGNoZXM8MiYmdC5tYXRjaGVzKyssdC5pbnNlcnQ+dC5zdHJzdGFydCYmKHQuaW5zZXJ0PXQuc3Ryc3RhcnQpKSx0LndpbmRvdy5zZXQodC5zdHJtLmlucHV0LnN1YmFycmF5KHQuc3RybS5uZXh0X2luLW8sdC5zdHJtLm5leHRfaW4pLHQuc3Ryc3RhcnQpLHQuc3Ryc3RhcnQrPW8sdC5pbnNlcnQrPW8+dC53X3NpemUtdC5pbnNlcnQ/dC53X3NpemUtdC5pbnNlcnQ6byksdC5ibG9ja19zdGFydD10LnN0cnN0YXJ0KSx0LmhpZ2hfd2F0ZXI8dC5zdHJzdGFydCYmKHQuaGlnaF93YXRlcj10LnN0cnN0YXJ0KSxzP29lOmUhPT1tdCYmZSE9PWt0JiYwPT09dC5zdHJtLmF2YWlsX2luJiZ0LnN0cnN0YXJ0PT09dC5ibG9ja19zdGFydD9hZTooaT10LndpbmRvd19zaXplLXQuc3Ryc3RhcnQsdC5zdHJtLmF2YWlsX2luPmkmJnQuYmxvY2tfc3RhcnQ+PXQud19zaXplJiYodC5ibG9ja19zdGFydC09dC53X3NpemUsdC5zdHJzdGFydC09dC53X3NpemUsdC53aW5kb3cuc2V0KHQud2luZG93LnN1YmFycmF5KHQud19zaXplLHQud19zaXplK3Quc3Ryc3RhcnQpLDApLHQubWF0Y2hlczwyJiZ0Lm1hdGNoZXMrKyxpKz10Lndfc2l6ZSx0Lmluc2VydD50LnN0cnN0YXJ0JiYodC5pbnNlcnQ9dC5zdHJzdGFydCkpLGk+dC5zdHJtLmF2YWlsX2luJiYoaT10LnN0cm0uYXZhaWxfaW4pLGkmJih3ZSh0LnN0cm0sdC53aW5kb3csdC5zdHJzdGFydCxpKSx0LnN0cnN0YXJ0Kz1pLHQuaW5zZXJ0Kz1pPnQud19zaXplLXQuaW5zZXJ0P3Qud19zaXplLXQuaW5zZXJ0OmkpLHQuaGlnaF93YXRlcjx0LnN0cnN0YXJ0JiYodC5oaWdoX3dhdGVyPXQuc3Ryc3RhcnQpLGk9dC5iaV92YWxpZCs0Mj4+MyxpPXQucGVuZGluZ19idWZfc2l6ZS1pPjY1NTM1PzY1NTM1OnQucGVuZGluZ19idWZfc2l6ZS1pLGE9aT50Lndfc2l6ZT90Lndfc2l6ZTppLG49dC5zdHJzdGFydC10LmJsb2NrX3N0YXJ0LChuPj1hfHwobnx8ZT09PWt0KSYmZSE9PW10JiYwPT09dC5zdHJtLmF2YWlsX2luJiZuPD1pKSYmKHI9bj5pP2k6bixzPWU9PT1rdCYmMD09PXQuc3RybS5hdmFpbF9pbiYmcj09PW4/MTowLGd0KHQsdC5ibG9ja19zdGFydCxyLHMpLHQuYmxvY2tfc3RhcnQrPXIsZmUodC5zdHJtKSkscz9zZTppZSl9LHhlPSh0LGUpPT57bGV0IHIsbjtmb3IoOzspe2lmKHQubG9va2FoZWFkPFd0KXtpZihtZSh0KSx0Lmxvb2thaGVhZDxXdCYmZT09PW10KXJldHVybiBpZTtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9aWYocj0wLHQubG9va2FoZWFkPj1YdCYmKHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3Quc3Ryc3RhcnQrWHQtMV0pLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydCksMCE9PXImJnQuc3Ryc3RhcnQtcjw9dC53X3NpemUtV3QmJih0Lm1hdGNoX2xlbmd0aD12ZSh0LHIpKSx0Lm1hdGNoX2xlbmd0aD49WHQpaWYobj13dCh0LHQuc3Ryc3RhcnQtdC5tYXRjaF9zdGFydCx0Lm1hdGNoX2xlbmd0aC1YdCksdC5sb29rYWhlYWQtPXQubWF0Y2hfbGVuZ3RoLHQubWF0Y2hfbGVuZ3RoPD10Lm1heF9sYXp5X21hdGNoJiZ0Lmxvb2thaGVhZD49WHQpe3QubWF0Y2hfbGVuZ3RoLS07ZG97dC5zdHJzdGFydCsrLHQuaW5zX2g9ZGUodCx0Lmluc19oLHQud2luZG93W3Quc3Ryc3RhcnQrWHQtMV0pLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydH13aGlsZSgwIT0tLXQubWF0Y2hfbGVuZ3RoKTt0LnN0cnN0YXJ0Kyt9ZWxzZSB0LnN0cnN0YXJ0Kz10Lm1hdGNoX2xlbmd0aCx0Lm1hdGNoX2xlbmd0aD0wLHQuaW5zX2g9dC53aW5kb3dbdC5zdHJzdGFydF0sdC5pbnNfaD1kZSh0LHQuaW5zX2gsdC53aW5kb3dbdC5zdHJzdGFydCsxXSk7ZWxzZSBuPXd0KHQsMCx0LndpbmRvd1t0LnN0cnN0YXJ0XSksdC5sb29rYWhlYWQtLSx0LnN0cnN0YXJ0Kys7aWYobiYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gaWV9cmV0dXJuIHQuaW5zZXJ0PXQuc3Ryc3RhcnQ8WHQtMT90LnN0cnN0YXJ0Olh0LTEsZT09PWt0PyhwZSh0LCEwKSwwPT09dC5zdHJtLmF2YWlsX291dD9zZTpvZSk6dC5zeW1fbmV4dCYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KT9pZTphZX0sa2U9KHQsZSk9PntsZXQgcixuLGk7Zm9yKDs7KXtpZih0Lmxvb2thaGVhZDxXdCl7aWYobWUodCksdC5sb29rYWhlYWQ8V3QmJmU9PT1tdClyZXR1cm4gaWU7aWYoMD09PXQubG9va2FoZWFkKWJyZWFrfWlmKHI9MCx0Lmxvb2thaGVhZD49WHQmJih0Lmluc19oPWRlKHQsdC5pbnNfaCx0LndpbmRvd1t0LnN0cnN0YXJ0K1h0LTFdKSxyPXQucHJldlt0LnN0cnN0YXJ0JnQud19tYXNrXT10LmhlYWRbdC5pbnNfaF0sdC5oZWFkW3QuaW5zX2hdPXQuc3Ryc3RhcnQpLHQucHJldl9sZW5ndGg9dC5tYXRjaF9sZW5ndGgsdC5wcmV2X21hdGNoPXQubWF0Y2hfc3RhcnQsdC5tYXRjaF9sZW5ndGg9WHQtMSwwIT09ciYmdC5wcmV2X2xlbmd0aDx0Lm1heF9sYXp5X21hdGNoJiZ0LnN0cnN0YXJ0LXI8PXQud19zaXplLVd0JiYodC5tYXRjaF9sZW5ndGg9dmUodCxyKSx0Lm1hdGNoX2xlbmd0aDw9NSYmKHQuc3RyYXRlZ3k9PT1SdHx8dC5tYXRjaF9sZW5ndGg9PT1YdCYmdC5zdHJzdGFydC10Lm1hdGNoX3N0YXJ0PjQwOTYpJiYodC5tYXRjaF9sZW5ndGg9WHQtMSkpLHQucHJldl9sZW5ndGg+PVh0JiZ0Lm1hdGNoX2xlbmd0aDw9dC5wcmV2X2xlbmd0aCl7aT10LnN0cnN0YXJ0K3QubG9va2FoZWFkLVh0LG49d3QodCx0LnN0cnN0YXJ0LTEtdC5wcmV2X21hdGNoLHQucHJldl9sZW5ndGgtWHQpLHQubG9va2FoZWFkLT10LnByZXZfbGVuZ3RoLTEsdC5wcmV2X2xlbmd0aC09Mjtkb3srK3Quc3Ryc3RhcnQ8PWkmJih0Lmluc19oPWRlKHQsdC5pbnNfaCx0LndpbmRvd1t0LnN0cnN0YXJ0K1h0LTFdKSxyPXQucHJldlt0LnN0cnN0YXJ0JnQud19tYXNrXT10LmhlYWRbdC5pbnNfaF0sdC5oZWFkW3QuaW5zX2hdPXQuc3Ryc3RhcnQpfXdoaWxlKDAhPS0tdC5wcmV2X2xlbmd0aCk7aWYodC5tYXRjaF9hdmFpbGFibGU9MCx0Lm1hdGNoX2xlbmd0aD1YdC0xLHQuc3Ryc3RhcnQrKyxuJiYocGUodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiBpZX1lbHNlIGlmKHQubWF0Y2hfYXZhaWxhYmxlKXtpZihuPXd0KHQsMCx0LndpbmRvd1t0LnN0cnN0YXJ0LTFdKSxuJiZwZSh0LCExKSx0LnN0cnN0YXJ0KyssdC5sb29rYWhlYWQtLSwwPT09dC5zdHJtLmF2YWlsX291dClyZXR1cm4gaWV9ZWxzZSB0Lm1hdGNoX2F2YWlsYWJsZT0xLHQuc3Ryc3RhcnQrKyx0Lmxvb2thaGVhZC0tfXJldHVybiB0Lm1hdGNoX2F2YWlsYWJsZSYmKG49d3QodCwwLHQud2luZG93W3Quc3Ryc3RhcnQtMV0pLHQubWF0Y2hfYXZhaWxhYmxlPTApLHQuaW5zZXJ0PXQuc3Ryc3RhcnQ8WHQtMT90LnN0cnN0YXJ0Olh0LTEsZT09PWt0PyhwZSh0LCEwKSwwPT09dC5zdHJtLmF2YWlsX291dD9zZTpvZSk6dC5zeW1fbmV4dCYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KT9pZTphZX0semU9KHQsZSk9PntsZXQgcixuLGksYTtjb25zdCBzPXQud2luZG93O2Zvcig7Oyl7aWYodC5sb29rYWhlYWQ8PUd0KXtpZihtZSh0KSx0Lmxvb2thaGVhZDw9R3QmJmU9PT1tdClyZXR1cm4gaWU7aWYoMD09PXQubG9va2FoZWFkKWJyZWFrfWlmKHQubWF0Y2hfbGVuZ3RoPTAsdC5sb29rYWhlYWQ+PVh0JiZ0LnN0cnN0YXJ0PjAmJihpPXQuc3Ryc3RhcnQtMSxuPXNbaV0sbj09PXNbKytpXSYmbj09PXNbKytpXSYmbj09PXNbKytpXSkpe2E9dC5zdHJzdGFydCtHdDtkb3t9d2hpbGUobj09PXNbKytpXSYmbj09PXNbKytpXSYmbj09PXNbKytpXSYmbj09PXNbKytpXSYmbj09PXNbKytpXSYmbj09PXNbKytpXSYmbj09PXNbKytpXSYmbj09PXNbKytpXSYmaTxhKTt0Lm1hdGNoX2xlbmd0aD1HdC0oYS1pKSx0Lm1hdGNoX2xlbmd0aD50Lmxvb2thaGVhZCYmKHQubWF0Y2hfbGVuZ3RoPXQubG9va2FoZWFkKX1pZih0Lm1hdGNoX2xlbmd0aD49WHQ/KHI9d3QodCwxLHQubWF0Y2hfbGVuZ3RoLVh0KSx0Lmxvb2thaGVhZC09dC5tYXRjaF9sZW5ndGgsdC5zdHJzdGFydCs9dC5tYXRjaF9sZW5ndGgsdC5tYXRjaF9sZW5ndGg9MCk6KHI9d3QodCwwLHQud2luZG93W3Quc3Ryc3RhcnRdKSx0Lmxvb2thaGVhZC0tLHQuc3Ryc3RhcnQrKyksciYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gaWV9cmV0dXJuIHQuaW5zZXJ0PTAsZT09PWt0PyhwZSh0LCEwKSwwPT09dC5zdHJtLmF2YWlsX291dD9zZTpvZSk6dC5zeW1fbmV4dCYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KT9pZTphZX0sQWU9KHQsZSk9PntsZXQgcjtmb3IoOzspe2lmKDA9PT10Lmxvb2thaGVhZCYmKG1lKHQpLDA9PT10Lmxvb2thaGVhZCkpe2lmKGU9PT1tdClyZXR1cm4gaWU7YnJlYWt9aWYodC5tYXRjaF9sZW5ndGg9MCxyPXd0KHQsMCx0LndpbmRvd1t0LnN0cnN0YXJ0XSksdC5sb29rYWhlYWQtLSx0LnN0cnN0YXJ0KyssciYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gaWV9cmV0dXJuIHQuaW5zZXJ0PTAsZT09PWt0PyhwZSh0LCEwKSwwPT09dC5zdHJtLmF2YWlsX291dD9zZTpvZSk6dC5zeW1fbmV4dCYmKHBlKHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KT9pZTphZX07ZnVuY3Rpb24gRWUodCxlLHIsbixpKXt0aGlzLmdvb2RfbGVuZ3RoPXQsdGhpcy5tYXhfbGF6eT1lLHRoaXMubmljZV9sZW5ndGg9cix0aGlzLm1heF9jaGFpbj1uLHRoaXMuZnVuYz1pfWNvbnN0IFNlPVtuZXcgRWUoMCwwLDAsMCxiZSksbmV3IEVlKDQsNCw4LDQseGUpLG5ldyBFZSg0LDUsMTYsOCx4ZSksbmV3IEVlKDQsNiwzMiwzMix4ZSksbmV3IEVlKDQsNCwxNiwxNixrZSksbmV3IEVlKDgsMTYsMzIsMzIsa2UpLG5ldyBFZSg4LDE2LDEyOCwxMjgsa2UpLG5ldyBFZSg4LDMyLDEyOCwyNTYsa2UpLG5ldyBFZSgzMiwxMjgsMjU4LDEwMjQsa2UpLG5ldyBFZSgzMiwyNTgsMjU4LDQwOTYsa2UpXSxCZT10PT57dC53aW5kb3dfc2l6ZT0yKnQud19zaXplLHVlKHQuaGVhZCksdC5tYXhfbGF6eV9tYXRjaD1TZVt0LmxldmVsXS5tYXhfbGF6eSx0Lmdvb2RfbWF0Y2g9U2VbdC5sZXZlbF0uZ29vZF9sZW5ndGgsdC5uaWNlX21hdGNoPVNlW3QubGV2ZWxdLm5pY2VfbGVuZ3RoLHQubWF4X2NoYWluX2xlbmd0aD1TZVt0LmxldmVsXS5tYXhfY2hhaW4sdC5zdHJzdGFydD0wLHQuYmxvY2tfc3RhcnQ9MCx0Lmxvb2thaGVhZD0wLHQuaW5zZXJ0PTAsdC5tYXRjaF9sZW5ndGg9dC5wcmV2X2xlbmd0aD1YdC0xLHQubWF0Y2hfYXZhaWxhYmxlPTAsdC5pbnNfaD0wfTtmdW5jdGlvbiBPZSgpe3RoaXMuc3RybT1udWxsLHRoaXMuc3RhdHVzPTAsdGhpcy5wZW5kaW5nX2J1Zj1udWxsLHRoaXMucGVuZGluZ19idWZfc2l6ZT0wLHRoaXMucGVuZGluZ19vdXQ9MCx0aGlzLnBlbmRpbmc9MCx0aGlzLndyYXA9MCx0aGlzLmd6aGVhZD1udWxsLHRoaXMuZ3ppbmRleD0wLHRoaXMubWV0aG9kPUh0LHRoaXMubGFzdF9mbHVzaD0tMSx0aGlzLndfc2l6ZT0wLHRoaXMud19iaXRzPTAsdGhpcy53X21hc2s9MCx0aGlzLndpbmRvdz1udWxsLHRoaXMud2luZG93X3NpemU9MCx0aGlzLnByZXY9bnVsbCx0aGlzLmhlYWQ9bnVsbCx0aGlzLmluc19oPTAsdGhpcy5oYXNoX3NpemU9MCx0aGlzLmhhc2hfYml0cz0wLHRoaXMuaGFzaF9tYXNrPTAsdGhpcy5oYXNoX3NoaWZ0PTAsdGhpcy5ibG9ja19zdGFydD0wLHRoaXMubWF0Y2hfbGVuZ3RoPTAsdGhpcy5wcmV2X21hdGNoPTAsdGhpcy5tYXRjaF9hdmFpbGFibGU9MCx0aGlzLnN0cnN0YXJ0PTAsdGhpcy5tYXRjaF9zdGFydD0wLHRoaXMubG9va2FoZWFkPTAsdGhpcy5wcmV2X2xlbmd0aD0wLHRoaXMubWF4X2NoYWluX2xlbmd0aD0wLHRoaXMubWF4X2xhenlfbWF0Y2g9MCx0aGlzLmxldmVsPTAsdGhpcy5zdHJhdGVneT0wLHRoaXMuZ29vZF9tYXRjaD0wLHRoaXMubmljZV9tYXRjaD0wLHRoaXMuZHluX2x0cmVlPW5ldyBVaW50MTZBcnJheSgyKiR0KSx0aGlzLmR5bl9kdHJlZT1uZXcgVWludDE2QXJyYXkoMiooMipqdCsxKSksdGhpcy5ibF90cmVlPW5ldyBVaW50MTZBcnJheSgyKigyKlB0KzEpKSx1ZSh0aGlzLmR5bl9sdHJlZSksdWUodGhpcy5keW5fZHRyZWUpLHVlKHRoaXMuYmxfdHJlZSksdGhpcy5sX2Rlc2M9bnVsbCx0aGlzLmRfZGVzYz1udWxsLHRoaXMuYmxfZGVzYz1udWxsLHRoaXMuYmxfY291bnQ9bmV3IFVpbnQxNkFycmF5KEt0KzEpLHRoaXMuaGVhcD1uZXcgVWludDE2QXJyYXkoMipJdCsxKSx1ZSh0aGlzLmhlYXApLHRoaXMuaGVhcF9sZW49MCx0aGlzLmhlYXBfbWF4PTAsdGhpcy5kZXB0aD1uZXcgVWludDE2QXJyYXkoMipJdCsxKSx1ZSh0aGlzLmRlcHRoKSx0aGlzLnN5bV9idWY9MCx0aGlzLmxpdF9idWZzaXplPTAsdGhpcy5zeW1fbmV4dD0wLHRoaXMuc3ltX2VuZD0wLHRoaXMub3B0X2xlbj0wLHRoaXMuc3RhdGljX2xlbj0wLHRoaXMubWF0Y2hlcz0wLHRoaXMuaW5zZXJ0PTAsdGhpcy5iaV9idWY9MCx0aGlzLmJpX3ZhbGlkPTB9Y29uc3QgTGU9dD0+e2lmKCF0KXJldHVybiAxO2NvbnN0IGU9dC5zdGF0ZTtyZXR1cm4hZXx8ZS5zdHJtIT09dHx8ZS5zdGF0dXMhPT1xdCYmZS5zdGF0dXMhPT1WdCYmZS5zdGF0dXMhPT1RdCYmZS5zdGF0dXMhPT1KdCYmZS5zdGF0dXMhPT10ZSYmZS5zdGF0dXMhPT1lZSYmZS5zdGF0dXMhPT1yZSYmZS5zdGF0dXMhPT1uZT8xOjB9LFJlPXQ9PntpZihMZSh0KSlyZXR1cm4gaGUodCxTdCk7dC50b3RhbF9pbj10LnRvdGFsX291dD0wLHQuZGF0YV90eXBlPUZ0O2NvbnN0IGU9dC5zdGF0ZTtyZXR1cm4gZS5wZW5kaW5nPTAsZS5wZW5kaW5nX291dD0wLGUud3JhcDwwJiYoZS53cmFwPS1lLndyYXApLGUuc3RhdHVzPTI9PT1lLndyYXA/VnQ6ZS53cmFwP3F0OnJlLHQuYWRsZXI9Mj09PWUud3JhcD8wOjEsZS5sYXN0X2ZsdXNoPS0yLHB0KGUpLEF0fSxEZT10PT57Y29uc3QgZT1SZSh0KTtyZXR1cm4gZT09PUF0JiZCZSh0LnN0YXRlKSxlfSxVZT0odCxlLHIsbixpLGEpPT57aWYoIXQpcmV0dXJuIFN0O2xldCBzPTE7aWYoZT09PUx0JiYoZT02KSxuPDA/KHM9MCxuPS1uKTpuPjE1JiYocz0yLG4tPTE2KSxpPDF8fGk+WnR8fHIhPT1IdHx8bjw4fHxuPjE1fHxlPDB8fGU+OXx8YTwwfHxhPkN0fHw4PT09biYmMSE9PXMpcmV0dXJuIGhlKHQsU3QpOzg9PT1uJiYobj05KTtjb25zdCBvPW5ldyBPZTtyZXR1cm4gdC5zdGF0ZT1vLG8uc3RybT10LG8uc3RhdHVzPXF0LG8ud3JhcD1zLG8uZ3poZWFkPW51bGwsby53X2JpdHM9bixvLndfc2l6ZT0xPDxvLndfYml0cyxvLndfbWFzaz1vLndfc2l6ZS0xLG8uaGFzaF9iaXRzPWkrNyxvLmhhc2hfc2l6ZT0xPDxvLmhhc2hfYml0cyxvLmhhc2hfbWFzaz1vLmhhc2hfc2l6ZS0xLG8uaGFzaF9zaGlmdD1+figoby5oYXNoX2JpdHMrWHQtMSkvWHQpLG8ud2luZG93PW5ldyBVaW50OEFycmF5KDIqby53X3NpemUpLG8uaGVhZD1uZXcgVWludDE2QXJyYXkoby5oYXNoX3NpemUpLG8ucHJldj1uZXcgVWludDE2QXJyYXkoby53X3NpemUpLG8ubGl0X2J1ZnNpemU9MTw8aSs2LG8ucGVuZGluZ19idWZfc2l6ZT00Km8ubGl0X2J1ZnNpemUsby5wZW5kaW5nX2J1Zj1uZXcgVWludDhBcnJheShvLnBlbmRpbmdfYnVmX3NpemUpLG8uc3ltX2J1Zj1vLmxpdF9idWZzaXplLG8uc3ltX2VuZD0zKihvLmxpdF9idWZzaXplLTEpLG8ubGV2ZWw9ZSxvLnN0cmF0ZWd5PWEsby5tZXRob2Q9cixEZSh0KX07dmFyIENlPXtkZWZsYXRlSW5pdDoodCxlKT0+VWUodCxlLEh0LE10LE50LFR0KSxkZWZsYXRlSW5pdDI6VWUsZGVmbGF0ZVJlc2V0OkRlLGRlZmxhdGVSZXNldEtlZXA6UmUsZGVmbGF0ZVNldEhlYWRlcjoodCxlKT0+TGUodCl8fDIhPT10LnN0YXRlLndyYXA/U3Q6KHQuc3RhdGUuZ3poZWFkPWUsQXQpLGRlZmxhdGU6KHQsZSk9PntpZihMZSh0KXx8ZT56dHx8ZTwwKXJldHVybiB0P2hlKHQsU3QpOlN0O2NvbnN0IHI9dC5zdGF0ZTtpZighdC5vdXRwdXR8fDAhPT10LmF2YWlsX2luJiYhdC5pbnB1dHx8ci5zdGF0dXM9PT1uZSYmZSE9PWt0KXJldHVybiBoZSh0LDA9PT10LmF2YWlsX291dD9PdDpTdCk7Y29uc3Qgbj1yLmxhc3RfZmx1c2g7aWYoci5sYXN0X2ZsdXNoPWUsMCE9PXIucGVuZGluZyl7aWYoZmUodCksMD09PXQuYXZhaWxfb3V0KXJldHVybiByLmxhc3RfZmx1c2g9LTEsQXR9ZWxzZSBpZigwPT09dC5hdmFpbF9pbiYmY2UoZSk8PWNlKG4pJiZlIT09a3QpcmV0dXJuIGhlKHQsT3QpO2lmKHIuc3RhdHVzPT09bmUmJjAhPT10LmF2YWlsX2luKXJldHVybiBoZSh0LE90KTtpZihyLnN0YXR1cz09PXF0JiYwPT09ci53cmFwJiYoci5zdGF0dXM9cmUpLHIuc3RhdHVzPT09cXQpe2xldCBlPUh0KyhyLndfYml0cy04PDw0KTw8OCxuPS0xO2lmKG49ci5zdHJhdGVneT49RHR8fHIubGV2ZWw8Mj8wOnIubGV2ZWw8Nj8xOjY9PT1yLmxldmVsPzI6MyxlfD1uPDw2LDAhPT1yLnN0cnN0YXJ0JiYoZXw9WXQpLGUrPTMxLWUlMzEseWUocixlKSwwIT09ci5zdHJzdGFydCYmKHllKHIsdC5hZGxlcj4+PjE2KSx5ZShyLDY1NTM1JnQuYWRsZXIpKSx0LmFkbGVyPTEsci5zdGF0dXM9cmUsZmUodCksMCE9PXIucGVuZGluZylyZXR1cm4gci5sYXN0X2ZsdXNoPS0xLEF0fWlmKHIuc3RhdHVzPT09VnQpaWYodC5hZGxlcj0wLGdlKHIsMzEpLGdlKHIsMTM5KSxnZShyLDgpLHIuZ3poZWFkKWdlKHIsKHIuZ3poZWFkLnRleHQ/MTowKSsoci5nemhlYWQuaGNyYz8yOjApKyhyLmd6aGVhZC5leHRyYT80OjApKyhyLmd6aGVhZC5uYW1lPzg6MCkrKHIuZ3poZWFkLmNvbW1lbnQ/MTY6MCkpLGdlKHIsMjU1JnIuZ3poZWFkLnRpbWUpLGdlKHIsci5nemhlYWQudGltZT4+OCYyNTUpLGdlKHIsci5nemhlYWQudGltZT4+MTYmMjU1KSxnZShyLHIuZ3poZWFkLnRpbWU+PjI0JjI1NSksZ2Uociw5PT09ci5sZXZlbD8yOnIuc3RyYXRlZ3k+PUR0fHxyLmxldmVsPDI/NDowKSxnZShyLDI1NSZyLmd6aGVhZC5vcyksci5nemhlYWQuZXh0cmEmJnIuZ3poZWFkLmV4dHJhLmxlbmd0aCYmKGdlKHIsMjU1JnIuZ3poZWFkLmV4dHJhLmxlbmd0aCksZ2UocixyLmd6aGVhZC5leHRyYS5sZW5ndGg+PjgmMjU1KSksci5nemhlYWQuaGNyYyYmKHQuYWRsZXI9X3QodC5hZGxlcixyLnBlbmRpbmdfYnVmLHIucGVuZGluZywwKSksci5nemluZGV4PTAsci5zdGF0dXM9UXQ7ZWxzZSBpZihnZShyLDApLGdlKHIsMCksZ2UociwwKSxnZShyLDApLGdlKHIsMCksZ2Uociw5PT09ci5sZXZlbD8yOnIuc3RyYXRlZ3k+PUR0fHxyLmxldmVsPDI/NDowKSxnZShyLGxlKSxyLnN0YXR1cz1yZSxmZSh0KSwwIT09ci5wZW5kaW5nKXJldHVybiByLmxhc3RfZmx1c2g9LTEsQXQ7aWYoci5zdGF0dXM9PT1RdCl7aWYoci5nemhlYWQuZXh0cmEpe2xldCBlPXIucGVuZGluZyxuPSg2NTUzNSZyLmd6aGVhZC5leHRyYS5sZW5ndGgpLXIuZ3ppbmRleDtmb3IoO3IucGVuZGluZytuPnIucGVuZGluZ19idWZfc2l6ZTspe2xldCBpPXIucGVuZGluZ19idWZfc2l6ZS1yLnBlbmRpbmc7aWYoci5wZW5kaW5nX2J1Zi5zZXQoci5nemhlYWQuZXh0cmEuc3ViYXJyYXkoci5nemluZGV4LHIuZ3ppbmRleCtpKSxyLnBlbmRpbmcpLHIucGVuZGluZz1yLnBlbmRpbmdfYnVmX3NpemUsci5nemhlYWQuaGNyYyYmci5wZW5kaW5nPmUmJih0LmFkbGVyPV90KHQuYWRsZXIsci5wZW5kaW5nX2J1ZixyLnBlbmRpbmctZSxlKSksci5nemluZGV4Kz1pLGZlKHQpLDAhPT1yLnBlbmRpbmcpcmV0dXJuIHIubGFzdF9mbHVzaD0tMSxBdDtlPTAsbi09aX1sZXQgaT1uZXcgVWludDhBcnJheShyLmd6aGVhZC5leHRyYSk7ci5wZW5kaW5nX2J1Zi5zZXQoaS5zdWJhcnJheShyLmd6aW5kZXgsci5nemluZGV4K24pLHIucGVuZGluZyksci5wZW5kaW5nKz1uLHIuZ3poZWFkLmhjcmMmJnIucGVuZGluZz5lJiYodC5hZGxlcj1fdCh0LmFkbGVyLHIucGVuZGluZ19idWYsci5wZW5kaW5nLWUsZSkpLHIuZ3ppbmRleD0wfXIuc3RhdHVzPUp0fWlmKHIuc3RhdHVzPT09SnQpe2lmKHIuZ3poZWFkLm5hbWUpe2xldCBlLG49ci5wZW5kaW5nO2Rve2lmKHIucGVuZGluZz09PXIucGVuZGluZ19idWZfc2l6ZSl7aWYoci5nemhlYWQuaGNyYyYmci5wZW5kaW5nPm4mJih0LmFkbGVyPV90KHQuYWRsZXIsci5wZW5kaW5nX2J1ZixyLnBlbmRpbmctbixuKSksZmUodCksMCE9PXIucGVuZGluZylyZXR1cm4gci5sYXN0X2ZsdXNoPS0xLEF0O249MH1lPXIuZ3ppbmRleDxyLmd6aGVhZC5uYW1lLmxlbmd0aD8yNTUmci5nemhlYWQubmFtZS5jaGFyQ29kZUF0KHIuZ3ppbmRleCsrKTowLGdlKHIsZSl9d2hpbGUoMCE9PWUpO3IuZ3poZWFkLmhjcmMmJnIucGVuZGluZz5uJiYodC5hZGxlcj1fdCh0LmFkbGVyLHIucGVuZGluZ19idWYsci5wZW5kaW5nLW4sbikpLHIuZ3ppbmRleD0wfXIuc3RhdHVzPXRlfWlmKHIuc3RhdHVzPT09dGUpe2lmKHIuZ3poZWFkLmNvbW1lbnQpe2xldCBlLG49ci5wZW5kaW5nO2Rve2lmKHIucGVuZGluZz09PXIucGVuZGluZ19idWZfc2l6ZSl7aWYoci5nemhlYWQuaGNyYyYmci5wZW5kaW5nPm4mJih0LmFkbGVyPV90KHQuYWRsZXIsci5wZW5kaW5nX2J1ZixyLnBlbmRpbmctbixuKSksZmUodCksMCE9PXIucGVuZGluZylyZXR1cm4gci5sYXN0X2ZsdXNoPS0xLEF0O249MH1lPXIuZ3ppbmRleDxyLmd6aGVhZC5jb21tZW50Lmxlbmd0aD8yNTUmci5nemhlYWQuY29tbWVudC5jaGFyQ29kZUF0KHIuZ3ppbmRleCsrKTowLGdlKHIsZSl9d2hpbGUoMCE9PWUpO3IuZ3poZWFkLmhjcmMmJnIucGVuZGluZz5uJiYodC5hZGxlcj1fdCh0LmFkbGVyLHIucGVuZGluZ19idWYsci5wZW5kaW5nLW4sbikpfXIuc3RhdHVzPWVlfWlmKHIuc3RhdHVzPT09ZWUpe2lmKHIuZ3poZWFkLmhjcmMpe2lmKHIucGVuZGluZysyPnIucGVuZGluZ19idWZfc2l6ZSYmKGZlKHQpLDAhPT1yLnBlbmRpbmcpKXJldHVybiByLmxhc3RfZmx1c2g9LTEsQXQ7Z2UociwyNTUmdC5hZGxlciksZ2Uocix0LmFkbGVyPj44JjI1NSksdC5hZGxlcj0wfWlmKHIuc3RhdHVzPXJlLGZlKHQpLDAhPT1yLnBlbmRpbmcpcmV0dXJuIHIubGFzdF9mbHVzaD0tMSxBdH1pZigwIT09dC5hdmFpbF9pbnx8MCE9PXIubG9va2FoZWFkfHxlIT09bXQmJnIuc3RhdHVzIT09bmUpe2xldCBuPTA9PT1yLmxldmVsP2JlKHIsZSk6ci5zdHJhdGVneT09PUR0P0FlKHIsZSk6ci5zdHJhdGVneT09PVV0P3plKHIsZSk6U2Vbci5sZXZlbF0uZnVuYyhyLGUpO2lmKG4hPT1zZSYmbiE9PW9lfHwoci5zdGF0dXM9bmUpLG49PT1pZXx8bj09PXNlKXJldHVybiAwPT09dC5hdmFpbF9vdXQmJihyLmxhc3RfZmx1c2g9LTEpLEF0O2lmKG49PT1hZSYmKGU9PT1idD92dChyKTplIT09enQmJihndChyLDAsMCwhMSksZT09PXh0JiYodWUoci5oZWFkKSwwPT09ci5sb29rYWhlYWQmJihyLnN0cnN0YXJ0PTAsci5ibG9ja19zdGFydD0wLHIuaW5zZXJ0PTApKSksZmUodCksMD09PXQuYXZhaWxfb3V0KSlyZXR1cm4gci5sYXN0X2ZsdXNoPS0xLEF0fXJldHVybiBlIT09a3Q/QXQ6ci53cmFwPD0wP0V0OigyPT09ci53cmFwPyhnZShyLDI1NSZ0LmFkbGVyKSxnZShyLHQuYWRsZXI+PjgmMjU1KSxnZShyLHQuYWRsZXI+PjE2JjI1NSksZ2Uocix0LmFkbGVyPj4yNCYyNTUpLGdlKHIsMjU1JnQudG90YWxfaW4pLGdlKHIsdC50b3RhbF9pbj4+OCYyNTUpLGdlKHIsdC50b3RhbF9pbj4+MTYmMjU1KSxnZShyLHQudG90YWxfaW4+PjI0JjI1NSkpOih5ZShyLHQuYWRsZXI+Pj4xNikseWUociw2NTUzNSZ0LmFkbGVyKSksZmUodCksci53cmFwPjAmJihyLndyYXA9LXIud3JhcCksMCE9PXIucGVuZGluZz9BdDpFdCl9LGRlZmxhdGVFbmQ6dD0+e2lmKExlKHQpKXJldHVybiBTdDtjb25zdCBlPXQuc3RhdGUuc3RhdHVzO3JldHVybiB0LnN0YXRlPW51bGwsZT09PXJlP2hlKHQsQnQpOkF0fSxkZWZsYXRlU2V0RGljdGlvbmFyeToodCxlKT0+e2xldCByPWUubGVuZ3RoO2lmKExlKHQpKXJldHVybiBTdDtjb25zdCBuPXQuc3RhdGUsaT1uLndyYXA7aWYoMj09PWl8fDE9PT1pJiZuLnN0YXR1cyE9PXF0fHxuLmxvb2thaGVhZClyZXR1cm4gU3Q7aWYoMT09PWkmJih0LmFkbGVyPWN0KHQuYWRsZXIsZSxyLDApKSxuLndyYXA9MCxyPj1uLndfc2l6ZSl7MD09PWkmJih1ZShuLmhlYWQpLG4uc3Ryc3RhcnQ9MCxuLmJsb2NrX3N0YXJ0PTAsbi5pbnNlcnQ9MCk7bGV0IHQ9bmV3IFVpbnQ4QXJyYXkobi53X3NpemUpO3Quc2V0KGUuc3ViYXJyYXkoci1uLndfc2l6ZSxyKSwwKSxlPXQscj1uLndfc2l6ZX1jb25zdCBhPXQuYXZhaWxfaW4scz10Lm5leHRfaW4sbz10LmlucHV0O2Zvcih0LmF2YWlsX2luPXIsdC5uZXh0X2luPTAsdC5pbnB1dD1lLG1lKG4pO24ubG9va2FoZWFkPj1YdDspe2xldCB0PW4uc3Ryc3RhcnQsZT1uLmxvb2thaGVhZC0oWHQtMSk7ZG97bi5pbnNfaD1kZShuLG4uaW5zX2gsbi53aW5kb3dbdCtYdC0xXSksbi5wcmV2W3Qmbi53X21hc2tdPW4uaGVhZFtuLmluc19oXSxuLmhlYWRbbi5pbnNfaF09dCx0Kyt9d2hpbGUoLS1lKTtuLnN0cnN0YXJ0PXQsbi5sb29rYWhlYWQ9WHQtMSxtZShuKX1yZXR1cm4gbi5zdHJzdGFydCs9bi5sb29rYWhlYWQsbi5ibG9ja19zdGFydD1uLnN0cnN0YXJ0LG4uaW5zZXJ0PW4ubG9va2FoZWFkLG4ubG9va2FoZWFkPTAsbi5tYXRjaF9sZW5ndGg9bi5wcmV2X2xlbmd0aD1YdC0xLG4ubWF0Y2hfYXZhaWxhYmxlPTAsdC5uZXh0X2luPXMsdC5pbnB1dD1vLHQuYXZhaWxfaW49YSxuLndyYXA9aSxBdH0sZGVmbGF0ZUluZm86InBha28gZGVmbGF0ZSAoZnJvbSBOb2RlY2EgcHJvamVjdCkifTtjb25zdCBUZT0odCxlKT0+T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSk7dmFyIEZlPWZ1bmN0aW9uKHQpe2NvbnN0IGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO2Zvcig7ZS5sZW5ndGg7KXtjb25zdCByPWUuc2hpZnQoKTtpZihyKXtpZigib2JqZWN0IiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcihyKyJtdXN0IGJlIG5vbi1vYmplY3QiKTtmb3IoY29uc3QgZSBpbiByKVRlKHIsZSkmJih0W2VdPXJbZV0pfX1yZXR1cm4gdH0sSGU9e2Fzc2lnbjpGZSxmbGF0dGVuQ2h1bmtzOnQ9PntsZXQgZT0wO2ZvcihsZXQgcj0wLG49dC5sZW5ndGg7cjxuO3IrKyllKz10W3JdLmxlbmd0aDtjb25zdCByPW5ldyBVaW50OEFycmF5KGUpO2ZvcihsZXQgZT0wLG49MCxpPXQubGVuZ3RoO2U8aTtlKyspe2xldCBpPXRbZV07ci5zZXQoaSxuKSxuKz1pLmxlbmd0aH1yZXR1cm4gcn19O2xldCBaZT0hMDt0cnl7U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLG5ldyBVaW50OEFycmF5KDEpKX1jYXRjaCh0KXtaZT0hMX1jb25zdCBNZT1uZXcgVWludDhBcnJheSgyNTYpO2ZvcihsZXQgdD0wO3Q8MjU2O3QrKylNZVt0XT10Pj0yNTI/Njp0Pj0yNDg/NTp0Pj0yNDA/NDp0Pj0yMjQ/Mzp0Pj0xOTI/MjoxO01lWzI1NF09TWVbMjU0XT0xO2NvbnN0IE5lPSh0LGUpPT57aWYoZTw2NTUzNCYmdC5zdWJhcnJheSYmWmUpcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCx0Lmxlbmd0aD09PWU/dDp0LnN1YmFycmF5KDAsZSkpO2xldCByPSIiO2ZvcihsZXQgbj0wO248ZTtuKyspcis9U3RyaW5nLmZyb21DaGFyQ29kZSh0W25dKTtyZXR1cm4gcn07dmFyIEllPXtzdHJpbmcyYnVmOnQ9PntpZigiZnVuY3Rpb24iPT10eXBlb2YgVGV4dEVuY29kZXImJlRleHRFbmNvZGVyLnByb3RvdHlwZS5lbmNvZGUpcmV0dXJuKG5ldyBUZXh0RW5jb2RlcikuZW5jb2RlKHQpO2xldCBlLHIsbixpLGEscz10Lmxlbmd0aCxvPTA7Zm9yKGk9MDtpPHM7aSsrKXI9dC5jaGFyQ29kZUF0KGkpLDU1Mjk2PT0oNjQ1MTImcikmJmkrMTxzJiYobj10LmNoYXJDb2RlQXQoaSsxKSw1NjMyMD09KDY0NTEyJm4pJiYocj02NTUzNisoci01NTI5Njw8MTApKyhuLTU2MzIwKSxpKyspKSxvKz1yPDEyOD8xOnI8MjA0OD8yOnI8NjU1MzY/Mzo0O2ZvcihlPW5ldyBVaW50OEFycmF5KG8pLGE9MCxpPTA7YTxvO2krKylyPXQuY2hhckNvZGVBdChpKSw1NTI5Nj09KDY0NTEyJnIpJiZpKzE8cyYmKG49dC5jaGFyQ29kZUF0KGkrMSksNTYzMjA9PSg2NDUxMiZuKSYmKHI9NjU1MzYrKHItNTUyOTY8PDEwKSsobi01NjMyMCksaSsrKSkscjwxMjg/ZVthKytdPXI6cjwyMDQ4PyhlW2ErK109MTkyfHI+Pj42LGVbYSsrXT0xMjh8NjMmcik6cjw2NTUzNj8oZVthKytdPTIyNHxyPj4+MTIsZVthKytdPTEyOHxyPj4+NiY2MyxlW2ErK109MTI4fDYzJnIpOihlW2ErK109MjQwfHI+Pj4xOCxlW2ErK109MTI4fHI+Pj4xMiY2MyxlW2ErK109MTI4fHI+Pj42JjYzLGVbYSsrXT0xMjh8NjMmcik7cmV0dXJuIGV9LGJ1ZjJzdHJpbmc6KHQsZSk9Pntjb25zdCByPWV8fHQubGVuZ3RoO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBUZXh0RGVjb2RlciYmVGV4dERlY29kZXIucHJvdG90eXBlLmRlY29kZSlyZXR1cm4obmV3IFRleHREZWNvZGVyKS5kZWNvZGUodC5zdWJhcnJheSgwLGUpKTtsZXQgbixpO2NvbnN0IGE9bmV3IEFycmF5KDIqcik7Zm9yKGk9MCxuPTA7bjxyOyl7bGV0IGU9dFtuKytdO2lmKGU8MTI4KXthW2krK109ZTtjb250aW51ZX1sZXQgcz1NZVtlXTtpZihzPjQpYVtpKytdPTY1NTMzLG4rPXMtMTtlbHNle2ZvcihlJj0yPT09cz8zMTozPT09cz8xNTo3O3M+MSYmbjxyOyllPWU8PDZ8NjMmdFtuKytdLHMtLTtzPjE/YVtpKytdPTY1NTMzOmU8NjU1MzY/YVtpKytdPWU6KGUtPTY1NTM2LGFbaSsrXT01NTI5NnxlPj4xMCYxMDIzLGFbaSsrXT01NjMyMHwxMDIzJmUpfX1yZXR1cm4gTmUoYSxpKX0sdXRmOGJvcmRlcjoodCxlKT0+eyhlPWV8fHQubGVuZ3RoKT50Lmxlbmd0aCYmKGU9dC5sZW5ndGgpO2xldCByPWUtMTtmb3IoO3I+PTAmJjEyOD09KDE5MiZ0W3JdKTspci0tO3JldHVybiByPDB8fDA9PT1yP2U6citNZVt0W3JdXT5lP3I6ZX19O2Z1bmN0aW9uIGplKCl7dGhpcy5pbnB1dD1udWxsLHRoaXMubmV4dF9pbj0wLHRoaXMuYXZhaWxfaW49MCx0aGlzLnRvdGFsX2luPTAsdGhpcy5vdXRwdXQ9bnVsbCx0aGlzLm5leHRfb3V0PTAsdGhpcy5hdmFpbF9vdXQ9MCx0aGlzLnRvdGFsX291dD0wLHRoaXMubXNnPSIiLHRoaXMuc3RhdGU9bnVsbCx0aGlzLmRhdGFfdHlwZT0yLHRoaXMuYWRsZXI9MH12YXIgUGU9amU7Y29uc3QgJGU9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyx7Wl9OT19GTFVTSDpLZSxaX1NZTkNfRkxVU0g6WGUsWl9GVUxMX0ZMVVNIOkdlLFpfRklOSVNIOldlLFpfT0s6WWUsWl9TVFJFQU1fRU5EOnFlLFpfREVGQVVMVF9DT01QUkVTU0lPTjpWZSxaX0RFRkFVTFRfU1RSQVRFR1k6UWUsWl9ERUZMQVRFRDpKZX09ZnQ7ZnVuY3Rpb24gdHIodCl7dGhpcy5vcHRpb25zPUhlLmFzc2lnbih7bGV2ZWw6VmUsbWV0aG9kOkplLGNodW5rU2l6ZToxNjM4NCx3aW5kb3dCaXRzOjE1LG1lbUxldmVsOjgsc3RyYXRlZ3k6UWV9LHR8fHt9KTtsZXQgZT10aGlzLm9wdGlvbnM7ZS5yYXcmJmUud2luZG93Qml0cz4wP2Uud2luZG93Qml0cz0tZS53aW5kb3dCaXRzOmUuZ3ppcCYmZS53aW5kb3dCaXRzPjAmJmUud2luZG93Qml0czwxNiYmKGUud2luZG93Qml0cys9MTYpLHRoaXMuZXJyPTAsdGhpcy5tc2c9IiIsdGhpcy5lbmRlZD0hMSx0aGlzLmNodW5rcz1bXSx0aGlzLnN0cm09bmV3IFBlLHRoaXMuc3RybS5hdmFpbF9vdXQ9MDtsZXQgcj1DZS5kZWZsYXRlSW5pdDIodGhpcy5zdHJtLGUubGV2ZWwsZS5tZXRob2QsZS53aW5kb3dCaXRzLGUubWVtTGV2ZWwsZS5zdHJhdGVneSk7aWYociE9PVllKXRocm93IG5ldyBFcnJvcihkdFtyXSk7aWYoZS5oZWFkZXImJkNlLmRlZmxhdGVTZXRIZWFkZXIodGhpcy5zdHJtLGUuaGVhZGVyKSxlLmRpY3Rpb25hcnkpe2xldCB0O2lmKHQ9InN0cmluZyI9PXR5cGVvZiBlLmRpY3Rpb25hcnk/SWUuc3RyaW5nMmJ1ZihlLmRpY3Rpb25hcnkpOiJbb2JqZWN0IEFycmF5QnVmZmVyXSI9PT0kZS5jYWxsKGUuZGljdGlvbmFyeSk/bmV3IFVpbnQ4QXJyYXkoZS5kaWN0aW9uYXJ5KTplLmRpY3Rpb25hcnkscj1DZS5kZWZsYXRlU2V0RGljdGlvbmFyeSh0aGlzLnN0cm0sdCksciE9PVllKXRocm93IG5ldyBFcnJvcihkdFtyXSk7dGhpcy5fZGljdF9zZXQ9ITB9fWZ1bmN0aW9uIGVyKHQsZSl7Y29uc3Qgcj1uZXcgdHIoZSk7aWYoci5wdXNoKHQsITApLHIuZXJyKXRocm93IHIubXNnfHxkdFtyLmVycl07cmV0dXJuIHIucmVzdWx0fWZ1bmN0aW9uIHJyKHQsZSl7cmV0dXJuKGU9ZXx8e30pLnJhdz0hMCxlcih0LGUpfWZ1bmN0aW9uIG5yKHQsZSl7cmV0dXJuKGU9ZXx8e30pLmd6aXA9ITAsZXIodCxlKX10ci5wcm90b3R5cGUucHVzaD1mdW5jdGlvbih0LGUpe2NvbnN0IHI9dGhpcy5zdHJtLG49dGhpcy5vcHRpb25zLmNodW5rU2l6ZTtsZXQgaSxhO2lmKHRoaXMuZW5kZWQpcmV0dXJuITE7Zm9yKGE9ZT09PX5+ZT9lOiEwPT09ZT9XZTpLZSwic3RyaW5nIj09dHlwZW9mIHQ/ci5pbnB1dD1JZS5zdHJpbmcyYnVmKHQpOiJbb2JqZWN0IEFycmF5QnVmZmVyXSI9PT0kZS5jYWxsKHQpP3IuaW5wdXQ9bmV3IFVpbnQ4QXJyYXkodCk6ci5pbnB1dD10LHIubmV4dF9pbj0wLHIuYXZhaWxfaW49ci5pbnB1dC5sZW5ndGg7OylpZigwPT09ci5hdmFpbF9vdXQmJihyLm91dHB1dD1uZXcgVWludDhBcnJheShuKSxyLm5leHRfb3V0PTAsci5hdmFpbF9vdXQ9biksKGE9PT1YZXx8YT09PUdlKSYmci5hdmFpbF9vdXQ8PTYpdGhpcy5vbkRhdGEoci5vdXRwdXQuc3ViYXJyYXkoMCxyLm5leHRfb3V0KSksci5hdmFpbF9vdXQ9MDtlbHNle2lmKGk9Q2UuZGVmbGF0ZShyLGEpLGk9PT1xZSlyZXR1cm4gci5uZXh0X291dD4wJiZ0aGlzLm9uRGF0YShyLm91dHB1dC5zdWJhcnJheSgwLHIubmV4dF9vdXQpKSxpPUNlLmRlZmxhdGVFbmQodGhpcy5zdHJtKSx0aGlzLm9uRW5kKGkpLHRoaXMuZW5kZWQ9ITAsaT09PVllO2lmKDAhPT1yLmF2YWlsX291dCl7aWYoYT4wJiZyLm5leHRfb3V0PjApdGhpcy5vbkRhdGEoci5vdXRwdXQuc3ViYXJyYXkoMCxyLm5leHRfb3V0KSksci5hdmFpbF9vdXQ9MDtlbHNlIGlmKDA9PT1yLmF2YWlsX2luKWJyZWFrfWVsc2UgdGhpcy5vbkRhdGEoci5vdXRwdXQpfXJldHVybiEwfSx0ci5wcm90b3R5cGUub25EYXRhPWZ1bmN0aW9uKHQpe3RoaXMuY2h1bmtzLnB1c2godCl9LHRyLnByb3RvdHlwZS5vbkVuZD1mdW5jdGlvbih0KXt0PT09WWUmJih0aGlzLnJlc3VsdD1IZS5mbGF0dGVuQ2h1bmtzKHRoaXMuY2h1bmtzKSksdGhpcy5jaHVua3M9W10sdGhpcy5lcnI9dCx0aGlzLm1zZz10aGlzLnN0cm0ubXNnfTt2YXIgaXI9dHIsYXI9ZXIsc3I9cnIsb3I9bnIsbHI9ZnQsaHI9e0RlZmxhdGU6aXIsZGVmbGF0ZTphcixkZWZsYXRlUmF3OnNyLGd6aXA6b3IsY29uc3RhbnRzOmxyfTt0LkRlZmxhdGU9aXIsdC5jb25zdGFudHM9bHIsdC5kZWZhdWx0PWhyLHQuZGVmbGF0ZT1hcix0LmRlZmxhdGVSYXc9c3IsdC5nemlwPW9yLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KX0ocy5leHBvcnRzKSkscy5leHBvcnRzKSxsPXtleHBvcnRzOnt9fTt2YXIgaCxjPXtleHBvcnRzOnt9fSx1PXIoT2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsZGVmYXVsdDp7fX0pKTtmdW5jdGlvbiBfKCl7cmV0dXJuIGh8fChoPTEsYy5leHBvcnRzPShlPWV8fGZ1bmN0aW9uKGUscil7dmFyIG47aWYoInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5jcnlwdG8mJihuPXdpbmRvdy5jcnlwdG8pLCJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZiYmc2VsZi5jcnlwdG8mJihuPXNlbGYuY3J5cHRvKSwidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbFRoaXMmJmdsb2JhbFRoaXMuY3J5cHRvJiYobj1nbG9iYWxUaGlzLmNyeXB0byksIW4mJiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cubXNDcnlwdG8mJihuPXdpbmRvdy5tc0NyeXB0byksIW4mJnZvaWQgMCE9PXQmJnQuY3J5cHRvJiYobj10LmNyeXB0byksIW4pdHJ5e249dX1jYXRjaCh0KXt9dmFyIGk9ZnVuY3Rpb24oKXtpZihuKXtpZigiZnVuY3Rpb24iPT10eXBlb2Ygbi5nZXRSYW5kb21WYWx1ZXMpdHJ5e3JldHVybiBuLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDMyQXJyYXkoMSkpWzBdfWNhdGNoKHQpe31pZigiZnVuY3Rpb24iPT10eXBlb2Ygbi5yYW5kb21CeXRlcyl0cnl7cmV0dXJuIG4ucmFuZG9tQnl0ZXMoNCkucmVhZEludDMyTEUoKX1jYXRjaCh0KXt9fXRocm93IG5ldyBFcnJvcigiTmF0aXZlIGNyeXB0byBtb2R1bGUgY291bGQgbm90IGJlIHVzZWQgdG8gZ2V0IHNlY3VyZSByYW5kb20gbnVtYmVyLiIpfSxhPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHI7cmV0dXJuIHQucHJvdG90eXBlPWUscj1uZXcgdCx0LnByb3RvdHlwZT1udWxsLHJ9fSgpLHM9e30sbz1zLmxpYj17fSxsPW8uQmFzZT17ZXh0ZW5kOmZ1bmN0aW9uKHQpe3ZhciBlPWEodGhpcyk7cmV0dXJuIHQmJmUubWl4SW4odCksZS5oYXNPd25Qcm9wZXJ0eSgiaW5pdCIpJiZ0aGlzLmluaXQhPT1lLmluaXR8fChlLmluaXQ9ZnVuY3Rpb24oKXtlLiRzdXBlci5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLGUuaW5pdC5wcm90b3R5cGU9ZSxlLiRzdXBlcj10aGlzLGV9LGNyZWF0ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZXh0ZW5kKCk7cmV0dXJuIHQuaW5pdC5hcHBseSh0LGFyZ3VtZW50cyksdH0saW5pdDpmdW5jdGlvbigpe30sbWl4SW46ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShlKSYmKHRoaXNbZV09dFtlXSk7dC5oYXNPd25Qcm9wZXJ0eSgidG9TdHJpbmciKSYmKHRoaXMudG9TdHJpbmc9dC50b1N0cmluZyl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdC5wcm90b3R5cGUuZXh0ZW5kKHRoaXMpfX0saD1vLldvcmRBcnJheT1sLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0LGUpe3Q9dGhpcy53b3Jkcz10fHxbXSx0aGlzLnNpZ0J5dGVzPWUhPXI/ZTo0KnQubGVuZ3RofSx0b1N0cmluZzpmdW5jdGlvbih0KXtyZXR1cm4odHx8Xykuc3RyaW5naWZ5KHRoaXMpfSxjb25jYXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy53b3JkcyxyPXQud29yZHMsbj10aGlzLnNpZ0J5dGVzLGk9dC5zaWdCeXRlcztpZih0aGlzLmNsYW1wKCksbiU0KWZvcih2YXIgYT0wO2E8aTthKyspe3ZhciBzPXJbYT4+PjJdPj4+MjQtYSU0KjgmMjU1O2VbbithPj4+Ml18PXM8PDI0LShuK2EpJTQqOH1lbHNlIGZvcih2YXIgbz0wO288aTtvKz00KWVbbitvPj4+Ml09cltvPj4+Ml07cmV0dXJuIHRoaXMuc2lnQnl0ZXMrPWksdGhpc30sY2xhbXA6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLndvcmRzLHI9dGhpcy5zaWdCeXRlczt0W3I+Pj4yXSY9NDI5NDk2NzI5NTw8MzItciU0KjgsdC5sZW5ndGg9ZS5jZWlsKHIvNCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9bC5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0LndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCksdH0scmFuZG9tOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxyPTA7cjx0O3IrPTQpZS5wdXNoKGkoKSk7cmV0dXJuIG5ldyBoLmluaXQoZSx0KX19KSxjPXMuZW5jPXt9LF89Yy5IZXg9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC53b3JkcyxyPXQuc2lnQnl0ZXMsbj1bXSxpPTA7aTxyO2krKyl7dmFyIGE9ZVtpPj4+Ml0+Pj4yNC1pJTQqOCYyNTU7bi5wdXNoKChhPj4+NCkudG9TdHJpbmcoMTYpKSxuLnB1c2goKDE1JmEpLnRvU3RyaW5nKDE2KSl9cmV0dXJuIG4uam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lmxlbmd0aCxyPVtdLG49MDtuPGU7bis9MilyW24+Pj4zXXw9cGFyc2VJbnQodC5zdWJzdHIobiwyKSwxNik8PDI0LW4lOCo0O3JldHVybiBuZXcgaC5pbml0KHIsZS8yKX19LGQ9Yy5MYXRpbjE9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC53b3JkcyxyPXQuc2lnQnl0ZXMsbj1bXSxpPTA7aTxyO2krKyl7dmFyIGE9ZVtpPj4+Ml0+Pj4yNC1pJTQqOCYyNTU7bi5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoYSkpfXJldHVybiBuLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5sZW5ndGgscj1bXSxuPTA7bjxlO24rKylyW24+Pj4yXXw9KDI1NSZ0LmNoYXJDb2RlQXQobikpPDwyNC1uJTQqODtyZXR1cm4gbmV3IGguaW5pdChyLGUpfX0sZj1jLlV0Zjg9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoZC5zdHJpbmdpZnkodCkpKX1jYXRjaCh0KXt0aHJvdyBuZXcgRXJyb3IoIk1hbGZvcm1lZCBVVEYtOCBkYXRhIil9fSxwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm4gZC5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQodCkpKX19LHA9by5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtPWwuZXh0ZW5kKHtyZXNldDpmdW5jdGlvbigpe3RoaXMuX2RhdGE9bmV3IGguaW5pdCx0aGlzLl9uRGF0YUJ5dGVzPTB9LF9hcHBlbmQ6ZnVuY3Rpb24odCl7InN0cmluZyI9PXR5cGVvZiB0JiYodD1mLnBhcnNlKHQpKSx0aGlzLl9kYXRhLmNvbmNhdCh0KSx0aGlzLl9uRGF0YUJ5dGVzKz10LnNpZ0J5dGVzfSxfcHJvY2VzczpmdW5jdGlvbih0KXt2YXIgcixuPXRoaXMuX2RhdGEsaT1uLndvcmRzLGE9bi5zaWdCeXRlcyxzPXRoaXMuYmxvY2tTaXplLG89YS8oNCpzKSxsPShvPXQ/ZS5jZWlsKG8pOmUubWF4KCgwfG8pLXRoaXMuX21pbkJ1ZmZlclNpemUsMCkpKnMsYz1lLm1pbig0KmwsYSk7aWYobCl7Zm9yKHZhciB1PTA7dTxsO3UrPXMpdGhpcy5fZG9Qcm9jZXNzQmxvY2soaSx1KTtyPWkuc3BsaWNlKDAsbCksbi5zaWdCeXRlcy09Y31yZXR1cm4gbmV3IGguaW5pdChyLGMpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PWwuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC5fZGF0YT10aGlzLl9kYXRhLmNsb25lKCksdH0sX21pbkJ1ZmZlclNpemU6MH0pO28uSGFzaGVyPXAuZXh0ZW5kKHtjZmc6bC5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKHQpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZCh0KSx0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7cC5yZXNldC5jYWxsKHRoaXMpLHRoaXMuX2RvUmVzZXQoKX0sdXBkYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9hcHBlbmQodCksdGhpcy5fcHJvY2VzcygpLHRoaXN9LGZpbmFsaXplOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLl9hcHBlbmQodCksdGhpcy5fZG9GaW5hbGl6ZSgpfSxibG9ja1NpemU6MTYsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxyKXtyZXR1cm4gbmV3IHQuaW5pdChyKS5maW5hbGl6ZShlKX19LF9jcmVhdGVIbWFjSGVscGVyOmZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLHIpe3JldHVybiBuZXcgZy5ITUFDLmluaXQodCxyKS5maW5hbGl6ZShlKX19fSk7dmFyIGc9cy5hbGdvPXt9O3JldHVybiBzfShNYXRoKSxlKSksYy5leHBvcnRzO3ZhciBlfXZhciBkO2Z1bmN0aW9uIGYoKXtyZXR1cm4gZHx8KGQ9MSxsLmV4cG9ydHM9KHQ9XygpLGZ1bmN0aW9uKCl7dmFyIGU9dCxyPWUubGliLldvcmRBcnJheTtmdW5jdGlvbiBuKHQsZSxuKXtmb3IodmFyIGk9W10sYT0wLHM9MDtzPGU7cysrKWlmKHMlNCl7dmFyIG89blt0LmNoYXJDb2RlQXQocy0xKV08PHMlNCoyfG5bdC5jaGFyQ29kZUF0KHMpXT4+PjYtcyU0KjI7aVthPj4+Ml18PW88PDI0LWElNCo4LGErK31yZXR1cm4gci5jcmVhdGUoaSxhKX1lLmVuYy5CYXNlNjQ9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXt2YXIgZT10LndvcmRzLHI9dC5zaWdCeXRlcyxuPXRoaXMuX21hcDt0LmNsYW1wKCk7Zm9yKHZhciBpPVtdLGE9MDthPHI7YSs9Mylmb3IodmFyIHM9KGVbYT4+PjJdPj4+MjQtYSU0KjgmMjU1KTw8MTZ8KGVbYSsxPj4+Ml0+Pj4yNC0oYSsxKSU0KjgmMjU1KTw8OHxlW2ErMj4+PjJdPj4+MjQtKGErMiklNCo4JjI1NSxvPTA7bzw0JiZhKy43NSpvPHI7bysrKWkucHVzaChuLmNoYXJBdChzPj4+NiooMy1vKSY2MykpO3ZhciBsPW4uY2hhckF0KDY0KTtpZihsKWZvcig7aS5sZW5ndGglNDspaS5wdXNoKGwpO3JldHVybiBpLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbih0KXt2YXIgZT10Lmxlbmd0aCxyPXRoaXMuX21hcCxpPXRoaXMuX3JldmVyc2VNYXA7aWYoIWkpe2k9dGhpcy5fcmV2ZXJzZU1hcD1bXTtmb3IodmFyIGE9MDthPHIubGVuZ3RoO2ErKylpW3IuY2hhckNvZGVBdChhKV09YX12YXIgcz1yLmNoYXJBdCg2NCk7aWYocyl7dmFyIG89dC5pbmRleE9mKHMpOy0xIT09byYmKGU9byl9cmV0dXJuIG4odCxlLGkpfSxfbWFwOiJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPSJ9fSgpLHQuZW5jLkJhc2U2NCkpLGwuZXhwb3J0czt2YXIgdH12YXIgcCxnPWUoZigpKSx5PXtleHBvcnRzOnt9fSx3PXtleHBvcnRzOnt9fTtmdW5jdGlvbiB2KCl7cmV0dXJuIHB8fChwPTEsdy5leHBvcnRzPSh0PV8oKSxmdW5jdGlvbihlKXt2YXIgcj10LG49ci5saWIsaT1uLldvcmRBcnJheSxhPW4uSGFzaGVyLHM9ci5hbGdvLG89W107IWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDw2NDt0Kyspb1t0XT00Mjk0OTY3Mjk2KmUuYWJzKGUuc2luKHQrMSkpfDB9KCk7dmFyIGw9cy5NRDU9YS5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgaS5pbml0KFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzhdKX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPTA7cjwxNjtyKyspe3ZhciBuPWUrcixpPXRbbl07dFtuXT0xNjcxMTkzNSYoaTw8OHxpPj4+MjQpfDQyNzgyNTUzNjAmKGk8PDI0fGk+Pj44KX12YXIgYT10aGlzLl9oYXNoLndvcmRzLHM9dFtlKzBdLGw9dFtlKzFdLGQ9dFtlKzJdLGY9dFtlKzNdLHA9dFtlKzRdLGc9dFtlKzVdLHk9dFtlKzZdLHc9dFtlKzddLHY9dFtlKzhdLG09dFtlKzldLGI9dFtlKzEwXSx4PXRbZSsxMV0saz10W2UrMTJdLHo9dFtlKzEzXSxBPXRbZSsxNF0sRT10W2UrMTVdLFM9YVswXSxCPWFbMV0sTz1hWzJdLEw9YVszXTtTPWgoUyxCLE8sTCxzLDcsb1swXSksTD1oKEwsUyxCLE8sbCwxMixvWzFdKSxPPWgoTyxMLFMsQixkLDE3LG9bMl0pLEI9aChCLE8sTCxTLGYsMjIsb1szXSksUz1oKFMsQixPLEwscCw3LG9bNF0pLEw9aChMLFMsQixPLGcsMTIsb1s1XSksTz1oKE8sTCxTLEIseSwxNyxvWzZdKSxCPWgoQixPLEwsUyx3LDIyLG9bN10pLFM9aChTLEIsTyxMLHYsNyxvWzhdKSxMPWgoTCxTLEIsTyxtLDEyLG9bOV0pLE89aChPLEwsUyxCLGIsMTcsb1sxMF0pLEI9aChCLE8sTCxTLHgsMjIsb1sxMV0pLFM9aChTLEIsTyxMLGssNyxvWzEyXSksTD1oKEwsUyxCLE8seiwxMixvWzEzXSksTz1oKE8sTCxTLEIsQSwxNyxvWzE0XSksUz1jKFMsQj1oKEIsTyxMLFMsRSwyMixvWzE1XSksTyxMLGwsNSxvWzE2XSksTD1jKEwsUyxCLE8seSw5LG9bMTddKSxPPWMoTyxMLFMsQix4LDE0LG9bMThdKSxCPWMoQixPLEwsUyxzLDIwLG9bMTldKSxTPWMoUyxCLE8sTCxnLDUsb1syMF0pLEw9YyhMLFMsQixPLGIsOSxvWzIxXSksTz1jKE8sTCxTLEIsRSwxNCxvWzIyXSksQj1jKEIsTyxMLFMscCwyMCxvWzIzXSksUz1jKFMsQixPLEwsbSw1LG9bMjRdKSxMPWMoTCxTLEIsTyxBLDksb1syNV0pLE89YyhPLEwsUyxCLGYsMTQsb1syNl0pLEI9YyhCLE8sTCxTLHYsMjAsb1syN10pLFM9YyhTLEIsTyxMLHosNSxvWzI4XSksTD1jKEwsUyxCLE8sZCw5LG9bMjldKSxPPWMoTyxMLFMsQix3LDE0LG9bMzBdKSxTPXUoUyxCPWMoQixPLEwsUyxrLDIwLG9bMzFdKSxPLEwsZyw0LG9bMzJdKSxMPXUoTCxTLEIsTyx2LDExLG9bMzNdKSxPPXUoTyxMLFMsQix4LDE2LG9bMzRdKSxCPXUoQixPLEwsUyxBLDIzLG9bMzVdKSxTPXUoUyxCLE8sTCxsLDQsb1szNl0pLEw9dShMLFMsQixPLHAsMTEsb1szN10pLE89dShPLEwsUyxCLHcsMTYsb1szOF0pLEI9dShCLE8sTCxTLGIsMjMsb1szOV0pLFM9dShTLEIsTyxMLHosNCxvWzQwXSksTD11KEwsUyxCLE8scywxMSxvWzQxXSksTz11KE8sTCxTLEIsZiwxNixvWzQyXSksQj11KEIsTyxMLFMseSwyMyxvWzQzXSksUz11KFMsQixPLEwsbSw0LG9bNDRdKSxMPXUoTCxTLEIsTyxrLDExLG9bNDVdKSxPPXUoTyxMLFMsQixFLDE2LG9bNDZdKSxTPV8oUyxCPXUoQixPLEwsUyxkLDIzLG9bNDddKSxPLEwscyw2LG9bNDhdKSxMPV8oTCxTLEIsTyx3LDEwLG9bNDldKSxPPV8oTyxMLFMsQixBLDE1LG9bNTBdKSxCPV8oQixPLEwsUyxnLDIxLG9bNTFdKSxTPV8oUyxCLE8sTCxrLDYsb1s1Ml0pLEw9XyhMLFMsQixPLGYsMTAsb1s1M10pLE89XyhPLEwsUyxCLGIsMTUsb1s1NF0pLEI9XyhCLE8sTCxTLGwsMjEsb1s1NV0pLFM9XyhTLEIsTyxMLHYsNixvWzU2XSksTD1fKEwsUyxCLE8sRSwxMCxvWzU3XSksTz1fKE8sTCxTLEIseSwxNSxvWzU4XSksQj1fKEIsTyxMLFMseiwyMSxvWzU5XSksUz1fKFMsQixPLEwscCw2LG9bNjBdKSxMPV8oTCxTLEIsTyx4LDEwLG9bNjFdKSxPPV8oTyxMLFMsQixkLDE1LG9bNjJdKSxCPV8oQixPLEwsUyxtLDIxLG9bNjNdKSxhWzBdPWFbMF0rU3wwLGFbMV09YVsxXStCfDAsYVsyXT1hWzJdK098MCxhWzNdPWFbM10rTHwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2RhdGEscj10LndvcmRzLG49OCp0aGlzLl9uRGF0YUJ5dGVzLGk9OCp0LnNpZ0J5dGVzO3JbaT4+PjVdfD0xMjg8PDI0LWklMzI7dmFyIGE9ZS5mbG9vcihuLzQyOTQ5NjcyOTYpLHM9bjtyWzE1KyhpKzY0Pj4+OTw8NCldPTE2NzExOTM1JihhPDw4fGE+Pj4yNCl8NDI3ODI1NTM2MCYoYTw8MjR8YT4+PjgpLHJbMTQrKGkrNjQ+Pj45PDw0KV09MTY3MTE5MzUmKHM8PDh8cz4+PjI0KXw0Mjc4MjU1MzYwJihzPDwyNHxzPj4+OCksdC5zaWdCeXRlcz00KihyLmxlbmd0aCsxKSx0aGlzLl9wcm9jZXNzKCk7Zm9yKHZhciBvPXRoaXMuX2hhc2gsbD1vLndvcmRzLGg9MDtoPDQ7aCsrKXt2YXIgYz1sW2hdO2xbaF09MTY3MTE5MzUmKGM8PDh8Yz4+PjI0KXw0Mjc4MjU1MzYwJihjPDwyNHxjPj4+OCl9cmV0dXJuIG99LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9YS5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0Ll9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKSx0fX0pO2Z1bmN0aW9uIGgodCxlLHIsbixpLGEscyl7dmFyIG89dCsoZSZyfH5lJm4pK2krcztyZXR1cm4obzw8YXxvPj4+MzItYSkrZX1mdW5jdGlvbiBjKHQsZSxyLG4saSxhLHMpe3ZhciBvPXQrKGUmbnxyJn5uKStpK3M7cmV0dXJuKG88PGF8bz4+PjMyLWEpK2V9ZnVuY3Rpb24gdSh0LGUscixuLGksYSxzKXt2YXIgbz10KyhlXnJebikraStzO3JldHVybihvPDxhfG8+Pj4zMi1hKStlfWZ1bmN0aW9uIF8odCxlLHIsbixpLGEscyl7dmFyIG89dCsocl4oZXx+bikpK2krcztyZXR1cm4obzw8YXxvPj4+MzItYSkrZX1yLk1ENT1hLl9jcmVhdGVIZWxwZXIobCksci5IbWFjTUQ1PWEuX2NyZWF0ZUhtYWNIZWxwZXIobCl9KE1hdGgpLHQuTUQ1KSksdy5leHBvcnRzO3ZhciB0fXZhciBtLGI9e2V4cG9ydHM6e319LHg9e2V4cG9ydHM6e319O2Z1bmN0aW9uIGsoKXtyZXR1cm4gbXx8KG09MSx4LmV4cG9ydHM9KHQ9XygpLGZ1bmN0aW9uKCl7dmFyIGU9dCxyPWUubGliLG49ci5Xb3JkQXJyYXksaT1yLkhhc2hlcixhPWUuYWxnbyxzPVtdLG89YS5TSEExPWkuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IG4uaW5pdChbMTczMjU4NDE5Myw0MDIzMjMzNDE3LDI1NjIzODMxMDIsMjcxNzMzODc4LDMyODUzNzc1MjBdKX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPXRoaXMuX2hhc2gud29yZHMsbj1yWzBdLGk9clsxXSxhPXJbMl0sbz1yWzNdLGw9cls0XSxoPTA7aDw4MDtoKyspe2lmKGg8MTYpc1toXT0wfHRbZStoXTtlbHNle3ZhciBjPXNbaC0zXV5zW2gtOF1ec1toLTE0XV5zW2gtMTZdO3NbaF09Yzw8MXxjPj4+MzF9dmFyIHU9KG48PDV8bj4+PjI3KStsK3NbaF07dSs9aDwyMD8xNTE4NTAwMjQ5KyhpJmF8fmkmbyk6aDw0MD8xODU5Nzc1MzkzKyhpXmFebyk6aDw2MD8oaSZhfGkmb3xhJm8pLTE4OTQwMDc1ODg6KGleYV5vKS04OTk0OTc1MTQsbD1vLG89YSxhPWk8PDMwfGk+Pj4yLGk9bixuPXV9clswXT1yWzBdK258MCxyWzFdPXJbMV0raXwwLHJbMl09clsyXSthfDAsclszXT1yWzNdK298MCxyWzRdPXJbNF0rbHwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2RhdGEsZT10LndvcmRzLHI9OCp0aGlzLl9uRGF0YUJ5dGVzLG49OCp0LnNpZ0J5dGVzO3JldHVybiBlW24+Pj41XXw9MTI4PDwyNC1uJTMyLGVbMTQrKG4rNjQ+Pj45PDw0KV09TWF0aC5mbG9vcihyLzQyOTQ5NjcyOTYpLGVbMTUrKG4rNjQ+Pj45PDw0KV09cix0LnNpZ0J5dGVzPTQqZS5sZW5ndGgsdGhpcy5fcHJvY2VzcygpLHRoaXMuX2hhc2h9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9aS5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0Ll9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKSx0fX0pO2UuU0hBMT1pLl9jcmVhdGVIZWxwZXIobyksZS5IbWFjU0hBMT1pLl9jcmVhdGVIbWFjSGVscGVyKG8pfSgpLHQuU0hBMSkpLHguZXhwb3J0czt2YXIgdH12YXIgeixBPXtleHBvcnRzOnt9fTtmdW5jdGlvbiBFKCl7cmV0dXJuIHp8fCh6PTEsQS5leHBvcnRzPSh0PV8oKSxyPShlPXQpLmxpYi5CYXNlLG49ZS5lbmMuVXRmOCx2b2lkKGUuYWxnby5ITUFDPXIuZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsZSl7dD10aGlzLl9oYXNoZXI9bmV3IHQuaW5pdCwic3RyaW5nIj09dHlwZW9mIGUmJihlPW4ucGFyc2UoZSkpO3ZhciByPXQuYmxvY2tTaXplLGk9NCpyO2Uuc2lnQnl0ZXM+aSYmKGU9dC5maW5hbGl6ZShlKSksZS5jbGFtcCgpO2Zvcih2YXIgYT10aGlzLl9vS2V5PWUuY2xvbmUoKSxzPXRoaXMuX2lLZXk9ZS5jbG9uZSgpLG89YS53b3JkcyxsPXMud29yZHMsaD0wO2g8cjtoKyspb1toXV49MTU0OTU1NjgyOCxsW2hdXj05MDk1MjI0ODY7YS5zaWdCeXRlcz1zLnNpZ0J5dGVzPWksdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2hhc2hlcjt0LnJlc2V0KCksdC51cGRhdGUodGhpcy5faUtleSl9LHVwZGF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faGFzaGVyLnVwZGF0ZSh0KSx0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9oYXNoZXIscj1lLmZpbmFsaXplKHQpO3JldHVybiBlLnJlc2V0KCksZS5maW5hbGl6ZSh0aGlzLl9vS2V5LmNsb25lKCkuY29uY2F0KHIpKX19KSkpKSxBLmV4cG9ydHM7dmFyIHQsZSxyLG59dmFyIFM7ZnVuY3Rpb24gQigpe3JldHVybiBTfHwoUz0xLGIuZXhwb3J0cz0odD1fKCksaygpLEUoKSxmdW5jdGlvbigpe3ZhciBlPXQscj1lLmxpYixuPXIuQmFzZSxpPXIuV29yZEFycmF5LGE9ZS5hbGdvLHM9YS5NRDUsbz1hLkV2cEtERj1uLmV4dGVuZCh7Y2ZnOm4uZXh0ZW5kKHtrZXlTaXplOjQsaGFzaGVyOnMsaXRlcmF0aW9uczoxfSksaW5pdDpmdW5jdGlvbih0KXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQodCl9LGNvbXB1dGU6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHIsbj10aGlzLmNmZyxhPW4uaGFzaGVyLmNyZWF0ZSgpLHM9aS5jcmVhdGUoKSxvPXMud29yZHMsbD1uLmtleVNpemUsaD1uLml0ZXJhdGlvbnM7by5sZW5ndGg8bDspe3ImJmEudXBkYXRlKHIpLHI9YS51cGRhdGUodCkuZmluYWxpemUoZSksYS5yZXNldCgpO2Zvcih2YXIgYz0xO2M8aDtjKyspcj1hLmZpbmFsaXplKHIpLGEucmVzZXQoKTtzLmNvbmNhdChyKX1yZXR1cm4gcy5zaWdCeXRlcz00Kmwsc319KTtlLkV2cEtERj1mdW5jdGlvbih0LGUscil7cmV0dXJuIG8uY3JlYXRlKHIpLmNvbXB1dGUodCxlKX19KCksdC5FdnBLREYpKSxiLmV4cG9ydHM7dmFyIHR9dmFyIE8sTD17ZXhwb3J0czp7fX07dmFyIFI7dmFyIEQsVSxDPShSfHwoUj0xLHkuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT10LHI9ZS5saWIuQmxvY2tDaXBoZXIsbj1lLmFsZ28saT1bXSxhPVtdLHM9W10sbz1bXSxsPVtdLGg9W10sYz1bXSx1PVtdLF89W10sZD1bXTshZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8MjU2O2UrKyl0W2VdPWU8MTI4P2U8PDE6ZTw8MV4yODM7dmFyIHI9MCxuPTA7Zm9yKGU9MDtlPDI1NjtlKyspe3ZhciBmPW5ebjw8MV5uPDwyXm48PDNebjw8NDtmPWY+Pj44XjI1NSZmXjk5LGlbcl09ZixhW2ZdPXI7dmFyIHA9dFtyXSxnPXRbcF0seT10W2ddLHc9MjU3KnRbZl1eMTY4NDMwMDgqZjtzW3JdPXc8PDI0fHc+Pj44LG9bcl09dzw8MTZ8dz4+PjE2LGxbcl09dzw8OHx3Pj4+MjQsaFtyXT13LHc9MTY4NDMwMDkqeV42NTUzNypnXjI1NypwXjE2ODQzMDA4KnIsY1tmXT13PDwyNHx3Pj4+OCx1W2ZdPXc8PDE2fHc+Pj4xNixfW2ZdPXc8PDh8dz4+PjI0LGRbZl09dyxyPyhyPXBedFt0W3RbeV5wXV1dLG5ePXRbdFtuXV0pOnI9bj0xfX0oKTt2YXIgZj1bMCwxLDIsNCw4LDE2LDMyLDY0LDEyOCwyNyw1NF0scD1uLkFFUz1yLmV4dGVuZCh7X2RvUmVzZXQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fblJvdW5kc3x8dGhpcy5fa2V5UHJpb3JSZXNldCE9PXRoaXMuX2tleSl7Zm9yKHZhciB0PXRoaXMuX2tleVByaW9yUmVzZXQ9dGhpcy5fa2V5LGU9dC53b3JkcyxyPXQuc2lnQnl0ZXMvNCxuPTQqKCh0aGlzLl9uUm91bmRzPXIrNikrMSksYT10aGlzLl9rZXlTY2hlZHVsZT1bXSxzPTA7czxuO3MrKylzPHI/YVtzXT1lW3NdOihoPWFbcy0xXSxzJXI/cj42JiZzJXI9PTQmJihoPWlbaD4+PjI0XTw8MjR8aVtoPj4+MTYmMjU1XTw8MTZ8aVtoPj4+OCYyNTVdPDw4fGlbMjU1JmhdKTooaD1pWyhoPWg8PDh8aD4+PjI0KT4+PjI0XTw8MjR8aVtoPj4+MTYmMjU1XTw8MTZ8aVtoPj4+OCYyNTVdPDw4fGlbMjU1JmhdLGhePWZbcy9yfDBdPDwyNCksYVtzXT1hW3Mtcl1eaCk7Zm9yKHZhciBvPXRoaXMuX2ludktleVNjaGVkdWxlPVtdLGw9MDtsPG47bCsrKXtpZihzPW4tbCxsJTQpdmFyIGg9YVtzXTtlbHNlIGg9YVtzLTRdO29bbF09bDw0fHxzPD00P2g6Y1tpW2g+Pj4yNF1dXnVbaVtoPj4+MTYmMjU1XV1eX1tpW2g+Pj44JjI1NV1dXmRbaVsyNTUmaF1dfX19LGVuY3J5cHRCbG9jazpmdW5jdGlvbih0LGUpe3RoaXMuX2RvQ3J5cHRCbG9jayh0LGUsdGhpcy5fa2V5U2NoZWR1bGUscyxvLGwsaCxpKX0sZGVjcnlwdEJsb2NrOmZ1bmN0aW9uKHQsZSl7dmFyIHI9dFtlKzFdO3RbZSsxXT10W2UrM10sdFtlKzNdPXIsdGhpcy5fZG9DcnlwdEJsb2NrKHQsZSx0aGlzLl9pbnZLZXlTY2hlZHVsZSxjLHUsXyxkLGEpLHI9dFtlKzFdLHRbZSsxXT10W2UrM10sdFtlKzNdPXJ9LF9kb0NyeXB0QmxvY2s6ZnVuY3Rpb24odCxlLHIsbixpLGEscyxvKXtmb3IodmFyIGw9dGhpcy5fblJvdW5kcyxoPXRbZV1eclswXSxjPXRbZSsxXV5yWzFdLHU9dFtlKzJdXnJbMl0sXz10W2UrM11eclszXSxkPTQsZj0xO2Y8bDtmKyspe3ZhciBwPW5baD4+PjI0XV5pW2M+Pj4xNiYyNTVdXmFbdT4+PjgmMjU1XV5zWzI1NSZfXV5yW2QrK10sZz1uW2M+Pj4yNF1eaVt1Pj4+MTYmMjU1XV5hW18+Pj44JjI1NV1ec1syNTUmaF1ecltkKytdLHk9blt1Pj4+MjRdXmlbXz4+PjE2JjI1NV1eYVtoPj4+OCYyNTVdXnNbMjU1JmNdXnJbZCsrXSx3PW5bXz4+PjI0XV5pW2g+Pj4xNiYyNTVdXmFbYz4+PjgmMjU1XV5zWzI1NSZ1XV5yW2QrK107aD1wLGM9Zyx1PXksXz13fXA9KG9baD4+PjI0XTw8MjR8b1tjPj4+MTYmMjU1XTw8MTZ8b1t1Pj4+OCYyNTVdPDw4fG9bMjU1Jl9dKV5yW2QrK10sZz0ob1tjPj4+MjRdPDwyNHxvW3U+Pj4xNiYyNTVdPDwxNnxvW18+Pj44JjI1NV08PDh8b1syNTUmaF0pXnJbZCsrXSx5PShvW3U+Pj4yNF08PDI0fG9bXz4+PjE2JjI1NV08PDE2fG9baD4+PjgmMjU1XTw8OHxvWzI1NSZjXSlecltkKytdLHc9KG9bXz4+PjI0XTw8MjR8b1toPj4+MTYmMjU1XTw8MTZ8b1tjPj4+OCYyNTVdPDw4fG9bMjU1JnVdKV5yW2QrK10sdFtlXT1wLHRbZSsxXT1nLHRbZSsyXT15LHRbZSszXT13fSxrZXlTaXplOjh9KTtlLkFFUz1yLl9jcmVhdGVIZWxwZXIocCl9KCksdC5BRVN9KF8oKSxmKCksdigpLEIoKSxPfHwoTz0xLEwuZXhwb3J0cz0oRD1fKCksQigpLHZvaWQoRC5saWIuQ2lwaGVyfHxmdW5jdGlvbih0KXt2YXIgZT1ELHI9ZS5saWIsbj1yLkJhc2UsaT1yLldvcmRBcnJheSxhPXIuQnVmZmVyZWRCbG9ja0FsZ29yaXRobSxzPWUuZW5jO3MuVXRmODt2YXIgbz1zLkJhc2U2NCxsPWUuYWxnby5FdnBLREYsaD1yLkNpcGhlcj1hLmV4dGVuZCh7Y2ZnOm4uZXh0ZW5kKCksY3JlYXRlRW5jcnlwdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0VOQ19YRk9STV9NT0RFLHQsZSl9LGNyZWF0ZURlY3J5cHRvcjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNyZWF0ZSh0aGlzLl9ERUNfWEZPUk1fTU9ERSx0LGUpfSxpbml0OmZ1bmN0aW9uKHQsZSxyKXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQociksdGhpcy5feGZvcm1Nb2RlPXQsdGhpcy5fa2V5PWUsdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe2EucmVzZXQuY2FsbCh0aGlzKSx0aGlzLl9kb1Jlc2V0KCl9LHByb2Nlc3M6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2FwcGVuZCh0KSx0aGlzLl9wcm9jZXNzKCl9LGZpbmFsaXplOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLl9hcHBlbmQodCksdGhpcy5fZG9GaW5hbGl6ZSgpfSxrZXlTaXplOjQsaXZTaXplOjQsX0VOQ19YRk9STV9NT0RFOjEsX0RFQ19YRk9STV9NT0RFOjIsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0P3c6Z31yZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJue2VuY3J5cHQ6ZnVuY3Rpb24ocixuLGkpe3JldHVybiB0KG4pLmVuY3J5cHQoZSxyLG4saSl9LGRlY3J5cHQ6ZnVuY3Rpb24ocixuLGkpe3JldHVybiB0KG4pLmRlY3J5cHQoZSxyLG4saSl9fX19KCl9KTtyLlN0cmVhbUNpcGhlcj1oLmV4dGVuZCh7X2RvRmluYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvY2VzcyghMCl9LGJsb2NrU2l6ZToxfSk7dmFyIGM9ZS5tb2RlPXt9LHU9ci5CbG9ja0NpcGhlck1vZGU9bi5leHRlbmQoe2NyZWF0ZUVuY3J5cHRvcjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLkVuY3J5cHRvci5jcmVhdGUodCxlKX0sY3JlYXRlRGVjcnlwdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuRGVjcnlwdG9yLmNyZWF0ZSh0LGUpfSxpbml0OmZ1bmN0aW9uKHQsZSl7dGhpcy5fY2lwaGVyPXQsdGhpcy5faXY9ZX19KSxfPWMuQ0JDPWZ1bmN0aW9uKCl7dmFyIGU9dS5leHRlbmQoKTtmdW5jdGlvbiByKGUscixuKXt2YXIgaSxhPXRoaXMuX2l2O2E/KGk9YSx0aGlzLl9pdj10KTppPXRoaXMuX3ByZXZCbG9jaztmb3IodmFyIHM9MDtzPG47cysrKWVbcitzXV49aVtzXX1yZXR1cm4gZS5FbmNyeXB0b3I9ZS5leHRlbmQoe3Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX2NpcGhlcixpPW4uYmxvY2tTaXplO3IuY2FsbCh0aGlzLHQsZSxpKSxuLmVuY3J5cHRCbG9jayh0LGUpLHRoaXMuX3ByZXZCbG9jaz10LnNsaWNlKGUsZStpKX19KSxlLkRlY3J5cHRvcj1lLmV4dGVuZCh7cHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fY2lwaGVyLGk9bi5ibG9ja1NpemUsYT10LnNsaWNlKGUsZStpKTtuLmRlY3J5cHRCbG9jayh0LGUpLHIuY2FsbCh0aGlzLHQsZSxpKSx0aGlzLl9wcmV2QmxvY2s9YX19KSxlfSgpLGQ9KGUucGFkPXt9KS5Qa2NzNz17cGFkOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPTQqZSxuPXItdC5zaWdCeXRlcyVyLGE9bjw8MjR8bjw8MTZ8bjw8OHxuLHM9W10sbz0wO288bjtvKz00KXMucHVzaChhKTt2YXIgbD1pLmNyZWF0ZShzLG4pO3QuY29uY2F0KGwpfSx1bnBhZDpmdW5jdGlvbih0KXt2YXIgZT0yNTUmdC53b3Jkc1t0LnNpZ0J5dGVzLTE+Pj4yXTt0LnNpZ0J5dGVzLT1lfX07ci5CbG9ja0NpcGhlcj1oLmV4dGVuZCh7Y2ZnOmguY2ZnLmV4dGVuZCh7bW9kZTpfLHBhZGRpbmc6ZH0pLHJlc2V0OmZ1bmN0aW9uKCl7dmFyIHQ7aC5yZXNldC5jYWxsKHRoaXMpO3ZhciBlPXRoaXMuY2ZnLHI9ZS5pdixuPWUubW9kZTt0aGlzLl94Zm9ybU1vZGU9PXRoaXMuX0VOQ19YRk9STV9NT0RFP3Q9bi5jcmVhdGVFbmNyeXB0b3I6KHQ9bi5jcmVhdGVEZWNyeXB0b3IsdGhpcy5fbWluQnVmZmVyU2l6ZT0xKSx0aGlzLl9tb2RlJiZ0aGlzLl9tb2RlLl9fY3JlYXRvcj09dD90aGlzLl9tb2RlLmluaXQodGhpcyxyJiZyLndvcmRzKToodGhpcy5fbW9kZT10LmNhbGwobix0aGlzLHImJnIud29yZHMpLHRoaXMuX21vZGUuX19jcmVhdG9yPXQpfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24odCxlKXt0aGlzLl9tb2RlLnByb2Nlc3NCbG9jayh0LGUpfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5jZmcucGFkZGluZztyZXR1cm4gdGhpcy5feGZvcm1Nb2RlPT10aGlzLl9FTkNfWEZPUk1fTU9ERT8oZS5wYWQodGhpcy5fZGF0YSx0aGlzLmJsb2NrU2l6ZSksdD10aGlzLl9wcm9jZXNzKCEwKSk6KHQ9dGhpcy5fcHJvY2VzcyghMCksZS51bnBhZCh0KSksdH0sYmxvY2tTaXplOjR9KTt2YXIgZj1yLkNpcGhlclBhcmFtcz1uLmV4dGVuZCh7aW5pdDpmdW5jdGlvbih0KXt0aGlzLm1peEluKHQpfSx0b1N0cmluZzpmdW5jdGlvbih0KXtyZXR1cm4odHx8dGhpcy5mb3JtYXR0ZXIpLnN0cmluZ2lmeSh0aGlzKX19KSxwPShlLmZvcm1hdD17fSkuT3BlblNTTD17c3RyaW5naWZ5OmZ1bmN0aW9uKHQpe3ZhciBlPXQuY2lwaGVydGV4dCxyPXQuc2FsdDtyZXR1cm4ocj9pLmNyZWF0ZShbMTM5ODg5MzY4NCwxNzAxMDc2ODMxXSkuY29uY2F0KHIpLmNvbmNhdChlKTplKS50b1N0cmluZyhvKX0scGFyc2U6ZnVuY3Rpb24odCl7dmFyIGUscj1vLnBhcnNlKHQpLG49ci53b3JkcztyZXR1cm4gMTM5ODg5MzY4ND09blswXSYmMTcwMTA3NjgzMT09blsxXSYmKGU9aS5jcmVhdGUobi5zbGljZSgyLDQpKSxuLnNwbGljZSgwLDQpLHIuc2lnQnl0ZXMtPTE2KSxmLmNyZWF0ZSh7Y2lwaGVydGV4dDpyLHNhbHQ6ZX0pfX0sZz1yLlNlcmlhbGl6YWJsZUNpcGhlcj1uLmV4dGVuZCh7Y2ZnOm4uZXh0ZW5kKHtmb3JtYXQ6cH0pLGVuY3J5cHQ6ZnVuY3Rpb24odCxlLHIsbil7bj10aGlzLmNmZy5leHRlbmQobik7dmFyIGk9dC5jcmVhdGVFbmNyeXB0b3IocixuKSxhPWkuZmluYWxpemUoZSkscz1pLmNmZztyZXR1cm4gZi5jcmVhdGUoe2NpcGhlcnRleHQ6YSxrZXk6cixpdjpzLml2LGFsZ29yaXRobTp0LG1vZGU6cy5tb2RlLHBhZGRpbmc6cy5wYWRkaW5nLGJsb2NrU2l6ZTp0LmJsb2NrU2l6ZSxmb3JtYXR0ZXI6bi5mb3JtYXR9KX0sZGVjcnlwdDpmdW5jdGlvbih0LGUscixuKXtyZXR1cm4gbj10aGlzLmNmZy5leHRlbmQobiksZT10aGlzLl9wYXJzZShlLG4uZm9ybWF0KSx0LmNyZWF0ZURlY3J5cHRvcihyLG4pLmZpbmFsaXplKGUuY2lwaGVydGV4dCl9LF9wYXJzZTpmdW5jdGlvbih0LGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdD9lLnBhcnNlKHQsdGhpcyk6dH19KSx5PShlLmtkZj17fSkuT3BlblNTTD17ZXhlY3V0ZTpmdW5jdGlvbih0LGUscixuLGEpe2lmKG58fChuPWkucmFuZG9tKDgpKSxhKXM9bC5jcmVhdGUoe2tleVNpemU6ZStyLGhhc2hlcjphfSkuY29tcHV0ZSh0LG4pO2Vsc2UgdmFyIHM9bC5jcmVhdGUoe2tleVNpemU6ZStyfSkuY29tcHV0ZSh0LG4pO3ZhciBvPWkuY3JlYXRlKHMud29yZHMuc2xpY2UoZSksNCpyKTtyZXR1cm4gcy5zaWdCeXRlcz00KmUsZi5jcmVhdGUoe2tleTpzLGl2Om8sc2FsdDpufSl9fSx3PXIuUGFzc3dvcmRCYXNlZENpcGhlcj1nLmV4dGVuZCh7Y2ZnOmcuY2ZnLmV4dGVuZCh7a2RmOnl9KSxlbmNyeXB0OmZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpPShuPXRoaXMuY2ZnLmV4dGVuZChuKSkua2RmLmV4ZWN1dGUocix0LmtleVNpemUsdC5pdlNpemUsbi5zYWx0LG4uaGFzaGVyKTtuLml2PWkuaXY7dmFyIGE9Zy5lbmNyeXB0LmNhbGwodGhpcyx0LGUsaS5rZXksbik7cmV0dXJuIGEubWl4SW4oaSksYX0sZGVjcnlwdDpmdW5jdGlvbih0LGUscixuKXtuPXRoaXMuY2ZnLmV4dGVuZChuKSxlPXRoaXMuX3BhcnNlKGUsbi5mb3JtYXQpO3ZhciBpPW4ua2RmLmV4ZWN1dGUocix0LmtleVNpemUsdC5pdlNpemUsZS5zYWx0LG4uaGFzaGVyKTtyZXR1cm4gbi5pdj1pLml2LGcuZGVjcnlwdC5jYWxsKHRoaXMsdCxlLGkua2V5LG4pfX0pfSgpKSkpKSkseS5leHBvcnRzKSxUPWUoQyksRj17ZXhwb3J0czp7fX07ZnVuY3Rpb24gSCgpe3JldHVybiBVfHwoVT0xLEYuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHI9dCxuPXIubGliLGk9bi5Xb3JkQXJyYXksYT1uLkhhc2hlcixzPXIuYWxnbyxvPVtdLGw9W107IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXtmb3IodmFyIHI9ZS5zcXJ0KHQpLG49MjtuPD1yO24rKylpZighKHQlbikpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gcih0KXtyZXR1cm4gNDI5NDk2NzI5NioodC0oMHx0KSl8MH1mb3IodmFyIG49MixpPTA7aTw2NDspdChuKSYmKGk8OCYmKG9baV09cihlLnBvdyhuLC41KSkpLGxbaV09cihlLnBvdyhuLDEvMykpLGkrKyksbisrfSgpO3ZhciBoPVtdLGM9cy5TSEEyNTY9YS5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgaS5pbml0KG8uc2xpY2UoMCkpfSxfZG9Qcm9jZXNzQmxvY2s6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9dGhpcy5faGFzaC53b3JkcyxuPXJbMF0saT1yWzFdLGE9clsyXSxzPXJbM10sbz1yWzRdLGM9cls1XSx1PXJbNl0sXz1yWzddLGQ9MDtkPDY0O2QrKyl7aWYoZDwxNiloW2RdPTB8dFtlK2RdO2Vsc2V7dmFyIGY9aFtkLTE1XSxwPShmPDwyNXxmPj4+NyleKGY8PDE0fGY+Pj4xOCleZj4+PjMsZz1oW2QtMl0seT0oZzw8MTV8Zz4+PjE3KV4oZzw8MTN8Zz4+PjE5KV5nPj4+MTA7aFtkXT1wK2hbZC03XSt5K2hbZC0xNl19dmFyIHc9biZpXm4mYV5pJmEsdj0objw8MzB8bj4+PjIpXihuPDwxOXxuPj4+MTMpXihuPDwxMHxuPj4+MjIpLG09XysoKG88PDI2fG8+Pj42KV4obzw8MjF8bz4+PjExKV4obzw8N3xvPj4+MjUpKSsobyZjXn5vJnUpK2xbZF0raFtkXTtfPXUsdT1jLGM9byxvPXMrbXwwLHM9YSxhPWksaT1uLG49bSsodit3KXwwfXJbMF09clswXStufDAsclsxXT1yWzFdK2l8MCxyWzJdPXJbMl0rYXwwLHJbM109clszXStzfDAscls0XT1yWzRdK298MCxyWzVdPXJbNV0rY3wwLHJbNl09cls2XSt1fDAscls3XT1yWzddK198MH0sX2RvRmluYWxpemU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9kYXRhLHI9dC53b3JkcyxuPTgqdGhpcy5fbkRhdGFCeXRlcyxpPTgqdC5zaWdCeXRlcztyZXR1cm4gcltpPj4+NV18PTEyODw8MjQtaSUzMixyWzE0KyhpKzY0Pj4+OTw8NCldPWUuZmxvb3Iobi80Mjk0OTY3Mjk2KSxyWzE1KyhpKzY0Pj4+OTw8NCldPW4sdC5zaWdCeXRlcz00KnIubGVuZ3RoLHRoaXMuX3Byb2Nlc3MoKSx0aGlzLl9oYXNofSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PWEuY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC5faGFzaD10aGlzLl9oYXNoLmNsb25lKCksdH19KTtyLlNIQTI1Nj1hLl9jcmVhdGVIZWxwZXIoYyksci5IbWFjU0hBMjU2PWEuX2NyZWF0ZUhtYWNIZWxwZXIoYyl9KE1hdGgpLHQuU0hBMjU2fShfKCkpKSxGLmV4cG9ydHN9dmFyIFosTT1lKEgoKSksTj17ZXhwb3J0czp7fX07dmFyIEksaj0oWnx8KFo9MSxOLmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIEFycmF5QnVmZmVyKXt2YXIgZT10LmxpYi5Xb3JkQXJyYXkscj1lLmluaXQsbj1lLmluaXQ9ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyJiYodD1uZXcgVWludDhBcnJheSh0KSksKHQgaW5zdGFuY2VvZiBJbnQ4QXJyYXl8fCJ1bmRlZmluZWQiIT10eXBlb2YgVWludDhDbGFtcGVkQXJyYXkmJnQgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheXx8dCBpbnN0YW5jZW9mIEludDE2QXJyYXl8fHQgaW5zdGFuY2VvZiBVaW50MTZBcnJheXx8dCBpbnN0YW5jZW9mIEludDMyQXJyYXl8fHQgaW5zdGFuY2VvZiBVaW50MzJBcnJheXx8dCBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheXx8dCBpbnN0YW5jZW9mIEZsb2F0NjRBcnJheSkmJih0PW5ldyBVaW50OEFycmF5KHQuYnVmZmVyLHQuYnl0ZU9mZnNldCx0LmJ5dGVMZW5ndGgpKSx0IGluc3RhbmNlb2YgVWludDhBcnJheSl7Zm9yKHZhciBlPXQuYnl0ZUxlbmd0aCxuPVtdLGk9MDtpPGU7aSsrKW5baT4+PjJdfD10W2ldPDwyNC1pJTQqODtyLmNhbGwodGhpcyxuLGUpfWVsc2Ugci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O24ucHJvdG90eXBlPWV9fSgpLHQubGliLldvcmRBcnJheX0oXygpKSksTi5leHBvcnRzKSxQPWUoaiksJD17ZXhwb3J0czp7fX07dmFyIEs9KEl8fChJPTEsJC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB0LkhtYWNTSEEyNTZ9KF8oKSxIKCksRSgpKSksJC5leHBvcnRzKSxYPWUoSyk7Y29uc3QgRz0hMTtsZXQgVyxZPWZldGNoO29ubWVzc2FnZT1mdW5jdGlvbih0KXtjb25zdHtqb2I6ZSxjbWQ6cixzZXJ2ZXI6bixwYXRoOmksYnVmZmVyOmEsa2V5QmFzZTY0OnMsZ3ppcDpsLHJlZmVycmVyOmgsaWQ6YyxhcHBJZDp1LHBlcnNpc3RlbnRJZDpfLENST1FVRVRfVkVSU0lPTjpkLGRlYnVnOmYsd2hhdDpwLG9mZmxpbmU6eX09dC5kYXRhO3kmJihZPWspO3N3aXRjaChyKXtjYXNlInVwbG9hZEVuY3J5cHRlZCI6eChpKTticmVhaztjYXNlImdldE9mZmxpbmVGaWxlIjp6KHQuZGF0YS51cmwpO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcigiVW5rbm93biB3b3JrZXIgY29tbWFuZCIscil9ZnVuY3Rpb24gdyh0KXtjb25zdCBlPURhdGUubm93KCkscj1QLmNyZWF0ZSh0KSxuPWcucGFyc2UocyksaT1YKHIsbiksYT1QLnJhbmRvbSgxNikse2NpcGhlcnRleHQ6b309VC5lbmNyeXB0KHIsbix7aXY6YX0pLGw9bmV3IEFycmF5QnVmZmVyKDQrYS5zaWdCeXRlcytpLnNpZ0J5dGVzK28uc2lnQnl0ZXMpLGg9bmV3IERhdGFWaWV3KGwpO2xldCB1PTA7aC5zZXRVaW50MzIodSwxMTI5NDY4MjA5LCExKSx1Kz00O2Zvcihjb25zdCB0IG9mW2EsaSxvXSlmb3IoY29uc3QgZSBvZiB0LndvcmRzKWguc2V0SW50MzIodSxlLCExKSx1Kz00O3JldHVybiBmJiZjb25zb2xlLmxvZyhjLGAke3B9IGVuY3J5cHRlZCAoJHtsLmJ5dGVMZW5ndGh9IGJ5dGVzKSBpbiAke0RhdGUubm93KCktZX1tc2ApLGx9ZnVuY3Rpb24gdih0KXtjb25zdCBlPURhdGUubm93KCkscj1vLmRlZmxhdGUodCx7Z3ppcDohMCxsZXZlbDoxfSk7cmV0dXJuIGYmJmNvbnNvbGUubG9nKGMsYCR7cH0gY29tcHJlc3NlZCAoJHtyLmxlbmd0aH0gYnl0ZXMpIGluICR7RGF0ZS5ub3coKS1lfW1zYCkscn1mdW5jdGlvbiBtKHQpe2NvbnN0IGU9RGF0ZS5ub3coKSxyPU0oUC5jcmVhdGUodCkpLG49Zy5zdHJpbmdpZnkocikucmVwbGFjZSgvPS9nLCIiKS5yZXBsYWNlKC9cKy9nLCItIikucmVwbGFjZSgvXC8vZywiXyIpO3JldHVybiBmJiZjb25zb2xlLmxvZyhjLGAke3B9IGhhc2hlZCAoJHt0LmJ5dGVMZW5ndGh9IGJ5dGVzKSBpbiAke0RhdGUubm93KCktZX1tc2ApLG59YXN5bmMgZnVuY3Rpb24gYih0KXtpZih5KXtjb25zdCBlPWBvZmZsaW5lOi8vLyR7dH1gO3JldHVybnt1cmw6ZSx1cGxvYWRVcmw6ZX19Y29uc3QgZT1EYXRlLm5vdygpLHI9YCR7bi51cmx9LyR7dH1gO2lmKCFuLmFwaUtleSlyZXR1cm57dXJsOnIsdXBsb2FkVXJsOnJ9O2NvbnN0IGk9YXdhaXQgWShyLHtoZWFkZXJzOnsiWC1Dcm9xdWV0LUF1dGgiOm4uYXBpS2V5LCJYLUNyb3F1ZXQtQXBwIjp1LCJYLUNyb3F1ZXQtSWQiOl8sIlgtQ3JvcXVldC1TZXNzaW9uIjpjLCJYLUNyb3F1ZXQtVmVyc2lvbiI6ZCwiWC1Dcm9xdWV0LVBhdGgiOm5ldyBVUkwoaCkucGF0aG5hbWV9LHJlZmVycmVyOmh9KSx7b2s6YSxzdGF0dXM6cyxzdGF0dXNUZXh0Om99PWk7aWYoIWEpdGhyb3cgRXJyb3IoYEVycm9yIGluIHNpZ25pbmcgVVJMOiAke3N9IC0gJHtvfWApO2NvbnN0e2Vycm9yOmwscmVhZDpnLHdyaXRlOnd9PWF3YWl0IGkuanNvbigpO2lmKGwpdGhyb3cgRXJyb3IobCk7cmV0dXJuIGYmJmNvbnNvbGUubG9nKGMsYCR7cH0gdXBsb2FkIGF1dGhvcml6ZWQgaW4gJHtEYXRlLm5vdygpLWV9bXNgKSx7dXJsOmcsdXBsb2FkVXJsOnd9fWFzeW5jIGZ1bmN0aW9uIHgodCl7dHJ5e2xldCByPXcobD92KGEpOmEpO0csdC5pbmNsdWRlcygiJUhBU0glIikmJih0PXQucmVwbGFjZSgiJUhBU0glIixtKHIpKSk7Y29uc3R7dXBsb2FkVXJsOm4sdXJsOml9PWF3YWl0IGIodCkscz1EYXRlLm5vdygpLHtvazpvLHN0YXR1czp1LHN0YXR1c1RleHQ6X309YXdhaXQgWShuLHttZXRob2Q6IlBVVCIsbW9kZToiY29ycyIsaGVhZGVyczp7IkNvbnRlbnQtVHlwZSI6ImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSJ9LHJlZmVycmVyOmgsYm9keTpyfSk7aWYoIW8pdGhyb3cgRXJyb3IoYHNlcnZlciByZXR1cm5lZCAke3V9ICR7X30gZm9yIFBVVCAke259YCk7ZiYmY29uc29sZS5sb2coYyxgJHtwfSB1cGxvYWRlZCAoJHt1fSkgaW4gJHtEYXRlLm5vdygpLXN9bXMgJHtpfWApLFcoe2pvYjplLHVybDppLG9rOm8sc3RhdHVzOnUsc3RhdHVzVGV4dDpfLGJ5dGVzOnIuYnl0ZUxlbmd0aH0pfWNhdGNoKHQpe2YmJmNvbnNvbGUuZXJyb3IoYCR7Y30gdXBsb2FkIGVycm9yICR7dC5tZXNzYWdlfWApLFcoe2pvYjplLG9rOiExLHN0YXR1czotMSxzdGF0dXNUZXh0OnQubWVzc2FnZX0pfX1mdW5jdGlvbiBrKHQsZSl7cmV0dXJuIGYmJmNvbnNvbGUubG9nKGMsYHN0b3JpbmcgJHt0fWApLHEuc2V0KHQsZS5ib2R5KSx7b2s6ITAsc3RhdHVzOjIwMSxzdGF0dXNUZXh0OiJPZmZsaW5lIGNyZWF0ZWQifX1mdW5jdGlvbiB6KHQpe2NvbnN0IHI9cS5nZXQodCk7aWYoIXIpcmV0dXJuIGYmJmNvbnNvbGUuZXJyb3IoYCR7Y30gZmlsZSBub3QgZm91bmQgJHt0fWApLHZvaWQgVyh7am9iOmUsb2s6ITEsc3RhdHVzOi0xLHN0YXR1c1RleHQ6Ik9mZmxpbmUgZmlsZSBub3QgZm91bmQifSk7ZiYmY29uc29sZS5sb2coYyxgcmV0cmlldmVkICR7dH1gKSxXKHtqb2I6ZSxvazohMCxzdGF0dXM6MjAwLHN0YXR1c1RleHQ6Ik9mZmxpbmUgZmlsZSBmb3VuZCIsYm9keTpyLGJ5dGVzOnIuYnl0ZUxlbmd0aH0pfX0sVz1wb3N0TWVzc2FnZTtjb25zdCBxPW5ldyBNYXB9KCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXVwbG9hZC5qcy5tYXAKCg==");const Ys=p.CROQUET_VERSION,en=p.CROQUET_PLATFORM==="node",ls="https://croquet.io/files/v1",So="https://files.croquet.io",wp=So;let Je=null;function Jw(){globalThis.__MULTISYNQ__||(en?console.log("Croquet "+Ys):console.log("%cCroquet%c %c"+Ys,"color:#F0493E","color:inherit","color:"+(Ys.includes("+")?"#909":"inherit")));const h=!en&&window.location.hostname.match(/^(.*\.)?croquet\.io$/i)&&window.location.pathname.startsWith("/dev/"),d=_.dev||_.dev!==!1&&h;if(Je={messages:_.has("debug","messages",!1),sends:_.has("debug","sends",!1),publish:_.has("debug","publish",!1),events:_.has("debug","events",!1),ticks:_.has("debug","ticks",!1),pong:_.has("debug","pong",!1),snapshot:_.has("debug","snapshot",!1),session:_.has("debug","session",!1),initsnapshot:_.has("debug","initsnapshot",!0),reflector:_.has("debug","reflector",d),offline:_.has("debug","offline",!1)},Je.offline&&je.showMessage(`${je.libName}: offline mode enabled, no multiuser`,{level:"warning"}),_.box){let u=new URL(_.box,window.location).href;u.endsWith("/")||(u+="/"),_.reflector=u+"reflector",_.files=u+"files"}}function vp(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Je||Jw(),typeof h=="string"&&(h=Object.fromEntries(h.split(",").map(d=>[d.replace(/^no/,""),!h.startsWith("no")])));for(const[d,u]of Object.entries(h))d in Je?Je[d]=u:je.showMessage(`${je.libName}: unknown debug option "${d}"`,{level:"warning",only:"once"});return Je}const Ps="wss://api.multisynq.io/depin",Gi=Ps;let Sn,jn,hi="reflector";const lc=_.nocheat,Hi=200,fi=[0],Ep=4096;let Sh;const Gr=new Qw;Gr.onerror=h=>console.error(`UploadWorker error: ${h.message}`);let c0=0;const Xi=new Set;function _u(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",d=null;for(const u of Xi)if(d||(d=u),u.id===h){d=u;break}if(d){const{appId:u,persistentId:b}=d.sessionSpec;return{appId:u,persistentId:b,key:d.key,uploadEncrypted:w=>d.uploadEncrypted(w),downloadEncrypted:w=>d.downloadEncrypted(w)}}return{}}Object.defineProperty(Kn,"controller",{get(){return this.controllers.values().next().value}}),Kn.controllers=Xi;class _h{constructor(){Je||Jw(),this.reset()}reset(){globalThis.CROQUETVM===this.vm&&delete globalThis.CROQUETVM,this.vm=null,this.session=null,this.connection=this.connection||new xu(this),this.networkQueue=[],this.reflectorTime=0,this.msPerTick=this.msPerTick||0,this.tickMultiplier=this.tickMultiplier||1,this.extrapolatedTimeBase=Date.now(),this.key=this.key||null,this.tove=this.tove||null,this.viewId=this.viewId||Math.floor(Math.random()*36**10).toString(36),this.viewDataEncrypted=this.viewDataEncrypted||null,this.timeline="",this.rejoinTimeout&&clearTimeout(this.rejoinTimeout),this.rejoinTimeout=0,this.sendBuffer=[],this.users=0,this.usersTotal=0,this.cpuTime=0,this.triggeringCpuTime=null,this.lastSnapshotRequest=0,this.synced=null,this.latency=0,this.latencyHistory&&(this.latencyHistory=[]),this.localTicker&&(globalThis.clearInterval(this.localTicker),delete this.localTicker),this.syncTimer&&(globalThis.clearTimeout(this.syncTimer),delete this.syncTimer),this.tuttiHistory=[],this.auditStats={lastUsers:-1,minUsers:-1,maxUsers:-1,payloadTally:0},this.lastAnimationEnd=0,this.animationGapCheck=[],this.rateLimitedSendTimes=[],this.rateLimitBuffer=[],this.rateLimitSoftWarned=!1,this.rateLimitBufferWarned=!1,this.rateLimitLastLogged=0,this.payloadSizeWarned=!1,Kn.removeAllSubscriptionsFor(this.viewId),Kn.addSubscription(this.viewId,"__views__",this.viewId,d=>Wm(`users now ${d}`),"oncePerFrameWhileSynced"),this.leaving||je.showSyncWait(!0)}get id(){return this.vm?this.vm.id:this.sessionSpec.id}get persistentId(){return this.sessionSpec.persistentId}get versionId(){return this.sessionSpec.codeHash}get extrapolatedTime(){return Date.now()-this.extrapolatedTimeBase}get viewOnly(){return this.sessionSpec.viewOnly}get backlog(){return this.vm?this.reflectorTime-this.vm.time:0}get starvation(){return Date.now()-this.lastReceived}get lag(){return this.vm?Math.max(0,this.extrapolatedTime-this.vm.time-this.msPerTick):0}get activity(){return Date.now()-this.lastSent}get viewed(){return!(!this.session||!this.session.view)}get connected(){return this.connection.connected}get shouldLeaveWhenDisconnected(){return this.leaving||!this.canRejoinSeamlessly||this.sessionSpec.rejoinLimit===0}get canRejoinSeamlessly(){return!!this.timeline}get migratingOldSnapshot(){if(!this.sessionSpec)return!1;const{codeHash:d,computedCodeHash:u}=this.sessionSpec;return d!==u}checkForConnection(d){this.connection.checkForConnection(d)}dormantDisconnect(){this.connected&&this.connection.dormantDisconnect()}async initFromSessionSpec(d){const{name:u,optionsFromUrl:b,persistentIdOptions:w,password:E,appId:T,apiKey:I,viewData:k,viewIdDebugSuffix:O,location:M}=d,re=T?`${T}/${u}`:u;this.key=ww(E,"",{keySize:8,hasher:mw.algo.SHA1,iterations:1}),O&&(this.viewId=this.viewId.replace(/_.*$/,"")+"_"+encodeURIComponent((""+O).slice(0,16)).replace(/[^a-z0-9]/gi,le=>`_${le==="%"?"":le.charCodeAt(0).toString(16).toUpperCase()}`));const se={...d.options};if(b)for(const le of b)le in _&&(se[le]=_[le]);const Y={},be={};for(const[le,Ue]of Object.entries(se))w?.includes(le)?Y[le]=Ue:be[le]=Ue;const Pe=Je.events||Je.publish;Pe&&(be.__debugEvents=!0),M&&(be.__location=!0);const oe=_.hashOverride||d.hashOverride,we=await async function(le,Ue){return ue(le+e(Ue))}(re,Y),{developerId:ve,token:xe}=await this.verifyApiKey(I,T,we),{id:ye,codeHash:ee,computedCodeHash:te}=await async function(le,Ue,Qe,ze,St){let kt,Ct;const zn=Ye[le];let Gn="";zn?(kt=zn.codeHashes,Ct=zn.computedCodeHash,Gn=" (code hashing from cache)"):(kt=await Promise.all(Ee),Ct=await ue([St,...kt].join("|")),Ye[le]={codeHashes:kt,computedCodeHash:Ct});const Xe=ze||Ct,_e=await ue(le+"|"+Ue+e(Qe)+Xe);if(wt()&&!qe.has(_e)){Ae||[...document.getElementsByTagName("meta")].find(Ze=>Ze.getAttribute("charset"))||console.warn(`${je.libName}: Missing <meta charset="..."> declaration. ${je.libName} model code hashing might differ between browsers.`),De[Ct].what="Version ID",De[le].what="Persistent ID",De[_e].what="Session ID",Xe!==Ct&&(kt.push(Ct),De[Ct].what="Computed Version ID (replaced by overrideHash)",De[Xe]={what:"Version ID (as specified by overrideHash)"});const Ie=[...kt,Xe,le,_e].map(Ze=>({hash:Ze,...De[Ze]}));console.log(`${je.libName}: Debug Hashing for session ${_e}${Gn}`,Ie),qe.add(_e)}return wt()||(De={}),{id:_e,persistentId:le,codeHash:Xe,computedCodeHash:Ct}}(we,ve,be,oe,Ys);this.tove||(this.tove=await this.encrypt(ye)),k&&!this.viewDataEncrypted&&(this.viewDataEncrypted=await this.encryptPayload(k)),Je.session&&console.log(`${je.libName} session "${re}":
        sessionId=${ye}${T?`
        persistentId=${we}`:""}
        versionId=${ee===te?ee:`${ee} (specified in hashOverride)
        versionId=${te} (computed)`}
        viewId=${this.viewId}`),this.eventRateLimit=d.eventRateLimit,this.eventHistoryLimit=this.eventRateLimit,this.eventMaxBundles=this.eventRateLimit,this.sessionSpec={...d,options:se,name:re,id:ye,persistentId:we,developerId:ve,token:xe,codeHash:ee,computedCodeHash:te,debugEvents:Pe};const{msPerTick:ie,multiplier:ce}=this.getTickAndMultiplier();this.msPerTick=ie,this.tickMultiplier=ce,this.setUpActivityChecks()}async establishSession(){const{id:d,persistentId:u,codeHash:b}=this.sessionSpec;this.sessionSpec.snapshot={id:d,time:0,meta:{id:d,persistentId:u,codeHash:b,created:new Date().toISOString()}};const w=new Promise(E=>{this.sessionSpec.sessionJoined=E});this.checkForConnection(!1),Je.session&&console.log(d,"waiting for join and SYNC"),await w,this.sessionSpec.sessionJoined=()=>{},this.syncCompleted=!0}getBackend(d){if(Je.offline)return{apiKey:"none",signServer:"none",reflector:"none"};if(_.box||_.reflector)return{apiKey:"none",signServer:"none",reflector:_.reflector};const u={};for(const k of d.split(",")){const O=k.lastIndexOf(":"),M=k[O===-1?0:O+1];if(!M?.match(/^[12]$/))throw Error("Invalid API key: "+k);if(M in u)throw Error("Duplicate API key versions");u[M]={key:O===-1?k:k.slice(O+1),backend:O===-1?"":k.slice(0,O)}}let b=!u[1];b&&u[2].backend&&(b=u[2].backend),function(k){Sn===void 0&&(Sn="depin"in _?_.depin:k,Sn&&!Je.offline?(jn=Sn===!0?Gi:Sn==="prod"?Ps:Sn==="dev"?"wss://api.multisynq.dev/depin":Sn==="local"?"ws://localhost:8787":Sn,jn.endsWith("/")&&(jn=jn.slice(0,-1)),jn=jn.replace(/^http(s):/,"ws$1:"),jn.startsWith("ws")||(jn=(en||window.location.protocol!=="https:"?"ws://":"wss://")+jn),hi="synchronizer",Je.session&&console.log(`DEPIN_API=${jn}`)):Sn=!1)}(b);const w=u[Sn?2:1];if(!w)throw Error(`No ${Sn?"Multisynq":"Croquet"} API key provided`);const E=w.key,T=_.backend||w.backend,I=_.reflector?.includes("/");return T==="none"?{apiKey:E,signServer:"none",reflector:"overridden"}:Sn?{apiKey:E,signServer:`${jn.replace(/^ws/,"http")}/clients`,reflector:"depin"}:{apiKey:E,signServer:"https://api.croquet.io/sign",reflector:I?"overridden":"wss://api.croquet.io/reflector/v1"}}async verifyApiKey(d,u,b){const{signServer:w,apiKey:E}=this.getBackend(d);if(w==="none")return{developerId:"unknown_dev_id"};try{const I=await this.fetchWithRetries("verifying API key",[403],2,()=>fetch(`${w}/join?meta=login`,{method:"GET",mode:"cors",headers:{"X-Croquet-Auth":E,"X-Croquet-App":u,"X-Croquet-Id":b,"X-Croquet-Version":Ys,"X-Croquet-Path":new URL(je.referrerURL()).pathname},referrer:je.referrerURL(),referrerPolicy:"no-referrer-when-downgrade"})),k=await I.json(),{developerId:O,error:M}=k;if(M)throw Error(M);return Je.session&&console.log(`${Sn?"Multisynq":"Croquet"}: verified API key for developer ${O}`),k}catch(T){throw Error(`${Sn?"Multisynq":"Croquet"} API key validation failed for "${E}": ${T.message}`)}}async fetchWithRetries(d,u,b,w){const E=1+b;let T,I=0;for(;;){let k,O;try{if(k=await w(),k.ok)return k}catch(Y){O=Y}I++;let M="";const re=k&&u.includes(k.status);if(re?M="fatal ":I===E&&(M="final "),T=k?`${M}status ${k.status} ${k.statusText} - "${await k.text()}"`:`${M}error "${O?.message}"`,I===E||re)break;const se=I===1?100:I===2?1e3:5e3;console.warn(`${T} while ${d}; retrying in ${se}ms`),await new Promise(Y=>{setTimeout(Y,se)})}throw console.warn(`${T} while ${d}; giving up`),Error(T)}lastKnownTime(d){return Math.max(d.time,d.externalTime)}takeSnapshot(){const d=this.vm.snapshot(),u=this.lastKnownTime(d),b=d.externalSeq;return d.meta={...this.sessionSpec.snapshot.meta,options:this.sessionSpec.options,time:u,seq:b,date:new globalThis.CroquetViewDate().toISOString(),host:en?"localhost":window.location.hostname,sdk:Ys},delete d.meta.hash,d}takeSnapshotHandleErrors(){let d,u,b;try{d=Kt.begin("snapshot"),b=this.takeSnapshot()}catch(w){return Br("snapshot",w),null}finally{u=Kt.end("snapshot")-d}return Je.snapshot&&console.log(this.id,`snapshot taken in ${Math.ceil(u)}ms`),b}setDebug(d){return vp(d)}requestDebugSnapshot(){vp("snapshot"),this.triggeringCpuTime=1e-10,this.scheduleSnapshot(this.viewId)}scheduleSnapshot(){let d=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!this.connected||!this.vm||this.viewOnly)return;const u=this.vm.time,b=u-this.vm.lastSnapshotPoll;if(b<5e3&&!d)return void(Je.snapshot&&console.log(`not requesting snapshot poll (${b}ms since poll scheduled)`));if(this.migratingOldSnapshot)return void alert("Snapshot is due but hashOverride is set. Ignoring.");if(d){const E=Object.keys(this.vm.views);if(E.sort(),d!==this.viewId&&E[0]!==this.viewId&&E[1]!==this.viewId&&E[2]!==this.viewId)return void(Je.snapshot&&console.log("not forcing snapshot poll (not one of the three)"));Je.snapshot&&console.log("forcing snapshot poll")}const w=new Hr(u,0,"_","handlePollForSnapshot",[]);this.sendTagged(w,{debounce:5e3,msgID:"pollForSnapshot"}),Je.snapshot&&console.log(this.id,`requesting snapshot poll via ${hi}`)}handlePollForSnapshot(d){if(this.synced!==!0||this.viewOnly)return void(this.triggeringCpuTime=null);const u=this.triggeringCpuTime||this.cpuTime;let b,w,E;this.triggeringCpuTime=null,this.cpuTime=0;try{b=Kt.begin("snapshot"),w={cpuTime:u,hash:this.vm.getSummaryHash(),viewId:this.viewId}}catch(T){return void Br("snapshot",T)}finally{E=Kt.end("snapshot")-b,this.cpuTime-=E}Je.snapshot&&console.log(this.id,`Summary hashing took ${Math.ceil(E)}ms`),queueMicrotask(()=>this.pollForSnapshot(d,w))}pollForSnapshot(d,u){u.cpuTime+=Math.random(),Je.snapshot&&console.log(this.id,"sending snapshot vote",u),this.sendTutti({time:d,topic:"snapshot",data:u,tallyTarget:["handleSnapshotVote"]})}handleSnapshotVote(d){const{tally:u}=d;Je.snapshot&&console.log(this.id,"received snapshot votes",u);const{numberOfGroups:b,shouldUpload:w,dissidentFlag:E}=this.analyzeTally(u,"cpuTime");if(b>1){this.diverged=!0;const T=this.vm.diverged?this.vm.diverged.size:0;console.error(this.id,`Session diverged (#${T})! Snapshots fall into ${b} groups`)}if(this.synced!==!0)Je.snapshot&&console.log(this.id,"Ignoring snapshot vote during sync");else if(w){const T={...this.auditStats},I=this.takeSnapshotHandleErrors();I&&queueMicrotask(()=>this.uploadSnapshot(I,T,E))}}analyzeTally(d,u){let b=!1,w=null;const E=[],T={};let I=null;Object.keys(d).forEach((se,Y)=>{const be=JSON.parse(se);E.push(be);const{hash:Pe,viewId:oe}=be;oe===this.viewId&&(I=Y),T[Pe]||(T[Pe]=[]),T[Pe].push(Y)});const k=Object.keys(T),O=k.length;let M=0;O>1&&(k.sort((se,Y)=>T[Y].length-T[se].length),T[k[0]].length===T[k[1]].length&&(Je.snapshot&&console.log(this.id,"Deciding consensus by tie-break"),k[1]<k[0]&&(M=1)));const re=k[M];if(I!==null){const se=E[I].hash,Y=T[se];Y.length>1&&Y.sort((be,Pe)=>E[be][u]-E[Pe][u]),Y[0]===I&&(b=!0,se!==re&&(w={groupVotes:Y.length,allVotes:E.length}))}return{numberOfGroups:O,shouldUpload:b,dissidentFlag:w}}snapshotPath(d,u,b){const w=Math.ceil(d).toString().padStart(10,"0"),{appId:E,persistentId:T,codeHash:I,apiKey:k}=this.sessionSpec;return k?`apps/${E}/snap/${I}/${T}.${this.id}/${w}_${u}.${b}`:`snapshots/${this.id}/${w}_${u}-${b}.snap`}hashSnapshot(d){return d.meta.hash?d.meta.hash:(d.meta.hashPromise||(d.meta.hashPromise=new Promise(u=>{const b={...d};delete b.meta,ue(JSON.stringify(b)).then(w=>{d.meta.hash=w,delete d.meta.hashPromise,u(w)})})),d.meta.hashPromise)}uploadServer(d){if(typeof _.files=="string"){let w=new URL(_.files,window.location).href;return w.endsWith("/")&&(w=w.slice(0,-1)),{url:w,apiKey:null}}const{apiKey:u,signServer:b}=this.getBackend(d);if(b==="none"&&!Je.offline)throw Error("no file server configured");return{url:b,apiKey:u}}async uploadSnapshot(d,u){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;await this.hashSnapshot(d);const w=Kt.begin("snapshot"),E=JSON.stringify(d),T=Kt.end("snapshot")-w;Je.snapshot&&console.log(this.id,`snapshot stringified (${E.length} bytes) in ${Math.ceil(T)}ms`);const{time:I,seq:k,hash:O}=d.meta,M=this.connection.socket;try{const re=await this.uploadEncrypted({content:E,path:this.snapshotPath(I,k,O),key:this.key,gzip:!0,debug:Je.snapshot,what:"snapshot"});return this.connection.socket!==M?(console.warn(this.id,"Controller was reset while trying to upload snapshot"),!1):(this.announceSnapshotUrl(I,k,O,re,u,b),!0)}catch{return console.error(this.id,"Failed to upload snapshot"),!1}}announceSnapshotUrl(d,u,b,w,E,T){if(Je.snapshot){let I=`time: ${d}, seq: ${u}, hash: ${b}`;T&&(I+=", as dissident; "+JSON.stringify(T)),console.log(this.id,`sending snapshot url to ${hi} (${I}): ${w}`)}try{this.connection.send(JSON.stringify({id:this.id,action:"SNAP",args:{time:d,seq:u,hash:b,url:w,auditStats:E,dissident:T}}))}catch(I){console.error("ERROR while sending",I)}this.diverged&&this.vm.publishFromView("__VM__","__diverged__",{key:`@${d}#${u}`,url:w,dissident:T})}async diffDivergedSnapshots(d){const u=await Promise.all(d.map(w=>this.downloadEncrypted({url:w,gzip:!0,key:this.key,debug:Je.snapshot,json:!0,what:"diverged snapshot"})));for(const w of u)delete w.meta;let b=0;(function w(E,T,I){if(typeof E!=typeof T)console.log(`${I} diverged (${typeof E} vs ${typeof T}):`,E,T),b++;else if(Array.isArray(E)!==Array.isArray(T))console.log(`${I} diverged (array vs object):`,E,T),b++;else if(typeof E=="object"){const k=E?Object.keys(E):[],O=T?Object.keys(T):[],M=k.filter(se=>!O.includes(se)),re=O.filter(se=>!k.includes(se));(M.length||re.length)&&(console.log(`${I} diverged (keys mismatch):`,M,re),b++);for(const se of k)O.includes(se)&&w(E[se],T[se],`${I}${dc(E,se)}`)}else E!==T&&(console.log(`${I} diverged (value mismatch):`,E,T),b++)})(u[0],u[1],"CROQUETVM"),b?console.log(`Total ${b} differences between diverged snapshots:`,u.slice(0,2)):console.log("... but diverged snapshots are identical?!")}async downloadEncrypted(d){let{url:u,gzip:b,key:w,debug:E,json:T,what:I}=d;u.startsWith(ls)&&(u=u.replace(ls,So));const k=u.startsWith("offline:"),O=k?1:3;let M=Date.now();const re=await this.fetchWithRetries(`fetching ${I}`,[],O,()=>k?this.fetchOffline(u,I,E):fetch(u,{method:"GET",mode:"cors",referrer:je.referrerURL()})),se=await re.arrayBuffer();E&&console.log(this.id,`${I} fetched (${se.byteLength} bytes) in ${-M+(M=Date.now())}ms`),Kt.addNetworkTraffic(`${I}_in`,se.byteLength);const Y=this.decryptBinary(se,w);E&&console.log(this.id,`${I} decrypted (${Y.length} bytes) in ${-M+(M=Date.now())}ms`);const be=b?Yw.inflate(Y):Y;return E&&b&&console.log(this.id,`${I} inflated (${be.length} bytes) in ${-M+(M=Date.now())}ms`),T?JSON.parse(new TextDecoder().decode(be)):be}async fetchOffline(d,u,b){const w=++c0;return new Promise((E,T)=>{const I=en?"addListener":"addEventListener",k=en?"removeListener":"removeEventListener";Gr.postMessage({job:w,cmd:"getOfflineFile",url:d,id:this.id,what:u,debug:b,offline:Je.offline});const O=M=>{if(w!==M.data.job)return;const{ok:re,status:se,statusText:Y,body:be,bytes:Pe}=M.data;Kt.addNetworkTraffic(`${u}_out`,Pe),Gr[k]("message",O),re?E({arrayBuffer:()=>be}):T(Error(`${se}: ${Y}`))};try{Gr[I]("message",O)}catch(M){console.log("failed to add listener",M)}})}async uploadEncrypted(d){let{content:u,path:b,key:w,gzip:E,keep:T,debug:I,what:k}=d;const O=typeof u=="string"?new TextEncoder().encode(u).buffer:u,M=T?void 0:[O],re=typeof w=="string"?w:Vs.stringify(w),{apiKey:se,appId:Y,persistentId:be}=this.sessionSpec,Pe=++c0;return new Promise((oe,we)=>{const ve=en?"addListener":"addEventListener",xe=en?"removeListener":"removeEventListener";Gr.postMessage({job:Pe,cmd:"uploadEncrypted",server:this.uploadServer(se),path:b,buffer:O,keyBase64:re,gzip:E,referrer:je.referrerURL(),id:this.id,appId:Y,persistentId:be,CROQUET_VERSION:Ys,debug:I,what:k,offline:Je.offline},M);const ye=ee=>{if(Pe!==ee.data.job)return;const{url:te,ok:ie,status:ce,statusText:le,bytes:Ue}=ee.data;Kt.addNetworkTraffic(`${k}_out`,Ue),Gr[xe]("message",ye),ie?oe(te):we(Error(`${ce}: ${le}`))};try{Gr[ve]("message",ye)}catch(ee){console.log("failed to add listener",ee)}})}persistentPath(d){const{appId:u,persistentId:b}=this.sessionSpec;return`apps/${u}/${b}/save/${d}`}pollForPersist(d,u,b,w,E){if(!this.synced)return;if(!this.sessionSpec.appId)throw Error("Persistence API requires appId");if(Je.offline)return;const T={viewId:this.viewId,hash:w,ms:E+.001*Math.random()},I={persistTime:u,persistentHash:w,persistentString:b};Je.snapshot&&console.log(this.id,`sending persistence vote for time @${u}`,T),this.sendTutti({time:d,topic:"persist",data:T,localContext:I,tallyTarget:["handlePersistVote"]})}async handlePersistVote(d){const{tally:u,localContext:b}=d;if(Je.snapshot){const M=b?`for time @${b.persistTime}`:"that we didn't participate in";console.log(this.id,`received persistence vote ${M}`,u)}const{numberOfGroups:w,shouldUpload:E,dissidentFlag:T}=this.analyzeTally(u,"ms");if(w>1&&console.warn(this.id,`Persistence records fall into ${w} groups`),!E||!b)return;const{persistTime:I,persistentHash:k,persistentString:O}=b;this.doPersist(I,O,k,T)}async doPersist(d,u,b,w){const E=await this.uploadEncrypted({path:this.persistentPath(b),content:u,key:this.key,gzip:!0,debug:Je.snapshot,what:"persistence"});if(Je.snapshot){const T=w?` (as dissident; ${JSON.stringify(w)})`:"";console.log(this.id,`sending persistent data url to ${hi}${T}: ${E}`)}try{this.connection.send(JSON.stringify({id:this.id,action:"SAVE",args:{persistTime:d,url:E,dissident:w}}))}catch(T){console.error("ERROR while sending",T)}}async forcePersist(d,u,b){this.didForcePersist?console.warn(this.id,"forcePersist called more than once, ignoring"):(console.warn(this.id,`forcePersist, will upload ${u.length} bytes`),_.forcePersist==="alert"&&confirm("forcePersist triggered. Do it?"),await this.doPersist(d,u,b),console.warn(this.id,"forcePersist completed"),this.didForcePersist=!0)}convertReflectorMessage(d){let u="noop",b=[];switch(d[2].what){case"users":{const{joined:E,left:T,active:I,total:k}=d[2];this.users=I,this.usersTotal=k;const O="__VM__",M="__peers__",re={entered:E||[],exited:T||[],count:I,total:k};for(const se of re.entered.concat(re.exited))se.data&&(se.data=this.decryptPayload(se.data));u="publishFromModelOnly",b=[O,M,re],Kn.handleEvent(this.viewId+":__views__",re.count);break}case"tally":{const{tuttiSeq:E,tuttiKey:T,tally:I,tallyTarget:k,missingClients:O}=d[2];(Je.messages||Je.snapshot)&&O&&console.log(`${O} ${O===1?"client":"clients"} failed to participate in tally ${T||E}`),u="handleTuttiResult",b=[{tuttiSeq:E,tuttiKey:T,tally:I,tallyTarget:k}];break}case"audit":{const E=d[0];Je.messages&&console.log(`audit request at time ${E}`),u="handleAuditRequest",b=[{time:E}];break}}const w=new Hr(0,0,"_",u,b);d[2]=w.asState()[2]}handleTuttiResult(d){const{tuttiSeq:u,tuttiKey:b,tally:w,tallyTarget:E}=d,T=b?re=>re.tuttiKey===b:re=>re.dummyTuttiSeq===u,I=this.tuttiHistory.findIndex(T),k=I!==-1&&this.tuttiHistory.splice(I,1)[0];let O=null,M=null;if(k&&(O=k.payload,M=k.localContext),E){const[re,...se]=E,Y=[...se,{tally:w,localPayload:O,localContext:M}],be=new Hr(0,0,"_",re,Y);this.vm.verifyExternal(be),be.executeOn(this.vm,!0)}}handleAuditRequest(d){const{time:u}=d;this.vm.time!==u&&console.error(`time ${this.vm.time} cf audit time ${u}`);const{auditStats:b}=this,{lastUsers:w,minUsers:E,maxUsers:T,payloadTally:I,sessionTimeAtDispatch:k}=b;if(b.payloadTally=0,this.vm.time>k&&(b.minUsers=b.maxUsers=w),!this.fastForwardHandler){const O=Kt.networkTraffic.audit_reflector_in||0,M=Kt.networkTraffic.audit_reflector_out||0;Kt.resetAuditStats();const{clientId:re}=this.connection.socket;queueMicrotask(()=>{Je.session&&console.log(this.id,`handling audit request at ${u} after ${O} bytes in, ${M} out`);const se=encodeURIComponent(JSON.stringify({time:u,clientId:re,lastUsers:w,minUsers:E,maxUsers:T,payloadTally:I,bytesIn:O,bytesOut:M})),Y=`${jn}/clients/report?session=${this.id}&stats=${se}`.replace("ws","http");fetch(Y,{mode:"no-cors"})})}}handleUserTotalForAccounting(d){if(Sn){const{auditStats:u}=this;if(u.lastUsers=d,this.vm.time<=u.sessionTimeAtDispatch)return;(u.minUsers===-1||d<u.minUsers)&&(u.minUsers=d),d>u.maxUsers&&(u.maxUsers=d)}}messageSizeForAccounting(d){let u=typeof d[2]=="string"?d[2].length:d[2]._size||0;return u+=16,u}async receive(d,u){const b=this.lastReceived;switch(this.lastReceived=this.connection.lastReceived,d){case"SYNC":{this.syncReceived=!0,this.clearSyncReceiptTimeout(),Xi.add(this);const{progressReporter:w}=this.sessionSpec,E=w||(()=>{}),{messages:T,url:I,persisted:k,time:O,seq:M,snapshotSeq:re,tove:se,reflector:Y,flags:be,auditStatsInitializer:Pe}=u;if(se&&se!==this.tove)try{if(this.decrypt(se)!==this.id)throw Error("wrong sessionId in tove?!")}catch(ie){return this.connection.closeConnectionWithError("SYNC",Error(`session password check: ${ie.message}`),4200),void E(-1)}const oe=u.timeline;this.flags=be||{};const we=k?"persistence":"snapshot";Je.session&&console.log(this.id,`received SYNC from ${Y} ${hi}: time ${O}, ${T.length} messages, ${we} ${I||"<none>"}`);let ve=!!this.vm;if(ve){this.networkQueue.length=0;const ie=!!oe&&oe===this.timeline,ce=T[0],le=M,Ue=re!==void 0?re:ce?ce[1]:le;Je.messages&&console.log(this.id,`rejoin: we have #${this.vm.seq} SYNC has #${Ue}-#${le}`);let Qe=ie&&Iu(Ue,this.vm.seq)&&Iu(this.vm.seq,le)&&O>=this.reflectorTime;if(Qe){let ze=0;ce&&Iu(ce[1],this.vm.seq)&&(ze=this.vm.seq-ce[1]+1>>>0);for(let St=ze;Qe&&St<T.length;St++){const kt=T[St][2];typeof kt!="string"&&kt.what==="users"&&kt.left&&kt.left.includes(this.viewId)&&(Je.session&&console.log(this.id,`${hi} reports that this view has left`),Qe=!1)}Qe&&ze&&(Je.messages&&console.log(this.id,`rejoin: discarding ${ze} messages #${ce[1]}-#${this.vm.seq}`),T.splice(0,ze))}if(Qe){if(this.sendBuffer.length>0){const ze=this.sendBuffer;this.sendBuffer=[],Je.session&&console.log(this.id,`rejoin: sending ${ze.length} messages buffered while disconnected`);for(const St of ze)St()}}else Je.session&&console.log(this.id,"cannot rejoin seamlessly; rebooting model/view"),this.leave(!0),ve=!1}const xe=this.networkQueue;this.networkQueue=[];for(const ie of T){const ce=this.messageSizeForAccounting(ie);if(typeof ie[2]!="string")this.convertReflectorMessage(ie);else try{ie[2]=this.decryptPayload(ie[2])[0]}catch(le){return this.connection.closeConnectionWithError("SYNC",Error(`session password decrypt: ${le.message}`),4200),void E(-1)}Je.messages&&console.log(this.id,"received in SYNC "+JSON.stringify(ie)),this.networkQueue.push([ie,ce])}if(this.networkQueue.push(...xe),O>this.reflectorTime&&this.timeFromReflector(O,"reflector"),ve)return Je.session&&console.log(this.id,"seamless rejoin successful"),void(this.syncCompleted=!0);let ye;if(this.timeline=oe||"",Je.snapshot&&I&&console.log(this.id,`fetching ${we} ${I}`),I)try{ye=await this.downloadEncrypted({url:I,gzip:!0,key:this.key,debug:Je.snapshot,json:!0,what:we})}catch(ie){return this.connection.closeConnectionWithError("SYNC",Error(`failed to fetch ${we}: ${ie.message}`),4200),void E(-1)}if(!this.connected)return console.log(this.id,"disconnected during SYNC"),void E(-1);if(k){if(this.migratingOldSnapshot)throw Error("hashOverride is enabled but got persisted data instead of snapshot");this.install(ye)}else ye&&(this.sessionSpec.snapshot=ye),this.install();Pe&&(Je.session&&console.log(this.id,`installing audit stats: ${JSON.stringify(Pe)}`),this.auditStats=Pe),Je.session&&console.log(this.id,`fast-forwarding from ${Math.round(this.vm.time)} to at least ${O}`);const ee=this.vm.time,te=await new Promise(ie=>{const{port1:ce,port2:le}=new MessageChannel;ce.onmessage=()=>{let Ue=!0;if(this.vm)if(this.vm.time===this.reflectorTime)this.viewId in this.vm.views&&(E(1),ie(!0),Ue=!1);else{const Qe=(this.vm.time-ee)/(this.reflectorTime-ee);E(Qe)}else Je.session&&console.log(this.id,"disconnected during SYNC fast-forwarding"),E(-1),ie(!1),Ue=!1;Ue&&this.stepSession("fastForward",{budget:Hi})},this.fastForwardHandler=Ue=>{this.connected&&this.vm?Ue==="error"?(E(-1),ie(!1)):le.postMessage("tick"):(console.log(this.id,"disconnected during SYNC fast-forwarding"),E(-1),ie(!1))},queueMicrotask(()=>this.stepSession("fastForward",{budget:Hi}))});return delete this.fastForwardHandler,void(te&&(Je.session&&console.log(this.id,`fast-forwarded to ${Math.round(this.vm.time)}`),this.vm.diverged&&je.showMessage(`${je.libName}: session had diverged. Try CROQUETVM.debugDiverged()`,{level:"warning",only:"once"}),this.sessionSpec.sessionJoined()))}case"RECV":{const w=u;w[1]>>>=0;const E=this.messageSizeForAccounting(w);if(typeof w[2]!="string")Je.messages&&console.log(this.id,"received META "+JSON.stringify(w)),this.convertReflectorMessage(w),Je.messages&&console.log(this.id,"converted to "+JSON.stringify(w));else try{const[I,k,O]=this.decryptPayload(w[2]);w[2]=I,k===this.viewId&&this.addToStatistics(O,this.lastReceived),Je.messages&&console.log(this.id,"received "+JSON.stringify(w))}catch(I){return void this.connection.closeConnectionWithError("RECV",Error(`session password decrypt: ${I.message}`),4200)}let T;return this.networkQueue.push([w,E]),this.flags.rawtime&&(T=w[w.length-1]),this.timeFromReflector(w[0],"reflector",T),void(this.simulateIfNeeded&&queueMicrotask(()=>this.simulateIfNeeded()))}case"TICK":{if(!this.vm)return;const w=typeof u=="number"?u:u.time;if(Je.ticks){const E=b&&this.lastReceived-b-this.msPerTick*this.tickMultiplier|0,T=w-this.vm.time;console.log(this.id,`received TICK ${w} ${Math.abs(E)<5?"on time":E<0?"early":"late"} (${T} ms, jitter ${E>0?"+":""}${E} ms)`)}return this.timeFromReflector(w,"reflector"),this.tickMultiplier>1&&this.multiplyTick(w),void(this.simulateIfNeeded&&queueMicrotask(()=>this.simulateIfNeeded()))}case"INFO":{const{msg:w,options:E}=u,T=Sn?"Multisynq Synchronizer":"Croquet Reflector";return void je.showMessage(`${T}: ${w}`,E)}case"REQU":return Je.snapshot&&console.log(`received REQU (snapshot request) from ${hi}`),void(this.reflectorNeedsSnapshot=!0);case"RECONNECT":this.connection.socket?.synchronizerDisconnected(4003,"told to reconnect");break;default:console.warn("Unknown action:",d,u)}}install(d){const u=Date.now(),{snapshot:b,initFn:w,options:E,debugEvents:T}=this.sessionSpec,[I,k]=b.models?["deserializ","snapshot"]:["initializ","root model"];Je.session&&console.log(this.id,`${I}ing ${k}`);let O=new ks(b,T,()=>{try{return w(E,d)}catch(re){throw Br("init",re,"fatal"),re}},this.migratingOldSnapshot);if((Je.session||Je.snapshot&&b.models)&&console.log(this.id,`${k} ${I}ed in ${Date.now()-u}ms`),Je.initsnapshot&&!b.models){Je.snapshot&&console.log(this.id,"exercising snapshot and restore after init()");let re=null;try{re=JSON.stringify(O.snapshot())}catch(se){throw Br("initial snapshot",se,"fatal"),se}try{O=new ks(JSON.parse(re),T,()=>w(E))}catch(se){throw Br("initial snapshot resume",se,"fatal"),se}}const M=this.lastKnownTime(O);this.reflectorTime=Math.max(this.reflectorTime,M),this.setVM(O)}setVM(d){this.vm=d,this.vm.controller=this}sendJoin(){this.syncReceived=!1,this.syncCompleted=!1,delete this.fastForwardHandler,this.rejoinTimeout&&(clearTimeout(this.rejoinTimeout),this.rejoinTimeout=0),Je.session&&console.log(this.id,"Controller sending JOIN");const{tick:d,delay:u}=this.getTickAndMultiplier(),{name:b,codeHash:w,appId:E,apiKey:T,persistentId:I,developerId:k,heraldUrl:O,rejoinLimit:M,autoSleep:re,computedCodeHash:se,location:Y,flags:be}=this.sessionSpec,Pe=Sn?"hiddenName":b,oe=Sn?"hiddenApiKey":this.getBackend(T).apiKey,we=Sn?"hiddenAppId":E,ve=Sn?"hiddenUrl":je.referrerURL(),xe=this.viewDataEncrypted?{id:this.viewId,data:this.viewDataEncrypted}:Y?[this.viewId]:this.viewId,ye={name:Pe,apiKey:oe,appId:we,url:ve,persistentId:I,sdk:Ys,developerId:k,version:1,user:xe,location:Y,ticks:{tick:d,delay:u},dormantDelay:re,tove:this.tove,codeHash:w};O&&Object.assign(ye,{heraldUrl:O}),M&&Object.assign(ye,{leaveDelay:M+250}),se!==w&&Object.assign(ye,{computedCodeHash:se}),be&&Object.assign(ye,{flags:be}),this.connection.send(JSON.stringify({id:this.id,action:"JOIN",args:ye})),this.syncReceiptTimeout=setTimeout(()=>{delete this.syncReceiptTimeout,this.syncReceived||this.connection.closeConnectionWithError("JOIN",Error("Initial reflector connection timed out"))},5e3)}clearSyncReceiptTimeout(){this.syncReceiptTimeout&&(clearTimeout(this.syncReceiptTimeout),delete this.syncReceiptTimeout)}connectionInterrupted(){this.syncReceived&&(this.shouldLeaveWhenDisconnected?this.leave():this.rejoinTimeout||(this.rejoinTimeout=setTimeout(()=>{this.leaving?Je.session&&console.log(this.id,"abandoning rejoin; session is defunct"):(Je.session&&console.log(this.id,"rejoin timed out"),this.rejoinTimeout=0,this.leave())},this.sessionSpec.rejoinLimit)))}leave(){let d=arguments.length>0&&arguments[0]!==void 0&&arguments[0];const{rebootModelView:u}=this.sessionSpec;if(this.reset(),Je.session&&console.log(this.id,`resetting ${d?"(but keeping)":"and discarding"} controller`),d||Xi.delete(this),!this.sessionSpec)throw Error("do not discard sessionSpec!");u()}async encrypt(d){const u=de.random(16),b=sh.encrypt(d,this.key,{iv:u}),w=ih(d,this.key);return`${Vs.stringify(u)}${Vs.stringify(w)}${b}`}get deprecatedDefaultKey(){return Sh||(Sh=ww("THIS SHOULDN'T BE IN LOGS","",{keySize:8,hasher:mw.algo.SHA1,iterations:1})),Sh}decrypt(d){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.key;const b=Vs.parse(d.slice(0,24)),w=Vs.parse(d.slice(24,68)),E=d.slice(68),T=sh.decrypt(E,u,{iv:b});let I="";try{I=Jd.stringify(T)}catch{}const k=ih(I,this.key);if(this.compareHmacs(w.words,k.words))return I;if(u!==this.deprecatedDefaultKey)return this.decrypt(d,this.deprecatedDefaultKey);throw Error("Decryption error")}decryptBinary(d,u){const b=new TextDecoder().decode(new Uint8Array(d,0,4));let w,E,T,I,k;switch(typeof u=="string"&&(u=Vs.parse(u)),b){case"CRQ0":w=new TextDecoder().decode(d),E=Vs.parse(w.slice(4,28)),T=Vs.parse(w.slice(28,72)),I=w.slice(72),k=sh.decrypt(I,u,{iv:E});break;case"CRQ1":w=new Uint8Array(d),E=de.create(w.subarray(4,20)),T=de.create(w.subarray(20,52)),I=de.create(w.subarray(52)),k=sh.decrypt({ciphertext:I},u,{iv:E});break;default:throw Error(`${this.id} unknown encryption version ${b}`)}k.clamp();const O=ih(k,u);if(this.compareHmacs(T.words,O.words))return $e(k);if(u!==this.deprecatedDefaultKey)return this.decryptBinary(d,this.deprecatedDefaultKey);throw Error("Decryption error")}async encryptMessage(d,u,b){const[w,E,T]=d.asState();return[w,E,await this.encryptPayload([T,u,b])]}async encryptPayload(d){return this.encrypt(JSON.stringify(d))}decryptPayload(d){return JSON.parse(this.decrypt(d))}compareHmacs(d,u){let b=d.length===u.length;for(let w=0;w<d.length;w++)d[w]!==u[w]&&(b=!1);return b}sendMessage(d){if(this.viewOnly||!this.vm)return;const u=d.asState()[2].length;if(u>16384)return void console.warn(this.id,`Message with payload of ${u} bytes exceeds maximum 16384 and will not be sent to ${hi}.`);!this.payloadSizeWarned&&u>Ep&&(console.log(this.id,`Message with payload of ${u} bytes being sent to ${hi}. Maximum recommended is 4096.`),this.payloadSizeWarned=!0);const b=Date.now(),w=this.rateLimitedSendTimes,E=this.rateLimitBuffer;if(Kt.perSecondTally({requestedMessages:1}),E.length)return void this.addToRateLimitBuffer(d);let T=0;if(w.length&&this.synced){const I=w[w.length-1],k=1e3/this.eventRateLimit-(b-I);k>1&&(T=Math.ceil(k))}T?(this.addToRateLimitBuffer(d),setTimeout(()=>this.serviceRateLimitBuffer(),T)):(this.recordRateLimitedSend(b),this.socketSendMessage(d),Kt.perSecondTally({sentSingleMessages:1,sentMessagesTotal:1,sentPayloadTotal:u}))}recordRateLimitedSend(d){const u=this.rateLimitedSendTimes;!this.synced&&u.length&&u[u.length-1]===d||(u.push(d),u.length>this.eventHistoryLimit&&u.shift()),!this.rateLimitSoftWarned&&u.length===this.eventHistoryLimit&&d-u[0]<1010&&(console.warn(this.id,`Sends to ${hi} are at or above recommended limit of ${this.eventHistoryLimit} within one second. Events will be bundled as necessary to keep to the limit.`),this.rateLimitSoftWarned=!0)}addToRateLimitBuffer(d){Kt.perSecondTally({bundledMessages:1});const u=Date.now(),b=d.asState(),w=b[2].length,E=this.rateLimitBuffer;if(E.length){const I=E[E.length-1],{msgStates:k,totalPayload:O}=I;if(O<Ep)return k.push({msgState:b,bufferTime:u}),void(I.totalPayload+=w)}Kt.perSecondTally({newBundles:1}),E.push({msgStates:[{msgState:b,bufferTime:u}],totalPayload:w});const T=E.length;Je.session&&T%5==0&&T!==this.rateLimitLastLogged&&(console.log(this.id,`SEND rate-limit buffer grew to ${T} event bundles (max ${this.eventMaxBundles})`),this.rateLimitLastLogged=T),T>this.eventMaxBundles?(console.error(this.id,"Disconnecting after overflow of SEND rate-limit buffer."),this.connection.closeConnectionWithError("SEND",Error("Send rate exceeded"),4200)):!this.rateLimitBufferWarned&&T>this.eventMaxBundles/2&&(console.warn(this.id,"SEND rate-limit buffer is 50% full. If send rate does not drop, the app will be disconnected."),this.rateLimitBufferWarned=!0)}serviceRateLimitBuffer(){if(!this.connected)return;const d=this.rateLimitBuffer;if(!d.length)return;const u=Date.now(),b=1e3/this.eventRateLimit,w=this.rateLimitedSendTimes;if(w.length){const M=w[w.length-1];if(b-(u-M)>0)return}const E=d.shift(),{msgStates:T,totalPayload:I}=E,k=[];let O=0;if(T.forEach(M=>{k.push(M.msgState),O+=u-M.bufferTime}),k.length===1){const M=Hr.fromState(k[0],this.vm);this.socketSendMessage(M)}else{const M=new Hr(this.vm.time,0,"_","handleBundledEvents",[k]);this.socketSendMessage(M)}if(this.recordRateLimitedSend(u),Kt.perSecondTally({sentBundles:1,sentMessagesTotal:T.length,sendDelay:O,sentBundlePayload:I,sentPayloadTotal:I}),Je.session&&this.connected){const M=d.length;M&&M%5==0&&M!==this.rateLimitLastLogged&&(console.log(this.id,`SEND rate-limit buffer dropped to ${M} event bundles`),this.rateLimitLastLogged=M)}d.length&&setTimeout(()=>this.serviceRateLimitBuffer(),b)}async socketSendMessage(d){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const b=await this.encryptMessage(d,this.viewId,Date.now()),w=Je.sends&&(u?`tagged SEND ${d.asState()} with tags ${JSON.stringify(u)}`:`SEND ${d.asState()}`);if(!this.connected||!this.syncCompleted)return void(this.vm&&(Je.sends&&console.log(this.id,`buffering ${w}`),this.sendBuffer.push(()=>this.socketSendMessage(d,u))));Je.sends&&console.log(this.id,`sending ${w}`);const E={id:this.id,action:"SEND",args:[...b,this.latency]};u&&(E.tags=u),this.lastSent=Date.now(),this.connection.send(JSON.stringify(E))}async sendTagged(d,u){this.viewOnly||this.socketSendMessage(d,u)}async sendTutti(d){let{time:u,topic:b,data:w,localContext:E=null,firstMessage:T=null,wantsVote:I=!0,tallyTarget:k=null}=d;if(this.viewOnly)return;const O=T&&await this.encryptMessage(T,this.viewId,Date.now()),M=e(w);if(!this.connected||!this.syncCompleted)return void(this.vm&&(Je.sends&&console.log(this.id,`buffering "${b}" TUTTI ${M} ${T&&T.asState()}`),this.sendBuffer.push(()=>this.sendTutti({time:u,topic:b,data:w,localContext:E,firstMessage:T,wantsVote:I,tallyTarget:k}))));Je.sends&&console.log(this.id,`sending "${b}" TUTTI ${M} ${T&&T.asState()}`),this.lastSent=Date.now();const re=`${b}@${u}`;this.connection.send(JSON.stringify({id:this.id,action:"TUTTI",args:[u,0,M,O,I,k,re]})),this.tuttiHistory.length>100&&this.tuttiHistory.shift(),this.tuttiHistory.push({time:u,tuttiKey:re,dummyTuttiSeq:0,payload:M,localContext:E})}sendLog(){for(var d=arguments.length,u=new Array(d),b=0;b<d;b++)u[b]=arguments[b];this.connected&&this.syncCompleted?(Je.sends&&console.log(this.id,"sending LOG"),u.length<2&&(u=u[0]),this.connection.send(JSON.stringify({action:"LOG",args:u}))):this.vm&&(Je.sends&&console.log(this.id,"buffering LOG"),this.sendBuffer.push(()=>this.sendLog(...u)))}addToStatistics(d,u){this.latency=u-d,this.latencyHistory&&(this.latencyHistory.length>=100&&this.latencyHistory.shift(),this.latencyHistory.push({time:u,ms:this.latency}))}get latencies(){return this.latencyHistory||(this.latencyHistory=[]),this.latencyHistory}getTickAndMultiplier(){const d=this.sessionSpec.options,u=["number","string"].includes(typeof d.tps)?d.tps:["number","string"].includes(typeof this.sessionSpec.tps)?this.sessionSpec.tps:20,[b,w]=(u+"x").split("x").map(O=>Number.parseFloat("0"+O)),E=1e3/Math.max(1/30,Math.min(60,b)),T=Math.max(1,w);let I=E,k=0;return T>1&&!lc&&(I=E/T,k=Math.ceil(I*(T-1))),{msPerTick:I,multiplier:T,tick:E,delay:k}}simulate(d){if(!this.vm)return!0;try{let u=!0;if(this.networkQueue.length+this.vm.messages.size===0)u=this.vm.advanceTo(this.reflectorTime,d);else{const T=Kt.begin("simulate");for(;u;){const I=this.networkQueue[0];if(!I)break;const[k,O]=I;if(u=this.vm.advanceTo(k[0],d),!u)break;this.networkQueue.shift(),Sn&&(this.auditStats.payloadTally+=O);const M=this.vm.scheduleExternalMessage(k);u=this.vm.advanceTo(M.time,d),this.cpuTime+=5}u&&(u=this.vm.advanceTo(this.reflectorTime,d)),this.cpuTime+=Math.max(.01,Kt.end("simulate")-T)}Kt.backlog(this.backlog);const b=this.lag,w=Math.max(200,.1*this.msPerTick),E=Math.max(2e3,.2*this.msPerTick);if(typeof this.synced=="boolean"&&this.viewed&&(this.synced&&b>E||!this.synced&&b<w)&&(this.synced?this.applySyncChange(!1):this.syncTimer||(this.syncTimer=setTimeout(()=>{delete this.syncTimer,this.connected&&this.lag<w&&this.applySyncChange(!0)},200))),!Je.offline)if(this.synced&&u&&this.vm.time-this.lastSnapshotRequest>5e3){let T=!1;this.cpuTime>5e3?(Je.snapshot&&console.log(this.id,`due for snapshot: cpuTime is ${Math.round(this.cpuTime)}ms`),T=!0):Sn&&this.vm.time-this.vm.lastSnapshotPoll>3e5&&(Je.snapshot&&console.log(this.id,`due for snapshot: time since last is ${this.vm.time-this.vm.lastSnapshotPoll}ms`),T=!0),T&&(this.lastSnapshotRequest=this.vm.time,this.triggeringCpuTime=this.cpuTime,this.cpuTime=0,this.isBeingAnimated()?setTimeout(()=>this.scheduleSnapshot(),Math.floor(2e3*Math.random())):this.scheduleSnapshot())}else this.reflectorNeedsSnapshot&&(this.triggeringCpuTime=this.synced?this.cpuTime:12345,this.scheduleSnapshot(!0),this.reflectorNeedsSnapshot=!1);return u}catch(u){return Br("simulate",u),this.connection.closeConnectionWithError("simulate",u),"error"}}stepSession(d){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const b=Kt.stepSession(u.frameTime,!0);b&&console.log(b);const{backlog:w,latency:E,starvation:T,activity:I}=this;if(d==="animation"){Kt.animationFrame(u.frameTime,{backlog:w,starvation:T,latency:E,activity:I,users:this.users});const O=Date.now();if(this.lastAnimationEnd){const M=O-this.lastAnimationEnd;if(this.animationGapCheck===!0&&M>200&&(this.animationGapCheck=[],Je.session&&console.log(this.id,"animation has stopped (too long between steps)")),this.animationGapCheck!==!0){const re=this.animationGapCheck;re.push(M),re.length>4&&re.shift(),re.length===4&&re.reduce((se,Y)=>se+Y,0)<=400&&(this.animationGapCheck=!0,Je.session&&console.log(this.id,"animation has started"))}}this.lastAnimationEnd=O}if(!this.connected)return void(this.isInBackground()||this.checkForConnection(!0));if(!this.vm)return;let k;switch(d){case"animation":{const O=u.expectedSimFPS,M=Date.now(),re=fi.reduce((se,Y)=>se+Y,0)/fi.length;if(k=this.simulate(M+Math.min(re,Hi)),k===!1){const se=O===0?0:1e3/O*4;this.backlog>se&&(k=this.simulate(M+Hi-re))}k!=="error"&&(fi.push(Date.now()-M),fi.length>4&&fi.shift());break}case"fastForward":case"background":k=this.simulate(Date.now()+u.budget);break;default:console.warn(d)}this.fastForwardHandler&&this.fastForwardHandler(k),k!=="error"&&(Kt.begin("update"),this.processModelViewEvents(d==="animation"),Kt.end("update"),this.vm&&(this.serviceRateLimitBuffer(),d==="animation"&&(u.view&&(Kt.begin("render"),this.inViewRealm(()=>u.view.update(u.frameTime)),Kt.end("render")),this.lastAnimationEnd=Date.now())))}applySyncChange(d){Je.session&&console.log(this.id,`synced=${d}`),this.synced=d,je.showSyncWait(!d),this.vm.publishFromView(this.viewId,"synced",d)}inViewRealm(d){return Da(this.vm,()=>d(this.vm))}processModelViewEvents(d){return this.vm?this.vm.processModelViewEvents(d):0}timeFromReflector(d,u,b){d<this.reflectorTime?(u!=="controller"||Je.ticks)&&console.warn(`time is ${this.reflectorTime}, ignoring time ${d} from ${u}`):(typeof this.synced!="boolean"&&(this.synced=!1),this.reflectorTime=d,this.extrapolatedTimeBase=Date.now()-d,this.vm&&Kt.backlog(this.backlog),this.tickHook&&this.tickHook(d,b))}multiplyTick(d){this.localTicker&&globalThis.clearInterval(this.localTicker);const u=this.msPerTick,b=this.tickMultiplier;let w=1;this.localTicker=globalThis.setInterval(()=>{this.timeFromReflector(Math.round(d+w*u),"controller"),Je.ticks&&console.log(this.id,"Controller generate TICK "+this.reflectorTime,w),++w>=b&&(globalThis.clearInterval(this.localTicker),this.localTicker=0)},u)}startStepping(d){const u=b=>{this.leaving||(this.isOutOfSight()||d(b),window.requestAnimationFrame(u))};window.requestAnimationFrame(u)}setUpActivityChecks(){let d=null;this.isOutOfSight=()=>!(en||document.visibilityState!=="hidden"&&d),this.isBeingAnimated=()=>{const T=this.animationGapCheck===!0,I=Date.now()-this.lastAnimationEnd<200;return T&&!I&&(this.animationGapCheck=[],Je.session&&console.log(this.id,"animation has stopped (too long since last step)")),T&&I},this.isInBackground=()=>this.isOutOfSight()||!this.isBeingAnimated(),!en&&new IntersectionObserver((T,I)=>d=T[0].isIntersecting).observe(document.body);const u=this.sessionSpec.autoSleep;let b;if(u){const T=1e3*u;let I=0,k=0;b=()=>{const O=Date.now();O-I<980||(I=O,this.isOutOfSight()?k?O-k>T&&(this.dormantDisconnect(),k=0):k=O:k=0)}}const w=()=>{this.leaving?E&&(clearInterval(E),E=null):this.connected&&this.vm&&(b&&b(),this.isBeingAnimated()||this.connection.keepAlive(Date.now()))};let E=setInterval(w,1e3);this.simulateIfNeeded=()=>{if(!this.isBeingAnimated()&&(w(),!this.fastForwardHandler&&this.connected)){let T=.9*this.msPerTick;u&&(T=Math.min(T,Hi));const I=this.synced?"background":"fastForward";this.stepSession(I,{budget:T})}}}toString(){return`Controller[${this.id}]`}[Symbol.toPrimitive](){return this.toString()}}class xu{constructor(d){this.controller=d,this.socketLastSent=0,this.connectBlocked=!1,this.connectRestricted=!1,this.connectHasBeenCalled=!1,this.reconnectDelay=0,this.missingTickThreshold=1/0}get id(){return this.controller.id}setTick(d){this.missingTickThreshold=Math.min(3*d,45e3)}get connected(){return!(!this.socket||!this.socket.isConnected())}checkForConnection(d){this.socket||this.connectHasBeenCalled||this.connectBlocked||this.connectRestricted&&!d||this.connectToReflector()}connectToReflector(){if(this.socket||this.connectHasBeenCalled)return;let d;this.connectHasBeenCalled=!0,this.connectBlocked=!1,this.connectRestricted=!1;const u=()=>{Je.session&&console.log(this.id,this.socket.constructor.name,"connected to",this.socket.url),this.reconnectDelay=0,Kt.connected(!0),this.controller.sendJoin()};if(Je.offline)d=new fa,d.isConnected=()=>d.readyState===WebSocket.OPEN;else if(Sn){const{synchSpec:b,developSpec:w}=_;if(b&&w)throw Error("Cannot handle both synchSpec and developSpec options");let E="";const T=b||w;T&&(E+=`&synch=${encodeURIComponent(T)}`);const I=this.id,{persistentId:k,appId:O,developerId:M}=this.controller.sessionSpec;d=new qw(`${jn}/clients/connect?session=${I}&persist=${k}&app=${encodeURIComponent(O)}&developer=${M}${E}`),d.isConnected=()=>d.dataChannel?.readyState==="open",d.onconnected=u}else{let b=this.controller.getBackend(this.controller.sessionSpec.apiKey).reflector;const w=en?void 0:window.location.href,E={},T=this.controller.sessionSpec.token;if(T&&(E.token=T),_.reflector){const k=_.reflector.toUpperCase();k==="CF"||k.match(/^[A-Z]{3}$/)?(b=Je.reflector?"wss://croquet.network/reflector/dev/":"wss://croquet.network/reflector/",k.length===3&&(E.colo=k)):_.reflector.match(/^[-a-z0-9]+$/i)?E.region=_.reflector:b=new URL(_.reflector,w).href.replace(/^http/,"ws")}if(!b.match(/^wss?:/))throw Error("Cannot interpret reflector address "+b);b.endsWith("/")||(b+="/");const I=new URL(b+this.id,w);for(const[k,O]of Object.entries(E))I.searchParams.append(k,O);d=new WebSocket(I),d.isConnected=()=>d.readyState===WebSocket.OPEN}d.onopen=b=>{const w=this.socket;w&&(w.onopen=w.onmessage=w.onerror=w.onclose=null),this.socket=d,this.connectHasBeenCalled=!1,d.twoStageConnection||u()},d.onmessage=b=>{if(d!==this.socket)return;const{data:w}=b;if(w.startsWith("_CHUNK")){const T=w.charAt(6)==="1",I=w.charAt(7)==="1",k=w.slice(8);if(T&&(d.chunkCollector=[]),d.chunkCollector.push(k),I){const O="".concat(...d.chunkCollector);d.chunkCollector=[],Kt.addNetworkTraffic("reflector_in",O.length,!!Sn),this.receive(O)}}else Kt.addNetworkTraffic("reflector_in",w.length,!!Sn),this.receive(w)},d.onerror=b=>{Je.session&&console.log(this.id,d.constructor.name,"connection error"),this.connectHasBeenCalled=!1,this.controller.clearSyncReceiptTimeout()},d.onclose=b=>{this.socket&&d!==this.socket||this.socketClosed(b.code,b.reason)}}socketClosed(d,u){Je.session&&console.log(this.id,`socketClosed with code=${d} message="${u}"`),d>=4100&&d!==4110&&(Je.session&&console.warn("resuming this session will require a new Session.join()"),this.controller.leaving||(this.controller.leaving=()=>{}),this.reconnectDelay=0);const b=!this.controller.leaving&&d!==1e3&&d<4100,w=d===4110;w||d===1e3||this.reconnectDelay||setTimeout(()=>{if(this.connected||this.socket?.isConnecting?.())return;const E=b?"Reconnecting":"Connection closed";je.showMessage(`${E}: ${d} ${u}`,{level:b?"warning":"fatal"})},500),Je.session&&console.log(this.id,`${this.socket?this.socket.constructor.name+" closed":"closed before opening,"} with code: ${d} ${u}`),this.connectHasBeenCalled=!1,this.controller.clearSyncReceiptTimeout(),Kt.connected(!1),Kt.resetAuditStats(),w?this.connectRestricted=!0:this.connectBlocked=!0,this.disconnected(),b&&(Je.session&&console.log(this.id,`reconnecting in ${this.reconnectDelay} ms`),this.reconnectTimeout=globalThis.setTimeout(()=>{delete this.reconnectTimeout,this.connectToReflector()},this.reconnectDelay),this.reconnectDelay=Math.min(3e4,Math.round((this.reconnectDelay+100)*(1+Math.random()))))}disconnected(){this.socket&&(this.socket=null,this.lastReceived=0,this.socketLastSent=0,this.stalledSince=0,this.connectHasBeenCalled=!1,this.controller.connectionInterrupted())}send(d){this.socketLastSent=Date.now(),this.socket.send(d),Kt.addNetworkTraffic("reflector_out",d.length,!!Sn)}receive(d){this.lastReceived=Date.now();const{id:u,action:b,args:w}=JSON.parse(d);if(u)try{this.controller.receive(b,w)}catch(E){this.closeConnectionWithError("receive",E)}else if(b==="PONG"){if(Je.pong&&console.log("PONG after",Date.now()-w,"ms"),this.pongHook)try{this.pongHook(w)}catch(E){console.error(E)}}else console.warn("Unknown action",b)}dormantDisconnect(){this.connected&&(Je.session&&console.log(this.id,`dormant; disconnecting from ${hi}`),this.closeConnection(4110,"Going dormant"))}closeConnectionWithError(d,u){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:4e3;console.error(b,u),this.closeConnection(b,`Error in ${d}: ${u.message||u}`)}closeConnection(d,u){if(this.socket){this.socket.onclose=null;try{this.socket.close(d,u)}catch(b){console.error(`Error in socket.close(${d}, ${JSON.stringify(u)}):`,b)}}this.socketClosed(d,u)}PULSE(d){this.connected&&(this.socket.bufferedAmount===0?(this.send(JSON.stringify({action:"PULSE"})),this.stalledSince=0):this.stalledSince&&d-this.stalledSince>500?console.log(this.id,`Reflector connection stalled: ${this.socket.bufferedAmount} bytes unsent for ${d-this.stalledSince} ms`):this.stalledSince=Date.now())}keepAlive(d){this.lastReceived!==0&&(d-this.socketLastSent>25e3?this.PULSE(d):d-this.lastReceived>5e4?this.closeConnectionWithError("connection",Error((Sn?"Synchronizer":"Reflector")+" has gone away")):d-this.lastReceived>this.missingTickThreshold&&this.PULSE(d))}PING(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Date.now();this.connected&&this.send(JSON.stringify({action:"PING",args:d}))}}globalThis.setInterval(()=>{for(const h of Xi)h.connected&&h.vm&&h.connection.keepAlive(Date.now())},100);const Cp=Symbol("hash"),Sp=Symbol("key"),uc=Symbol("url"),l0=new Map;let xh=0;function Tu(h){return _.has("debug",h,!1)}function u0(h){return h.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Th(h){return h.replace(/-/g,"+").replace(/_/g,"/").padEnd(h.length+3&-4,"=")}function an(h,d){return h||(h="*"),d.replace(/[\s\S]/g,u=>String.fromCharCode(u.charCodeAt(0)^h.charCodeAt(0)))}class kn{async store(){throw Error("Data.store() needs to be called from session.data")}async fetch(){throw Error("Data.fetch() needs to be called from session.data")}static async store(d,u,b){if(ks.hasCurrent())throw Error(`${je.libName}.Data.store() called from Model code`);let w,E,T;if(typeof d=="string"?(w=d,d=u,E=!0,T=b):(w=u&&u.sessionId,E=u&&u.shareable,T=u&&u.keep),!(d instanceof ArrayBuffer))throw Error(`${je.libName}.Data.store() called with non-ArrayBuffer data`);const{appId:I,persistentId:k,key:O,uploadEncrypted:M}=_u(w),re=E?de.random(32).toString(Vs):Vs.stringify(O),se=`apps/${I}/${k}/data/%HASH%`,Y="data#"+ ++xh;Tu("data")&&console.log(`${je.libName}.Data: storing ${Y} ${d.byteLength} bytes`);const be=await M({path:se,content:d,key:re,keep:T,debug:Tu("data"),what:Y}),Pe=function(we){return we.replace(/.*\//,"")}(be),oe=new Ot(Pe,E&&re,be);return Tu("data")&&console.log(`${je.libName}.Data: stored ${Y} as ${this.toId(oe)}`),oe}static async fetch(d,u){let b;if(u&&u[uc]?(b=d,d=u):b=u&&u.sessionId,ks.hasCurrent())throw Error(`${je.libName}.Data.fetch() called from Model code`);const{downloadEncrypted:w,key:E}=_u(b),T=d&&d[Cp],I=d&&d[Sp]||Vs.stringify(E),k=d&&d[uc];if(typeof T!="string"||typeof I!="string"||typeof k!="string")throw Error(`${je.libName}.Data.fetch() called with invalid handle`);const O="data#"+ ++xh;return Tu("data")&&console.log(`${je.libName}.Data: fetching ${O} ${this.toId(d)}`),w({url:k,key:I,debug:Tu("data"),what:O})}static hash(d){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"base64url";typeof d=="function"&&(d=Function.prototype.toString.call(d)),typeof d=="string"?d=new TextEncoder().encode(d):d&&d.constructor===DataView?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):d&&d.constructor===ArrayBuffer?d=new Uint8Array(d):ArrayBuffer.isView(d)||(d=new TextEncoder().encode(e(d)));const b=fe(de.create(d));switch(u){case"hex":return b.toString();case"base64":return b.toString(Vs);case"base64url":return u0(b.toString(Vs));default:throw Error(`${je.libName}.Data: unknown hash output "${u}", expected "hex"/"base64"/"base64url"`)}}static fromId(d){const u=d.slice(0,1);let b,w,E,T;switch(u){case"0":b=d.slice(1,44),w=d.slice(44),E=`${wp}/sessiondata/${b}`;break;case"1":b=d.slice(1,44),w=d.slice(44,87)+"=",T=d.slice(87),E=`${wp}/apps/${T}/data/${b}`;break;case"2":b=d.slice(1,44),w=Th(d.slice(44,87)),T=an(w,atob(Th(d.slice(87)))),E=`${wp}/apps/${T}/data/${b}`;break;case"3":w=Th(d.slice(1,44)),E=an(w,atob(Th(d.slice(44)))),b=E.slice(-43);break;case"4":w=null,E=an(w,atob(Th(d.slice(1)))),b=E.slice(-43);break;default:throw Error(`${je.libName}.Data expected handle v0-v4 got v${u}`)}return new this(b,w,E)}static toId(d){if(!d)return"";const u=d[Cp],b=d[Sp],w=d[uc];if(w.slice(-43)!==u)throw Error(`${je.libName} Data: malformed URL`);const E=b&&u0(b),T=u0(btoa(an(b,w)));return b?`3${E}${T}`:`4${T}`}constructor(d){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,b=arguments.length>2?arguments[2]:void 0;const w=l0.get(d);if(w)return w;if(b.slice(-43)!==d)throw Error(`${je.libName} Data: malformed URL`);Object.defineProperty(this,Cp,{value:d}),u&&Object.defineProperty(this,Sp,{value:u}),Object.defineProperty(this,uc,{value:b}),l0.set(d,this)}}class Ot extends kn{}const Yt={cls:Ot,write:h=>Ot.toId(h),read:h=>Ot.fromId(h)};let ht=null,lr=null;const pi=Symbol("DEBUG_WRITE_TARGET");let qs=null;function dc(h,d){return Array.isArray(h)||typeof d!="string"?`[${d}]`:d.match(/^[a-z_$][a-z0-9_$]*$/i)?`.${d}`:`["${d}"]`}class _o extends Error{}function Yn(){if(!globalThis.CroquetViewMath){globalThis.CroquetMath.random=()=>ht.random(),globalThis.CroquetViewMath={};for(const[h,d]of Object.entries(Object.getOwnPropertyDescriptors(Math)))globalThis.CroquetViewMath[h]=d.value;for(const[h,d]of Object.entries(globalThis.CroquetMath)){const u=Math[h];Math[h]=d.length===1?b=>ht?d(b):u(b):(b,w)=>ht?d(b,w):u(b,w)}}if(!globalThis.CroquetViewDate){let u=function(w,E){return d||(d=!0,console.warn(new _o(`${w} used in Model code`))),E},b=function(w,E,T,I,k,O,M){const re=this instanceof b,se=[w,E,T,I,k,O,M];if(se.length=arguments.length,ht)switch(u(re?"new Date()":"Date()"),arguments.length){case 0:se.push(ht.time);break;case 1:break;default:se[0]=h.UTC(...se),se.length=1}const Y=new h(...se);return re?Y:""+Y};const h=globalThis.Date;let d=!1;b.prototype=h.prototype,b.UTC=h.UTC,b.now=()=>ht?u("Date.now()",ht.time):h.now(),b.parse=function(){return ht?u("Date.parse()",0):h.parse(...arguments)},globalThis.CroquetViewDate=h,globalThis.Date=b}}Object.defineProperty(_o.prototype,"name",{value:`${je.libName}Warning`});const us=Symbol("QFUNC");function hc(h,d,u,b){const w=new mi(h,d,u,b),E=w.compile();return E[us]=w,E}function _p(h,d,u,b){const w=[],E=[];let T,I,k,O;if(u){if("this"in u){for(d=u.this,T="_this";T in u;)T="_"+T;delete(u={...u,[T]:d}).this}if(k=[...Object.keys(u).sort()],O=[...k.map(oe=>u[oe])],k.length){for(I="env";I in u||I===b;)I="_"+I;w.push(I),E.push(O)}}h.match(/\bCroquet\b/)&&!k?.includes("Croquet")&&(w.push("Croquet"),E.push(_n.Croquet)),h.match(/\bMultisynq\b/)&&!k?.includes("Multisynq")&&(w.push("Multisynq"),E.push(_n.Croquet));let M=b||"qFunc";for(;k?.includes(M);)M="_"+M;let re=`"use strict"

`;re+=`// Croquet QFunc Compiler by Codefrau

`,re+=`//////////////// Start Compiler /////////////////
`,re+="try { const ",k?.length&&(re+=`[${k.join(", ")}] = ${I}, `);let se=h.split(`
`);const Y=se.slice(1),be=Math.min(...Y.map(oe=>oe.match(/^\s*/)[0].length));be>0&&(se.some(oe=>(oe.match(/`/g)||[]).length%2==1)||(se=[se[0],...Y.map(oe=>oe.slice(be))],h=se.join(`
`)));const Pe=se[se.length-1].match(/^\s*/)[0];Pe&&(h=Pe+h),re+=`${M} =
`,re+=`//////////////// Start User Code ////////////////

`,re+=h,re+=`

///////////////// End User Code /////////////////
`,re+=`return ${M}`,T&&(re+=`.bind(${T})`),re+=` } catch (compileError) { return compileError; }
`,re+="///////////////// End Compiler //////////////////";try{const oe=new Function(...w,re).call(d,...E);if(oe instanceof Error)throw console.warn("rethrowing error",oe),oe;return oe}catch(oe){throw console.warn(`createQFunc compiling:

${h}`),Error(`createQFunc(): ${oe.message}`)}}class mi{constructor(d,u,b,w){if(this.thisVal=d,this.env=u,this.selfRef=w,this.source=b,w===void 0){this.selfRef="",typeof b=="function"&&(this.source=b.toString());const E=Object.keys(u);for(const T of E)if(b===u[T]){if(this.selfRef)throw Error(`createQFunc: env.${this.selfRef} and env.${T} cannot both reference the function`);this.selfRef=T}this.selfRef&&(this.env={...u},delete this.env[this.selfRef])}Object.freeze(this.env)}compile(){return _p(this.source,this.thisVal,this.env,this.selfRef)}}const fc={cls:us,write:h=>{let{[us]:{thisVal:d,env:u,source:b,selfRef:w}}=h;return[d,b,w,...Object.entries(u).flat()]},read:h=>{let[d,u,b,...w]=h;const E={};for(let T=0;T<w.length;T+=2)E[w[T]]=w[T+1];return hc(d,E,u,b)}},pc="future message",ds="message in cancelFuture",Ah="subscription handler";function xp(h){return`qFunc~${h.split(" ")[0]}~`}const Ih=xp(pc),Au=xp(Ah);function mc(h){return h===pc||h===Ah}function vr(h){return h.startsWith(Ih)}function pa(h){return`${Au}${h}`}function ma(h,d){return!!h.startsWith(Au)&&h.slice(Au.length)===d}function hl(h,d){if(ht)throw Error("VirtualMachine confusion");if(!(h instanceof ks))throw Error("not a VM: "+h);const u=ht;try{ht=h,globalThis.CROQUETVM=h,d()}finally{ht=u}}const d0="#reflected",Nh=["handleModelEventInModel","handleBundledEvents","publishFromModelOnly","handlePollForSnapshot","handleTuttiResult","handleTuttiDivergence","handleSnapshotVote","handlePersistVote","handleModelEventInView","noop","handleAuditRequest"],Tp={};for(let h=0;h<Nh.length;h++)Tp[Nh[h]]=h;const fl=new WeakMap;function Ap(h){fl.set(h,null)}class Qs{random(){throw Error("Math.random() cannot be used in Model.evaluate()")}}class ks{static current(){return ht||console.warn("VirtualMachine.current() called from outside the vm!"),ht}static hasCurrent(){return!!ht}static evaluate(d){if(ht)return d();Yn();const u=ht;try{return ht=new Qs,d()}finally{ht=u}}constructor(d,u,b,w){Yn(),lr={snapshot:_.has("debug","snapshot",!1),session:_.has("debug","session",!1),write:_.has("debug","write",!1)},Ap(this),hl(this,()=>{_d(this,()=>{if(this.models={},this.namedModels={},this.messages=new Vf((E,T)=>E.before(T)),this.subscriptions={},this.subscribers=new Map,this.genericSubscriptions=[],this.currentEvent="",this.currentEventFromModel=!1,this.debugEvents=u,this.views={},this._random=()=>{throw Error("You must not use random when applying state!")},this.id=d.id,this.time=0,this.seq=4294967280,this.externalTime=0,this.externalSeq=this.seq,this.futureSeq=0,this.lastSnapshotPoll=0,this.lastPersistencePoll=0,this.inPersistenceCoolOff=!1,this.persisted="",this.modelsId=0,this.diverged=null,this.controller=null,d.models){const E=yc.newOrRecycled(this).readVM(d,"VM",w);let T=[],I=[];for(const k of Object.keys(E))k!=="meta"&&(k==="staticInitializers"?T=E[k]:k in this?k==="_random"?this[k]=new X(null,{state:E[k]}):k==="messages"?I=E.messages:this[k]=E[k]:console.warn(`Ignoring property snapshot.${k}`));for(const k of T)k();for(const k of I)this.messages.add(k);for(const[k,O]of Object.entries(this.subscriptions))for(const M of O){const[re]=M.split(".");let se=this.subscribers.get(re);se||this.subscribers.set(re,se=new Set),se.add(k)}}else this._random=new X(d.id,{state:!0}),this.addSubscription(this,"__VM__","__peers__",this.generateJoinExit),this.addSubscription(this,"__VM__","__diverged__",this.handleSessionDiverged),b(this)})})}registerModel(d,u){if(ht!==this)throw Error("You can only create models from model code!");return u||(u="M"+ ++this.modelsId),this.models[u]=d,u}deregisterModel(d){if(ht!==this)throw Error("You can only destroy models from model code!");const u=this.models;delete this.models[d];for(const[b,w]of Object.entries(this.namedModels))u===w&&delete this.namedModels[b];this.messages.removeMany(b=>b.hasReceiver(d))}lookUpModel(d){if(d==="_")return this;let u=this.models[d];if(u)return u;const[b,w,E]=d.match(/^([^#]+)#(.*)$/)||[];return u=this.models[w],u&&u.lookUp(E)}get(d){const u=this.namedModels[d];return ht!==this&&lr.write&&u?this.debugWriteProxy(this,u,u.id):u}set(d,u){if(ht!==this)throw Error("You can only make a model well-known from model code!");this.namedModels[d]=u}debugWriteProxy(d,u,b){if(typeof u!="object"||u===null||u[pi])return u;if(u instanceof _n&&(b=u.id),!this.$debugWriteProxyHandler){let E=function(T,I,k){k&&(T+=` ${k} of`);const O=qs.get(I).path;if(console.warn(`write-debug: non-model code is ${T} ${O}:`,I),k&&k[0]!=="$")throw Error(`write-debug: Attempt to modify ${je.libName} model state from outside!`)};qs||(qs=new WeakMap),this.$debugWriteProxyHandler={set(T,I,k){ht!==d?E("assigning",T,I):console.warn(`${je.libName} debug write protection inside model - this should not happen!`),T[I]=k},deleteProperty(T,I){ht!==d?E("deleting",T,I):console.warn(`${je.libName} debug write protection inside model - this should not happen!`),delete T[I]},get(T,I){if(I===pi)return T;const k=T[I];if(k&&k[pi])return k;if(ht!==d){if(typeof k=="object"&&k!==null){const O=qs.get(T).path;if(k instanceof Map){const M=new Map([...k.entries()].map((re,se)=>{let[Y,be]=re;return[d.debugWriteProxy(d,Y,`${O}.key#${se}`),d.debugWriteProxy(d,be,`${O}.value#${se}`)]}));return M[pi]=k,M.set=()=>E("setting an item in",k),M.delete=()=>E("deleting from",k),M.clear=()=>E("clearing",k),qs.set(k,{proxy:M,path:O+dc(k,I)}),M}if(k instanceof Set){const M=new Set([...k.values()].map((re,se)=>d.debugWriteProxy(d,re,`${O}.item#${se}`)));return M[pi]=k,M.add=()=>E("adding to",k),M.delete=()=>E("deleting from",k),M.clear=()=>E("clearing",k),qs.set(k,{proxy:M,path:O+dc(k,I)}),M}return d.debugWriteProxy(d,k,O+dc(k,I))}}else console.warn(`${je.libName} debug write protection inside model - this should not happen!`);return k}}}let w=qs.get(u);return w||(w={proxy:new Proxy(u,this.$debugWriteProxyHandler),path:b},qs.set(u,w)),w.proxy}noop(){}generateJoinExit(d){let{entered:u,exited:b,count:w,total:E}=d;this.controller.handleUserTotalForAccounting(E);const T={};for(const O of u){if(typeof O=="string")continue;let M,re,se;Array.isArray(O)?[M,re]=O:(M=O.id,se=O.data,re=O.location),T[M]={},se&&(T[M].data=se),re&&(re.region&&(re.country=re.region.slice(0,2),re.region=re.region.slice(2)),T[M].loc=re)}if(u=u.map(O=>typeof O=="string"?O:Array.isArray(O)?O[0]:O.id),b=b.map(O=>typeof O=="string"?O:Array.isArray(O)?O[0]:O.id),u.length===w){b=Object.keys(this.views);for(const O of b)this.views[O].extraConnections=0}if(u.length>0&&b.length>0&&u.some(O=>b.includes(O))){for(let O=0;O<u.length;O++){const M=u[O],re=b.indexOf(M);re>=0&&(u.splice(O,1),b.splice(re,1),O--)}if(u.length+b.length===0)return}const I=O=>{const{data:M,loc:re}=this.views[O];if(!M)return O;const se={viewId:O,viewData:M};return re&&(se.location=re),se};for(const O of b)if(this.views[O]){if(this.views[O].extraConnections){this.views[O].extraConnections--,lr.session&&console.log(this.id,`@${this.time}#${this.seq} view ${O} closed extra connection`);continue}const M=I(O);delete this.views[O],this.publishFromModelOnly(this.id,"view-exit",M)}else{const{time:M,seq:re}=this;console.error(`${this.id} @${M}#${re} view ${O} exited without being present - this should not happen`),Promise.resolve().then(()=>{this.controller.sendLog(`view-exit-mismatch @${M}#${re} ${O} left without being present`)})}for(const O of u)if(this.views[O])lr.session&&console.log(this.id,`@${this.time}#${this.seq} view ${O} opened another connection`),this.views[O].extraConnections=(this.views[O].extraConnections||0)+1;else{this.views[O]=T[O]||{};const M=I(O);this.publishFromModelOnly(this.id,"view-join",M)}const k=Object.values(this.views).reduce((O,M)=>O+1+(M.extraConnections||0),0);if(w!==k){const{time:O,seq:M}=this;console.error(`@${O}#${M} view count mismatch (model: ${k}, reflector: ${w}) - this should not happen`),Promise.resolve().then(()=>{this.controller.sendLog(`view-exit-mismatch @${O}#${M} connections model: ${k} reflector: ${w}`)})}}scheduleExternalMessage(d){const u=Hr.fromState(d,this);if(u.time<this.time)throw Error("past message from reflector "+d);const b=this.externalSeq+1>>>0;if(u.seq!==b)throw Error(`External message error. Expected message #${b} got #${u.seq}`);return this.externalTime=u.time,this.externalSeq=u.seq,u.seq=2*u.seq+1,this.verifyExternal(u),this.messages.add(u),u}verifyExternal(d){if(d.receiver!=="_")throw Error(`invalid receiver in external message: ${d}`);if(!(d.selector in Tp))throw Error(`unexpected external message: ${d.selector}`)}futureSend(d,u,b,w){if(d.every)return this.futureRepeat(d.every,u,b,w);if(d<0)throw Error("attempt to send future message into the past");this.futureSeq=this.futureSeq+1>>>0;const E=new Hr(this.time+d,2*this.futureSeq,u,b,w);return this.messages.add(E),{time:E.time,seq:E.seq}}cancelFuture(d,u){const b=this.messages;let w;if(typeof u.time=="number"){const{time:E,seq:T}=u;w=b.removeOne(I=>I.time===E&&I.seq===T)}else{if(u==="*")return w=b.removeMany(E=>E.receiver===d.id),w.length>0;{const E=this.asMethodName(d,u,ds),T=d.id;w=b.removeOne(I=>I.receiver===T&&I.selector===E||I.receiver==="_"&&I.selector==="futureExecAndRepeat"&&I.args[1]===T&&I.args[2]===E),vr(E)&&delete d[E]}}return w!==void 0}futureRepeat(d,u,b,w){this.futureSend(d,"_","futureExecAndRepeat",[d,u,b,w])}futureExecAndRepeat(d,u,b,w){const E=this.lookUpModel(u);if(E){if(typeof E[b]=="function")try{E[b](...w)}catch(T){Br(`future message ${E}.${b}`,T)}else{const T=this.compileFuncString(b,E);try{T(...w)}catch(I){Br(`future message ${E} ${T}`,I)}}this.futureRepeat(d,u,b,w)}}future(d,u,b,w){if(!this.lookUpModel(d.id))throw Error(`future send to unregistered model ${d}`);if(b===void 0){const T=this;return new Proxy(d,{get:(I,k)=>function(){for(var O=arguments.length,M=new Array(O),re=0;re<O;re++)M[re]=arguments[re];return T.future(d,u,k,M)}})}const E=this.asMethodName(d,b,pc);if(typeof E!="string")throw Error(`future message to ${d} ${E} is not a string`);if(typeof d[E]!="function"&&E.indexOf(".")<0&&E[0]!=="{")throw Error(`future send to ${d} with unknown method ${E}()`);return this.futureSend(u,d.id,E,w)}advanceTo(d,u){if(ht)throw Error("cannot advance time from model code");let b;for(;(b=this.messages.peek())&&b.time<=d;){const{time:w,seq:E}=b;if(w<this.time)throw Error("past message encountered: "+b);if(1&E&&(this.seq=this.seq+1>>>0,E/2>>>0!==this.seq))throw Error(`Sequence error: expected ${this.seq} got ${E/2>>>0} in ${b}`);if(this.messages.poll(),this.time=b.time,b.executeOn(this),globalThis.CroquetViewDate.now()>=u)return!1}return this.time=d,!0}asMethodName(d,u,b){let w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(typeof u=="string")return u;if(typeof u=="function"){if(d[u.name]===u)return u.name;if(u[us]&&w){const O=pa(w);if(d[O]===u)return O}let T=d;for(;T!==null;){for(const[O,M]of Object.entries(Object.getOwnPropertyDescriptors(T)))if(M.value===u){if(u[us]&&((E=b)!==pc&&E!==ds||!vr(O)))continue;return O}if(T===d&&u[us]){if(!mc(b))return co(`${b} is not a registered QFunc: ${u}`,{only:"once"}),null;let O;if(w)O=pa(w);else{const M=Ih;let re=0;do O=`${M}${re++}`;while(d[O])}return d[O]=u,O}T=Object.getPrototypeOf(T)}co(`${b} is not a method of ${d} and not a QFunc: ${u}
`,{only:"once"});const I=/^\(?([a-z][a-z0-9]*)?\)? *=> *this\.([a-z][a-z0-9]*) *\( *([a-z][a-z0-9]*)? *\) *$/i,k=u.toString().match(I);return!k||k[3]&&k[3]!==k[1]?this.asFuncString(u):k[2]}var E;return null}asFuncString(d){const u=d.toString();return`{${btoa(JSON.stringify(u))}}`}compileFuncString(d,u){this.$compiledFuncs||(this.$compiledFuncs={});const b=u.id+":"+d;let w=this.$compiledFuncs[b];if(!w){const E=JSON.parse(atob(d.slice(1,-1)));w=_p(E,u),E.startsWith("function")&&(w=w.bind(u)),this.$compiledFuncs[b]=w}return w}addSubscription(d,u,b,w){if(ht!==this)throw Error("Cannot add a model subscription from outside model code");if(u.includes(":"))throw Error(`Invalid subscription scope "${u}" (must not contain ':')`);const E=u+":"+b,T=this.asMethodName(d,w,Ah,E);if(typeof T!="string")throw Error(`Subscription handler for "${b}" must be a method name`);if(T.indexOf(".")<0&&typeof d[T]!="function"&&T[0]!=="{")throw Error(`Subscriber method for "${b}" not found: ${d}.${T}()`);const I=d===this?"_":d.id,k=I+"."+T;if(u==="*"||b==="*")return void this.addGenericSubscription(E,k);if(this.subscriptions[E]){if(this.subscriptions[E].indexOf(k)!==-1)throw Error(`${d}.${T} already subscribed to ${b}`)}else this.subscriptions[E]=[];this.subscriptions[E].push(k);let O=this.subscribers.get(I);O||this.subscribers.set(I,O=new Set),O.add(E)}removeSubscription(d,u,b){let w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"*";if(ht!==this)throw Error("Cannot remove a model subscription from outside model code");if(u==="*"||b==="*")return void this.removeGenericSubscription(d,u,b,w);const E=u+":"+b,T=this.subscriptions[E];if(T){const I=d.id+".";if(w==="*"){for(let O=T.length-1;O>=0;O--)if(T[O].startsWith(I)){const M=T[O].slice(I.length);ma(M,E)&&delete d[M],T.splice(O,1)}T.length===0&&delete this.subscriptions[E]}else{const O=this.asMethodName(d,w,"unsubscribe argument",E);if(typeof O!="string")throw Error(`Invalid unsubscribe args for "${b}" in ${d}: ${w}`);const M=I+O,re=T.indexOf(M);if(re!==-1&&(T.splice(re,1),T.length===0&&delete this.subscriptions[E],ma(O,E)&&delete d[O]),T.find(se=>se.startsWith(I)))return}const k=this.subscribers.get(d.id);k.delete(E),k.size===0&&this.subscribers.delete(d.id)}}addGenericSubscription(d,u){this.genericSubscriptions.push({topic:d,handler:u})}removeGenericSubscription(d,u,b){let w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"*";const E=u+":"+b,T=d.id+".";for(let I=this.genericSubscriptions.length-1;I>=0;I--){const k=this.genericSubscriptions[I];k.topic===E&&k.handler.startsWith(T)&&(w!=="*"&&k.handler!==T+w||(this.genericSubscriptions.splice(I,1),ma(w,E)&&delete d[w]))}}removeAllSubscriptionsFor(d){const u=this.subscribers.get(d.id);if(u){const b=d.id+".";for(const w of u){const E=this.subscriptions[w];for(let T=E.length-1;T>=0;T--)if(E[T].startsWith(b)){const I=E[T].slice(b.length);ma(I,w)&&delete d[I],E.splice(T,1)}E.length===0&&delete this.subscriptions[w]}this.subscribers.delete(d.id)}}publishFromModel(d,u,b){if(ht!==this)throw Error("Cannot publish a model event from outside model code");if(d.includes(":"))throw Error(`Invalid publish scope "${d}" (must not contain ':')`);const w=u.endsWith(d0);w&&(u=u.slice(0,u.length-10));const E=this.currentEventFromModel;this.currentEventFromModel=!0;const T=d+":"+u;this.handleModelEventInModel(T,b,w),this.handleModelEventInView(T,b),this.currentEventFromModel=E}publishFromModelOnly(d,u,b){if(ht!==this)throw Error("Cannot publish a model event from outside model code");const w=d+":"+u;this.handleModelEventInModel(w,b)}publishFromView(d,u,b){if(ht)throw Error("Cannot publish a view event from model code");if(d.includes(":"))throw Error(`Invalid publish scope "${d}" (must not contain ':')`);const w=d+":"+u;this.handleViewEventInModel(w,b),this.handleViewEventInView(w,b)}handleBundledEvents(d){for(const u of d){const b=Hr.fromState(u,this);this.verifyExternal(b),b.executeOn(this,!0)}}handleModelEventInModel(d,u){let b=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(ht!==this)throw Error("handleModelEventInModel called from outside model code");if(b){if(this.controller.synced!==!0)return;const w=d+"#__vote",E=d+"#divergence",T=!!Kn.subscriptions[w],I=!!this.subscriptions[d],k=!!this.subscriptions[E];T&&k&&console.log(`divergence subscription for ${d} overridden by vote subscription`);const O=I?new Hr(this.time,0,"_","handleModelEventInModel",[d,u]):null;let M;M=T?["handleModelEventInView",w]:["handleTuttiDivergence",E],Promise.resolve().then(()=>this.controller.sendTutti({time:this.time,topic:d,data:u,firstMessage:O,wantsVote:T,tallyTarget:M}))}else this.genericSubscriptions.length>0&&this.invokeGenericHandlers(d,u),this.subscriptions[d]&&this.invokeHandlers(this.subscriptions[d],d,u)}invokeHandlers(d,u,b){const w=d.slice();for(let E=0;E<w.length;E++){const T=w[E];(T===d[E]||d.includes(T))&&this.invokeHandler(T,u,b)}}invokeGenericHandlers(d,u){const[b,w]=d.split(":");if(!(b.startsWith("__")&&b.endsWith("__")||w.startsWith("__")&&w.endsWith("__")))for(const E of this.genericSubscriptions){const[T,I]=E.topic.split(":");(T==="*"&&I===w||T===b&&I==="*"||T==="*"&&I==="*")&&this.invokeHandler(E.handler,d,u)}}invokeHandler(d,u,b){const w=this.currentEvent;this.currentEvent=u;try{const[E,...T]=d.split("."),I=T.join("."),k=this.lookUpModel(E);if(!k)return void co(`event ${u} .${I}(): subscriber not found`);if(I[0]==="{"){const O=this.compileFuncString(I,k);try{O(b)}catch(M){Br(`event ${u} ${k} ${O}`,M)}return}if(I.indexOf(".")>=0){const O=I.indexOf("."),M=I.slice(0,O),re=I.slice(O+1);try{k.call(M,re,b)}catch(se){Br(`event ${u} ${k}.call(${JSON.stringify(M)}, ${JSON.stringify(re)})`,se)}return}if(typeof k[I]!="function")return void Br(`event ${u} ${k}.${I}(): method not found`);try{k[I](b)}catch(O){Br(`event ${u} ${k}.${I}()`,O)}}finally{this.currentEvent=w}}handleViewEventInModel(d,u){if(this.subscriptions[d]){const b=[d];u!==void 0&&b.push(u);const w=new Hr(this.time,0,"_","handleModelEventInModel",b);this.controller.sendMessage(w)}}handleModelEventInView(d,u){lr.write&&(u=this.debugWriteProxy(this,u,`event ${d} arg`)),Kn.handleEvent(d,u,b=>function(w){if(!ht)throw Error("VirtualMachine confusion");const E=ht;try{ht=null,w()}finally{ht=E}}(()=>Da(this,b,!0)))}handleViewEventInView(d,u){Kn.handleEvent(d,u)}handleTuttiDivergence(d,u){if(this.subscriptions[d])this.handleModelEventInModel(d,u);else{const b=d.split(":").slice(-1)[0];console.warn(`uncaptured divergence in ${b}:`,u)}}handleSessionDiverged(d){const{key:u,url:b}=d;this.diverged||(this.diverged=new Map);let w=this.diverged.get(u);w||this.diverged.set(u,w=[]),w.push(b),w.length===2&&this.controller&&!this.controller.fastForwardHandler&&this.debugDiverged(u)}debugDiverged(d){d||(d=this.diverged.keys().next().value);const u=this.diverged.get(d);if(!u||u.length<2)throw Error(`no diverged urls for snapshot ${d}`);Promise.resolve().then(()=>this.controller.diffDivergedSnapshots(u))}processModelViewEvents(d){if(ht)throw Error("cannot process view events in model code");return Da(this,()=>Kn.processFrameEvents(d,!!this.controller.synced))}handlePollForSnapshot(){const d=this.time,u=d-this.lastSnapshotPoll;u<5e3?console.log(`rejecting snapshot poll ${u}ms after previous`):(this.lastSnapshotPoll=d,this.controller.handlePollForSnapshot(d))}handleTuttiResult(d){this.controller.handleTuttiResult(d)}handleSnapshotVote(d){this.controller.handleSnapshotVote(d)}handlePersistVote(d){this.controller.handlePersistVote(d)}handleAuditRequest(d){this.controller.handleAuditRequest(d)}snapshot(){return Nu.newOrRecycled(this).snapshot(this,"VM")}getSummaryHash(){return e(new gc().getHash(this))}debug(d){return this.controller.setDebug(d)}forceSnapshot(){this.controller.requestDebugSnapshot()}persist(d,u){this.controller&&this.controller.sessionSpec.appId==="no.appId"&&console.warn(`${je.libName}: appId should be provided in Session.join() to not overwrite another apps's persistent data`);const b=Kt.begin("snapshot"),w=typeof u=="function"?u.call(d):u;if(typeof w!="object")throw Error(`${je.libName}: persistSession() can only persist objects (got ${typeof w})`);const E=e(w),T=Ot.hash(E),I=Kt.end("snapshot")-b,k=this.persisted===T,O=this.time;var M,re;if(lr.snapshot&&console.log(this.id,`persistent data @${O} collected, stringified and hashed in ${Math.ceil(I)}ms${k?" (unchanged, ignoring)":""}`),_.forcePersist&&queueMicrotask(()=>this.controller.forcePersist(O,E,T)),!k)if(M=this,re={persistTime:O,persistentString:E,persistentHash:T,ms:I},fl.set(M,re),this.persisted=T,this.inPersistenceCoolOff)lr.snapshot&&console.log(this.id,"persistence poll postponed by cooloff");else{const se=this.lastPersistencePoll?this.lastPersistencePoll+25e3-this.time:0;se>0?(lr.snapshot&&console.log(this.id,`postponing persistence poll by ${se}ms`),this.futureSend(se,"_","triggerPersistencePoll",[]),this.inPersistenceCoolOff=!0):this.triggerPersistencePoll()}}triggerPersistencePoll(){this.inPersistenceCoolOff=!1,this.lastPersistencePoll=this.controller?this.time:0;const d=(u=this,fl.get(u));var u;if(!d)return;const{persistTime:b,persistentString:w,persistentHash:E,ms:T}=d;if(Ap(this),this.controller&&this.controller.synced){lr.snapshot&&console.log(this.id,`asking controller to poll for persistence @${b}`);const I=this.time;Promise.resolve().then(()=>this.controller.pollForPersist(I,b,w,E,T))}}random(){if(ht!==this)throw Error("synchronized random accessed from outside the model");return this._random()}randomID(){if(ht!==this)throw Error("synchronized random accessed from outside the model");let d="";for(let u=0;u<4;u++)d+=(this._random.int32()>>>0).toString(16).padStart(8,"0");return d}toString(){return`VirtualMachine[${this.id}]`}[Symbol.toPrimitive](){return this.toString()}}function Js(h,d,u){let b;if(h==="_"){const w=Tp[d];typeof w=="number"&&(b=w.toString(36))}if(b===void 0&&(b=`${h}>${d}`),u.length>0){const w=h0.newOrRecycled();b+=JSON.stringify(w.encode(u))}return b}function Iu(h,d){return(d-h|0)>=0}class Hr{constructor(d,u,b,w,E){this.time=d,this.seq=u,this.receiver=b,this.selector=w,this.args=E}before(d){return this.time!==d.time?this.time<d.time:this.isExternal()!==d.isExternal()?d.isExternal():this.isExternal()?Iu(this.externalSeq,d.externalSeq):Iu(this.internalSeq,d.internalSeq)}hasReceiver(d){return this.receiver===d}isExternal(){return 1&this.seq}get externalSeq(){return this.seq/2>>>0}set externalSeq(d){this.seq=2*d+1}get internalSeq(){return this.seq/2>>>0}set internalSeq(d){this.seq=2*d}asState(){return[this.time,this.seq,Js(this.receiver,this.selector,this.args)]}static fromState(d,u){const[b,w,E]=d,{receiver:T,selector:I,args:k}=function(O,M){let re,se,Y;if(O.length===1||O[1]==="["){const Pe=parseInt(O[0],36);re="_",se=Nh[Pe],Y=O.slice(1)}else{const Pe=O.indexOf(">");let oe=O.indexOf("[");oe===-1&&(oe=O.length),re=O.slice(0,Pe),se=O.slice(Pe+1,oe),Y=O.slice(oe)}let be=[];return Y&&(be=f0.newOrRecycled(M).decode(JSON.parse(Y))),{receiver:re,selector:se,args:be}}(E,u);return new Hr(b,w,T,I,k)}executeOn(d){let u=arguments.length>1&&arguments[1]!==void 0&&arguments[1];d.currentEventFromModel=!this.isExternal();const b=u?k=>k():k=>hl(d,()=>_d(d,k)),{receiver:w,selector:E,args:T}=this,I=d.lookUpModel(w);if(I)if(E[0]==="{"){const k=d.compileFuncString(E,I);b(()=>{try{k(...T)}catch(O){Br(`${this.shortString()} ${k}`,O)}})}else E.indexOf(".")>=0?b(()=>{const k=E.indexOf("."),O=E.slice(0,k),M=E.slice(k+1);try{I.call(O,M,...T)}catch(re){Br(`${this.shortString()} ${I}.call(${JSON.stringify(O)}, ${JSON.stringify(M)})`,re)}}):typeof I[E]!="function"?co(`${this.shortString()} ${I}.${E}(): method not found`):b(()=>{try{if(vr(E)){const k=I[E];delete I[E],k(...T)}else I[E](...T)}catch(k){Br(`${this.shortString()} ${I}.${E}()`,k)}});else co(`${this.shortString()} ${E}(): receiver not found`)}shortString(){return(this.isExternal()?"External":"Future")+"Message"}toString(){const{receiver:d,selector:u,args:b}=this,w=this.isExternal(),E=w?this.externalSeq:this.internalSeq;return`${w?"External":"Future"}Message[${this.time}${":#"[+w]}${E} ${d}.${u}(${b.map(JSON.stringify).join(", ")})]`}[Symbol.toPrimitive](){return this.toString()}}const iE=(()=>{const h=new ArrayBuffer(8),d=new DataView(h);return u=>(d.setFloat64(0,u,!0),d.getInt32(0,!0)+d.getInt32(4,!0))})();class gc{constructor(){this.done=new Set,this.todo=[],this.hashers=new Map,this.addHasher("Teatime:Message",Hr),this.addHasher("Teatime:Data",Yt),this.addHasher("Teatime:QFunc",fc);for(const[d,u]of _n.allClassTypes())this.addHasher(d,u)}addHasher(d,u){const{cls:b,write:w}=Object.getPrototypeOf(u)===Object.prototype?u:{cls:u,write:E=>({...E})};w&&this.hashers.set(b,E=>this.hashStructure(E,w(E)))}getHash(d){this.hashState={oC:0,mC:0,nanC:0,infC:0,zC:0,nC:0,nH:0,sC:0,sL:0,fC:0};for(const[u,b]of Object.entries(d))if(u!=="controller"&&u!=="meta")if(u==="_random")this.hash(b.state(),!1);else if(u==="messages"){const w=b.asArray();(this.hashState.fC=w.length)&&this.hash(w,!1)}else this.hashEntry(u,b);return this.hashDeferred(),this.hashState}hashDeferred(){let d=0;for(;d<this.todo.length;){const{key:u,value:b}=this.todo[d++];this.hashEntry(u,b,!1)}this.todo.length=0}hash(d){let u=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];switch(typeof d){case"number":return void(Number.isNaN(d)?this.hashState.nanC++:Number.isFinite(d)?d===0?this.hashState.zC++:(this.hashState.nC++,this.hashState.nH+=iE(d)):this.hashState.infC++);case"string":return this.hashState.sC++,void(this.hashState.sL+=d.length);case"boolean":case"undefined":return;case"bigint":if(d===0n)this.hashState.zC++;else{this.hashState.nC++;const b=d<0?-1n:0n;for(;d!==b;)this.hashState.nH+=Number(0xFFFFFFFFn&d),d>>=32n}return;default:{if(this.done.has(d)||d===null)return;if(this.hashers.has(d.constructor))return void this.hashers.get(d.constructor)(d);const b=Object.prototype.toString.call(d).slice(8,-1);if(this.hashers.has(b))return void this.hashers.get(b)(d);switch(b){case"Array":return void this.hashArray(d,u);case"ArrayBuffer":return void this.hashIntArray(new Uint8Array(d));case"Set":return void this.hashStructure(d,[...d]);case"Map":return void this.hashStructure(d,[...d],!1);case"DataView":return void this.hashIntArray(new Uint8Array(d.buffer,d.byteOffset,d.byteLength));case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":return void this.hashIntArray(d);case"Float32Array":case"Float64Array":return void this.hashArray(d,!1);case"Object":d instanceof _n?this.hashModel(d):d.constructor===Object&&this.hashObject(d,u)}}}}hashModel(d){this.hashState.mC++,this.done.add(d);for(const[u,b]of Object.entries(d))u!=="__realm"&&b!==void 0&&this.hashEntry(u,b)}hashObject(d){let u=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.hashState.oC++,this.done.add(d);for(const[b,w]of Object.entries(d))w!==void 0&&this.hashEntry(b,w,u)}hashArray(d){let u=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.done.add(d);for(let b=0;b<d.length;b++)this.hashEntry(b,d[b],u)}hashIntArray(d){this.done.add(d);for(let u=0;u<d.length;u++){const b=d[u];b===0?this.hashState.zC++:(this.hashState.nC++,this.hashState.nH+=b)}}hashStructure(d,u){let b=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];u!==void 0&&(this.done.add(d),this.hash(u,b))}hashEntry(d,u){let b=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];d[0]!=="$"&&(b&&typeof u=="object"?this.todo.push({key:d,value:u}):this.hash(u,b))}}class Nu{static newOrRecycled(d){let u=this.reusableInstance;return u?(u.vm=d,u.nextRef=1,u.refs=new Map,u.todo=[]):u=this.reusableInstance=new this(d),u}static get reusableInstance(){return this[this.name+"-instance"]}static set reusableInstance(d){this[this.name+"-instance"]=d}static resetInstance(){this.reusableInstance=null}constructor(d){this.vm=d,this.nextRef=1,this.refs=new Map,this.todo=[],this.writers=new Map,this.addWriter("Teatime:Message",Hr),this.addWriter("Teatime:Data",Yt),this.addWriter("Teatime:QFunc",fc);for(const[u,b]of _n.allClassTypes())this.addWriter(u,b);this.okayToIgnore={$debugWriteProxyHandler:!0};for(const u of _n.allClasses())if(Object.prototype.hasOwnProperty.call(u,"okayToIgnore")){const b=u.okayToIgnore();if(!Array.isArray(b))throw new Error("okayToIgnore() must return an array");for(const w of b){if(w[0]!=="$")throw Error(`okayToIgnore: ignored prop "${w}" must start with '$'`);this.okayToIgnore[w]=!0}}}addWriter(d,u){const b=Object.getPrototypeOf(u)===Object.prototype,{cls:w,write:E}=b?u:{cls:u,write:T=>({...T})};if(w===Object)throw Error(`${je.libName} types: '${d}' is the Object class itself, must be a user class`);if(w===Array)throw Error(`${je.libName} types: '${d}' is the Array class, must be a user class`);E?this.writers.set(w,(T,I)=>this.writeAs(d,T,E(T),b?`${I}.write(${w.name})`:I)):u.writeStatic||console.warn(`${je.libName} types: ${d} does not implement write() or writeStatic()`)}snapshot(d,u){const b={_random:d._random.state(),messages:this.write(d.messages.asArray(),"FutureMessages"),subscribers:void 0,controller:void 0,$compiledFuncs:void 0};this.writeAllStaticInto(b);for(const[w,E]of Object.entries(d))w in b||this.writeInto(b,w,E,u);return this.writeDeferred(),delete b.controller,delete b.subscribers,delete b.$compiledFuncs,b}writeAllStaticInto(d){for(const u of _n.allClasses())if(u!==_n)for(const[b,w]of Object.entries(u)){if(b[0]==="$")continue;const E=_n.classToID(u);d.staticModelProps||(d.staticModelProps={}),E in d.staticModelProps||(d.staticModelProps[E]={}),this.writeInto(d.staticModelProps[E],b,w,`Model(${E}).static`),Ru("Model",E)}for(const[u,b]of _n.allClassTypes())if(typeof b=="object"){const{writeStatic:w}=b;if(w){const E=w();E&&(d.staticTypeProps||(d.staticTypeProps={}),d.staticTypeProps[u]=this.write(E,`Type(${u}).writeStatic()`),Ru("Type",u))}}}writeDeferred(){let d=0;for(;d<this.todo.length;){const{state:u,key:b,value:w,path:E}=this.todo[d++];this.writeInto(u,b,w,E,!1)}this.todo.length=0}write(d,u){let b=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];switch(typeof d){case"number":return Object.is(d,-0)?{$class:"NegZero"}:Number.isFinite(d)?d:Number.isNaN(d)?{$class:"NaN"}:{$class:"Infinity",$value:Math.sign(d)};case"string":case"boolean":return d;case"undefined":return{$class:"Undefined"};case"bigint":return{$class:"BigInt",$value:d.toString()};default:{if(this.refs.has(d))return this.writeRef(d);if(d===null)return d;if(this.writers.has(d.constructor))return this.writers.get(d.constructor)(d,u);const w=Object.prototype.toString.call(d).slice(8,-1);if(this.writers.has(w))return this.writers.get(w)(d,u);switch(w){case"Array":return this.writeArray(d,u,b);case"ArrayBuffer":return this.writeArrayBuffer(d);case"Set":return this.writeAs(w,d,[...d],u);case"Map":return this.writeAs(w,d,[...d].flat(),u);case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":return this.writeTypedArray(w,d);case"Object":if(d instanceof _n)return this.writeModel(d,u);if(d.constructor===Object||typeof d.constructor!="function")return this.writeObject(d,u,b);throw console.warn(`${je.libName}: unknown class at ${u}:`,d),Error(`${je.libName}: class not registered in Model.types(): ${d.constructor.name}`);case"Function":if(d[us])return this.writers.get(us)(d,u);throw console.warn(`${je.libName}: found function at ${u}:`,d),Error(`${je.libName}: cannot serialize functions except for QFuncs`);default:throw console.warn(`${je.libName}: unsupported property at ${u}:`,d),Error(`${je.libName}: serialization of ${w}s is not supported`)}}}}writeModel(d,u){const b={};this.refs.set(d,b);try{b.$model=_n.classToID(d.constructor)}catch(w){throw console.error(`unregistered model class at ${u}:`,d),w}for(const w of Object.keys(d).sort()){if(w==="__realm")continue;const E=d[w];(typeof E=="number"&&Number.isFinite(E)&&!Object.is(E,-0)||typeof E=="string"||typeof E=="boolean")&&w[0]!=="$"?b[w]=E:this.writeInto(b,w,E,`${d}`,!0)}return b}writeObject(d,u){let b=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];const w={};this.refs.set(d,w);for(const E of Object.keys(d).sort()){const T=d[E];(typeof T=="number"&&Number.isFinite(T)&&!Object.is(T,-0)||typeof T=="string"||typeof T=="boolean")&&E[0]!=="$"?w[E]=T:this.writeInto(w,E,T,u,b)}return w}writeArray(d,u){let b=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];const w=[];this.refs.set(d,w);for(let E=0;E<d.length;E++){const T=d[E];typeof T=="number"&&Number.isFinite(T)&&!Object.is(T,-0)||typeof T=="string"||typeof T=="boolean"?w[E]=T:this.writeInto(w,E,T,u,b)}return w}writeArrayBuffer(d){const u={$class:"ArrayBuffer",$value:oE(d)};return this.refs.set(d,u),u}writeTypedArray(d,u){const b={$class:d,$value:[this.write(u.buffer),u.byteOffset,d==="DataView"?u.byteLength:u.length]};return this.refs.set(u,b),b}writeAs(d,u,b,w){const E={$class:d};this.refs.set(u,E);const T=this.write(b,w,!1);return typeof T!="object"||T===null||T.$class||Array.isArray(T)?E.$value=T:Object.assign(E,T),E}writeRef(d){const u=this.refs.get(d);if(typeof u!="object")throw Error("Non-object in refs: "+d);return Array.isArray(u)&&(u.toJSON=function(){return{$id:this.$id,$class:"Array",$value:[...this]}}),{$ref:u.$id||(u.$id=this.nextRef++)}}writeInto(d,u,b,w){let E=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(u[0]==="$")return void(this.okayToIgnore[u]||(co(`snapshot: ignoring property ${u} (declare as okayToIgnore to suppress warning)`,{only:"once"}),this.okayToIgnore[u]=!0));if(E&&typeof b=="object")return void this.todo.push({state:d,key:u,value:b,path:w});const T=this.write(b,w+dc(d,u));d[u]=T}}const Ip=Symbol("croquet:unresolved");class yc{static newOrRecycled(d){let u=this.reusableInstance;return u?(u.vm=d,u.refs=new Map,u.todo=[],u.unresolved=[],u.postprocess=[]):u=this.reusableInstance=new this(d),u}static get reusableInstance(){return this[this.name+"-instance"]}static set reusableInstance(d){this[this.name+"-instance"]=d}static resetInstance(){this.reusableInstance=null}constructor(d){this.vm=d,this.refs=new Map,this.todo=[],this.unresolved=[],this.postprocess=[],this.readers=new Map,this.addReader("Teatime:Message",Hr),this.addReader("Teatime:Data",Yt),this.addReader("Teatime:QFunc",fc),this.readers.set("Undefined",()=>{}),this.readers.set("NaN",()=>NaN),this.readers.set("Infinity",u=>u*(1/0)),this.readers.set("NegZero",()=>-0),this.readers.set("BigInt",u=>BigInt(u)),this.readers.set("ArrayBuffer",u=>function(b){const w=globalThis.atob(b),E=w.length,T=new Uint8Array(E);for(let I=0;I<E;I++)T[I]=w.charCodeAt(I);return T.buffer}(u)),this.readers.set("DataView",u=>new DataView(...u)),this.readers.set("Int8Array",u=>new Int8Array(...u)),this.readers.set("Uint8Array",u=>new Uint8Array(...u)),this.readers.set("Uint8ClampedArray",u=>new Uint8ClampedArray(...u)),this.readers.set("Int16Array",u=>new Int16Array(...u)),this.readers.set("Uint16Array",u=>new Uint16Array(...u)),this.readers.set("Int32Array",u=>new Int32Array(...u)),this.readers.set("Uint32Array",u=>new Uint32Array(...u)),this.readers.set("Float32Array",u=>new Float32Array(...u)),this.readers.set("Float64Array",u=>new Float64Array(...u));for(const[u,b]of _n.allClassTypes())this.addReader(u,b)}addReader(d,u){let b=w=>Object.assign(Object.create(u.prototype),w);typeof u=="object"&&(b=u.read),this.readers.set(d,b)}enableBackwardCompatibility(d){const u=d?.meta?.sdk;if(!u)return;const[b,w,E,T]=u.split(/[-.+]/).map(k=>+k);let I=`${b}.${w}`;E&&(I+=`.${E}`),T&&(I+=`-${T}`),console.warn(`${je.libName}: reading snapshot version ${I}`),this.compatMaps=b<1||b===1&&(w<1||w===1&&E<7)}readVM(d,u,b){if(u!=="VM")throw Error("VirtualMachine must be root object");b&&this.enableBackwardCompatibility(d);const w=this.read(d,u,!1);return this.readDeferred(),this.resolveRefs(),this.doPostprocess(),this.readAllStatic(w),w}readDeferred(){let d=0;for(;d<this.todo.length;){const{object:u,key:b,value:w,path:E}=this.todo[d++];this.readInto(u,b,w,E,!1)}this.todo.length=0}resolveRefs(){for(const{object:d,key:u,ref:b,path:w}of this.unresolved){if(!this.refs.has(b))throw Error(`Unresolved ref: ${b} at ${w}[${JSON.stringify(u)}]`);d[u]=this.refs.get(b)}this.unresolved.length=0,this.refs.clear()}doPostprocess(){for(const d of this.postprocess)d();this.postprocess.length=0}readAllStatic(d){const{staticModelProps:u,staticTypeProps:b}=d,w=[];if(u){for(const[E,T]of Object.entries(u)){const I=_n.classFromID(E);w.push(()=>Object.assign(I,T)),Ru("Model",E)}delete d.staticModelProps}if(b){const E=Object.fromEntries(_n.allClassTypes());for(const[T,I]of Object.entries(b)){const k=E[T];if(typeof k=="object"){const O=k;w.push(()=>O.readStatic(I))}else{const O=k;w.push(()=>Object.assign(O,I))}Ru("Type",T)}delete d.staticTypeProps}w.length&&(d.staticInitializers=w)}read(d,u){let b=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];switch(typeof d){case"number":case"string":case"boolean":return d;default:{const w=Object.prototype.toString.call(d).slice(8,-1);switch(w){case"Array":return this.readArray(d,u,b);case"Null":return null;case"Object":{const{$class:E,$model:T,$ref:I}=d;if(I)throw Error("refs should have been handled in readInto()");return T?this.readModel(d,u):E?this.readAs(E,d,u):this.readObject(Object,d,u,b)}default:throw Error(`Don't know how to deserialize ${w} at ${u}`)}}}}readModel(d,u){const b=_n.instantiateClassID(d.$model,d.id);d.$id&&this.refs.set(d.$id,b);for(const[w,E]of Object.entries(d))w!=="id"&&w[0]!=="$"&&this.readInto(b,w,E,u);return b}readObject(d,u,b){let w=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const E=new d;u.$id&&this.refs.set(u.$id,E);for(const[T,I]of Object.entries(u))T[0]!=="$"&&this.readInto(E,T,I,b,w);return E}readArray(d,u){let b=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];const w=[];d.$id&&this.refs.set(d.$id,w);for(let E=0;E<d.length;E++)d[E]!==void 0&&this.readInto(w,E,d[E],u,b);return w}readAsArray(d,u){let b=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];const w=d.$value;return d.$id&&(w.$id=d.$id),this.readArray(w,u,b)}readAsSet(d,u){const b=new Set;d.$id&&this.refs.set(d.$id,b);const w=this.unresolved.length,E=this.read(d.$value,u,!1),T=()=>{for(const I of E)b.add(I)};return this.unresolved.length===w?T():this.postprocess.push(T),b}readAsMap(d,u){const b=new Map;d.$id&&this.refs.set(d.$id,b);const w=this.unresolved.length,E=this.read(d.$value,u,!1),T=this.compatMaps?()=>{if(E.some(I=>I.length!==2))console.warn("Deferring map resolution at",u),this.postprocess.push(T);else for(const[I,k]of E)b.set(I,k)}:()=>{for(let I=0;I<E.length;I+=2)b.set(E[I],E[I+1])};return this.unresolved.length===w?T():this.postprocess.push(T),b}readAsClass(d,u,b){let w={};const E=new Map;if("$value"in u)w=this.read(u.$value,b,!1);else for(const[I,k]of Object.entries(u)){if(I[0]==="$")continue;const O=k&&k.$ref;O?this.refs.has(O)?w[I]=this.refs.get(O):(w[I]=Ip,E.set(O,I)):this.readInto(w,I,k,b,!1)}const T=this.readers.get(d)(w,b);T||d==="Undefined"||d==="BigInt"||d==="NaN"||d==="NegZero"||console.warn(`Reading "${d}" returned ${T} at ${b}`),u.$id&&this.refs.set(u.$id,T);for(const[I,k]of E.entries())this.unresolved.push({object:T,key:k,ref:I,path:b});return T}readAs(d,u,b){switch(d){case"Array":return this.readAsArray(u,b);case"Set":return this.readAsSet(u,b);case"Map":return this.readAsMap(u,b);default:return this.readAsClass(d,u,b)}}readRef(d,u,b,w){if(!b||!b.$ref)return!1;const E=b.$ref;return this.refs.has(E)?d[u]=this.refs.get(E):(d[u]=Ip,this.unresolved.push({object:d,key:u,ref:E,path:w})),!0}readInto(d,u,b,w){let E=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];this.readRef(d,u,b,w)||(E&&typeof b=="object"?this.todo.push({object:d,key:u,value:b,path:w}):d[u]=this.read(b,w+dc(d,u)))}}class h0 extends Nu{encode(d){const u=this.writeArray(d,"args");return this.writeDeferred(),u}writeModel(d){return{$ref:d.id}}}class f0 extends yc{decode(d){const u=this.readArray(d,"args");return this.readDeferred(),this.resolveRefs(),this.doPostprocess(),u}resolveRefs(){for(const{object:d,key:u,ref:b,path:w}of this.unresolved)if(this.refs.has(b))d[u]=this.refs.get(b);else{const E=this.vm.lookUpModel(b);if(!E)throw Error(`Unresolved ref: ${b} at ${w}[${JSON.stringify(u)}]`);d[u]=E}}}const e1=[Object,Array,Map,Set,BigInt,ArrayBuffer,DataView,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];function Np(h,d,u,b){const w=Array.isArray(h)?h:h.constructor===Set?h.values():h.constructor===Map?h.entries():Object.values(h),E=[];for(const T of w)typeof T!="object"||T===null||b.has(T)||(b.add(T),E.push(T));for(const T of E){if(e1.includes(T.constructor))continue;const I=d+"."+T.constructor.name;if(u[I]){if(u[I]!==T.constructor)throw new Error("Class with name "+I+" already gathered, but new one has different identity")}else u[I]=T.constructor}for(const T of E)Np(T,d,u,b)}function Ru(h,d){const u=Kn.controllers.size;u>1&&co(`Static properties in shared ${h} ${d} can lead to divergence because ${u} ${je.libName} sessions are running simultaneaously. Consider using wellKnownModel() instead.`,{only:"once"})}function oE(h){const d=new Uint8Array(h),u=[];for(let b=0;b<d.byteLength;b+=4096){const w=d.subarray(b,b+4096);u.push(String.fromCharCode.apply(null,w))}return globalThis.btoa(u.join(""))}const bc={classes:_.has("debug","classes")};let p0=Symbol("SECRET");const Rh=new WeakSet;class _n{static create(){if(!Rp(this))throw Error(`Model class "${this.name}" not registered`);const d=this,u=this.createNoInit();return!this.wellKnownModel("modelRoot")&&(u.beWellKnownAs("modelRoot"),u.__realm.vm.debugEvents&&this.eventDebugInit(u)),Rh.add(u),u.init(...arguments),Rh.has(u)&&(Rh.delete(u),Object.getPrototypeOf(d)!==_n&&console.warn(`${u} did not call super.init(options)`)),u}static createNoInit(d){const u=Ho(),b=new this(p0);return d||(d=u.register(b)),bc.write===void 0&&(bc.write=_.has("debug","write"),bc.publish=_.has("debug","publish"),bc.events=_.has("debug","events")),Object.defineProperty(b,"__realm",{value:u,writable:bc.write}),Object.defineProperty(b,"id",{value:d,enumerable:!0}),b}static allowConstructors(){p0=void 0,console.warn("disabling error reporting for Model constructors")}static register(d){return d||(d=this.name,console.warn(`Deprecation warning: ${this.name}.register(classId) called without classId. See https://croquet.io/docs/croquet/Model.html#.register`)),yc.resetInstance(),Nu.resetInstance(),h0.resetInstance(),f0.resetInstance(),function(u,b){const w=Ve(u),E=ue(`${b}:${w}`);Ee.push(E),E.then(T=>De[T].what=`Class ${b}`)}(this,d),function(u,b){const w=Wi[b];if(w&&w!==u)throw Error(`Registering model class ${u.name} failed, id "${b}" already used by ${w.name}`);Rp(u)?bc.classes&&!w&&console.warn(`ignoring re-exported model class ${b}`):(bc.classes&&console.log(`registering model class ${b}`),u[wc]=b),Wi[b]=u}(this,d),_n.lastRegistered=this,this}static wellKnownModel(d){if(!ks.hasCurrent())throw Error("static Model.wellKnownModel() called from outside model");return ks.current().get(d)}static evaluate(d){return ks.evaluate(d)}static isExecuting(){return ks.hasCurrent()}static types(){return{}}static gatherClassTypes(d,u){const b={};return Np({root:d},u,b,new Set),b}static eventDebugOptions(){return bc}static eventDebugInit(d){d.subscribe("*","*",d.createQFunc(`
        function logEvents(data) {
            // do this now to have no side effects below
            const { scope, event, source } = this.activeSubscription;
            // below stuff is outside the model. Must not have any side effects!
            const debug = this.constructor.eventDebugOptions();
            if (!debug.events && !debug.publish) return;
            const action = source === "model" ? "publish" : "receive";
            const emoji = source === "model" ? "🔮" : "📬";
            console.log(\`\${emoji} @\${this.now()} Model \${action} \${scope}:\${event}\`, data);
        }
        `))}static okayToIgnore(){return[]}static classToID(d){return function(u){if(Rp(u))return u[wc];const b=u.name||"ClassName";throw Error(`Model class not registered, did you call ${b}.register("${b}")?`)}(d)}static classFromID(d){return g0(d)}static allClasses(){return m0()}static allClassTypes(){return function(){const d={};for(const u of m0())Object.assign(d,u.types());return Object.entries(d)}()}static instantiateClassID(d,u){return g0(d).createNoInit(u)}constructor(d){if(d!==p0)throw Error(`You must create ${App.libName} Models using create() not "new"!`)}init(d,u){Rh.delete(this)}destroy(){Ho().unsubscribeAll(this),Ho().deregister(this)}publish(d,u,b){this.__realm||this.__realmError(),this.__realm.publish(u,b,d)}subscribe(d,u,b){return this.__realm||this.__realmError(),this.__realm.subscribe(this,d,u,b)}unsubscribe(d,u){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"*";this.__realm||this.__realmError(),this.__realm.unsubscribe(this,d,u,b)}unsubscribeAll(){this.__realm||this.__realmError(),this.__realm.unsubscribeAll(this)}get activeSubscription(){if(!ks.hasCurrent())return;const{currentEvent:d,currentEventFromModel:u}=ks.current();if(!d)return;const[b,w]=d.split(":");return{scope:b,event:w,source:u?"model":"view"}}__realmError(){if(!this.id)throw Error(`${this} has no ID, did you call super.init(options)?`)}future(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.__realm||this.__realmError();for(var b=arguments.length,w=new Array(b>2?b-2:0),E=2;E<b;E++)w[E-2]=arguments[E];return this.__realm.future(this,d,u,w)}cancelFuture(d){return this.__realm||this.__realmError(),this.__realm.cancelFuture(this,d)}random(){return Ho().random()}now(){return Ho().now()}beWellKnownAs(d){Ho().vm.set(d,this)}getModel(d){return this.__realm.vm.lookUpModel(d)}wellKnownModel(d){return this.__realm.vm.get(d)}modelOnly(d){if(ks.current()===this.__realm.vm)return!0;const u=Error(d||`${this}.modelOnly() called from outside a model!`);throw Br("view code",u),u}get sessionId(){return this.__realm.vm.id}get viewCount(){return Object.keys(this.__realm.vm.views).length}createQFunc(d,u){return u===void 0&&(u=d,d={}),hc(this,d,u)}persistSession(d){if(this!==this.wellKnownModel("modelRoot"))throw Error("persistSession() must only be called on the root model");this.__realm.vm.persist(this,d)}[Symbol.toPrimitive](){return`${this.constructor[wc]||this.constructor.name}#${this.id}`}}const Wi={},wc=Symbol("CLASS_ID");function m0(){return Object.values(Wi)}function Rp(h){return Object.prototype.hasOwnProperty.call(h,wc)}function g0(h){if(Wi[h])return Wi[h];throw Error(`Model class "${h}" in snapshot, but not registered?`)}const y0="Croquet.Model";let Ou;_n[wc]=y0,Wi[y0]=_n;class pl{static displayStatus(d,u){return Wm(d,u)}static displayWarning(d,u){return co(d,u)}static displayError(d,u){return function(b){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return b&&je.showMessage(b,{...w,level:"error"})}(d,u)}constructor(d){typeof d=="object"&&"__realm"in d||console.warn(`${je.libName}: argument to View constructor needs to be a Model`);let u=Ho("");u&&u.isViewRealm()||(u=Da(d.__realm.vm,()=>Ho(),!0)),Object.defineProperty(this,"realm",{value:u}),Object.defineProperty(this,"id",{value:u.register(this),configurable:!0});const b=u.controller.session;if(b.view||(b.view=this),Ou||(Ou={events:_.has("debug","events"),publish:_.has("debug","publish")}),b.view===this&&(Ou.events||Ou.publish)){const w=I=>{if(!u.vm.debugEvents)return;const{scope:k,event:O,source:M,subscribed:re}=this.activeSubscription;if(!re&&!Ou.publish)return;const se=M==="view"?"publish":"receive";console.log(`${M==="view"?"📮":"👁️"} View ${se} ${k}:${O}${re||se==="publish"?"":" (no subscribers)"}`,I)},E=I=>this.activeSubscription.source==="view"&&w(I),T=I=>this.activeSubscription.source==="model"&&w(I);E.__CROQUET__=!0,T.__CROQUET__=!0,this.subscribe("*",{event:"*",handling:"queued"},T),this.subscribe("*",{event:"*",handling:"immediate"},E)}}detach(){this.unsubscribeAll(),this.realm.deregister(this),Object.defineProperty(this,"id",{value:""})}reattach(){Object.defineProperty(this,"id",{value:this.realm.register(this)})}publish(d,u,b){this.realm.publish(u,b,d)}subscribe(d,u,b){if(typeof b=="string"&&(b=this[b]),typeof b!="function")throw Error(`${je.libName}: subscribe() handler is not a function`);const w=b;(b=w.bind(this)).unbound=w;const{event:E,handling:T}=u.event?u:{event:u};this.realm.subscribe(E,this.id,b,d,T)}unsubscribe(d,u){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;typeof b=="string"&&(b=this[b]),this.realm.unsubscribe(u,this.id,b,d)}unsubscribeAll(){this.realm.unsubscribeAll(this.id)}get activeSubscription(){const{currentEvent:d,currentEventFromModel:u,currentEventOnlyGeneric:b}=Kn;if(!d)return;const[w,E]=d.split(":");return{scope:w,event:E,source:u?"model":"view",subscribed:!b}}future(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.realm.future(this,d)}random(){return Ho().random()}now(){return this.realm.now()}externalNow(){return this.realm.externalNow()}extrapolatedNow(){return this.realm.extrapolatedNow()}update(d){}wellKnownModel(d){return this.realm.vm.get(d)}get sessionId(){return this.realm.controller.sessionSpec.id}get session(){if(this.id&&this.realm.valid())return this.realm.controller.session}get viewId(){return this.realm.controller.viewId}[Symbol.toPrimitive](){const d=this.constructor.name;return d.includes("View")?d:`${d}[View]`}}const ml=new class{constructor(){this.ready=!1,this.isInIframe=window.top!==window,this.subscriptions={},this.enumerator=null}setReceiver(h){this.receiver=h,this.ready=!0}setIframeEnumerator(h){this.enumerator=h}on(h,d){if(!this.receiver)throw Error("setReceiver() has not been called");if(typeof d=="string"&&(d=this.receiver[d]),!d)throw Error("Messenger.on: the second argument must be a method name or a function");if(this.subscriptions[h]){if(this.findIndex(this.subscriptions[h],d)>=0)throw Error(`${d} is already subscribed`)}else this.subscriptions[h]=[];this.subscriptions[h].push(d),this.listener||(this.listener=u=>this.receive(u),window.addEventListener("message",this.listener))}detach(){this.listener&&(window.removeEventListener("message",this.listener),this.listener=null),this.stopPublishingPointerMove(),this.receiver=null,this.subscriptions={},this.enumerator=null,this.ready=!1}removeSubscription(h,d){typeof d=="string"&&(d=this.receiver[d]);const u=this.subscriptions[h];if(u){const b=this.findIndex(u,d);u.splice(b,1),u.length===0&&delete this.subscriptions[h]}}removeAllSubscriptions(){this.subscriptions={}}receive(h){const{event:d,data:u}=h.data,b=h.source;this.handleEvent(d,u,b)}handleEvent(h,d,u){const b=this.subscriptions[h];b&&b.forEach(w=>{w.call(this.receiver,d,u)})}send(h,d,u){if(this.isInIframe)return void window.top.postMessage({event:h,data:d},"*");if(u)return void u.postMessage({event:h,data:d},"*");this.enumerator&&this.enumerator().forEach(b=>{b.contentWindow.postMessage({event:h,data:d},"*")})}findIndex(h,d){const u=d.name;return h.findIndex(b=>{const w=b.name;return u||w?u===w:d===b})}startPublishingPointerMove(){this._moveHandler||(this._moveHandler=h=>this.send("pointerPosition",{x:h.clientX,y:h.clientY,type:h.type}),window.document.addEventListener("pointermove",this._moveHandler,!0))}stopPublishingPointerMove(){this._moveHandler&&(window.document.removeEventListener("pointermove",this._moveHandler,!0),this._moveHandler=null)}},t1=p.CROQUET_PLATFORM==="node";let b0=60;class ln{static async join(d){try{return await this.join_impl(d)}catch(u){throw je.showMessage(u.message||u,{level:"fatal"}),u}}static async join_impl(d){d.appId||(d.appId="no.appId"),d.name||(d.name=je.autoSession(),d.password||(d.password=je.autoPassword())),d.model||(d.model=_n.lastRegistered),d.view||(d.view=pl);const u=[];for(const[Y,be]of Object.entries(d))be instanceof Promise&&u.push(be.then(Pe=>d[Y]=Pe));function b(Y,be){return Y===be||Y.prototype instanceof be}if(await Promise.all(u),d.box){if(typeof d.box!="string")throw Error(`${je.libName}: box must be a string in Session.join()!`);if(!d.box.includes("/"))throw Error(`${je.libName}: box must be a (partial) URL in Session.join()!`)}else if(!d.reflector||!d.files){if(typeof d.apiKey!="string")throw Error(`${je.libName}: no apiKey provided in Session.join()!`);if(d.apiKey.length>128)throw Error(`${je.libName}: apiKey > 128 characters in Session.join()!`)}if(typeof d.name!="string")throw Error(`${je.libName}: no session name provided in Session.join()!`);if(d.name.length>128)throw Error(`${je.libName}: session name > 128 characters in Session.join()!`);const w=d.model;if(typeof w!="function"||!b(w,_n))throw Error(`${je.libName}: bad model class in Session.join()`);const E=d.view||pl;if(typeof E!="function"||!b(E,pl))throw Error(`${je.libName}: bad view class in Session.join()`);if(typeof d.appId!="string")throw Error(`${je.libName}: no appId provided in Session.join()`);if(!d.appId.length>128)throw Error(`${je.libName}: appId > 128 characters in Session.join()`);if(!d.appId.match(/^[a-z](-?[a-z0-9_])*(\.[a-z0-9_](-?[a-z0-9_])*)+$/i))throw Error(`${je.libName}: malformed appId in Session.join()`);if(typeof d.password!="string"||!d.password)throw Error(`${je.libName}: no password provided in Session.join()`);for(const Y of["reflector","synchronizer","files","backend","box"]){const be=_[Y]||d[Y];be!==void 0&&(_[Y]=be)}if(t1&&d.step!=="manual")throw Error("stepping must be manual in a Node.js app");if("rejoinLimit"in d){if(typeof d.rejoinLimit!="number"||d.rejoinLimit<0||d.rejoinLimit>6e4)throw Error("rejoinLimit range: 0-60000")}else d.rejoinLimit=1e3;if("eventRateLimit"in d){if(typeof d.eventRateLimit!="number"||d.eventRateLimit<1||d.eventRateLimit>60)throw Error("eventRateLimit range: 1-60")}else d.eventRateLimit=20;if(d.heraldUrl){if(d.heraldUrl.length>256)throw Error("heraldUrl can only be 256 characters");if(!d.heraldUrl.startsWith("https://"))throw Error("heraldUrl needs to be https")}if(d.hashOverride){if(d.hashOverride.length!==43)throw Error("hashOverride must be 43 characters");if(d.hashOverride.search(/[^-_a-zA-Z0-9]/)!==-1)throw Error("hashOverride must be base64url encoded")}if(d.debug){let Y=function(be){return typeof be=="string"&&(be=be.split(",")),be?Array.isArray(be)?be:[be]:[]};_.debug=[...Y(d.debug),...Y(_.debug)].join(",")}if("autoSleep"in d){const Y=d.autoSleep,be=typeof Y;if(be==="number"){if(Y<0)throw Error("an autoSleep value must be >= 0")}else{if(be!=="boolean")throw Error("autoSleep must be numeric or boolean");d.autoSleep=Y?10:0}}else d.autoSleep=10;if(d.flags){let Y=d.flags;typeof Y=="string"&&(Y=Y.split(",")),Y=Y?Array.isArray(Y)?Y:[Y]:[],Y=Y.filter(be=>typeof be!="object"),Y.length?(d.flags={},Y.forEach(be=>d.flags[be]=!0)):d.flags=null}"expectedSimFPS"in d&&(b0=Math.min(d.expectedSimFPS,120));const T=["name","password","apiKey","appId","tps","autoSleep","heraldUrl","rejoinLimit","eventRateLimit","optionsFromUrl","persistentIdOptions","viewOptions","viewData","viewIdDebugSuffix","hashOverride","location","flags","progressReporter"];(function(){Object.isFrozen(gl)||(n1(gl),function(Y){const be=JSON.stringify(Y,(we,ve)=>typeof ve=="function"?Ve(ve):ve);if(be==="{}")return;const Pe=JSON.parse(be),oe=ue(e(Pe));Ee.push(oe),oe.then(we=>De[we].what=`${je.libName} Constants`)}(gl))})();const I=new _h,k=JSON.parse(JSON.stringify({...d.options}));if(d.persistentIdOptions){if(!Array.isArray(d.persistentIdOptions))throw Error("persistentIdOptions must be an array");for(const Y of d.persistentIdOptions)if(!(Y in k))throw Error(`persistentIdOptions key "${Y}" not found in options`)}const O={id:"",persistentId:"",versionId:"",name:d.name,model:null,view:null,step(Y){I.stepSession("animation",{frameTime:Y,view:O.view,expectedSimFPS:b0})},leave:()=>ln.leave(O.id),data:{store:(Y,be)=>Ot.store(Y,{...be,sessionId:O.id}),fetch:(Y,be)=>Ot.fetch(Y,{...be,sessionId:O.id}),hash:Y=>Ot.hash(Y),toId:Y=>Ot.toId(Y),fromId:Y=>Ot.fromId(Y)},get latency(){return I.latency},get latencies(){return I.latencies}};typeof __CROQUET_DEVTOOLS__<"u"&&__CROQUET_DEVTOOLS__.dispatchEvent(new CustomEvent("session",{detail:{session:O,controller:I}}));const M={options:k,initFn:(Y,be)=>w.create(Y,be),rebootModelView:se};for(const[Y,be]of Object.entries(d))T.includes(Y)&&(M[Y]=be);await I.initFromSessionSpec(M);let re=!1;return await se(),d.step!=="manual"&&I.startStepping(O.step),O;async function se(){(function(){O.model=null,O.view&&(_.has("debug","session",!1)&&console.log(O.id,"detaching root view"),O.view.detach(),O.view.id!==""&&console.warn(`${je.libName}: ${O.view} did not call super.detach()`),O.view=null),je.clearSessionMoniker(),ml.ready&&ml.detach()})(),I.leaving?I.leaving(!0):re||(re=!0,await I.establishSession(M),re=!1,O.model=I.vm.get("modelRoot"),O.id=I.id,O.persistentId=I.persistentId,O.versionId=I.versionId,I.session=O,je.makeSessionWidgets(O.id),I.inViewRealm(()=>{_.has("debug","session",!1)&&console.log(O.id,"creating root view"),new E(O.model,M.viewOptions)}))}}static async leave(d){const u=function(E){for(const T of Xi)if(T.id===E)return T;return null}(d);if(!u)return!1;u.reconnectTimeout&&(clearTimeout(u.reconnectTimeout),delete u.reconnectTimeout);const b=new Promise(E=>u.leaving=E),w=u.connection;return!!w.connected&&(w.closeConnection(1e3),b)}static thisSession(){const d=ks.current();return d?d.id:""}get id(){return""}get persistentId(){return""}get versionId(){return""}get name(){return""}get data(){return{}}step(d){}leave(){}}const gl={};function n1(h){if(!Object.isFrozen(h)){Object.freeze(h);for(const d of Object.values(h))!d||typeof d!="object"&&typeof d!="function"||n1(d)}}const w0={Model:_n,View:pl,Session:ln,Data:Ot,Constants:gl,App:je,Messenger:ml,VERSION:Ys};return _n.Croquet=w0,pl.Croquet=w0,typeof __CROQUET_DEVTOOLS__<"u"&&__CROQUET_DEVTOOLS__.dispatchEvent(new CustomEvent("load",{detail:{version:Ys}})),typeof globalThis<"u"&&(globalThis.__CROQUET__?console.warn("WARNING: Multiple instances of Croquet being imported."):globalThis.__CROQUET__=Ys),vc.App=je,vc.Constants=gl,vc.Data=Ot,vc.Messenger=ml,vc.Model=_n,vc.Session=ln,vc.VERSION=Ys,vc.View=pl,vc}var ys=VP(),F_="1.0.4";console.log(`Multisynq ${F_}`);var PN={Model:ys.Model,View:ys.View,Session:ys.Session,Data:ys.Data,Constants:ys.Constants,App:ys.App,VERSION:F_};ys.Model.Multisynq=PN;ys.View.Multisynq=PN;typeof globalThis<"u"&&(globalThis.__MULTISYNQ__?console.warn("WARNING: Multiple instances of Multisynq being imported."):globalThis.__MULTISYNQ__=F_);var KP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class Z_ extends ys.Model{constructor(){super(...arguments),this.__reactEvents=[],this.__views=null}init(e){const{trackViews:n}=e,r=KP(e,["trackViews"]);super.init(r),this.__reactEvents=[],n===!0&&(this.__views=new Map),super.subscribe(this.sessionId,"view-join",this.__viewJoin),super.subscribe(this.sessionId,"view-exit",this.__viewExit)}__viewJoin(e){const n=typeof e!="string"?e:{viewId:e},r=n.viewId;this.__views&&(this.__views.set(r,n),this.publish(this.sessionId,"views-updated")),this.handleViewJoin(r,n)}__viewExit(e){var n,r;const s=typeof e=="string"?e:e.viewId,o=(r=(n=this.__views)===null||n===void 0?void 0:n.get(s))!==null&&r!==void 0?r:{viewId:s};this.__views&&(this.__views.delete(s),this.publish(this.sessionId,"views-updated")),this.handleViewExit(s,o)}handleViewJoin(e,n){}handleViewExit(e,n){}subscribe(e,n,r){if(n==="view-join"||n==="view-exit")throw new Error(`In @multisynq/react you cannot directly subscribe to ${n}.
Override ${n==="view-join"?"handleViewJoin":"handleViewExit"} instead
`);this.__subscribe(e,n,r)}__subscribe(e,n,r){this.__reactEvents.push({scope:e,event:n}),typeof r=="function"&&this[r.name]===r&&(r=r.name);const s=this.createQFunc({handler:r},`(data) => {
      if (typeof handler === 'function') handler(data)
      else this[handler](data)
      this.publish(this.sessionId, 'react-updated')
    }`);super.subscribe(e,n,s)}__future_wrapper(e,...n){const r=this[e];typeof r=="function"?(r.apply(this,n),this.publish(this.sessionId,"react-updated")):console.error(`${e} is not a function of ${this}`)}future(e,n,...r){return n!==void 0?super.future(e,"__future_wrapper",n,...r):new Proxy(this,{get(s,o,c){return(...l)=>s.future(e,o,...l)}})}}Z_.register("ReactModel");let kN=null;class YP extends ys.View{constructor(e){super(e),this.model=e,this.updateCallback=null,this.syncedCallback=kN,this.detachCallback=null,this.subscribe(this.viewId,"synced",this.synced)}update(e){this.updateCallback!==null&&this.updateCallback(e)}synced(e){this.syncedCallback&&this.syncedCallback(e)}detach(){this.detachCallback&&this.detachCallback(),super.detach()}}function qP(t){kN=t}var QP=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function l(y){try{m(r.next(y))}catch(v){c(v)}}function p(y){try{m(r.throw(y))}catch(v){c(v)}}function m(y){y.done?o(y.value):s(y.value).then(l,p)}m((r=r.apply(t,[])).next())})};function Wx(t){return QP(this,void 0,void 0,function*(){const e=Object.assign(Object.assign({},t),{view:YP,flags:["react"]});return ys.Session.join(e)})}const LN=st.createContext(void 0);var Vx=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function l(y){try{m(r.next(y))}catch(v){c(v)}}function p(y){try{m(r.throw(y))}catch(v){c(v)}}function m(y){y.done?o(y.value):s(y.value).then(l,p)}m((r=r.apply(t,e||[])).next())})},JP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};function e8({sessionParams:t,children:e,showChildrenWithoutSession:n=!1,deferSession:r=!1}){const s=st.useRef(null),o=st.useRef(null),[c,l]=st.useState(null),[p,m]=st.useState(null),[y,v]=st.useState(()=>(r||(t.name||(t.name=ys.App.randomSession()),t.password||(t.password=ys.App.randomPassword())),Object.assign(Object.assign({},t),{join:!r}))),S=st.useCallback(N=>{var R;l(N),m((R=N?.view)!==null&&R!==void 0?R:null)},[l,m]);st.useEffect(()=>v(Object.assign(Object.assign({},t),{join:!r})),[t,r,v]),st.useEffect(()=>{function N(){return Vx(this,void 0,void 0,function*(){if(s.current||!y.join)return;o.current?(s.current=o.current,o.current=null):(s.current="joining",s.current=yield Wx(y));const R=s.current;S(R),qP($=>{const G=s.current;G!==null&&G!=="joining"&&($&&S(G),G.view&&(G.view.detachCallback=()=>{m(null)}))})})}return N(),()=>{const R=s.current;R!==null&&R!=="joining"&&(s.current=null,R.leave())}},[y,S]);const _=st.useCallback(N=>Vx(this,void 0,void 0,function*(){const R=Object.assign(Object.assign(Object.assign({},y),N),{join:!0});R.name||(R.name=ys.App.randomSession()),R.password||(R.password=ys.App.randomPassword());const{join:$}=R,G=JP(R,["join"]);Wx(G).then(F=>{o.current=F,v(R)})}),[v,y]),A=st.useCallback(()=>{v(N=>Object.assign(Object.assign({},N),{join:!1})),S(null)},[v,S]);if(y.join&&p||n){const N={sessionParams:y,session:c,view:p,model:p?.model||null,setSession:_,leaveSession:A};return Se.jsx(LN.Provider,{value:N,children:e})}return null}function wd(){const t=st.useContext(LN);if(!t)throw new Error("Not inside Multisynq context");return t}function DN(){const{view:t}=wd();return t}function t8(){return DN()!==null}let Kx=!1;function MN(){Kx||(Kx=!0,console.warn("Accessing the `views` property of `useJoinedViews` is deprecated. Use `viewIds` instead."))}const n8=[],r8={},UN={viewIds:n8,viewInfos:r8,viewCount:0,get views(){return MN(),this.viewIds}};function Yx(t){if(!t?.__views)return UN;const e=t.__views;return{viewIds:Array.from(e.keys()),viewInfos:Object.fromEntries(e.entries()),viewCount:e.size,get views(){return MN(),this.viewIds}}}function s8(){const{session:t,view:e,model:n}=wd(),[r,s]=st.useState(Yx(n));if(st.useEffect(()=>{if(t&&e&&n){const o=()=>s(Yx(n));return e.subscribe(t.id,{event:"views-updated",handling:"oncePerFrame"},o),o(),()=>e.unsubscribe(t.id,"views-updated",o)}else s(UN)},[t,e,n]),n&&!n.__views)throw new Error("Your root model is not tracking the joined views.\nPass `options: { trackViews: true }` to your <MultisynqRoot> component to start tracking them\n");return r}function i8(){const{leaveSession:t}=wd();return t}function $N(){const{model:t}=wd();return t}function g1(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var OE={exports:{}},qx;function o8(){return qx||(qx=1,function(t,e){(function(n){t.exports=n()})(function(){return function n(r,s,o){function c(m,y){if(!s[m]){if(!r[m]){var v=typeof g1=="function"&&g1;if(!y&&v)return v(m,!0);if(l)return l(m,!0);throw new Error("Cannot find module '"+m+"'")}y=s[m]={exports:{}},r[m][0].call(y.exports,function(S){var _=r[m][1][S];return c(_||S)},y,y.exports,n,r,s,o)}return s[m].exports}for(var l=typeof g1=="function"&&g1,p=0;p<o.length;p++)c(o[p]);return c}({1:[function(n,r,s){(function(o,c,l,p,m,y,v,S,_){var A=n("crypto");function N(L,Z){Z=G(L,Z);var U;return(U=Z.algorithm!=="passthrough"?A.createHash(Z.algorithm):new j).write===void 0&&(U.write=U.update,U.end=U.update),X(Z,U).dispatch(L),U.update||U.end(""),U.digest?U.digest(Z.encoding==="buffer"?void 0:Z.encoding):(L=U.read(),Z.encoding!=="buffer"?L.toString(Z.encoding):L)}(s=r.exports=N).sha1=function(L){return N(L)},s.keys=function(L){return N(L,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},s.MD5=function(L){return N(L,{algorithm:"md5",encoding:"hex"})},s.keysMD5=function(L){return N(L,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var R=A.getHashes?A.getHashes().slice():["sha1","md5"],$=(R.push("passthrough"),["buffer","hex","binary","base64"]);function G(L,Z){var U={};if(U.algorithm=(Z=Z||{}).algorithm||"sha1",U.encoding=Z.encoding||"hex",U.excludeValues=!!Z.excludeValues,U.algorithm=U.algorithm.toLowerCase(),U.encoding=U.encoding.toLowerCase(),U.ignoreUnknown=Z.ignoreUnknown===!0,U.respectType=Z.respectType!==!1,U.respectFunctionNames=Z.respectFunctionNames!==!1,U.respectFunctionProperties=Z.respectFunctionProperties!==!1,U.unorderedArrays=Z.unorderedArrays===!0,U.unorderedSets=Z.unorderedSets!==!1,U.unorderedObjects=Z.unorderedObjects!==!1,U.replacer=Z.replacer||void 0,U.excludeKeys=Z.excludeKeys||void 0,L===void 0)throw new Error("Object argument required.");for(var D=0;D<R.length;++D)R[D].toLowerCase()===U.algorithm.toLowerCase()&&(U.algorithm=R[D]);if(R.indexOf(U.algorithm)===-1)throw new Error('Algorithm "'+U.algorithm+'"  not supported. supported values: '+R.join(", "));if($.indexOf(U.encoding)===-1&&U.algorithm!=="passthrough")throw new Error('Encoding "'+U.encoding+'"  not supported. supported values: '+$.join(", "));return U}function F(L){if(typeof L=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(L))!=null}function X(L,Z,U){U=U||[];function D(B){return Z.update?Z.update(B,"utf8"):Z.write(B,"utf8")}return{dispatch:function(B){return this["_"+((B=L.replacer?L.replacer(B):B)===null?"null":typeof B)](B)},_object:function(B){var W,K=Object.prototype.toString.call(B),he=/\[object (.*)\]/i.exec(K);if(he=(he=he?he[1]:"unknown:["+K+"]").toLowerCase(),0<=(K=U.indexOf(B)))return this.dispatch("[CIRCULAR:"+K+"]");if(U.push(B),l!==void 0&&l.isBuffer&&l.isBuffer(B))return D("buffer:"),D(B);if(he==="object"||he==="function"||he==="asyncfunction")return K=Object.keys(B),L.unorderedObjects&&(K=K.sort()),L.respectType===!1||F(B)||K.splice(0,0,"prototype","__proto__","constructor"),L.excludeKeys&&(K=K.filter(function(pe){return!L.excludeKeys(pe)})),D("object:"+K.length+":"),W=this,K.forEach(function(pe){W.dispatch(pe),D(":"),L.excludeValues||W.dispatch(B[pe]),D(",")});if(!this["_"+he]){if(L.ignoreUnknown)return D("["+he+"]");throw new Error('Unknown object type "'+he+'"')}this["_"+he](B)},_array:function(B,pe){pe=pe!==void 0?pe:L.unorderedArrays!==!1;var K=this;if(D("array:"+B.length+":"),!pe||B.length<=1)return B.forEach(function(V){return K.dispatch(V)});var he=[],pe=B.map(function(V){var P=new j,ne=U.slice();return X(L,P,ne).dispatch(V),he=he.concat(ne.slice(U.length)),P.read().toString()});return U=U.concat(he),pe.sort(),this._array(pe,!1)},_date:function(B){return D("date:"+B.toJSON())},_symbol:function(B){return D("symbol:"+B.toString())},_error:function(B){return D("error:"+B.toString())},_boolean:function(B){return D("bool:"+B.toString())},_string:function(B){D("string:"+B.length+":"),D(B.toString())},_function:function(B){D("fn:"),F(B)?this.dispatch("[native]"):this.dispatch(B.toString()),L.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(B.name)),L.respectFunctionProperties&&this._object(B)},_number:function(B){return D("number:"+B.toString())},_xml:function(B){return D("xml:"+B.toString())},_null:function(){return D("Null")},_undefined:function(){return D("Undefined")},_regexp:function(B){return D("regex:"+B.toString())},_uint8array:function(B){return D("uint8array:"),this.dispatch(Array.prototype.slice.call(B))},_uint8clampedarray:function(B){return D("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(B))},_int8array:function(B){return D("int8array:"),this.dispatch(Array.prototype.slice.call(B))},_uint16array:function(B){return D("uint16array:"),this.dispatch(Array.prototype.slice.call(B))},_int16array:function(B){return D("int16array:"),this.dispatch(Array.prototype.slice.call(B))},_uint32array:function(B){return D("uint32array:"),this.dispatch(Array.prototype.slice.call(B))},_int32array:function(B){return D("int32array:"),this.dispatch(Array.prototype.slice.call(B))},_float32array:function(B){return D("float32array:"),this.dispatch(Array.prototype.slice.call(B))},_float64array:function(B){return D("float64array:"),this.dispatch(Array.prototype.slice.call(B))},_arraybuffer:function(B){return D("arraybuffer:"),this.dispatch(new Uint8Array(B))},_url:function(B){return D("url:"+B.toString())},_map:function(B){return D("map:"),B=Array.from(B),this._array(B,L.unorderedSets!==!1)},_set:function(B){return D("set:"),B=Array.from(B),this._array(B,L.unorderedSets!==!1)},_file:function(B){return D("file:"),this.dispatch([B.name,B.size,B.type,B.lastModfied])},_blob:function(){if(L.ignoreUnknown)return D("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return D("domwindow")},_bigint:function(B){return D("bigint:"+B.toString())},_process:function(){return D("process")},_timer:function(){return D("timer")},_pipe:function(){return D("pipe")},_tcp:function(){return D("tcp")},_udp:function(){return D("udp")},_tty:function(){return D("tty")},_statwatcher:function(){return D("statwatcher")},_securecontext:function(){return D("securecontext")},_connection:function(){return D("connection")},_zlib:function(){return D("zlib")},_context:function(){return D("context")},_nodescript:function(){return D("nodescript")},_httpparser:function(){return D("httpparser")},_dataview:function(){return D("dataview")},_signal:function(){return D("signal")},_fsevent:function(){return D("fsevent")},_tlswrap:function(){return D("tlswrap")}}}function j(){return{buf:"",write:function(L){this.buf+=L},end:function(L){this.buf+=L},read:function(){return this.buf}}}s.writeToStream=function(L,Z,U){return U===void 0&&(U=Z,Z={}),X(Z=G(L,Z),U).dispatch(L)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(n,r,s){(function(o,c,l,p,m,y,v,S,_){(function(A){var N=typeof Uint8Array<"u"?Uint8Array:Array,R=43,$=47,G=48,F=97,X=65,j=45,L=95;function Z(U){return U=U.charCodeAt(0),U===R||U===j?62:U===$||U===L?63:U<G?-1:U<G+10?U-G+26+26:U<X+26?U-X:U<F+26?U-F+26:void 0}A.toByteArray=function(U){var D,B;if(0<U.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var W=U.length,W=U.charAt(W-2)==="="?2:U.charAt(W-1)==="="?1:0,K=new N(3*U.length/4-W),he=0<W?U.length-4:U.length,pe=0;function V(P){K[pe++]=P}for(D=0;D<he;D+=4,0)V((16711680&(B=Z(U.charAt(D))<<18|Z(U.charAt(D+1))<<12|Z(U.charAt(D+2))<<6|Z(U.charAt(D+3))))>>16),V((65280&B)>>8),V(255&B);return W==2?V(255&(B=Z(U.charAt(D))<<2|Z(U.charAt(D+1))>>4)):W==1&&(V((B=Z(U.charAt(D))<<10|Z(U.charAt(D+1))<<4|Z(U.charAt(D+2))>>2)>>8&255),V(255&B)),K},A.fromByteArray=function(U){var D,B,W,K,he=U.length%3,pe="";function V(P){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(P)}for(D=0,W=U.length-he;D<W;D+=3)B=(U[D]<<16)+(U[D+1]<<8)+U[D+2],pe+=V((K=B)>>18&63)+V(K>>12&63)+V(K>>6&63)+V(63&K);switch(he){case 1:pe=(pe+=V((B=U[U.length-1])>>2))+V(B<<4&63)+"==";break;case 2:pe=(pe=(pe+=V((B=(U[U.length-2]<<8)+U[U.length-1])>>10))+V(B>>4&63))+V(B<<2&63)+"="}return pe}})(s===void 0?this.base64js={}:s)}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(n,r,s){(function(o,c,R,p,m,y,v,S,_){var A=n("base64-js"),N=n("ieee754");function R(Q,ue,Ee){if(!(this instanceof R))return new R(Q,ue,Ee);var Ye,qe,it,Bt,bn=typeof Q;if(ue==="base64"&&bn=="string")for(Q=(Bt=Q).trim?Bt.trim():Bt.replace(/^\s+|\s+$/g,"");Q.length%4!=0;)Q+="=";if(bn=="number")Ye=de(Q);else if(bn=="string")Ye=R.byteLength(Q,ue);else{if(bn!="object")throw new Error("First argument needs to be a number, array or string.");Ye=de(Q.length)}if(R._useTypedArrays?qe=R._augment(new Uint8Array(Ye)):((qe=this).length=Ye,qe._isBuffer=!0),R._useTypedArrays&&typeof Q.byteLength=="number")qe._set(Q);else if(me(Bt=Q)||R.isBuffer(Bt)||Bt&&typeof Bt=="object"&&typeof Bt.length=="number")for(it=0;it<Ye;it++)R.isBuffer(Q)?qe[it]=Q.readUInt8(it):qe[it]=Q[it];else if(bn=="string")qe.write(Q,0,ue);else if(bn=="number"&&!R._useTypedArrays&&!Ee)for(it=0;it<Ye;it++)qe[it]=0;return qe}function $(Q,ue,Ee,Ye){return R._charsWritten=ke(function(qe){for(var it=[],Bt=0;Bt<qe.length;Bt++)it.push(255&qe.charCodeAt(Bt));return it}(ue),Q,Ee,Ye)}function G(Q,ue,Ee,Ye){return R._charsWritten=ke(function(qe){for(var it,Bt,bn=[],Wt=0;Wt<qe.length;Wt++)Bt=qe.charCodeAt(Wt),it=Bt>>8,Bt=Bt%256,bn.push(Bt),bn.push(it);return bn}(ue),Q,Ee,Ye)}function F(Q,ue,Ee){var Ye="";Ee=Math.min(Q.length,Ee);for(var qe=ue;qe<Ee;qe++)Ye+=String.fromCharCode(Q[qe]);return Ye}function X(Q,ue,Ee,it){it||(De(typeof Ee=="boolean","missing or invalid endian"),De(ue!=null,"missing offset"),De(ue+1<Q.length,"Trying to read beyond buffer length"));var qe,it=Q.length;if(!(it<=ue))return Ee?(qe=Q[ue],ue+1<it&&(qe|=Q[ue+1]<<8)):(qe=Q[ue]<<8,ue+1<it&&(qe|=Q[ue+1])),qe}function j(Q,ue,Ee,it){it||(De(typeof Ee=="boolean","missing or invalid endian"),De(ue!=null,"missing offset"),De(ue+3<Q.length,"Trying to read beyond buffer length"));var qe,it=Q.length;if(!(it<=ue))return Ee?(ue+2<it&&(qe=Q[ue+2]<<16),ue+1<it&&(qe|=Q[ue+1]<<8),qe|=Q[ue],ue+3<it&&(qe+=Q[ue+3]<<24>>>0)):(ue+1<it&&(qe=Q[ue+1]<<16),ue+2<it&&(qe|=Q[ue+2]<<8),ue+3<it&&(qe|=Q[ue+3]),qe+=Q[ue]<<24>>>0),qe}function L(Q,ue,Ee,Ye){if(Ye||(De(typeof Ee=="boolean","missing or invalid endian"),De(ue!=null,"missing offset"),De(ue+1<Q.length,"Trying to read beyond buffer length")),!(Q.length<=ue))return Ye=X(Q,ue,Ee,!0),32768&Ye?-1*(65535-Ye+1):Ye}function Z(Q,ue,Ee,Ye){if(Ye||(De(typeof Ee=="boolean","missing or invalid endian"),De(ue!=null,"missing offset"),De(ue+3<Q.length,"Trying to read beyond buffer length")),!(Q.length<=ue))return Ye=j(Q,ue,Ee,!0),2147483648&Ye?-1*(4294967295-Ye+1):Ye}function U(Q,ue,Ee,Ye){return Ye||(De(typeof Ee=="boolean","missing or invalid endian"),De(ue+3<Q.length,"Trying to read beyond buffer length")),N.read(Q,ue,Ee,23,4)}function D(Q,ue,Ee,Ye){return Ye||(De(typeof Ee=="boolean","missing or invalid endian"),De(ue+7<Q.length,"Trying to read beyond buffer length")),N.read(Q,ue,Ee,52,8)}function B(Q,ue,Ee,Ye,qe){if(qe||(De(ue!=null,"missing value"),De(typeof Ye=="boolean","missing or invalid endian"),De(Ee!=null,"missing offset"),De(Ee+1<Q.length,"trying to write beyond buffer length"),Ve(ue,65535)),qe=Q.length,!(qe<=Ee))for(var it=0,Bt=Math.min(qe-Ee,2);it<Bt;it++)Q[Ee+it]=(ue&255<<8*(Ye?it:1-it))>>>8*(Ye?it:1-it)}function W(Q,ue,Ee,Ye,qe){if(qe||(De(ue!=null,"missing value"),De(typeof Ye=="boolean","missing or invalid endian"),De(Ee!=null,"missing offset"),De(Ee+3<Q.length,"trying to write beyond buffer length"),Ve(ue,4294967295)),qe=Q.length,!(qe<=Ee))for(var it=0,Bt=Math.min(qe-Ee,4);it<Bt;it++)Q[Ee+it]=ue>>>8*(Ye?it:3-it)&255}function K(Q,ue,Ee,Ye,qe){qe||(De(ue!=null,"missing value"),De(typeof Ye=="boolean","missing or invalid endian"),De(Ee!=null,"missing offset"),De(Ee+1<Q.length,"Trying to write beyond buffer length"),Fe(ue,32767,-32768)),Q.length<=Ee||B(Q,0<=ue?ue:65535+ue+1,Ee,Ye,qe)}function he(Q,ue,Ee,Ye,qe){qe||(De(ue!=null,"missing value"),De(typeof Ye=="boolean","missing or invalid endian"),De(Ee!=null,"missing offset"),De(Ee+3<Q.length,"Trying to write beyond buffer length"),Fe(ue,2147483647,-2147483648)),Q.length<=Ee||W(Q,0<=ue?ue:4294967295+ue+1,Ee,Ye,qe)}function pe(Q,ue,Ee,Ye,qe){qe||(De(ue!=null,"missing value"),De(typeof Ye=="boolean","missing or invalid endian"),De(Ee!=null,"missing offset"),De(Ee+3<Q.length,"Trying to write beyond buffer length"),wt(ue,34028234663852886e22,-34028234663852886e22)),Q.length<=Ee||N.write(Q,ue,Ee,Ye,23,4)}function V(Q,ue,Ee,Ye,qe){qe||(De(ue!=null,"missing value"),De(typeof Ye=="boolean","missing or invalid endian"),De(Ee!=null,"missing offset"),De(Ee+7<Q.length,"Trying to write beyond buffer length"),wt(ue,17976931348623157e292,-17976931348623157e292)),Q.length<=Ee||N.write(Q,ue,Ee,Ye,52,8)}s.Buffer=R,s.SlowBuffer=R,s.INSPECT_MAX_BYTES=50,R.poolSize=8192,R._useTypedArrays=function(){try{var Q=new ArrayBuffer(0),ue=new Uint8Array(Q);return ue.foo=function(){return 42},ue.foo()===42&&typeof ue.subarray=="function"}catch{return!1}}(),R.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},R.isBuffer=function(Q){return!(Q==null||!Q._isBuffer)},R.byteLength=function(Q,ue){var Ee;switch(Q+="",ue||"utf8"){case"hex":Ee=Q.length/2;break;case"utf8":case"utf-8":Ee=fe(Q).length;break;case"ascii":case"binary":case"raw":Ee=Q.length;break;case"base64":Ee=Ae(Q).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Ee=2*Q.length;break;default:throw new Error("Unknown encoding")}return Ee},R.concat=function(Q,ue){if(De(me(Q),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),Q.length===0)return new R(0);if(Q.length===1)return Q[0];if(typeof ue!="number")for(qe=ue=0;qe<Q.length;qe++)ue+=Q[qe].length;for(var Ee=new R(ue),Ye=0,qe=0;qe<Q.length;qe++){var it=Q[qe];it.copy(Ee,Ye),Ye+=it.length}return Ee},R.prototype.write=function(Q,ue,Ee,Ye){isFinite(ue)?isFinite(Ee)||(Ye=Ee,Ee=void 0):(Wt=Ye,Ye=ue,ue=Ee,Ee=Wt),ue=Number(ue)||0;var qe,it,Bt,bn,Wt=this.length-ue;switch((!Ee||Wt<(Ee=Number(Ee)))&&(Ee=Wt),Ye=String(Ye||"utf8").toLowerCase()){case"hex":qe=function(hr,Xn,Jt,Nt){Jt=Number(Jt)||0;var An=hr.length-Jt;(!Nt||An<(Nt=Number(Nt)))&&(Nt=An),De((An=Xn.length)%2==0,"Invalid hex string"),An/2<Nt&&(Nt=An/2);for(var Wn=0;Wn<Nt;Wn++){var ts=parseInt(Xn.substr(2*Wn,2),16);De(!isNaN(ts),"Invalid hex string"),hr[Jt+Wn]=ts}return R._charsWritten=2*Wn,Wn}(this,Q,ue,Ee);break;case"utf8":case"utf-8":it=this,Bt=ue,bn=Ee,qe=R._charsWritten=ke(fe(Q),it,Bt,bn);break;case"ascii":case"binary":qe=$(this,Q,ue,Ee);break;case"base64":it=this,Bt=ue,bn=Ee,qe=R._charsWritten=ke(Ae(Q),it,Bt,bn);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":qe=G(this,Q,ue,Ee);break;default:throw new Error("Unknown encoding")}return qe},R.prototype.toString=function(Q,ue,Ee){var Ye,qe,it,Bt,bn=this;if(Q=String(Q||"utf8").toLowerCase(),ue=Number(ue)||0,(Ee=Ee!==void 0?Number(Ee):bn.length)===ue)return"";switch(Q){case"hex":Ye=function(Wt,hr,Xn){var Jt=Wt.length;(!hr||hr<0)&&(hr=0),(!Xn||Xn<0||Jt<Xn)&&(Xn=Jt);for(var Nt="",An=hr;An<Xn;An++)Nt+=H(Wt[An]);return Nt}(bn,ue,Ee);break;case"utf8":case"utf-8":Ye=function(Wt,hr,Xn){var Jt="",Nt="";Xn=Math.min(Wt.length,Xn);for(var An=hr;An<Xn;An++)Wt[An]<=127?(Jt+=$e(Nt)+String.fromCharCode(Wt[An]),Nt=""):Nt+="%"+Wt[An].toString(16);return Jt+$e(Nt)}(bn,ue,Ee);break;case"ascii":case"binary":Ye=F(bn,ue,Ee);break;case"base64":qe=bn,Bt=Ee,Ye=(it=ue)===0&&Bt===qe.length?A.fromByteArray(qe):A.fromByteArray(qe.slice(it,Bt));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Ye=function(Wt,hr,Xn){for(var Jt=Wt.slice(hr,Xn),Nt="",An=0;An<Jt.length;An+=2)Nt+=String.fromCharCode(Jt[An]+256*Jt[An+1]);return Nt}(bn,ue,Ee);break;default:throw new Error("Unknown encoding")}return Ye},R.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},R.prototype.copy=function(Q,ue,Ee,Ye){if(ue=ue||0,(Ye=Ye||Ye===0?Ye:this.length)!==(Ee=Ee||0)&&Q.length!==0&&this.length!==0){De(Ee<=Ye,"sourceEnd < sourceStart"),De(0<=ue&&ue<Q.length,"targetStart out of bounds"),De(0<=Ee&&Ee<this.length,"sourceStart out of bounds"),De(0<=Ye&&Ye<=this.length,"sourceEnd out of bounds"),Ye>this.length&&(Ye=this.length);var qe=(Ye=Q.length-ue<Ye-Ee?Q.length-ue+Ee:Ye)-Ee;if(qe<100||!R._useTypedArrays)for(var it=0;it<qe;it++)Q[it+ue]=this[it+Ee];else Q._set(this.subarray(Ee,Ee+qe),ue)}},R.prototype.slice=function(Q,ue){var Ee=this.length;if(Q=ne(Q,Ee,0),ue=ne(ue,Ee,Ee),R._useTypedArrays)return R._augment(this.subarray(Q,ue));for(var Ye=ue-Q,qe=new R(Ye,void 0,!0),it=0;it<Ye;it++)qe[it]=this[it+Q];return qe},R.prototype.get=function(Q){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(Q)},R.prototype.set=function(Q,ue){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(Q,ue)},R.prototype.readUInt8=function(Q,ue){if(ue||(De(Q!=null,"missing offset"),De(Q<this.length,"Trying to read beyond buffer length")),!(Q>=this.length))return this[Q]},R.prototype.readUInt16LE=function(Q,ue){return X(this,Q,!0,ue)},R.prototype.readUInt16BE=function(Q,ue){return X(this,Q,!1,ue)},R.prototype.readUInt32LE=function(Q,ue){return j(this,Q,!0,ue)},R.prototype.readUInt32BE=function(Q,ue){return j(this,Q,!1,ue)},R.prototype.readInt8=function(Q,ue){if(ue||(De(Q!=null,"missing offset"),De(Q<this.length,"Trying to read beyond buffer length")),!(Q>=this.length))return 128&this[Q]?-1*(255-this[Q]+1):this[Q]},R.prototype.readInt16LE=function(Q,ue){return L(this,Q,!0,ue)},R.prototype.readInt16BE=function(Q,ue){return L(this,Q,!1,ue)},R.prototype.readInt32LE=function(Q,ue){return Z(this,Q,!0,ue)},R.prototype.readInt32BE=function(Q,ue){return Z(this,Q,!1,ue)},R.prototype.readFloatLE=function(Q,ue){return U(this,Q,!0,ue)},R.prototype.readFloatBE=function(Q,ue){return U(this,Q,!1,ue)},R.prototype.readDoubleLE=function(Q,ue){return D(this,Q,!0,ue)},R.prototype.readDoubleBE=function(Q,ue){return D(this,Q,!1,ue)},R.prototype.writeUInt8=function(Q,ue,Ee){Ee||(De(Q!=null,"missing value"),De(ue!=null,"missing offset"),De(ue<this.length,"trying to write beyond buffer length"),Ve(Q,255)),ue>=this.length||(this[ue]=Q)},R.prototype.writeUInt16LE=function(Q,ue,Ee){B(this,Q,ue,!0,Ee)},R.prototype.writeUInt16BE=function(Q,ue,Ee){B(this,Q,ue,!1,Ee)},R.prototype.writeUInt32LE=function(Q,ue,Ee){W(this,Q,ue,!0,Ee)},R.prototype.writeUInt32BE=function(Q,ue,Ee){W(this,Q,ue,!1,Ee)},R.prototype.writeInt8=function(Q,ue,Ee){Ee||(De(Q!=null,"missing value"),De(ue!=null,"missing offset"),De(ue<this.length,"Trying to write beyond buffer length"),Fe(Q,127,-128)),ue>=this.length||(0<=Q?this.writeUInt8(Q,ue,Ee):this.writeUInt8(255+Q+1,ue,Ee))},R.prototype.writeInt16LE=function(Q,ue,Ee){K(this,Q,ue,!0,Ee)},R.prototype.writeInt16BE=function(Q,ue,Ee){K(this,Q,ue,!1,Ee)},R.prototype.writeInt32LE=function(Q,ue,Ee){he(this,Q,ue,!0,Ee)},R.prototype.writeInt32BE=function(Q,ue,Ee){he(this,Q,ue,!1,Ee)},R.prototype.writeFloatLE=function(Q,ue,Ee){pe(this,Q,ue,!0,Ee)},R.prototype.writeFloatBE=function(Q,ue,Ee){pe(this,Q,ue,!1,Ee)},R.prototype.writeDoubleLE=function(Q,ue,Ee){V(this,Q,ue,!0,Ee)},R.prototype.writeDoubleBE=function(Q,ue,Ee){V(this,Q,ue,!1,Ee)},R.prototype.fill=function(Q,ue,Ee){if(ue=ue||0,Ee=Ee||this.length,De(typeof(Q=typeof(Q=Q||0)=="string"?Q.charCodeAt(0):Q)=="number"&&!isNaN(Q),"value is not a number"),De(ue<=Ee,"end < start"),Ee!==ue&&this.length!==0){De(0<=ue&&ue<this.length,"start out of bounds"),De(0<=Ee&&Ee<=this.length,"end out of bounds");for(var Ye=ue;Ye<Ee;Ye++)this[Ye]=Q}},R.prototype.inspect=function(){for(var Q=[],ue=this.length,Ee=0;Ee<ue;Ee++)if(Q[Ee]=H(this[Ee]),Ee===s.INSPECT_MAX_BYTES){Q[Ee+1]="...";break}return"<Buffer "+Q.join(" ")+">"},R.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(R._useTypedArrays)return new R(this).buffer;for(var Q=new Uint8Array(this.length),ue=0,Ee=Q.length;ue<Ee;ue+=1)Q[ue]=this[ue];return Q.buffer};var P=R.prototype;function ne(Q,ue,Ee){return typeof Q!="number"?Ee:ue<=(Q=~~Q)?ue:0<=Q||0<=(Q+=ue)?Q:0}function de(Q){return(Q=~~Math.ceil(+Q))<0?0:Q}function me(Q){return(Array.isArray||function(ue){return Object.prototype.toString.call(ue)==="[object Array]"})(Q)}function H(Q){return Q<16?"0"+Q.toString(16):Q.toString(16)}function fe(Q){for(var ue=[],Ee=0;Ee<Q.length;Ee++){var Ye=Q.charCodeAt(Ee);if(Ye<=127)ue.push(Q.charCodeAt(Ee));else for(var qe=Ee,it=(55296<=Ye&&Ye<=57343&&Ee++,encodeURIComponent(Q.slice(qe,Ee+1)).substr(1).split("%")),Bt=0;Bt<it.length;Bt++)ue.push(parseInt(it[Bt],16))}return ue}function Ae(Q){return A.toByteArray(Q)}function ke(Q,ue,Ee,Ye){for(var qe=0;qe<Ye&&!(qe+Ee>=ue.length||qe>=Q.length);qe++)ue[qe+Ee]=Q[qe];return qe}function $e(Q){try{return decodeURIComponent(Q)}catch{return"�"}}function Ve(Q,ue){De(typeof Q=="number","cannot write a non-number as a number"),De(0<=Q,"specified a negative value for writing an unsigned value"),De(Q<=ue,"value is larger than maximum value for type"),De(Math.floor(Q)===Q,"value has a fractional component")}function Fe(Q,ue,Ee){De(typeof Q=="number","cannot write a non-number as a number"),De(Q<=ue,"value larger than maximum allowed value"),De(Ee<=Q,"value smaller than minimum allowed value"),De(Math.floor(Q)===Q,"value has a fractional component")}function wt(Q,ue,Ee){De(typeof Q=="number","cannot write a non-number as a number"),De(Q<=ue,"value larger than maximum allowed value"),De(Ee<=Q,"value smaller than minimum allowed value")}function De(Q,ue){if(!Q)throw new Error(ue||"Failed assertion")}R._augment=function(Q){return Q._isBuffer=!0,Q._get=Q.get,Q._set=Q.set,Q.get=P.get,Q.set=P.set,Q.write=P.write,Q.toString=P.toString,Q.toLocaleString=P.toString,Q.toJSON=P.toJSON,Q.copy=P.copy,Q.slice=P.slice,Q.readUInt8=P.readUInt8,Q.readUInt16LE=P.readUInt16LE,Q.readUInt16BE=P.readUInt16BE,Q.readUInt32LE=P.readUInt32LE,Q.readUInt32BE=P.readUInt32BE,Q.readInt8=P.readInt8,Q.readInt16LE=P.readInt16LE,Q.readInt16BE=P.readInt16BE,Q.readInt32LE=P.readInt32LE,Q.readInt32BE=P.readInt32BE,Q.readFloatLE=P.readFloatLE,Q.readFloatBE=P.readFloatBE,Q.readDoubleLE=P.readDoubleLE,Q.readDoubleBE=P.readDoubleBE,Q.writeUInt8=P.writeUInt8,Q.writeUInt16LE=P.writeUInt16LE,Q.writeUInt16BE=P.writeUInt16BE,Q.writeUInt32LE=P.writeUInt32LE,Q.writeUInt32BE=P.writeUInt32BE,Q.writeInt8=P.writeInt8,Q.writeInt16LE=P.writeInt16LE,Q.writeInt16BE=P.writeInt16BE,Q.writeInt32LE=P.writeInt32LE,Q.writeInt32BE=P.writeInt32BE,Q.writeFloatLE=P.writeFloatLE,Q.writeFloatBE=P.writeFloatBE,Q.writeDoubleLE=P.writeDoubleLE,Q.writeDoubleBE=P.writeDoubleBE,Q.fill=P.fill,Q.inspect=P.inspect,Q.toArrayBuffer=P.toArrayBuffer,Q}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(n,r,s){(function(o,c,A,p,m,y,v,S,_){var A=n("buffer").Buffer,N=4,R=new A(N);R.fill(0),r.exports={hash:function($,G,F,X){for(var j=G(function(B,W){B.length%N!=0&&(K=B.length+(N-B.length%N),B=A.concat([B,R],K));for(var K,he=[],pe=W?B.readInt32BE:B.readInt32LE,V=0;V<B.length;V+=N)he.push(pe.call(B,V));return he}($=A.isBuffer($)?$:new A($),X),8*$.length),G=X,L=new A(F),Z=G?L.writeInt32BE:L.writeInt32LE,U=0;U<j.length;U++)Z.call(L,j[U],4*U,!0);return L}}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(n,r,s){(function(o,c,A,p,m,y,v,S,_){var A=n("buffer").Buffer,N=n("./sha"),R=n("./sha256"),$=n("./rng"),G={sha1:N,sha256:R,md5:n("./md5")},F=64,X=new A(F);function j(B,W){var K=G[B=B||"sha1"],he=[];return K||L("algorithm:",B,"is not yet supported"),{update:function(pe){return A.isBuffer(pe)||(pe=new A(pe)),he.push(pe),pe.length,this},digest:function(pe){var V=A.concat(he),V=W?function(P,ne,de){A.isBuffer(ne)||(ne=new A(ne)),A.isBuffer(de)||(de=new A(de)),ne.length>F?ne=P(ne):ne.length<F&&(ne=A.concat([ne,X],F));for(var me=new A(F),H=new A(F),fe=0;fe<F;fe++)me[fe]=54^ne[fe],H[fe]=92^ne[fe];return de=P(A.concat([me,de])),P(A.concat([H,de]))}(K,W,V):K(V);return he=null,pe?V.toString(pe):V}}}function L(){var B=[].slice.call(arguments).join(" ");throw new Error([B,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}X.fill(0),s.createHash=function(B){return j(B)},s.createHmac=j,s.randomBytes=function(B,W){if(!W||!W.call)return new A($(B));try{W.call(this,void 0,new A($(B)))}catch(K){W(K)}};var Z,U=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],D=function(B){s[B]=function(){L("sorry,",B,"is not implemented yet")}};for(Z in U)D(U[Z])}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(n,r,s){(function(o,c,l,p,m,y,v,S,_){var A=n("./helpers");function N(L,Z){L[Z>>5]|=128<<Z%32,L[14+(Z+64>>>9<<4)]=Z;for(var U=1732584193,D=-271733879,B=-1732584194,W=271733878,K=0;K<L.length;K+=16){var he=U,pe=D,V=B,P=W,U=$(U,D,B,W,L[K+0],7,-680876936),W=$(W,U,D,B,L[K+1],12,-389564586),B=$(B,W,U,D,L[K+2],17,606105819),D=$(D,B,W,U,L[K+3],22,-1044525330);U=$(U,D,B,W,L[K+4],7,-176418897),W=$(W,U,D,B,L[K+5],12,1200080426),B=$(B,W,U,D,L[K+6],17,-1473231341),D=$(D,B,W,U,L[K+7],22,-45705983),U=$(U,D,B,W,L[K+8],7,1770035416),W=$(W,U,D,B,L[K+9],12,-1958414417),B=$(B,W,U,D,L[K+10],17,-42063),D=$(D,B,W,U,L[K+11],22,-1990404162),U=$(U,D,B,W,L[K+12],7,1804603682),W=$(W,U,D,B,L[K+13],12,-40341101),B=$(B,W,U,D,L[K+14],17,-1502002290),U=G(U,D=$(D,B,W,U,L[K+15],22,1236535329),B,W,L[K+1],5,-165796510),W=G(W,U,D,B,L[K+6],9,-1069501632),B=G(B,W,U,D,L[K+11],14,643717713),D=G(D,B,W,U,L[K+0],20,-373897302),U=G(U,D,B,W,L[K+5],5,-701558691),W=G(W,U,D,B,L[K+10],9,38016083),B=G(B,W,U,D,L[K+15],14,-660478335),D=G(D,B,W,U,L[K+4],20,-405537848),U=G(U,D,B,W,L[K+9],5,568446438),W=G(W,U,D,B,L[K+14],9,-1019803690),B=G(B,W,U,D,L[K+3],14,-187363961),D=G(D,B,W,U,L[K+8],20,1163531501),U=G(U,D,B,W,L[K+13],5,-1444681467),W=G(W,U,D,B,L[K+2],9,-51403784),B=G(B,W,U,D,L[K+7],14,1735328473),U=F(U,D=G(D,B,W,U,L[K+12],20,-1926607734),B,W,L[K+5],4,-378558),W=F(W,U,D,B,L[K+8],11,-2022574463),B=F(B,W,U,D,L[K+11],16,1839030562),D=F(D,B,W,U,L[K+14],23,-35309556),U=F(U,D,B,W,L[K+1],4,-1530992060),W=F(W,U,D,B,L[K+4],11,1272893353),B=F(B,W,U,D,L[K+7],16,-155497632),D=F(D,B,W,U,L[K+10],23,-1094730640),U=F(U,D,B,W,L[K+13],4,681279174),W=F(W,U,D,B,L[K+0],11,-358537222),B=F(B,W,U,D,L[K+3],16,-722521979),D=F(D,B,W,U,L[K+6],23,76029189),U=F(U,D,B,W,L[K+9],4,-640364487),W=F(W,U,D,B,L[K+12],11,-421815835),B=F(B,W,U,D,L[K+15],16,530742520),U=X(U,D=F(D,B,W,U,L[K+2],23,-995338651),B,W,L[K+0],6,-198630844),W=X(W,U,D,B,L[K+7],10,1126891415),B=X(B,W,U,D,L[K+14],15,-1416354905),D=X(D,B,W,U,L[K+5],21,-57434055),U=X(U,D,B,W,L[K+12],6,1700485571),W=X(W,U,D,B,L[K+3],10,-1894986606),B=X(B,W,U,D,L[K+10],15,-1051523),D=X(D,B,W,U,L[K+1],21,-2054922799),U=X(U,D,B,W,L[K+8],6,1873313359),W=X(W,U,D,B,L[K+15],10,-30611744),B=X(B,W,U,D,L[K+6],15,-1560198380),D=X(D,B,W,U,L[K+13],21,1309151649),U=X(U,D,B,W,L[K+4],6,-145523070),W=X(W,U,D,B,L[K+11],10,-1120210379),B=X(B,W,U,D,L[K+2],15,718787259),D=X(D,B,W,U,L[K+9],21,-343485551),U=j(U,he),D=j(D,pe),B=j(B,V),W=j(W,P)}return Array(U,D,B,W)}function R(L,Z,U,D,B,W){return j((Z=j(j(Z,L),j(D,W)))<<B|Z>>>32-B,U)}function $(L,Z,U,D,B,W,K){return R(Z&U|~Z&D,L,Z,B,W,K)}function G(L,Z,U,D,B,W,K){return R(Z&D|U&~D,L,Z,B,W,K)}function F(L,Z,U,D,B,W,K){return R(Z^U^D,L,Z,B,W,K)}function X(L,Z,U,D,B,W,K){return R(U^(Z|~D),L,Z,B,W,K)}function j(L,Z){var U=(65535&L)+(65535&Z);return(L>>16)+(Z>>16)+(U>>16)<<16|65535&U}r.exports=function(L){return A.hash(L,N,16)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(n,r,s){(function(o,c,l,p,m,y,v,S,_){r.exports=function(A){for(var N,R=new Array(A),$=0;$<A;$++)(3&$)==0&&(N=4294967296*Math.random()),R[$]=N>>>((3&$)<<3)&255;return R}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(n,r,s){(function(o,c,l,p,m,y,v,S,_){var A=n("./helpers");function N(G,F){G[F>>5]|=128<<24-F%32,G[15+(F+64>>9<<4)]=F;for(var X,j,L,Z=Array(80),U=1732584193,D=-271733879,B=-1732584194,W=271733878,K=-1009589776,he=0;he<G.length;he+=16){for(var pe=U,V=D,P=B,ne=W,de=K,me=0;me<80;me++){Z[me]=me<16?G[he+me]:$(Z[me-3]^Z[me-8]^Z[me-14]^Z[me-16],1);var H=R(R($(U,5),(H=D,j=B,L=W,(X=me)<20?H&j|~H&L:!(X<40)&&X<60?H&j|H&L|j&L:H^j^L)),R(R(K,Z[me]),(X=me)<20?1518500249:X<40?1859775393:X<60?-1894007588:-899497514)),K=W,W=B,B=$(D,30),D=U,U=H}U=R(U,pe),D=R(D,V),B=R(B,P),W=R(W,ne),K=R(K,de)}return Array(U,D,B,W,K)}function R(G,F){var X=(65535&G)+(65535&F);return(G>>16)+(F>>16)+(X>>16)<<16|65535&X}function $(G,F){return G<<F|G>>>32-F}r.exports=function(G){return A.hash(G,N,20,!0)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(n,r,s){(function(o,c,l,p,m,y,v,S,_){function A(F,X){var j=(65535&F)+(65535&X);return(F>>16)+(X>>16)+(j>>16)<<16|65535&j}function N(F,X){var j,L=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),Z=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),U=new Array(64);F[X>>5]|=128<<24-X%32,F[15+(X+64>>9<<4)]=X;for(var D,B,W=0;W<F.length;W+=16){for(var K=Z[0],he=Z[1],pe=Z[2],V=Z[3],P=Z[4],ne=Z[5],de=Z[6],me=Z[7],H=0;H<64;H++)U[H]=H<16?F[H+W]:A(A(A((B=U[H-2],$(B,17)^$(B,19)^G(B,10)),U[H-7]),(B=U[H-15],$(B,7)^$(B,18)^G(B,3))),U[H-16]),j=A(A(A(A(me,$(B=P,6)^$(B,11)^$(B,25)),P&ne^~P&de),L[H]),U[H]),D=A($(D=K,2)^$(D,13)^$(D,22),K&he^K&pe^he&pe),me=de,de=ne,ne=P,P=A(V,j),V=pe,pe=he,he=K,K=A(j,D);Z[0]=A(K,Z[0]),Z[1]=A(he,Z[1]),Z[2]=A(pe,Z[2]),Z[3]=A(V,Z[3]),Z[4]=A(P,Z[4]),Z[5]=A(ne,Z[5]),Z[6]=A(de,Z[6]),Z[7]=A(me,Z[7])}return Z}var R=n("./helpers"),$=function(F,X){return F>>>X|F<<32-X},G=function(F,X){return F>>>X};r.exports=function(F){return R.hash(F,N,32,!0)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(n,r,s){(function(o,c,l,p,m,y,v,S,_){s.read=function(A,N,R,$,W){var F,X,j=8*W-$-1,L=(1<<j)-1,Z=L>>1,U=-7,D=R?W-1:0,B=R?-1:1,W=A[N+D];for(D+=B,F=W&(1<<-U)-1,W>>=-U,U+=j;0<U;F=256*F+A[N+D],D+=B,U-=8);for(X=F&(1<<-U)-1,F>>=-U,U+=$;0<U;X=256*X+A[N+D],D+=B,U-=8);if(F===0)F=1-Z;else{if(F===L)return X?NaN:1/0*(W?-1:1);X+=Math.pow(2,$),F-=Z}return(W?-1:1)*X*Math.pow(2,F-$)},s.write=function(A,N,R,$,G,K){var X,j,L=8*K-G-1,Z=(1<<L)-1,U=Z>>1,D=G===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=$?0:K-1,W=$?1:-1,K=N<0||N===0&&1/N<0?1:0;for(N=Math.abs(N),isNaN(N)||N===1/0?(j=isNaN(N)?1:0,X=Z):(X=Math.floor(Math.log(N)/Math.LN2),N*($=Math.pow(2,-X))<1&&(X--,$*=2),2<=(N+=1<=X+U?D/$:D*Math.pow(2,1-U))*$&&(X++,$/=2),Z<=X+U?(j=0,X=Z):1<=X+U?(j=(N*$-1)*Math.pow(2,G),X+=U):(j=N*Math.pow(2,U-1)*Math.pow(2,G),X=0));8<=G;A[R+B]=255&j,B+=W,j/=256,G-=8);for(X=X<<G|j,L+=G;0<L;A[R+B]=255&X,B+=W,X/=256,L-=8);A[R+B-W]|=128*K}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(n,r,s){(function(o,c,l,p,m,y,v,S,_){var A,N,R;function $(){}(o=r.exports={}).nextTick=(N=typeof window<"u"&&window.setImmediate,R=typeof window<"u"&&window.postMessage&&window.addEventListener,N?function(G){return window.setImmediate(G)}:R?(A=[],window.addEventListener("message",function(G){var F=G.source;F!==window&&F!==null||G.data!=="process-tick"||(G.stopPropagation(),0<A.length&&A.shift()())},!0),function(G){A.push(G),window.postMessage("process-tick","*")}):function(G){setTimeout(G,0)}),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=$,o.addListener=$,o.once=$,o.off=$,o.removeListener=$,o.removeAllListeners=$,o.emit=$,o.binding=function(G){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(G){throw new Error("process.chdir is not supported")}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})}(OE)),OE.exports}var a8=o8();const c8=Rm(a8);function l8(){const{sessionParams:t}=wd();return t}function u8(){const{setSession:t}=wd();return t}function d8(){var t;const e=DN();return(t=e?.viewId)!==null&&t!==void 0?t:null}var h8=Object.defineProperty,f8=(t,e,n)=>e in t?h8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,PE=(t,e,n)=>(f8(t,typeof e!="symbol"?e+"":e,n),n);let jN=class extends Z_{constructor(){super(...arguments),PE(this,"rtKey"),PE(this,"messages"),PE(this,"nextMessageId")}init({rtKey:e}){super.init({}),this.rtKey=e,this.messages=[],this.nextMessageId=0,this.subscribe(e,"sendMessage",this.handleNewMessage)}handleNewMessage({sentAt:e,senderId:n,message:r}){const s={id:this.nextMessageId++,sentAt:e,senderId:n,message:r};this.messages.push(s),this.publish(this.rtKey,"messageSent",s)}};jN.register("ChatModel");var p8=Object.defineProperty,m8=(t,e,n)=>e in t?p8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lp=(t,e,n)=>(m8(t,typeof e!="symbol"?e+"":e,n),n);let BN=class extends Z_{constructor(){super(...arguments),Lp(this,"state"),Lp(this,"statePerUser"),Lp(this,"statePerUserConfig"),Lp(this,"chats"),Lp(this,"viewIdUserIdMapping"),Lp(this,"userIdCount")}init(e){super.init({...e,trackViews:!0}),this.state=new Map,this.statePerUser=new Map,this.statePerUserConfig=new Map,this.chats=new Map,this.viewIdUserIdMapping=new Map,this.userIdCount=new Map,this.subscribe(this.id,"setState",this.setState),this.subscribe(this.id,"setStatePerUser",this.setStatePerUser),this.subscribe(this.id,"configureStatePerUser",this.configureStatePerUser),this.subscribe(this.id,"functionTogether",this.functionTogether),this.subscribe(this.id,"createChat",this.createChat)}handleViewJoin(e,n){var r;const s=((r=n.viewData)==null?void 0:r.userId)??e;this.viewIdUserIdMapping.set(e,s);const o=this.userIdCount.get(s)??0;this.userIdCount.set(s,o+1)}handleViewExit(e){const n=FN(this,e),r=this.userIdCount.get(n);if(r===void 0){console.warn(`No userIdCount found for userId ${n}. This is likely a bug. Please report it to the React Together team.`);return}r<=1?(this.statePerUser.forEach((s,o)=>{const c=this.statePerUserConfig.get(o);c!=null&&c.keepValues||(s.delete(n),this.publish(o,"updated",{}))}),this.userIdCount.delete(n)):this.userIdCount.set(n,r-1),this.viewIdUserIdMapping.delete(e)}setState({rtKey:e,value:n}){this.state.set(e,n),this.publish(e,"updated",{})}setStatePerUser({rtKey:e,userId:n,value:r}){let s=this.statePerUser.get(e);s===void 0&&(s=new Map,this.statePerUser.set(e,s)),s.set(n,r),this.publish(e,"updated",{})}configureStatePerUser({rtKey:e,options:n}){const{keepValues:r}=n,s=this.statePerUserConfig.get(e)??{};r!==void 0&&(s.keepValues=r),this.statePerUserConfig.set(e,s)}functionTogether({rtKey:e,args:n}){this.publish(e,"call",n)}createChat({rtKey:e}){const n=jN.create({rtKey:e});this.chats.set(e,n)}};BN.register("ReactTogetherModel");function FN(t,e){const n=t.viewIdUserIdMapping.get(e);return n===void 0?(console.warn(`No userId found for viewId ${e}. This is likely a bug. Please report it to the React Together team.`),e):n}const ZN=st.createContext(null);function z_(){const t=$N(),e=d8();return!t||!e?null:FN(t,e)}function g8(){const t=st.useContext(ZN);if(t===null)throw new Error("useReactTogetherContext must be used within a ReactTogetherProvider");return t}function y8(t){return typeof t=="function"}function cS(t,e){let n;return y8(e)?n=e(t):n=e,n}function b8(){const t=u8();return st.useCallback(()=>{t({name:ys.App.randomSession(),password:ys.App.randomPassword()})},[t])}const Qx=t=>{t=1831565813+(t|=0)|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296};let w8=class{constructor(e){this.dictionaries=void 0,this.length=void 0,this.separator=void 0,this.style=void 0,this.seed=void 0;const{length:n,separator:r,dictionaries:s,style:o,seed:c}=e;this.dictionaries=s,this.separator=r,this.length=n,this.style=o,this.seed=c}generate(){if(!this.dictionaries)throw new Error('Cannot find any dictionary. Please provide at least one, or leave the "dictionary" field empty in the config object');if(this.length<=0)throw new Error("Invalid length provided");if(this.length>this.dictionaries.length)throw new Error(`The length cannot be bigger than the number of dictionaries.
Length provided: ${this.length}. Number of dictionaries provided: ${this.dictionaries.length}`);let e=this.seed;return this.dictionaries.slice(0,this.length).reduce((n,r)=>{let s;e?(s=(c=>{if(typeof c=="string"){const l=c.split("").map(m=>m.charCodeAt(0)).reduce((m,y)=>m+y,1),p=Math.floor(Number(l));return Qx(p)}return Qx(c)})(e),e=4294967296*s):s=Math.random();let o=r[Math.floor(s*r.length)]||"";if(this.style==="lowerCase")o=o.toLowerCase();else if(this.style==="capital"){const[c,...l]=o.split("");o=c.toUpperCase()+l.join("")}else this.style==="upperCase"&&(o=o.toUpperCase());return n?`${n}${this.separator}${o}`:`${o}`},"")}};const Jx={separator:"_",dictionaries:[]},v8=t=>{const e=[...t&&t.dictionaries||Jx.dictionaries],n={...Jx,...t,length:t&&t.length||e.length,dictionaries:e};if(!t||!t.dictionaries||!t.dictionaries.length)throw new Error('A "dictionaries" array must be provided. This is a breaking change introduced starting from Unique Name Generator v4. Read more about the breaking change here: https://github.com/andreasonny83/unique-names-generator#migration-guide');return new w8(n).generate()};var E8=["able","above","absent","absolute","abstract","abundant","academic","acceptable","accepted","accessible","accurate","accused","active","actual","acute","added","additional","adequate","adjacent","administrative","adorable","advanced","adverse","advisory","aesthetic","afraid","aggregate","aggressive","agreeable","agreed","agricultural","alert","alive","alleged","allied","alone","alright","alternative","amateur","amazing","ambitious","amused","ancient","angry","annoyed","annual","anonymous","anxious","appalling","apparent","applicable","appropriate","arbitrary","architectural","armed","arrogant","artificial","artistic","ashamed","asleep","assistant","associated","atomic","attractive","automatic","autonomous","available","average","awake","aware","awful","awkward","back","bad","balanced","bare","basic","beautiful","beneficial","better","bewildered","big","binding","biological","bitter","bizarre","blank","blind","blonde","bloody","blushing","boiling","bold","bored","boring","bottom","brainy","brave","breakable","breezy","brief","bright","brilliant","broad","broken","bumpy","burning","busy","calm","capable","capitalist","careful","casual","causal","cautious","central","certain","changing","characteristic","charming","cheap","cheerful","chemical","chief","chilly","chosen","christian","chronic","chubby","circular","civic","civil","civilian","classic","classical","clean","clear","clever","clinical","close","closed","cloudy","clumsy","coastal","cognitive","coherent","cold","collective","colonial","colorful","colossal","coloured","colourful","combative","combined","comfortable","coming","commercial","common","communist","compact","comparable","comparative","compatible","competent","competitive","complete","complex","complicated","comprehensive","compulsory","conceptual","concerned","concrete","condemned","confident","confidential","confused","conscious","conservation","conservative","considerable","consistent","constant","constitutional","contemporary","content","continental","continued","continuing","continuous","controlled","controversial","convenient","conventional","convinced","convincing","cooing","cool","cooperative","corporate","correct","corresponding","costly","courageous","crazy","creative","creepy","criminal","critical","crooked","crowded","crucial","crude","cruel","cuddly","cultural","curious","curly","current","curved","cute","daily","damaged","damp","dangerous","dark","dead","deaf","deafening","dear","decent","decisive","deep","defeated","defensive","defiant","definite","deliberate","delicate","delicious","delighted","delightful","democratic","dependent","depressed","desirable","desperate","detailed","determined","developed","developing","devoted","different","difficult","digital","diplomatic","direct","dirty","disabled","disappointed","disastrous","disciplinary","disgusted","distant","distinct","distinctive","distinguished","disturbed","disturbing","diverse","divine","dizzy","domestic","dominant","double","doubtful","drab","dramatic","dreadful","driving","drunk","dry","dual","due","dull","dusty","dutch","dying","dynamic","eager","early","eastern","easy","economic","educational","eerie","effective","efficient","elaborate","elated","elderly","eldest","electoral","electric","electrical","electronic","elegant","eligible","embarrassed","embarrassing","emotional","empirical","empty","enchanting","encouraging","endless","energetic","enormous","enthusiastic","entire","entitled","envious","environmental","equal","equivalent","essential","established","estimated","ethical","ethnic","eventual","everyday","evident","evil","evolutionary","exact","excellent","exceptional","excess","excessive","excited","exciting","exclusive","existing","exotic","expected","expensive","experienced","experimental","explicit","extended","extensive","external","extra","extraordinary","extreme","exuberant","faint","fair","faithful","familiar","famous","fancy","fantastic","far","fascinating","fashionable","fast","fat","fatal","favourable","favourite","federal","fellow","female","feminist","few","fierce","filthy","final","financial","fine","firm","fiscal","fit","fixed","flaky","flat","flexible","fluffy","fluttering","flying","following","fond","foolish","foreign","formal","formidable","forthcoming","fortunate","forward","fragile","frail","frantic","free","frequent","fresh","friendly","frightened","front","frozen","full","fun","functional","fundamental","funny","furious","future","fuzzy","gastric","gay","general","generous","genetic","gentle","genuine","geographical","giant","gigantic","given","glad","glamorous","gleaming","global","glorious","golden","good","gorgeous","gothic","governing","graceful","gradual","grand","grateful","greasy","great","grieving","grim","gross","grotesque","growing","grubby","grumpy","guilty","handicapped","handsome","happy","hard","harsh","head","healthy","heavy","helpful","helpless","hidden","high","hilarious","hissing","historic","historical","hollow","holy","homeless","homely","hon","honest","horizontal","horrible","hostile","hot","huge","human","hungry","hurt","hushed","husky","icy","ideal","identical","ideological","ill","illegal","imaginative","immediate","immense","imperial","implicit","important","impossible","impressed","impressive","improved","inadequate","inappropriate","inc","inclined","increased","increasing","incredible","independent","indirect","individual","industrial","inevitable","influential","informal","inherent","initial","injured","inland","inner","innocent","innovative","inquisitive","instant","institutional","insufficient","intact","integral","integrated","intellectual","intelligent","intense","intensive","interested","interesting","interim","interior","intermediate","internal","international","intimate","invisible","involved","irrelevant","isolated","itchy","jealous","jittery","joint","jolly","joyous","judicial","juicy","junior","just","keen","key","kind","known","labour","large","late","latin","lazy","leading","left","legal","legislative","legitimate","lengthy","lesser","level","lexical","liable","liberal","light","like","likely","limited","linear","linguistic","liquid","literary","little","live","lively","living","local","logical","lonely","long","loose","lost","loud","lovely","low","loyal","ltd","lucky","mad","magic","magnetic","magnificent","main","major","male","mammoth","managerial","managing","manual","many","marginal","marine","marked","married","marvellous","marxist","mass","massive","mathematical","mature","maximum","mean","meaningful","mechanical","medical","medieval","melodic","melted","mental","mere","metropolitan","mid","middle","mighty","mild","military","miniature","minimal","minimum","ministerial","minor","miserable","misleading","missing","misty","mixed","moaning","mobile","moderate","modern","modest","molecular","monetary","monthly","moral","motionless","muddy","multiple","mushy","musical","mute","mutual","mysterious","naked","narrow","nasty","national","native","natural","naughty","naval","near","nearby","neat","necessary","negative","neighbouring","nervous","net","neutral","new","nice","noble","noisy","normal","northern","nosy","notable","novel","nuclear","numerous","nursing","nutritious","nutty","obedient","objective","obliged","obnoxious","obvious","occasional","occupational","odd","official","ok","okay","old","olympic","only","open","operational","opposite","optimistic","oral","ordinary","organic","organisational","original","orthodox","other","outdoor","outer","outrageous","outside","outstanding","overall","overseas","overwhelming","painful","pale","panicky","parallel","parental","parliamentary","partial","particular","passing","passive","past","patient","payable","peaceful","peculiar","perfect","permanent","persistent","personal","petite","philosophical","physical","plain","planned","plastic","pleasant","pleased","poised","polite","political","poor","popular","positive","possible","potential","powerful","practical","precious","precise","preferred","pregnant","preliminary","premier","prepared","present","presidential","pretty","previous","prickly","primary","prime","primitive","principal","printed","prior","private","probable","productive","professional","profitable","profound","progressive","prominent","promising","proper","proposed","prospective","protective","protestant","proud","provincial","psychiatric","psychological","public","puny","pure","purring","puzzled","quaint","qualified","quarrelsome","querulous","quick","quickest","quiet","quintessential","quixotic","racial","radical","rainy","random","rapid","rare","raspy","rational","ratty","raw","ready","real","realistic","rear","reasonable","recent","reduced","redundant","regional","registered","regular","regulatory","related","relative","relaxed","relevant","reliable","relieved","religious","reluctant","remaining","remarkable","remote","renewed","representative","repulsive","required","resident","residential","resonant","respectable","respective","responsible","resulting","retail","retired","revolutionary","rich","ridiculous","right","rigid","ripe","rising","rival","roasted","robust","rolling","romantic","rotten","rough","round","royal","rubber","rude","ruling","running","rural","sacred","sad","safe","salty","satisfactory","satisfied","scared","scary","scattered","scientific","scornful","scrawny","screeching","secondary","secret","secure","select","selected","selective","selfish","semantic","senior","sensible","sensitive","separate","serious","severe","sexual","shaggy","shaky","shallow","shared","sharp","sheer","shiny","shivering","shocked","short","shrill","shy","sick","significant","silent","silky","silly","similar","simple","single","skilled","skinny","sleepy","slight","slim","slimy","slippery","slow","small","smart","smiling","smoggy","smooth","social","socialist","soft","solar","sole","solid","sophisticated","sore","sorry","sound","sour","southern","soviet","spare","sparkling","spatial","special","specific","specified","spectacular","spicy","spiritual","splendid","spontaneous","sporting","spotless","spotty","square","squealing","stable","stale","standard","static","statistical","statutory","steady","steep","sticky","stiff","still","stingy","stormy","straight","straightforward","strange","strategic","strict","striking","striped","strong","structural","stuck","stupid","subjective","subsequent","substantial","subtle","successful","successive","sudden","sufficient","suitable","sunny","super","superb","superior","supporting","supposed","supreme","sure","surprised","surprising","surrounding","surviving","suspicious","sweet","swift","symbolic","sympathetic","systematic","tall","tame","tart","tasteless","tasty","technical","technological","teenage","temporary","tender","tense","terrible","territorial","testy","then","theoretical","thick","thin","thirsty","thorough","thoughtful","thoughtless","thundering","tight","tiny","tired","top","tory","total","tough","toxic","traditional","tragic","tremendous","tricky","tropical","troubled","typical","ugliest","ugly","ultimate","unable","unacceptable","unaware","uncertain","unchanged","uncomfortable","unconscious","underground","underlying","unemployed","uneven","unexpected","unfair","unfortunate","unhappy","uniform","uninterested","unique","united","universal","unknown","unlikely","unnecessary","unpleasant","unsightly","unusual","unwilling","upper","upset","uptight","urban","urgent","used","useful","useless","usual","vague","valid","valuable","variable","varied","various","varying","vast","verbal","vertical","very","vicarious","vicious","victorious","violent","visible","visiting","visual","vital","vitreous","vivacious","vivid","vocal","vocational","voiceless","voluminous","voluntary","vulnerable","wandering","warm","wasteful","watery","weak","wealthy","weary","wee","weekly","weird","welcome","well","western","wet","whispering","whole","wicked","wide","widespread","wild","wilful","willing","willowy","wily","wise","wispy","wittering","witty","wonderful","wooden","working","worldwide","worried","worrying","worthwhile","worthy","written","wrong","xenacious","xenial","xenogeneic","xenophobic","xeric","xerothermic","yabbering","yammering","yappiest","yappy","yawning","yearling","yearning","yeasty","yelling","yelping","yielding","yodelling","young","youngest","youthful","ytterbic","yucky","yummy","zany","zealous","zeroth","zestful","zesty","zippy","zonal","zoophagous","zygomorphic","zygotic"],C8=["aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","booby","bovid","bug","butterfly","buzzard","camel","canid","canidae","capybara","cardinal","caribou","carp","cat","caterpillar","catfish","catshark","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","cicada","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragon","dragonfly","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","felidae","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","galliform","gamefowl","gayal","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","unicorn","urial","vicuna","viper","vole","vulture","wallaby","walrus","warbler","wasp","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra"];function S8(t,e){return t.searchParams.get(e)}function _8(t,e,n){t.searchParams.set(e,n)}function x8(t,{key:e,scrub:n=!1}={}){if(!t.hash)return null;const r=t.hash.slice(1);if(!r)return null;const s=r.split("&");if(e){const o=s.find(c=>c.split("=")[0]===e);if(o){const[,...c]=o.split("=");return n&&(t.hash=s.filter(l=>l.split("=")[0]!==e).join("&")),c.join("=")}}else{const o=s.find(c=>!c.includes("="));if(o)return n&&(t.hash=s.filter(c=>c!==o).join("&")),o}return null}function zN(t,e,n){n&&n.includes("&")&&(console.warn(`Given value "${n}" contains invalid characters. Trimming until &`),n=n.split("&")[0]);const r=e===null,s=t.hash.slice(1),o=s?s.split("&").filter(Boolean):[],c=r?o.filter(l=>l.includes("=")):o.filter(l=>l.split("=")[0]!==e);if(n!==null){const l=r?n:`${e}=${n}`;c.push(l)}t.hash=c.join("&")}const G_="rtName",H_="rtPwd";function T8(t,{nameKey:e=G_}={}){return S8(t,e)}function A8(t,{passwordKey:e=H_}={}){return x8(t,{key:e})}function I8(t,e,n,{nameKey:r=G_,passwordKey:s=H_}={}){const o=new URL(t);return _8(o,r,e),zN(o,s,n),o}function N8(t,{nameKey:e=G_,passwordKey:n=H_}={}){const r=new URL(t);return r.searchParams.delete(e),zN(r,n,null),r}function R8(){const t=i8();return st.useCallback(()=>{const e=N8(new URL(window.location.href));window.history.replaceState({},"",e.toString()),t()},[t])}function GN(t,e){const n=st.useRef(0),r=st.useRef(null),s=W_();return st.useCallback((...o)=>{if(!s){e(...o);return}const c=Date.now();if(c-n.current>=t)n.current=c,e(...o);else{const l=t-(c-n.current);r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{e(...o),n.current=Date.now()},l)}},[e,t,s])}const kE=Object.freeze({});function O8(t){return Object.fromEntries(t.entries())}function LE(t,e){const n=O8(t),r=c8(n);return e&&delete n[e],{allValues:n,allValuesHash:r}}function P8({prevLocalValue:t,initialValue:e,sessionValue:n,resetOnConnect:r,overwriteSessionValue:s}){return r?e:t===void 0?n??e:n===void 0?t??e:s?t:n}function lS(t,e,n={}){const{resetOnDisconnect:r=!1,resetOnConnect:s=!1,keepValues:o=!1,overwriteSessionValue:c=!1,omitMyValue:l=!1,throttleDelay:p=100}=n,[m]=st.useState(e),{session:y,view:v,model:S}=wd(),_=z_(),[A,N]=st.useState(()=>{if(!v||!S||_===null)return{localValue:m,allValues:kE,allValuesHash:null};const F=S.statePerUser.get(t)??new Map([[_,m]]),{allValues:X,allValuesHash:j}=LE(F,l?_:void 0);return{localValue:F.get(_)??m,allValues:X,allValuesHash:j}});st.useEffect(()=>{if(v&&S&&_){const F=S.statePerUserConfig.get(t);(!F||F.keepValues!==o)&&v.publish(S.id,"configureStatePerUser",{rtKey:t,options:{keepValues:o}})}},[v,S,t,r,s,o,_]),st.useEffect(()=>{if(!y||!v||!S||_===null){N(X=>({localValue:r?m:X.localValue,allValues:kE,allValuesHash:null}));return}N(X=>{const j=new Map(S.statePerUser.get(t)),L=j.get(_),Z=P8({prevLocalValue:X.localValue,initialValue:m,sessionValue:L,resetOnConnect:s,overwriteSessionValue:c});Z!==L&&(v.publish(S.id,"setStatePerUser",{rtKey:t,userId:_,value:Z}),j.set(_,Z));const{allValues:U,allValuesHash:D}=LE(j,l?_:void 0);return{localValue:Z,allValues:U,allValuesHash:D}});const F=()=>{N(X=>{const j=S.statePerUser.get(t)??new Map,{allValues:L,allValuesHash:Z}=LE(j,l?_:void 0);return X.allValuesHash===Z?X:{localValue:j.get(_)??m,allValues:L,allValuesHash:Z}})};return v.subscribe(t,{event:"updated",handling:"oncePerFrame"},F),()=>v.unsubscribe(t,"updated",F)},[t,y,v,S,m,_,r,s,o,c,l]);const R=GN(p,st.useCallback(F=>{if(!v||!S||_===null)N(X=>{const j=cS(X.localValue,F);return X.localValue===j?X:{localValue:j,allValues:kE,allValuesHash:null}});else{const X=S.statePerUser.get(t);let j=X?.get(_);j===void 0&&(console.warn(`[useStateTogetherWithPerUserValues:setter] prevLocalValue is undefined.Using initialValue: ${m}`),j=m);const L=cS(j,F);v.publish(S.id,"setStatePerUser",{rtKey:t,userId:_,value:L})}},[t,v,S,m,_])),{localValue:$,allValues:G}=A;return[$,R,G]}const e3="__rt-nickname";function HN(){const{deriveNickname:t,rememberUsers:e}=g8(),n=z_()??Math.random().toString(36).substring(2,15),r=localStorage.getItem(e3),s=e&&r!==null?r:t(n),[o,c,l]=lS("__nicknames",s,{keepValues:!0,overwriteSessionValue:!0}),p=st.useCallback(m=>{e&&localStorage.setItem(e3,m),c(m)},[c,e]);return[o,p,l]}function k8(){const[,,t]=HN();return t}const L8=[];function X_(){s8();const t=k8(),e=$N(),n=z_();return e?Array.from(e.userIdCount.keys()).map(r=>{const s=t[r];return{userId:r,isYou:r===n,nickname:s,get name(){return console.warn("useConnectedUsers: name is deprecated. Use nickname instead."),s}}}):L8}function XN(){const{name:t,password:e}=l8(),n=W_();return st.useMemo(()=>!n||!t||!e?null:I8(new URL(window.location.href),t,e).toString(),[t,e,n])}function cm(t,e,{resetOnDisconnect:n=!1,throttleDelay:r=100}={}){const{session:s,view:o,model:c}=wd(),[l,p]=st.useState(()=>!o||!c?e:c.state.has(t)?c.state.get(t):(o.publish(c.id,"setState",{rtKey:t,value:e}),e));st.useEffect(()=>{if(!s||!o||!c){n&&p(e);return}const y=()=>{p(v=>{if(!c.state.has(t))return o.publish(c.id,"setState",{rtKey:t,value:v}),v;const S=c.state.get(t);return v===S?v:S})};return o.subscribe(t,{event:"updated",handling:"oncePerFrame"},y),y(),()=>o.unsubscribe(t,"updated",y)},[s,o,c,t,p,e,n]);const m=GN(r,st.useCallback(y=>{if(c&&o){const v=c.state.get(t);o.publish(c.id,"setState",{rtKey:t,value:cS(v,y)})}else p(y)},[p,c,o,t]));return[l,m]}const W_=t8;function D8(t){return v8({seed:t,dictionaries:[E8,C8],length:2,separator:" ",style:"capital"})}const t3="__rt-userId";function M8({children:t,sessionParams:e,sessionIgnoresUrl:n,userId:r,deriveNickname:s=D8,rememberUsers:o=!1}){const{appId:c,apiKey:l}=e;let p;n||(p={sessionUrl:window.location.origin+window.location.pathname});const m=new URL(window.location.href),y=T8(m),v=A8(m),S=e.model||BN,_=y||e.name,A=v||e.password;if(o&&r===void 0){let R=localStorage.getItem(t3);R===null&&(R=Math.random().toString(36).substring(2,15),localStorage.setItem(t3,R)),r=R}let N=e.viewData;return r!==void 0&&(N===void 0?N={userId:r}:N.userId=r),Se.jsx(e8,{sessionParams:{model:S,name:_,password:A,appId:c,apiKey:l,options:p,viewData:N},deferSession:!_||!A,showChildrenWithoutSession:!0,children:Se.jsx(ZN.Provider,{value:{deriveNickname:s,rememberUsers:o},children:t})})}const WN="2.33.0";let DE={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${WN}`},tt=class uS extends Error{constructor(e,n={}){const r=n.cause instanceof uS?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof uS&&n.cause.docsPath||n.docsPath,o=DE.getDocsUrl?.({...n,docsPath:s}),c=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...r?[`Details: ${r}`]:[],...DE.version?[`Version: ${DE.version}`]:[]].join(`
`);super(c,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=WN}walk(e){return VN(this,e)}};function VN(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?VN(t.cause,e):e?null:t}let KN=class extends tt{constructor({max:e,min:n,signed:r,size:s,value:o}){super(`Number "${o}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class U8 extends tt{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class $8 extends tt{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let j8=class extends tt{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}},YN=class extends tt{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},qN=class extends tt{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class n3 extends tt{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Om(t,{dir:e,size:n=32}={}){return typeof t=="string"?od(t,{dir:e,size:n}):B8(t,{dir:e,size:n})}function od(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new qN({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function B8(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new qN({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const o=e==="right";r[o?s:n-s-1]=t[o?s:t.length-s-1]}return r}function hd(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Mr(t){return hd(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function ad(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const F8=new TextEncoder;function Qv(t,e={}){return typeof t=="number"||typeof t=="bigint"?z8(t,e):typeof t=="boolean"?Z8(t,e):hd(t)?$c(t,e):QN(t,e)}function Z8(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Fo(n,{size:e.size}),Om(n,{size:e.size})):n}const wl={zero:48,nine:57,A:65,F:70,a:97,f:102};function r3(t){if(t>=wl.zero&&t<=wl.nine)return t-wl.zero;if(t>=wl.A&&t<=wl.F)return t-(wl.A-10);if(t>=wl.a&&t<=wl.f)return t-(wl.a-10)}function $c(t,e={}){let n=t;e.size&&(Fo(n,{size:e.size}),n=Om(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,o=new Uint8Array(s);for(let c=0,l=0;c<s;c++){const p=r3(r.charCodeAt(l++)),m=r3(r.charCodeAt(l++));if(p===void 0||m===void 0)throw new tt(`Invalid byte sequence ("${r[l-2]}${r[l-1]}" in "${r}").`);o[c]=p*16+m}return o}function z8(t,e){const n=Qt(t,e);return $c(n)}function QN(t,e={}){const n=F8.encode(t);return typeof e.size=="number"?(Fo(n,{size:e.size}),Om(n,{dir:"right",size:e.size})):n}function Fo(t,{size:e}){if(Mr(t)>e)throw new j8({givenSize:Mr(t),maxSize:e})}function mm(t,e={}){const{signed:n}=e;e.size&&Fo(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,o=(1n<<BigInt(s)*8n-1n)-1n;return r<=o?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function rae(t,e={}){let n=t;if(e.size&&(Fo(n,{size:e.size}),n=ad(n)),ad(n)==="0x00")return!1;if(ad(n)==="0x01")return!0;throw new $8(n)}function ef(t,e={}){return Number(mm(t,e))}function JN(t,e={}){let n=$c(t);return e.size&&(Fo(n,{size:e.size}),n=ad(n,{dir:"right"})),new TextDecoder().decode(n)}const G8=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function gm(t,e={}){return typeof t=="number"||typeof t=="bigint"?Qt(t,e):typeof t=="string"?Jv(t,e):typeof t=="boolean"?e6(t,e):Pi(t,e)}function e6(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Fo(n,{size:e.size}),Om(n,{size:e.size})):n}function Pi(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=G8[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Fo(r,{size:e.size}),Om(r,{dir:"right",size:e.size})):r}function Qt(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const c=typeof o=="bigint"&&n?-o-1n:0;if(o&&s>o||s<c){const p=typeof t=="bigint"?"n":"";throw new KN({max:o?`${o}${p}`:void 0,min:`${c}${p}`,signed:n,size:r,value:`${t}${p}`})}const l=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Om(l,{size:r}):l}const H8=new TextEncoder;function Jv(t,e={}){const n=H8.encode(t);return Pi(n,e)}function fd(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new rk(t.type);return`${t.name}(${e2(t.inputs,{includeName:e})})`}function e2(t,{includeName:e=!1}={}){return t?t.map(n=>X8(n,{includeName:e})).join(e?", ":","):""}function X8(t,{includeName:e}){return t.type.startsWith("tuple")?`(${e2(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class W8 extends tt{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class s3 extends tt{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class t6 extends tt{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${e2(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class t2 extends tt{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class V8 extends tt{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class K8 extends tt{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Mr(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class Y8 extends tt{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class sae extends tt{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class iae extends tt{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class n6 extends tt{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class q8 extends tt{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class r6 extends tt{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class oae extends tt{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class hv extends tt{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class Q8 extends tt{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class aae extends tt{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class J8 extends tt{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${fd(e.abiItem)}\`, and`,`\`${n.type}\` in \`${fd(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class cae extends tt{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class dS extends tt{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${e2(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class s6 extends tt{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${fd(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class ek extends tt{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class tk extends tt{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class nk extends tt{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class rk extends tt{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class lae extends tt{constructor(e){super(`Type "${e}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}function ym(t){return typeof t[0]=="string"?n2(t):sk(t)}function sk(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function n2(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}class tf extends tt{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}let r2=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const y1=BigInt(2**32-1),i3=BigInt(32);function ik(t,e=!1){return e?{h:Number(t&y1),l:Number(t>>i3&y1)}:{h:Number(t>>i3&y1)|0,l:Number(t&y1)|0}}function ok(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let o=0;o<n;o++){const{h:c,l}=ik(t[o],e);[r[o],s[o]]=[c,l]}return[r,s]}const ak=(t,e,n)=>t<<n|e>>>32-n,ck=(t,e,n)=>e<<n|t>>>32-n,lk=(t,e,n)=>e<<n-32|t>>>64-n,uk=(t,e,n)=>t<<n-32|e>>>64-n,Dp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function dk(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function fv(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function nf(t,...e){if(!dk(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function dae(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");fv(t.outputLen),fv(t.blockLen)}function pv(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function i6(t,e){nf(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function hk(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function wy(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function ME(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ec(t,e){return t<<32-e|t>>>e}const fk=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function pk(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function mk(t){for(let e=0;e<t.length;e++)t[e]=pk(t[e]);return t}const o3=fk?t=>t:mk,o6=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",gk=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function hae(t){if(nf(t),o6)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=gk[t[n]];return e}const vl={_0:48,_9:57,A:65,F:70,a:97,f:102};function a3(t){if(t>=vl._0&&t<=vl._9)return t-vl._0;if(t>=vl.A&&t<=vl.F)return t-(vl.A-10);if(t>=vl.a&&t<=vl.f)return t-(vl.a-10)}function fae(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(o6)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const c=a3(t.charCodeAt(o)),l=a3(t.charCodeAt(o+1));if(c===void 0||l===void 0){const p=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+o)}r[s]=c*16+l}return r}function yk(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function V_(t){return typeof t=="string"&&(t=yk(t)),nf(t),t}function pae(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];nf(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const o=t[r];n.set(o,s),s+=o.length}return n}let a6=class{};function c6(t){const e=r=>t().update(V_(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function gae(t=32){if(Dp&&typeof Dp.getRandomValues=="function")return Dp.getRandomValues(new Uint8Array(t));if(Dp&&typeof Dp.randomBytes=="function")return Uint8Array.from(Dp.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const bk=BigInt(0),O0=BigInt(1),wk=BigInt(2),vk=BigInt(7),Ek=BigInt(256),Ck=BigInt(113),l6=[],u6=[],d6=[];for(let t=0,e=O0,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],l6.push(2*(5*r+n)),u6.push((t+1)*(t+2)/2%64);let s=bk;for(let o=0;o<7;o++)e=(e<<O0^(e>>vk)*Ck)%Ek,e&wk&&(s^=O0<<(O0<<BigInt(o))-O0);d6.push(s)}const h6=ok(d6,!0),Sk=h6[0],_k=h6[1],c3=(t,e,n)=>n>32?lk(t,e,n):ak(t,e,n),l3=(t,e,n)=>n>32?uk(t,e,n):ck(t,e,n);function xk(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let c=0;c<10;c++)n[c]=t[c]^t[c+10]^t[c+20]^t[c+30]^t[c+40];for(let c=0;c<10;c+=2){const l=(c+8)%10,p=(c+2)%10,m=n[p],y=n[p+1],v=c3(m,y,1)^n[l],S=l3(m,y,1)^n[l+1];for(let _=0;_<50;_+=10)t[c+_]^=v,t[c+_+1]^=S}let s=t[2],o=t[3];for(let c=0;c<24;c++){const l=u6[c],p=c3(s,o,l),m=l3(s,o,l),y=l6[c];s=t[y],o=t[y+1],t[y]=p,t[y+1]=m}for(let c=0;c<50;c+=10){for(let l=0;l<10;l++)n[l]=t[c+l];for(let l=0;l<10;l++)t[c+l]^=~n[(l+2)%10]&n[(l+4)%10]}t[0]^=Sk[r],t[1]^=_k[r]}wy(n)}let Tk=class f6 extends a6{constructor(e,n,r,s=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=o,fv(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=hk(this.state)}clone(){return this._cloneInto()}keccak(){o3(this.state32),xk(this.state32,this.rounds),o3(this.state32),this.posOut=0,this.pos=0}update(e){pv(this),e=V_(e),nf(e);const{blockLen:n,state:r}=this,s=e.length;for(let o=0;o<s;){const c=Math.min(n-this.pos,s-o);for(let l=0;l<c;l++)r[this.pos++]^=e[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){pv(this,!1),nf(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,o=e.length;s<o;){this.posOut>=r&&this.keccak();const c=Math.min(r-this.posOut,o-s);e.set(n.subarray(this.posOut,this.posOut+c),s),this.posOut+=c,s+=c}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return fv(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(i6(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,wy(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:o,enableXOF:c}=this;return e||(e=new f6(n,r,s,c,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=r,e.outputLen=s,e.enableXOF=c,e.destroyed=this.destroyed,e}};const Ak=(t,e,n)=>c6(()=>new Tk(e,t,n)),Ik=Ak(1,136,256/8);function mb(t,e){const n=e||"hex",r=Ik(hd(t,{strict:!1})?Qv(t):t);return n==="bytes"?r:gm(r)}const UE=new r2(8192);function s2(t,e){if(UE.has(`${t}.${e}`))return UE.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=mb(QN(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let c=0;c<40;c+=2)r[c>>1]>>4>=8&&s[c]&&(s[c]=s[c].toUpperCase()),(r[c>>1]&15)>=8&&s[c+1]&&(s[c+1]=s[c+1].toUpperCase());const o=`0x${s.join("")}`;return UE.set(`${t}.${e}`,o),o}function zh(t,e){if(!jc(t,{strict:!1}))throw new tf({address:t});return s2(t,e)}const Nk=/^0x[a-fA-F0-9]{40}$/,$E=new r2(8192);function jc(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if($E.has(r))return $E.get(r);const s=Nk.test(t)?t.toLowerCase()===t?!0:n?s2(t)===t:!0:!1;return $E.set(r,s),s}function mv(t,e,n,{strict:r}={}){return hd(t,{strict:!1})?Rk(t,e,n,{strict:r}):g6(t,e,n,{strict:r})}function p6(t,e){if(typeof e=="number"&&e>0&&e>Mr(t)-1)throw new YN({offset:e,position:"start",size:Mr(t)})}function m6(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Mr(t)!==n-e)throw new YN({offset:n,position:"end",size:Mr(t)})}function g6(t,e,n,{strict:r}={}){p6(t,e);const s=t.slice(e,n);return r&&m6(s,e,n),s}function Rk(t,e,n,{strict:r}={}){p6(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&m6(s,e,n),s}const yae=/^(.*)\[([0-9]*)\]$/,bae=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Ok=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function y6(t,e){if(t.length!==e.length)throw new Y8({expectedLength:t.length,givenLength:e.length});const n=Pk({params:t,values:e}),r=Y_(n);return r.length===0?"0x":r}function Pk({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(K_({param:t[r],value:e[r]}));return n}function K_({param:t,value:e}){const n=q_(t.type);if(n){const[r,s]=n;return Lk(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return jk(e,{param:t});if(t.type==="address")return kk(e);if(t.type==="bool")return Mk(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=Ok.exec(t.type)??[];return Uk(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return Dk(e,{param:t});if(t.type==="string")return $k(e);throw new ek(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Y_(t){let e=0;for(let o=0;o<t.length;o++){const{dynamic:c,encoded:l}=t[o];c?e+=32:e+=Mr(l)}const n=[],r=[];let s=0;for(let o=0;o<t.length;o++){const{dynamic:c,encoded:l}=t[o];c?(n.push(Qt(e+s,{size:32})),r.push(l),s+=Mr(l)):n.push(l)}return ym([...n,...r])}function kk(t){if(!jc(t))throw new tf({address:t});return{dynamic:!1,encoded:od(t.toLowerCase())}}function Lk(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new nk(t);if(!r&&t.length!==e)throw new V8({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const o=[];for(let c=0;c<t.length;c++){const l=K_({param:n,value:t[c]});l.dynamic&&(s=!0),o.push(l)}if(r||s){const c=Y_(o);if(r){const l=Qt(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?ym([l,c]):l}}if(s)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:ym(o.map(({encoded:c})=>c))}}function Dk(t,{param:e}){const[,n]=e.type.split("bytes"),r=Mr(t);if(!n){let s=t;return r%32!==0&&(s=od(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:ym([od(Qt(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new K8({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:od(t,{dir:"right"})}}function Mk(t){if(typeof t!="boolean")throw new tt(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:od(e6(t))}}function Uk(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new KN({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Qt(t,{size:32,signed:e})}}function $k(t){const e=Jv(t),n=Math.ceil(Mr(e)/32),r=[];for(let s=0;s<n;s++)r.push(od(mv(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:ym([od(Qt(Mr(e),{size:32})),...r])}}function jk(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const o=e.components[s],c=Array.isArray(t)?s:o.name,l=K_({param:o,value:t[c]});r.push(l),l.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Y_(r):ym(r.map(({encoded:s})=>s))}}function q_(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const jE="/docs/contract/encodeDeployData";function b6(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(c=>"type"in c&&c.type==="constructor");if(!s)throw new W8({docsPath:jE});if(!("inputs"in s))throw new s3({docsPath:jE});if(!s.inputs||s.inputs.length===0)throw new s3({docsPath:jE});const o=y6(s.inputs,n);return n2([r,o])}function Gc(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class Q_ extends tt{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class BE extends tt{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function Bk(t){const e=mb(`0x${t.substring(4)}`).substring(26);return s2(`0x${e}`)}const Fk="modulepreload",Zk=function(t){return"/"+t},u3={},Bs=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let p=function(m){return Promise.all(m.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),l=c?.nonce||c?.getAttribute("nonce");s=p(n.map(m=>{if(m=Zk(m),m in u3)return;u3[m]=!0;const y=m.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${v}`))return;const S=document.createElement("link");if(S.rel=y?"stylesheet":Fk,y||(S.as="script"),S.crossOrigin="",S.href=m,l&&S.setAttribute("nonce",l),document.head.appendChild(S),y)return new Promise((_,A)=>{S.addEventListener("load",_),S.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return s.then(c=>{for(const l of c||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})};async function zk({hash:t,signature:e}){const n=hd(t)?t:gm(t),{secp256k1:r}=await Bs(async()=>{const{secp256k1:c}=await import("./secp256k1-BS51Cr-G.js");return{secp256k1:c}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:m,s:y,v,yParity:S}=e,_=Number(S??v),A=d3(_);return new r.Signature(mm(m),mm(y)).addRecoveryBit(A)}const c=hd(e)?e:gm(e);if(Mr(c)!==65)throw new Error("invalid signature length");const l=ef(`0x${c.slice(130)}`),p=d3(l);return r.Signature.fromCompact(c.substring(2,130)).addRecoveryBit(p)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function d3(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Gk({hash:t,signature:e}){return Bk(await zk({hash:t,signature:e}))}class h3 extends tt{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class w6 extends tt{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class Hk extends tt{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const Xk={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Hk({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new w6({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new h3({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new h3({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function J_(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(Xk);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function Wk(t,e="hex"){const n=v6(t),r=J_(new Uint8Array(n.length));return n.encode(r),e==="hex"?Pi(r.bytes):r.bytes}function v6(t){return Array.isArray(t)?Vk(t.map(e=>v6(e))):Kk(t)}function Vk(t){const e=t.reduce((s,o)=>s+o.length,0),n=E6(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:o}of t)o(s)}}}function Kk(t){const e=typeof t=="string"?$c(t):t,n=E6(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function E6(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new tt("Length is too large.")}function Yk(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,o=mb(n2(["0x05",Wk([e?Qt(e):"0x",s,n?Qt(n):"0x"])]));return r==="bytes"?$c(o):o}async function C6(t){const{authorization:e,signature:n}=t;return Gk({hash:Yk(e),signature:n??e})}class hS extends tt{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class qk extends tt{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class Qk extends tt{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class S6 extends tt{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function Jk({chain:t,currentChainId:e}){if(!t)throw new Qk;if(e!==t.id)throw new qk({chain:t,currentChainId:e})}const _6={gwei:9,wei:18},eL={ether:-9,wei:9},tL={ether:-18,gwei:-9};function Pm(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,o]=[n.slice(0,n.length-e),n.slice(n.length-e)];return o=o.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${o?`.${o}`:""}`}function Ri(t,e="wei"){return Pm(t,eL[e])}class Gh extends tt{constructor({cause:e,message:n}={}){const r=n?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Gh,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Gh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class gv extends tt{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Ri(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(gv,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class fS extends tt{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Ri(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(fS,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class pS extends tt{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(pS,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class mS extends tt{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(mS,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class gS extends tt{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(gS,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class yS extends tt{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(yS,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class bS extends tt{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(bS,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class wS extends tt{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(wS,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class vS extends tt{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(vS,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class yv extends tt{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${Ri(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${Ri(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(yv,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class i2 extends tt{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function e5(t,e="wei"){return Pm(t,_6[e])}function gb(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class nL extends tt{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class rL extends tt{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",gb(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class sL extends tt{constructor(e,{account:n,docsPath:r,chain:s,data:o,gas:c,gasPrice:l,maxFeePerGas:p,maxPriorityFeePerGas:m,nonce:y,to:v,value:S}){const _=gb({chain:s&&`${s?.name} (id: ${s?.id})`,from:n?.address,to:v,value:typeof S<"u"&&`${e5(S)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:c,gasPrice:typeof l<"u"&&`${Ri(l)} gwei`,maxFeePerGas:typeof p<"u"&&`${Ri(p)} gwei`,maxPriorityFeePerGas:typeof m<"u"&&`${Ri(m)} gwei`,nonce:y});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",_].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class x6 extends tt{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:o}){let c="Transaction";r&&o!==void 0&&(c=`Transaction at block time "${r}" at index "${o}"`),e&&o!==void 0&&(c=`Transaction at block hash "${e}" at index "${o}"`),n&&o!==void 0&&(c=`Transaction at block number "${n}" at index "${o}"`),s&&(c=`Transaction with hash "${s}"`),super(`${c} could not be found.`,{name:"TransactionNotFoundError"})}}class T6 extends tt{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class iL extends tt{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Uo=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),oL=t=>t,t5=t=>t;class iy extends tt{constructor({body:e,cause:n,details:r,headers:s,status:o,url:c}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[o&&`Status: ${o}`,`URL: ${t5(c)}`,e&&`Request body: ${Uo(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=o,this.url=c}}class n5 extends tt{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${t5(r)}`,`Request body: ${Uo(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class f3 extends tt{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${t5(n)}`,`Request body: ${Uo(e)}`],name:"TimeoutError"})}}const aL=-1;class ki extends tt{constructor(e,{code:n,docsPath:r,metaMessages:s,name:o,shortMessage:c}){super(c,{cause:e,docsPath:r,metaMessages:s||e?.metaMessages,name:o||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=o||e.name,this.code=e instanceof n5?e.code:n??aL}}class ro extends ki{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class vy extends ki{constructor(e){super(e,{code:vy.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(vy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Ey extends ki{constructor(e){super(e,{code:Ey.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Ey,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Cy extends ki{constructor(e,{method:n}={}){super(e,{code:Cy.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Cy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Sy extends ki{constructor(e){super(e,{code:Sy.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Sy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class rf extends ki{constructor(e){super(e,{code:rf.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(rf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class _y extends ki{constructor(e){super(e,{code:_y.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(_y,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class xy extends ki{constructor(e){super(e,{code:xy.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(xy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class cd extends ki{constructor(e){super(e,{code:cd.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(cd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class bm extends ki{constructor(e){super(e,{code:bm.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(bm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Hh extends ki{constructor(e,{method:n}={}){super(e,{code:Hh.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Hh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class wm extends ki{constructor(e){super(e,{code:wm.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(wm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Ty extends ki{constructor(e){super(e,{code:Ty.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Ty,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Lr extends ro{constructor(e){super(e,{code:Lr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Lr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Ay extends ro{constructor(e){super(e,{code:Ay.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Ay,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Iy extends ro{constructor(e,{method:n}={}){super(e,{code:Iy.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Iy,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Ny extends ro{constructor(e){super(e,{code:Ny.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Ny,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Ry extends ro{constructor(e){super(e,{code:Ry.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Ry,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Bc extends ro{constructor(e){super(e,{code:Bc.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Bc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Oy extends ro{constructor(e){super(e,{code:Oy.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Oy,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Py extends ro{constructor(e){super(e,{code:Py.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Py,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class ky extends ro{constructor(e){super(e,{code:ky.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(ky,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Ly extends ro{constructor(e){super(e,{code:Ly.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Ly,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Dy extends ro{constructor(e){super(e,{code:Dy.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Dy,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class My extends ro{constructor(e){super(e,{code:My.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(My,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Uy extends ro{constructor(e){super(e,{code:Uy.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Uy,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class cL extends ki{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function r5(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof tt?t.walk(s=>s?.code===Gh.code):t;return r instanceof tt?new Gh({cause:t,message:r.details}):Gh.nodeMessage.test(n)?new Gh({cause:t,message:t.details}):gv.nodeMessage.test(n)?new gv({cause:t,maxFeePerGas:e?.maxFeePerGas}):fS.nodeMessage.test(n)?new fS({cause:t,maxFeePerGas:e?.maxFeePerGas}):pS.nodeMessage.test(n)?new pS({cause:t,nonce:e?.nonce}):mS.nodeMessage.test(n)?new mS({cause:t,nonce:e?.nonce}):gS.nodeMessage.test(n)?new gS({cause:t,nonce:e?.nonce}):yS.nodeMessage.test(n)?new yS({cause:t}):bS.nodeMessage.test(n)?new bS({cause:t,gas:e?.gas}):wS.nodeMessage.test(n)?new wS({cause:t,gas:e?.gas}):vS.nodeMessage.test(n)?new vS({cause:t}):yv.nodeMessage.test(n)?new yv({cause:t,maxFeePerGas:e?.maxFeePerGas,maxPriorityFeePerGas:e?.maxPriorityFeePerGas}):new i2({cause:t})}function lL(t,{docsPath:e,...n}){const r=(()=>{const s=r5(t,n);return s instanceof i2?t:s})();return new sL(r,{docsPath:e,...n})}function s5(t,{format:e}){if(!e)return{};const n={};function r(o){const c=Object.keys(o);for(const l of c)l in t&&(n[l]=t[l]),o[l]&&typeof o[l]=="object"&&!Array.isArray(o[l])&&r(o[l])}const s=e(t||{});return r(s),n}const uL={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function i5(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=dL(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Pi(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=Qt(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=Qt(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Qt(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Qt(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Qt(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Qt(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=uL[t.type]),typeof t.value<"u"&&(e.value=Qt(t.value)),e}function dL(t){return t.map(e=>({address:e.address,r:e.r?Qt(BigInt(e.r)):e.r,s:e.s?Qt(BigInt(e.s)):e.s,chainId:Qt(e.chainId),nonce:Qt(e.nonce),...typeof e.yParity<"u"?{yParity:Qt(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Qt(e.v)}:{}}))}function nr(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:o=>e(t,o)}const hL=2n**256n-1n;function o2(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:o}=t,c=e?Gc(e):void 0;if(c&&!jc(c.address))throw new tf({address:c.address});if(o&&!jc(o))throw new tf({address:o});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new nL;if(r&&r>hL)throw new gv({maxFeePerGas:r});if(s&&r&&s>r)throw new yv({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function A6(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return ef(e)}class fL extends tt{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class o5 extends tt{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class pL extends tt{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Ri(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class I6 extends tt{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const N6={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function R6(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?ef(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?ef(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?N6[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=mL(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function mL(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function gL(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:R6(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function $y(t,{blockHash:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest",includeTransactions:s}={}){const o=s??!1,c=n!==void 0?Qt(n):void 0;let l=null;if(e?l=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):l=await t.request({method:"eth_getBlockByNumber",params:[c||r,o]},{dedupe:!!c}),!l)throw new I6({blockHash:e,blockNumber:n});return(t.chain?.formatters?.block?.format||gL)(l)}async function O6(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function wae(t,e){return P6(t,e)}async function P6(t,e){const{block:n,chain:r=t.chain,request:s}=e||{};try{const o=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if(typeof o=="function"){const l=n||await nr(t,$y,"getBlock")({}),p=await o({block:l,client:t,request:s});if(p===null)throw new Error;return p}if(typeof o<"u")return o;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return mm(c)}catch{const[o,c]=await Promise.all([n?Promise.resolve(n):nr(t,$y,"getBlock")({}),nr(t,O6,"getGasPrice")({})]);if(typeof o.baseFeePerGas!="bigint")throw new o5;const l=c-o.baseFeePerGas;return l<0n?0n:l}}async function vae(t,e){return ES(t,e)}async function ES(t,e){const{block:n,chain:r=t.chain,request:s,type:o="eip1559"}=e||{},c=await(async()=>typeof r?.fees?.baseFeeMultiplier=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):r?.fees?.baseFeeMultiplier??1.2)();if(c<1)throw new fL;const p=10**(c.toString().split(".")[1]?.length??0),m=S=>S*BigInt(Math.ceil(c*p))/BigInt(p),y=n||await nr(t,$y,"getBlock")({});if(typeof r?.fees?.estimateFeesPerGas=="function"){const S=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:m,request:s,type:o});if(S!==null)return S}if(o==="eip1559"){if(typeof y.baseFeePerGas!="bigint")throw new o5;const S=typeof s?.maxPriorityFeePerGas=="bigint"?s.maxPriorityFeePerGas:await P6(t,{block:y,chain:r,request:s}),_=m(y.baseFeePerGas);return{maxFeePerGas:s?.maxFeePerGas??_+S,maxPriorityFeePerGas:S}}return{gasPrice:s?.gasPrice??m(await nr(t,O6,"getGasPrice")({}))}}class yL extends tt{constructor(e,{account:n,docsPath:r,chain:s,data:o,gas:c,gasPrice:l,maxFeePerGas:p,maxPriorityFeePerGas:m,nonce:y,to:v,value:S}){const _=gb({from:n?.address,to:v,value:typeof S<"u"&&`${e5(S)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:c,gasPrice:typeof l<"u"&&`${Ri(l)} gwei`,maxFeePerGas:typeof p<"u"&&`${Ri(p)} gwei`,maxPriorityFeePerGas:typeof m<"u"&&`${Ri(m)} gwei`,nonce:y});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",_].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function bL(t,{docsPath:e,...n}){const r=(()=>{const s=r5(t,n);return s instanceof i2?t:s})();return new yL(r,{docsPath:e,...n})}class wL extends tt{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class vL extends tt{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function p3(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function EL(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=p3(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=p3(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function m3(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new n3({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new n3({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function CL(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:o}=t,c={};if(o!==void 0&&(c.code=o),e!==void 0&&(c.balance=Qt(e)),n!==void 0&&(c.nonce=Qt(n)),r!==void 0&&(c.state=m3(r)),s!==void 0){if(c.state)throw new vL;c.stateDiff=m3(s)}return c}function k6(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!jc(n,{strict:!1}))throw new tf({address:n});if(e[n])throw new wL({address:n});e[n]=CL(r)}return e}async function L6(t,{address:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest"}){const s=typeof n=="bigint"?Qt(n):void 0,o=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(o)}async function D6(t,e){const{account:n=t.account}=e,r=n?Gc(n):void 0;try{let W=function(he){const{block:pe,request:V,rpcStateOverride:P}=he;return t.request({method:"eth_estimateGas",params:P?[V,pe??t.experimental_blockTag??"latest",P]:pe?[V,pe]:[V]})};const{accessList:s,authorizationList:o,blobs:c,blobVersionedHashes:l,blockNumber:p,blockTag:m,data:y,gas:v,gasPrice:S,maxFeePerBlobGas:_,maxFeePerGas:A,maxPriorityFeePerGas:N,nonce:R,value:$,stateOverride:G,...F}=await c5(t,{...e,parameters:r?.type==="local"?void 0:["blobVersionedHashes"]}),j=(typeof p=="bigint"?Qt(p):void 0)||m,L=k6(G),Z=await(async()=>{if(F.to)return F.to;if(o&&o.length>0)return await C6({authorization:o[0]}).catch(()=>{throw new tt("`to` is required. Could not infer from `authorizationList`")})})();o2(e);const U=t.chain?.formatters?.transactionRequest?.format,B=(U||i5)({...s5(F,{format:U}),from:r?.address,accessList:s,authorizationList:o,blobs:c,blobVersionedHashes:l,data:y,gas:v,gasPrice:S,maxFeePerBlobGas:_,maxFeePerGas:A,maxPriorityFeePerGas:N,nonce:R,to:Z,value:$});let K=BigInt(await W({block:j,request:B,rpcStateOverride:L}));if(o){const he=await L6(t,{address:B.from}),pe=await Promise.all(o.map(async V=>{const{address:P}=V,ne=await W({block:j,request:{authorizationList:void 0,data:y,from:r?.address,to:P,value:Qt(he)},rpcStateOverride:L}).catch(()=>100000n);return 2n*BigInt(ne)}));K+=pe.reduce((V,P)=>V+P,0n)}return K}catch(s){throw bL(s,{...e,account:r,chain:t.chain})}}async function SL(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?Qt(r):n]},{dedupe:!!r});return ef(s)}function M6(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>$c(o)):t.blobs,s=[];for(const o of r)s.push(Uint8Array.from(e.blobToKzgCommitment(o)));return n==="bytes"?s:s.map(o=>Pi(o))}function U6(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(c=>$c(c)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(c=>$c(c)):t.commitments,o=[];for(let c=0;c<r.length;c++){const l=r[c],p=s[c];o.push(Uint8Array.from(e.computeBlobKzgProof(l,p)))}return n==="bytes"?o:o.map(c=>Pi(c))}function _L(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),o=BigInt(4294967295),c=Number(n>>s&o),l=Number(n&o),p=r?4:0,m=r?0:4;t.setUint32(e+p,c,r),t.setUint32(e+m,l,r)}function xL(t,e,n){return t&e^~t&n}function TL(t,e,n){return t&e^t&n^e&n}class AL extends a6{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=ME(this.buffer)}update(e){pv(this),e=V_(e),nf(e);const{view:n,buffer:r,blockLen:s}=this,o=e.length;for(let c=0;c<o;){const l=Math.min(s-this.pos,o-c);if(l===s){const p=ME(e);for(;s<=o-c;c+=s)this.process(p,c);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,c+=l,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){pv(this),i6(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:c}=this;n[c++]=128,wy(this.buffer.subarray(c)),this.padOffset>s-c&&(this.process(r,0),c=0);for(let v=c;v<s;v++)n[v]=0;_L(r,s-8,BigInt(this.length*8),o),this.process(r,0);const l=ME(e),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const m=p/4,y=this.get();if(m>y.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<m;v++)l.setUint32(4*v,y[v],o)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:c,pos:l}=this;return e.destroyed=c,e.finished=o,e.length=s,e.pos=l,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const $u=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),IL=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ju=new Uint32Array(64);class NL extends AL{constructor(e=32){super(64,e,8,!1),this.A=$u[0]|0,this.B=$u[1]|0,this.C=$u[2]|0,this.D=$u[3]|0,this.E=$u[4]|0,this.F=$u[5]|0,this.G=$u[6]|0,this.H=$u[7]|0}get(){const{A:e,B:n,C:r,D:s,E:o,F:c,G:l,H:p}=this;return[e,n,r,s,o,c,l,p]}set(e,n,r,s,o,c,l,p){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=c|0,this.G=l|0,this.H=p|0}process(e,n){for(let v=0;v<16;v++,n+=4)ju[v]=e.getUint32(n,!1);for(let v=16;v<64;v++){const S=ju[v-15],_=ju[v-2],A=Ec(S,7)^Ec(S,18)^S>>>3,N=Ec(_,17)^Ec(_,19)^_>>>10;ju[v]=N+ju[v-7]+A+ju[v-16]|0}let{A:r,B:s,C:o,D:c,E:l,F:p,G:m,H:y}=this;for(let v=0;v<64;v++){const S=Ec(l,6)^Ec(l,11)^Ec(l,25),_=y+S+xL(l,p,m)+IL[v]+ju[v]|0,N=(Ec(r,2)^Ec(r,13)^Ec(r,22))+TL(r,s,o)|0;y=m,m=p,p=l,l=c+_|0,c=o,o=s,s=r,r=_+N|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,c=c+this.D|0,l=l+this.E|0,p=p+this.F|0,m=m+this.G|0,y=y+this.H|0,this.set(r,s,o,c,l,p,m,y)}roundClean(){wy(ju)}destroy(){this.set(0,0,0,0,0,0,0,0),wy(this.buffer)}}const RL=c6(()=>new NL),OL=RL;function PL(t,e){return OL(hd(t,{strict:!1})?Qv(t):t)}function kL(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=PL(e);return s.set([n],0),r==="bytes"?s:Pi(s)}function LL(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const o of e)s.push(kL({commitment:o,to:r,version:n}));return s}const g3=6,$6=32,a5=4096,j6=$6*a5,y3=j6*g3-1-1*a5*g3;class DL extends tt{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class ML extends tt{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function UL(t){const e=typeof t.data=="string"?$c(t.data):t.data,n=Mr(e);if(!n)throw new ML;if(n>y3)throw new DL({maxSize:y3,size:n});const r=[];let s=!0,o=0;for(;s;){const c=J_(new Uint8Array(j6));let l=0;for(;l<a5;){const p=e.slice(o,o+($6-1));if(c.pushByte(0),c.pushBytes(p),p.length<31){c.pushByte(128),s=!1;break}l++,o+=31}r.push(c)}return r.map(c=>Pi(c.bytes))}function $L(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??UL({data:e}),o=t.commitments??M6({blobs:s,kzg:n,to:r}),c=t.proofs??U6({blobs:s,commitments:o,kzg:n,to:r}),l=[];for(let p=0;p<s.length;p++)l.push({blob:s[p],commitment:o[p],proof:c[p]});return l}function jL(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new rL({transaction:t})}const B6=["blobVersionedHashes","chainId","fees","gas","nonce","type"],b3=new Map;async function c5(t,e){const{account:n=t.account,blobs:r,chain:s,gas:o,kzg:c,nonce:l,nonceManager:p,parameters:m=B6,type:y}=e,v=n&&Gc(n),S={...e,...v?{from:v?.address}:{}};let _;async function A(){return _||(_=await nr(t,$y,"getBlock")({blockTag:"latest"}),_)}let N;async function R(){return N||(s?s.id:typeof e.chainId<"u"?e.chainId:(N=await nr(t,A6,"getChainId")({}),N))}if(m.includes("nonce")&&typeof l>"u"&&v)if(p){const $=await R();S.nonce=await p.consume({address:v.address,chainId:$,client:t})}else S.nonce=await nr(t,SL,"getTransactionCount")({address:v.address,blockTag:"pending"});if((m.includes("blobVersionedHashes")||m.includes("sidecars"))&&r&&c){const $=M6({blobs:r,kzg:c});if(m.includes("blobVersionedHashes")){const G=LL({commitments:$,to:"hex"});S.blobVersionedHashes=G}if(m.includes("sidecars")){const G=U6({blobs:r,commitments:$,kzg:c}),F=$L({blobs:r,commitments:$,proofs:G,to:"hex"});S.sidecars=F}}if(m.includes("chainId")&&(S.chainId=await R()),(m.includes("fees")||m.includes("type"))&&typeof y>"u")try{S.type=jL(S)}catch{let $=b3.get(t.uid);typeof $>"u"&&($=typeof(await A())?.baseFeePerGas=="bigint",b3.set(t.uid,$)),S.type=$?"eip1559":"legacy"}if(m.includes("fees"))if(S.type!=="legacy"&&S.type!=="eip2930"){if(typeof S.maxFeePerGas>"u"||typeof S.maxPriorityFeePerGas>"u"){const $=await A(),{maxFeePerGas:G,maxPriorityFeePerGas:F}=await ES(t,{block:$,chain:s,request:S});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<F)throw new pL({maxPriorityFeePerGas:F});S.maxPriorityFeePerGas=F,S.maxFeePerGas=G}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new o5;if(typeof e.gasPrice>"u"){const $=await A(),{gasPrice:G}=await ES(t,{block:$,chain:s,request:S,type:"legacy"});S.gasPrice=G}}return m.includes("gas")&&typeof o>"u"&&(S.gas=await nr(t,D6,"estimateGas")({...S,account:v&&{address:v.address,type:"json-rpc"}})),o2(S),delete S.parameters,S}async function BL(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const FE=new r2(128);async function F6(t,e){const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:o,blobs:c,data:l,gas:p,gasPrice:m,maxFeePerBlobGas:y,maxFeePerGas:v,maxPriorityFeePerGas:S,nonce:_,type:A,value:N,...R}=e;if(typeof n>"u")throw new Q_({docsPath:"/docs/actions/wallet/sendTransaction"});const $=n?Gc(n):null;try{o2(e);const G=await(async()=>{if(e.to)return e.to;if(e.to!==null&&o&&o.length>0)return await C6({authorization:o[0]}).catch(()=>{throw new tt("`to` is required. Could not infer from `authorizationList`.")})})();if($?.type==="json-rpc"||$===null){let F;r!==null&&(F=await nr(t,A6,"getChainId")({}),Jk({currentChainId:F,chain:r}));const X=t.chain?.formatters?.transactionRequest?.format,L=(X||i5)({...s5(R,{format:X}),accessList:s,authorizationList:o,blobs:c,chainId:F,data:l,from:$?.address,gas:p,gasPrice:m,maxFeePerBlobGas:y,maxFeePerGas:v,maxPriorityFeePerGas:S,nonce:_,to:G,type:A,value:N}),Z=FE.get(t.uid),U=Z?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:U,params:[L]},{retryCount:0})}catch(D){if(Z===!1)throw D;const B=D;if(B.name==="InvalidInputRpcError"||B.name==="InvalidParamsRpcError"||B.name==="MethodNotFoundRpcError"||B.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[L]},{retryCount:0}).then(W=>(FE.set(t.uid,!0),W)).catch(W=>{const K=W;throw K.name==="MethodNotFoundRpcError"||K.name==="MethodNotSupportedRpcError"?(FE.set(t.uid,!1),B):K});throw B}}if($?.type==="local"){const F=await nr(t,c5,"prepareTransactionRequest")({account:$,accessList:s,authorizationList:o,blobs:c,chain:r,data:l,gas:p,gasPrice:m,maxFeePerBlobGas:y,maxFeePerGas:v,maxPriorityFeePerGas:S,nonce:_,nonceManager:$.nonceManager,parameters:[...B6,"sidecars"],type:A,value:N,...R,to:G}),X=r?.serializers?.transaction,j=await $.signTransaction(F,{serializer:X});return await nr(t,BL,"sendRawTransaction")({serializedTransaction:j})}throw $?.type==="smart"?new BE({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new BE({docsPath:"/docs/actions/wallet/sendTransaction",type:$?.type})}catch(G){throw G instanceof BE?G:lL(G,{...e,account:$,chain:e.chain||void 0})}}const CS=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],Eae=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],Z6=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],Cae=[...Z6,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Sae=[...Z6,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],_ae=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],xae=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],Tae=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],Aae=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}];function FL(t,e={}){typeof e.size<"u"&&Fo(t,{size:e.size});const n=Pi(t,e);return mm(n,e)}function ZL(t,e={}){let n=t;if(typeof e.size<"u"&&(Fo(n,{size:e.size}),n=ad(n)),n.length>1||n[0]>1)throw new U8(n);return!!n[0]}function Dl(t,e={}){typeof e.size<"u"&&Fo(t,{size:e.size});const n=Pi(t,e);return ef(n,e)}function zL(t,e={}){let n=t;return typeof e.size<"u"&&(Fo(n,{size:e.size}),n=ad(n,{dir:"right"})),new TextDecoder().decode(n)}function a2(t,e){const n=typeof e=="string"?$c(e):e,r=J_(n);if(Mr(n)===0&&t.length>0)throw new t2;if(Mr(e)&&Mr(e)<32)throw new t6({data:typeof e=="string"?e:Pi(e),params:t,size:Mr(e)});let s=0;const o=[];for(let c=0;c<t.length;++c){const l=t[c];r.setPosition(s);const[p,m]=lm(r,l,{staticPosition:0});s+=m,o.push(p)}return o}function lm(t,e,{staticPosition:n}){const r=q_(e.type);if(r){const[s,o]=r;return HL(t,{...e,type:o},{length:s,staticPosition:n})}if(e.type==="tuple")return KL(t,e,{staticPosition:n});if(e.type==="address")return GL(t);if(e.type==="bool")return XL(t);if(e.type.startsWith("bytes"))return WL(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return VL(t,e);if(e.type==="string")return YL(t,{staticPosition:n});throw new tk(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const w3=32,SS=32;function GL(t){const e=t.readBytes(32);return[s2(Pi(g6(e,-20))),32]}function HL(t,e,{length:n,staticPosition:r}){if(!n){const c=Dl(t.readBytes(SS)),l=r+c,p=l+w3;t.setPosition(l);const m=Dl(t.readBytes(w3)),y=jy(e);let v=0;const S=[];for(let _=0;_<m;++_){t.setPosition(p+(y?_*32:v));const[A,N]=lm(t,e,{staticPosition:p});v+=N,S.push(A)}return t.setPosition(r+32),[S,32]}if(jy(e)){const c=Dl(t.readBytes(SS)),l=r+c,p=[];for(let m=0;m<n;++m){t.setPosition(l+m*32);const[y]=lm(t,e,{staticPosition:l});p.push(y)}return t.setPosition(r+32),[p,32]}let s=0;const o=[];for(let c=0;c<n;++c){const[l,p]=lm(t,e,{staticPosition:r+s});s+=p,o.push(l)}return[o,s]}function XL(t){return[ZL(t.readBytes(32),{size:32}),32]}function WL(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const c=Dl(t.readBytes(32));t.setPosition(n+c);const l=Dl(t.readBytes(32));if(l===0)return t.setPosition(n+32),["0x",32];const p=t.readBytes(l);return t.setPosition(n+32),[Pi(p),32]}return[Pi(t.readBytes(Number.parseInt(s),32)),32]}function VL(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?FL(s,{signed:n}):Dl(s,{signed:n}),32]}function KL(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:c})=>!c),s=r?[]:{};let o=0;if(jy(e)){const c=Dl(t.readBytes(SS)),l=n+c;for(let p=0;p<e.components.length;++p){const m=e.components[p];t.setPosition(l+o);const[y,v]=lm(t,m,{staticPosition:l});o+=v,s[r?p:m?.name]=y}return t.setPosition(n+32),[s,32]}for(let c=0;c<e.components.length;++c){const l=e.components[c],[p,m]=lm(t,l,{staticPosition:n});s[r?c:l?.name]=p,o+=m}return[s,o]}function YL(t,{staticPosition:e}){const n=Dl(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Dl(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const o=t.readBytes(s,32),c=zL(ad(o));return t.setPosition(e+32),[c,32]}function jy(t){const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return t.components?.some(jy);const n=q_(t.type);return!!(n&&jy({...t,type:n[1]}))}const qL=t=>mb(Qv(t));function QL(t){return qL(t)}const JL="1.0.8";let so=class _S extends Error{constructor(e,n={}){const r=n.cause instanceof _S?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof _S&&n.cause.docsPath||n.docsPath,o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${JL}`].join(`
`);super(o),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function zl(t,e){return t.exec(e)?.groups}const z6=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,G6=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,H6=/^\(.+?\).*?$/,v3=/^tuple(?<array>(\[(\d*)\])*)$/;function xS(t){let e=t.type;if(v3.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const o=t.components[s];e+=xS(o),s<n-1&&(e+=", ")}const r=zl(v3,t.type);return e+=`)${r?.array??""}`,xS({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function P0(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=xS(s),r!==n-1&&(e+=", ")}return e}function eD(t){return t.type==="function"?`function ${t.name}(${P0(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${t.outputs?.length?` returns (${P0(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${P0(t.inputs)})`:t.type==="error"?`error ${t.name}(${P0(t.inputs)})`:t.type==="constructor"?`constructor(${P0(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const X6=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function tD(t){return X6.test(t)}function nD(t){return zl(X6,t)}const W6=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function rD(t){return W6.test(t)}function sD(t){return zl(W6,t)}const V6=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function iD(t){return V6.test(t)}function oD(t){return zl(V6,t)}const K6=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function Y6(t){return K6.test(t)}function aD(t){return zl(K6,t)}const q6=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function cD(t){return q6.test(t)}function lD(t){return zl(q6,t)}const Q6=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function uD(t){return Q6.test(t)}function dD(t){return zl(Q6,t)}const hD=/^receive\(\) external payable$/;function fD(t){return hD.test(t)}const pD=new Set(["indexed"]),TS=new Set(["calldata","memory","storage"]);class Iae extends so{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class mD extends so{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class gD extends so{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class yD extends so{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class bD extends so{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class wD extends so{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class vD extends so{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class ED extends so{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class km extends so{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class CD extends so{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class SD extends so{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class _D extends so{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class xD extends so{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function TD(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let o="";for(const c of s[1])o+=`[${c.type}${c.name?`:${c.name}`:""}]`;r+=`(${s[0]}{${o}})`}return e?`${e}:${t}${r}`:t}const ZE=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function AD(t,e={}){if(iD(t))return ID(t,e);if(rD(t))return ND(t,e);if(tD(t))return RD(t,e);if(cD(t))return OD(t,e);if(uD(t))return PD(t);if(fD(t))return{type:"receive",stateMutability:"payable"};throw new CD({signature:t})}function ID(t,e={}){const n=oD(t);if(!n)throw new km({signature:t,type:"function"});const r=_a(n.parameters),s=[],o=r.length;for(let l=0;l<o;l++)s.push(sf(r[l],{modifiers:TS,structs:e,type:"function"}));const c=[];if(n.returns){const l=_a(n.returns),p=l.length;for(let m=0;m<p;m++)c.push(sf(l[m],{modifiers:TS,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:c}}function ND(t,e={}){const n=sD(t);if(!n)throw new km({signature:t,type:"event"});const r=_a(n.parameters),s=[],o=r.length;for(let c=0;c<o;c++)s.push(sf(r[c],{modifiers:pD,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function RD(t,e={}){const n=nD(t);if(!n)throw new km({signature:t,type:"error"});const r=_a(n.parameters),s=[],o=r.length;for(let c=0;c<o;c++)s.push(sf(r[c],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function OD(t,e={}){const n=lD(t);if(!n)throw new km({signature:t,type:"constructor"});const r=_a(n.parameters),s=[],o=r.length;for(let c=0;c<o;c++)s.push(sf(r[c],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function PD(t){const e=dD(t);if(!e)throw new km({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const kD=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,LD=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,DD=/^u?int$/;function sf(t,e){const n=TD(t,e?.type,e?.structs);if(ZE.has(n))return ZE.get(n);const r=H6.test(t),s=zl(r?LD:kD,t);if(!s)throw new yD({param:t});if(s.name&&UD(s.name))throw new bD({param:t,name:s.name});const o=s.name?{name:s.name}:{},c=s.modifier==="indexed"?{indexed:!0}:{},l=e?.structs??{};let p,m={};if(r){p="tuple";const v=_a(s.type),S=[],_=v.length;for(let A=0;A<_;A++)S.push(sf(v[A],{structs:l}));m={components:S}}else if(s.type in l)p="tuple",m={components:l[s.type]};else if(DD.test(s.type))p=`${s.type}256`;else if(p=s.type,e?.type!=="struct"&&!J6(p))throw new gD({type:p});if(s.modifier){if(!e?.modifiers?.has?.(s.modifier))throw new wD({param:t,type:e?.type,modifier:s.modifier});if(TS.has(s.modifier)&&!$D(p,!!s.array))throw new vD({param:t,type:e?.type,modifier:s.modifier})}const y={type:`${p}${s.array??""}`,...o,...c,...m};return ZE.set(n,y),y}function _a(t,e=[],n="",r=0){const s=t.trim().length;for(let o=0;o<s;o++){const c=t[o],l=t.slice(o+1);switch(c){case",":return r===0?_a(l,[...e,n.trim()]):_a(l,e,`${n}${c}`,r);case"(":return _a(l,e,`${n}${c}`,r+1);case")":return _a(l,e,`${n}${c}`,r-1);default:return _a(l,e,`${n}${c}`,r)}}if(n==="")return e;if(r!==0)throw new xD({current:n,depth:r});return e.push(n.trim()),e}function J6(t){return t==="address"||t==="bool"||t==="function"||t==="string"||z6.test(t)||G6.test(t)}const MD=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function UD(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||z6.test(t)||G6.test(t)||MD.test(t)}function $D(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function jD(t){const e={},n=t.length;for(let c=0;c<n;c++){const l=t[c];if(!Y6(l))continue;const p=aD(l);if(!p)throw new km({signature:l,type:"struct"});const m=p.properties.split(";"),y=[],v=m.length;for(let S=0;S<v;S++){const A=m[S].trim();if(!A)continue;const N=sf(A,{type:"struct"});y.push(N)}if(!y.length)throw new SD({signature:l});e[p.name]=y}const r={},s=Object.entries(e),o=s.length;for(let c=0;c<o;c++){const[l,p]=s[c];r[l]=eR(p,e)}return r}const BD=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function eR(t,e,n=new Set){const r=[],s=t.length;for(let o=0;o<s;o++){const c=t[o];if(H6.test(c.type))r.push(c);else{const p=zl(BD,c.type);if(!p?.type)throw new ED({abiParameter:c});const{array:m,type:y}=p;if(y in e){if(n.has(y))throw new _D({type:y});r.push({...c,type:`tuple${m??""}`,components:eR(e[y]??[],e,new Set([...n,y]))})}else if(J6(y))r.push(c);else throw new mD({type:y})}}return r}function tR(t){const e=jD(t),n=[],r=t.length;for(let s=0;s<r;s++){const o=t[s];Y6(o)||n.push(AD(o,e))}return n}function FD(t){let e=!0,n="",r=0,s="",o=!1;for(let c=0;c<t.length;c++){const l=t[c];if(["(",")",","].includes(l)&&(e=!0),l==="("&&r++,l===")"&&r--,!!e){if(r===0){if(l===" "&&["event","function",""].includes(s))s="";else if(s+=l,l===")"){o=!0;break}continue}if(l===" "){t[c-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=l,n+=l}}if(!o)throw new tt("Unable to normalize signature.");return s}const ZD=t=>{const e=typeof t=="string"?t:eD(t);return FD(e)};function nR(t){return QL(ZD(t))}const l5=nR,u5=t=>mv(nR(t),0,4);function d5(t){const{abi:e,args:n=[],name:r}=t,s=hd(r,{strict:!1}),o=e.filter(l=>s?l.type==="function"?u5(l)===r:l.type==="event"?l5(l)===r:!1:"name"in l&&l.name===r);if(o.length===0)return;if(o.length===1)return o[0];let c;for(const l of o){if(!("inputs"in l))continue;if(!n||n.length===0){if(!l.inputs||l.inputs.length===0)return l;continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==n.length)continue;if(n.every((m,y)=>{const v="inputs"in l&&l.inputs[y];return v?AS(m,v):!1})){if(c&&"inputs"in c&&c.inputs){const m=rR(l.inputs,c.inputs,n);if(m)throw new J8({abiItem:l,type:m[0]},{abiItem:c,type:m[1]})}c=l}}return c||o[0]}function AS(t,e){const n=typeof t,r=e.type;switch(r){case"address":return jc(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,o)=>AS(Object.values(t)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>AS(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function rR(t,e,n){for(const r in t){const s=t[r],o=e[r];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return rR(s.components,o.components,n[r]);const c=[s.type,o.type];if(c.includes("address")&&c.includes("bytes20")?!0:c.includes("address")&&c.includes("string")?jc(n[r],{strict:!1}):c.includes("address")&&c.includes("bytes")?jc(n[r],{strict:!1}):!1)return c}}const zE="/docs/contract/decodeFunctionResult";function h5(t){const{abi:e,args:n,functionName:r,data:s}=t;let o=e[0];if(r){const l=d5({abi:e,args:n,name:r});if(!l)throw new hv(r,{docsPath:zE});o=l}if(o.type!=="function")throw new hv(void 0,{docsPath:zE});if(!o.outputs)throw new Q8(o.name,{docsPath:zE});const c=a2(o.outputs,s);if(c&&c.length>1)return c;if(c&&c.length===1)return c[0]}const E3="/docs/contract/encodeFunctionData";function zD(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const o=d5({abi:e,args:n,name:r});if(!o)throw new hv(r,{docsPath:E3});s=o}if(s.type!=="function")throw new hv(void 0,{docsPath:E3});return{abi:[s],functionName:u5(fd(s))}}function c2(t){const{args:e}=t,{abi:n,functionName:r}=t.abi.length===1&&t.functionName?.startsWith("0x")?t:zD(t),s=n[0],o=r,c="inputs"in s&&s.inputs?y6(s.inputs,e??[]):void 0;return n2([o,c??"0x"])}function sR({blockNumber:t,chain:e,contract:n}){const r=e?.contracts?.[n];if(!r)throw new hS({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new hS({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const GD={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},HD={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},XD={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function WD(t){const{abi:e,data:n}=t,r=mv(n,0,4);if(r==="0x")throw new t2;const o=[...e||[],HD,XD].find(c=>c.type==="error"&&r===u5(fd(c)));if(!o)throw new n6(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:o,args:"inputs"in o&&o.inputs&&o.inputs.length>0?a2(o.inputs,mv(n,4)):void 0,errorName:o.name}}function iR({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,o)=>`${r&&s.name?`${s.name}: `:""}${typeof e[o]=="object"?Uo(e[o]):e[o]}`).join(", ")})`}class VD extends tt{constructor(e,{account:n,docsPath:r,chain:s,data:o,gas:c,gasPrice:l,maxFeePerGas:p,maxPriorityFeePerGas:m,nonce:y,to:v,value:S,stateOverride:_}){const A=n?Gc(n):void 0;let N=gb({from:A?.address,to:v,value:typeof S<"u"&&`${e5(S)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:c,gasPrice:typeof l<"u"&&`${Ri(l)} gwei`,maxFeePerGas:typeof p<"u"&&`${Ri(p)} gwei`,maxPriorityFeePerGas:typeof m<"u"&&`${Ri(m)} gwei`,nonce:y});_&&(N+=`
${EL(_)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",N].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class oR extends tt{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:o,functionName:c,sender:l}){const p=d5({abi:n,args:r,name:c}),m=p?iR({abiItem:p,args:r,includeFunctionName:!1,includeName:!1}):void 0,y=p?fd(p,{includeName:!0}):void 0,v=gb({address:s&&oL(s),function:y,args:m&&m!=="()"&&`${[...Array(c?.length??0).keys()].map(()=>" ").join("")}${m}`,sender:l});super(e.shortMessage||`An unknown error occurred while executing the contract function "${c}".`,{cause:e,docsPath:o,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],v&&"Contract Call:",v].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=c,this.sender=l}}class KD extends tt{constructor({abi:e,data:n,functionName:r,message:s}){let o,c,l,p;if(n&&n!=="0x")try{c=WD({abi:e,data:n});const{abiItem:y,errorName:v,args:S}=c;if(v==="Error")p=S[0];else if(v==="Panic"){const[_]=S;p=GD[_]}else{const _=y?fd(y,{includeName:!0}):void 0,A=y&&S?iR({abiItem:y,args:S,includeFunctionName:!1,includeName:!1}):void 0;l=[_?`Error: ${_}`:"",A&&A!=="()"?`       ${[...Array(v?.length??0).keys()].map(()=>" ").join("")}${A}`:""]}}catch(y){o=y}else s&&(p=s);let m;o instanceof n6&&(m=o.signature,l=[`Unable to decode signature "${m}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${m}.`]),super(p&&p!=="execution reverted"||m?[`The contract function "${r}" reverted with the following ${m?"signature":"reason"}:`,p||m].join(`
`):`The contract function "${r}" reverted.`,{cause:o,metaMessages:l,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=c,this.raw=n,this.reason=p,this.signature=m}}class YD extends tt{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class qD extends tt{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class f5 extends tt{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}const QD=3;function bv(t,{abi:e,address:n,args:r,docsPath:s,functionName:o,sender:c}){const l=t instanceof f5?t:t instanceof tt?t.walk(A=>"data"in A)||t.walk():{},{code:p,data:m,details:y,message:v,shortMessage:S}=l,_=t instanceof t2?new YD({functionName:o}):[QD,rf.code].includes(p)&&(m||y||v||S)?new KD({abi:e,data:typeof m=="object"?m.data:m,functionName:o,message:l instanceof n5?y:S??v}):t;return new oR(_,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:o,sender:c})}const JD="0.1.1";function eM(){return JD}let Lm=class IS extends Error{constructor(e,n={}){const r=(()=>{if(n.cause instanceof IS){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),s=n.cause instanceof IS&&n.cause.docsPath||n.docsPath,c=`https://oxlib.sh${s??""}`,l=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${c}`:void 0]:[]].filter(p=>typeof p=="string").join(`
`);super(l,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${eM()}`}),this.cause=n.cause,this.details=r,this.docs=c,this.docsPath=s,this.shortMessage=e}walk(e){return aR(this,e)}};function aR(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?aR(t.cause,e):e?null:t}const tM="#__bigint";function nM(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+tM:s,n)}function cR(t,e){if(vm(t)>e)throw new dM({givenSize:vm(t),maxSize:e})}function rM(t,e){if(typeof e=="number"&&e>0&&e>vm(t)-1)throw new dR({offset:e,position:"start",size:vm(t)})}function sM(t,e,n){if(typeof e=="number"&&typeof n=="number"&&vm(t)!==n-e)throw new dR({offset:n,position:"end",size:vm(t)})}function lR(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new hM({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const iM=new TextEncoder,oM=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function aM(t,e={}){const{strict:n=!1}=e;if(!t)throw new C3(t);if(typeof t!="string")throw new C3(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new S3(t);if(!t.startsWith("0x"))throw new S3(t)}function Nae(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function Rae(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(cR(n,e.size),uR(n,e.size)):n}function cM(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=oM[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(cR(r,e.size),lM(r,e.size)):r}function Pl(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const c=typeof o=="bigint"&&n?-o-1n:0;if(o&&s>o||s<c){const m=typeof t=="bigint"?"n":"";throw new uM({max:o?`${o}${m}`:void 0,min:`${c}${m}`,signed:n,size:r,value:`${t}${m}`})}const p=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?uR(p,r):p}function Oae(t,e={}){return cM(iM.encode(t),e)}function uR(t,e){return lR(t,{dir:"left",size:e})}function lM(t,e){return lR(t,{dir:"right",size:e})}function Pae(t,e,n,r={}){const{strict:s}=r;rM(t,e);const o=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&sM(o,e,n),o}function vm(t){return Math.ceil((t.length-2)/2)}function kae(t,e={}){const{strict:n=!1}=e;try{return aM(t,{strict:n}),!0}catch{return!1}}let uM=class extends Lm{constructor({max:e,min:n,signed:r,size:s,value:o}){super(`Number \`${o}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class C3 extends Lm{constructor(e){super(`Value \`${typeof e=="object"?nM(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class S3 extends Lm{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let dM=class extends Lm{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class dR extends Lm{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let hM=class extends Lm{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function fM(t){return{address:t.address,amount:Pl(t.amount),index:Pl(t.index),validatorIndex:Pl(t.validatorIndex)}}function pM(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Pl(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Pl(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Pl(t.gasLimit)},...typeof t.number=="bigint"&&{number:Pl(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Pl(t.prevRandao)},...typeof t.time=="bigint"&&{time:Pl(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(fM)}}}const mM="0x82ad56cb",gM="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",yM="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Uae="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function bM(t,{docsPath:e,...n}){const r=(()=>{const s=r5(t,n);return s instanceof i2?t:s})();return new VD(r,{docsPath:e,...n})}function hR(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const GE=new Map;function fR({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const o=async()=>{const y=p();c();const v=y.map(({args:S})=>S);v.length!==0&&t(v).then(S=>{s&&Array.isArray(S)&&S.sort(s);for(let _=0;_<y.length;_++){const{resolve:A}=y[_];A?.([S[_],S])}}).catch(S=>{for(let _=0;_<y.length;_++){const{reject:A}=y[_];A?.(S)}})},c=()=>GE.delete(e),l=()=>p().map(({args:y})=>y),p=()=>GE.get(e)||[],m=y=>GE.set(e,[...p(),y]);return{flush:c,async schedule(y){const{promise:v,resolve:S,reject:_}=hR();return n?.([...l(),y])&&o(),p().length>0?(m({args:y,resolve:S,reject:_}),v):(m({args:y,resolve:S,reject:_}),setTimeout(o,r),v)}}}async function pR(t,e){const{account:n=t.account,authorizationList:r,batch:s=!!t.batch?.multicall,blockNumber:o,blockTag:c=t.experimental_blockTag??"latest",accessList:l,blobs:p,blockOverrides:m,code:y,data:v,factory:S,factoryData:_,gas:A,gasPrice:N,maxFeePerBlobGas:R,maxFeePerGas:$,maxPriorityFeePerGas:G,nonce:F,to:X,value:j,stateOverride:L,...Z}=e,U=n?Gc(n):void 0;if(y&&(S||_))throw new tt("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(y&&X)throw new tt("Cannot provide both `code` & `to` as parameters.");const D=y&&v,B=S&&_&&X&&v,W=D||B,K=D?EM({code:y,data:v}):B?CM({data:v,factory:S,factoryData:_,to:X}):v;try{o2(e);const pe=(typeof o=="bigint"?Qt(o):void 0)||c,V=m?pM(m):void 0,P=k6(L),ne=t.chain?.formatters?.transactionRequest?.format,me=(ne||i5)({...s5(Z,{format:ne}),from:U?.address,accessList:l,authorizationList:r,blobs:p,data:K,gas:A,gasPrice:N,maxFeePerBlobGas:R,maxFeePerGas:$,maxPriorityFeePerGas:G,nonce:F,to:W?void 0:X,value:j});if(s&&wM({request:me})&&!P&&!V)try{return await vM(t,{...me,blockNumber:o,blockTag:c})}catch(Ae){if(!(Ae instanceof S6)&&!(Ae instanceof hS))throw Ae}const H=(()=>{const Ae=[me,pe];return P&&V?[...Ae,P,V]:P?[...Ae,P]:V?[...Ae,{},V]:Ae})(),fe=await t.request({method:"eth_call",params:H});return fe==="0x"?{data:void 0}:{data:fe}}catch(he){const pe=SM(he),{offchainLookup:V,offchainLookupSignature:P}=await Bs(async()=>{const{offchainLookup:ne,offchainLookupSignature:de}=await import("./ccip-C-5SJinD.js");return{offchainLookup:ne,offchainLookupSignature:de}},__vite__mapDeps([0,1]));if(t.ccipRead!==!1&&pe?.slice(0,10)===P&&X)return{data:await V(t,{data:pe,to:X})};throw W&&pe?.slice(0,10)==="0x101bb98d"?new qD({factory:S}):bM(he,{...e,account:U,chain:t.chain})}}function wM({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(mM)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function vM(t,e){const{batchSize:n=1024,wait:r=0}=typeof t.batch?.multicall=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:o=t.experimental_blockTag??"latest",data:c,multicallAddress:l,to:p}=e;let m=l;if(!m){if(!t.chain)throw new S6;m=sR({blockNumber:s,chain:t.chain,contract:"multicall3"})}const v=(typeof s=="bigint"?Qt(s):void 0)||o,{schedule:S}=fR({id:`${t.uid}.${v}`,wait:r,shouldSplitBatch(N){return N.reduce(($,{data:G})=>$+(G.length-2),0)>n*2},fn:async N=>{const R=N.map(F=>({allowFailure:!0,callData:F.data,target:F.to})),$=c2({abi:CS,args:[R],functionName:"aggregate3"}),G=await t.request({method:"eth_call",params:[{data:$,to:m},v]});return h5({abi:CS,args:[R],functionName:"aggregate3",data:G||"0x"})}}),[{returnData:_,success:A}]=await S({data:c,to:p});if(!A)throw new f5({data:_});return _==="0x"?{data:void 0}:{data:_}}function EM(t){const{code:e,data:n}=t;return b6({abi:tR(["constructor(bytes, bytes)"]),bytecode:gM,args:[e,n]})}function CM(t){const{data:e,factory:n,factoryData:r,to:s}=t;return b6({abi:tR(["constructor(address, bytes, address, bytes)"]),bytecode:yM,args:[s,e,n,r]})}function SM(t){if(!(t instanceof tt))return;const e=t.walk();return typeof e?.data=="object"?e.data?.data:e.data}async function mR(t,e){const{abi:n,address:r,args:s,functionName:o,...c}=e,l=c2({abi:n,args:s,functionName:o});try{const{data:p}=await nr(t,pR,"call")({...c,data:l,to:r});return h5({abi:n,args:s,functionName:o,data:p||"0x"})}catch(p){throw bv(p,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:o})}}function _M(t,{method:e}){const n={};return t.transport.type==="fallback"&&t.transport.onResponse?.(({method:r,response:s,status:o,transport:c})=>{o==="success"&&e===r&&(n[s]=c.request)}),r=>n[r]||t.request}async function xM(t){const e=_M(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}const TM=new Map,AM=new Map;function IM(t){const e=(s,o)=>({clear:()=>o.delete(s),get:()=>o.get(s),set:c=>o.set(s,c)}),n=e(t,TM),r=e(t,AM);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function NM(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=IM(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let o=r.promise.get();o||(o=t(),r.promise.set(o));try{const c=await o;return r.response.set({created:new Date,data:c}),c}finally{r.promise.clear()}}const RM=t=>`blockNumber.${t}`;async function OM(t,{cacheTime:e=t.cacheTime}={}){const n=await NM(()=>t.request({method:"eth_blockNumber"}),{cacheKey:RM(t.uid),cacheTime:e});return BigInt(n)}function PM(t,e){if(!jc(t,{strict:!1}))throw new tf({address:t});if(!jc(e,{strict:!1}))throw new tf({address:e});return t.toLowerCase()===e.toLowerCase()}const _3="/docs/contract/decodeEventLog";function kM(t){const{abi:e,data:n,strict:r,topics:s}=t,o=r??!0,[c,...l]=s;if(!c)throw new q8({docsPath:_3});const p=e.find(N=>N.type==="event"&&c===l5(fd(N)));if(!(p&&"name"in p)||p.type!=="event")throw new r6(c,{docsPath:_3});const{name:m,inputs:y}=p,v=y?.some(N=>!("name"in N&&N.name)),S=v?[]:{},_=y.map((N,R)=>[N,R]).filter(([N])=>"indexed"in N&&N.indexed);for(let N=0;N<_.length;N++){const[R,$]=_[N],G=l[N];if(!G)throw new s6({abiItem:p,param:R});S[v?$:R.name||$]=LM({param:R,value:G})}const A=y.filter(N=>!("indexed"in N&&N.indexed));if(A.length>0){if(n&&n!=="0x")try{const N=a2(A,n);if(N)if(v)for(let R=0;R<y.length;R++)S[R]=S[R]??N.shift();else for(let R=0;R<A.length;R++)S[A[R].name]=N[R]}catch(N){if(o)throw N instanceof t6||N instanceof w6?new dS({abiItem:p,data:n,params:A,size:Mr(n)}):N}else if(o)throw new dS({abiItem:p,data:"0x",params:A,size:0})}return{eventName:m,args:Object.values(S).length>0?S:void 0}}function LM({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(a2([t],e)||[])[0]}function DM(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,o=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(c=>{try{const l=e.find(m=>m.type==="event"&&c.topics[0]===l5(m));if(!l)return null;const p=kM({...c,abi:[l],strict:s});return o&&!o.includes(p.eventName)||!MM({args:p.args,inputs:l.inputs,matchArgs:n})?null:{...p,...c}}catch(l){let p,m;if(l instanceof r6)return null;if(l instanceof dS||l instanceof s6){if(s)return null;p=l.abiItem.name,m=l.abiItem.inputs?.some(y=>!("name"in y&&y.name))}return{...c,args:m?[]:{},eventName:p}}}).filter(Boolean)}function MM(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(o,c,l){try{return o.type==="address"?PM(c,l):o.type==="string"||o.type==="bytes"?mb(Qv(c))===l:c===l}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((o,c)=>{if(o==null)return!0;const l=n[c];return l?(Array.isArray(o)?o:[o]).some(m=>s(l,m,e[c])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([o,c])=>{if(c==null)return!0;const l=n.find(m=>m.name===o);return l?(Array.isArray(c)?c:[c]).some(m=>s(l,m,e[o])):!1}):!1}function gR(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function UM(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(o=>gR(o));return!("abi"in e)||!e.abi?s:DM({abi:e.abi,logs:s,strict:n})}async function yR(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:o}){const c=r||"latest",l=n!==void 0?Qt(n):void 0;let p=null;if(s?p=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?p=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Qt(o)]},{dedupe:!0}):p=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[l||c,Qt(o)]},{dedupe:!!l}),!p)throw new x6({blockHash:e,blockNumber:n,blockTag:c,hash:s,index:o});return(t.chain?.formatters?.transaction?.format||R6)(p)}const $M={"0x0":"reverted","0x1":"success"};function jM(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>gR(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?ef(t.transactionIndex):null,status:t.status?$M[t.status]:null,type:t.type?N6[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function HE(t,{hash:e}){const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new T6({hash:e});return(t.chain?.formatters?.transactionReceipt?.format||jM)(n)}async function BM(t,e){const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:o,blockTag:c,multicallAddress:l,stateOverride:p}=e,m=e.contracts,y=s??(typeof t.batch?.multicall=="object"&&t.batch.multicall.batchSize||1024);let v=l;if(!v){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");v=sR({blockNumber:o,chain:t.chain,contract:"multicall3"})}const S=[[]];let _=0,A=0;for(let $=0;$<m.length;$++){const{abi:G,address:F,args:X,functionName:j}=m[$];try{const L=c2({abi:G,args:X,functionName:j});A+=(L.length-2)/2,y>0&&A>y&&S[_].length>0&&(_++,A=(L.length-2)/2,S[_]=[]),S[_]=[...S[_],{allowFailure:!0,callData:L,target:F}]}catch(L){const Z=bv(L,{abi:G,address:F,args:X,docsPath:"/docs/contract/multicall",functionName:j,sender:n});if(!r)throw Z;S[_]=[...S[_],{allowFailure:!0,callData:"0x",target:F}]}}const N=await Promise.allSettled(S.map($=>nr(t,mR,"readContract")({abi:CS,account:n,address:v,args:[$],blockNumber:o,blockTag:c,functionName:"aggregate3",stateOverride:p}))),R=[];for(let $=0;$<N.length;$++){const G=N[$];if(G.status==="rejected"){if(!r)throw G.reason;for(let X=0;X<S[$].length;X++)R.push({status:"failure",error:G.reason,result:void 0});continue}const F=G.value;for(let X=0;X<F.length;X++){const{returnData:j,success:L}=F[X],{callData:Z}=S[$][X],{abi:U,address:D,functionName:B,args:W}=m[R.length];try{if(Z==="0x")throw new t2;if(!L)throw new f5({data:j});const K=h5({abi:U,args:W,data:j,functionName:B});R.push(r?{result:K,status:"success"}:K)}catch(K){const he=bv(K,{abi:U,address:D,args:W,docsPath:"/docs/contract/multicall",functionName:B});if(!r)throw he;R.push({error:he,result:void 0,status:"failure"})}}}if(R.length!==m.length)throw new tt("multicall results mismatch");return R}const b1=new r2(8192);function FM(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(b1.get(n))return b1.get(n);const r=t().finally(()=>b1.delete(n));return b1.set(n,r),r}async function wv(t){return new Promise(e=>setTimeout(e,t))}function vv(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,o)=>{const c=async({count:l=0}={})=>{const p=async({error:m})=>{const y=typeof e=="function"?e({count:l,error:m}):e;y&&await wv(y),c({count:l+1})};try{const m=await t();s(m)}catch(m){if(l<n&&await r({count:l,error:m}))return p({error:m});o(m)}};c()})}function ZM(t,e={}){return async(n,r={})=>{const{dedupe:s=!1,methods:o,retryDelay:c=150,retryCount:l=3,uid:p}={...e,...r},{method:m}=n;if(o?.exclude?.includes(m))throw new Hh(new Error("method not supported"),{method:m});if(o?.include&&!o.include.includes(m))throw new Hh(new Error("method not supported"),{method:m});const y=s?Jv(`${p}.${Uo(n)}`):void 0;return FM(()=>vv(async()=>{try{return await t(n)}catch(v){const S=v;switch(S.code){case vy.code:throw new vy(S);case Ey.code:throw new Ey(S);case Cy.code:throw new Cy(S,{method:n.method});case Sy.code:throw new Sy(S);case rf.code:throw new rf(S);case _y.code:throw new _y(S);case xy.code:throw new xy(S);case cd.code:throw new cd(S);case bm.code:throw new bm(S);case Hh.code:throw new Hh(S,{method:n.method});case wm.code:throw new wm(S);case Ty.code:throw new Ty(S);case Lr.code:throw new Lr(S);case Ay.code:throw new Ay(S);case Iy.code:throw new Iy(S);case Ny.code:throw new Ny(S);case Ry.code:throw new Ry(S);case Bc.code:throw new Bc(S);case Oy.code:throw new Oy(S);case Py.code:throw new Py(S);case ky.code:throw new ky(S);case Ly.code:throw new Ly(S);case Dy.code:throw new Dy(S);case My.code:throw new My(S);case Uy.code:throw new Uy(S);case 5e3:throw new Lr(S);default:throw v instanceof tt?v:new cL(S)}}},{delay:({count:v,error:S})=>{if(S&&S instanceof iy){const _=S?.headers?.get("Retry-After");if(_?.match(/\d/))return Number.parseInt(_)*1e3}return~~(1<<v)*c},retryCount:l,shouldRetry:({error:v})=>zM(v)}),{enabled:s,id:y})}}function zM(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===wm.code||t.code===rf.code:t instanceof iy&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function bR(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,o)=>{(async()=>{let c;try{const l=new AbortController;n>0&&(c=setTimeout(()=>{r?l.abort():o(e)},n)),s(await t({signal:l?.signal||null}))}catch(l){l?.name==="AbortError"&&o(e),o(l)}finally{clearTimeout(c)}})()})}function GM(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const x3=GM();function HM(t,e={}){return{async request(n){const{body:r,onRequest:s=e.onRequest,onResponse:o=e.onResponse,timeout:c=e.timeout??1e4}=n,l={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:p,method:m,signal:y}=l;try{const v=await bR(async({signal:_})=>{const A={...l,body:Array.isArray(r)?Uo(r.map(G=>({jsonrpc:"2.0",id:G.id??x3.take(),...G}))):Uo({jsonrpc:"2.0",id:r.id??x3.take(),...r}),headers:{"Content-Type":"application/json",...p},method:m||"POST",signal:y||(c>0?_:null)},N=new Request(t,A),R=await s?.(N,A)??{...A,url:t};return await fetch(R.url??t,R)},{errorInstance:new f3({body:r,url:t}),timeout:c,signal:!0});o&&await o(v);let S;if(v.headers.get("Content-Type")?.startsWith("application/json"))S=await v.json();else{S=await v.text();try{S=JSON.parse(S||"{}")}catch(_){if(v.ok)throw _;S={error:S}}}if(!v.ok)throw new iy({body:r,details:Uo(S.error)||v.statusText,headers:v.headers,status:v.status,url:t});return S}catch(v){throw v instanceof iy||v instanceof f3?v:new iy({body:r,cause:v,url:t})}}}}class XM extends tt{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function wR(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new XM({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[o,c,l]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],p=Math.round(+`${c}.${l}`);p>9?r=`${BigInt(o)+BigInt(1)}0`.padStart(o.length+1,"0"):r=`${o}${p}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}function WM(t,e="wei"){return wR(t,_6[e])}const XE=new Map,T3=new Map;let VM=0;function Ev(t,e,n){const r=++VM,s=()=>XE.get(t)||[],o=()=>{const y=s();XE.set(t,y.filter(v=>v.id!==r))},c=()=>{const y=s();if(!y.some(S=>S.id===r))return;const v=T3.get(t);if(y.length===1&&v){const S=v();S instanceof Promise&&S.catch(()=>{})}o()},l=s();if(XE.set(t,[...l,{id:r,fns:e}]),l&&l.length>0)return c;const p={};for(const y in e)p[y]=(...v)=>{const S=s();if(S.length!==0)for(const _ of S)_.fns[y]?.(...v)};const m=n(p);return typeof m=="function"&&T3.set(t,m),c}function vR(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const o=()=>s=!1;return(async()=>{let l;e&&(l=await t({unpoll:o}));const p=await n?.(l)??r;await wv(p);const m=async()=>{s&&(await t({unpoll:o}),await wv(r),m())};m()})(),o}function KM(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:o,pollingInterval:c=t.pollingInterval}){const l=typeof o<"u"?o:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let p;return l?(()=>{const v=Uo(["watchBlockNumber",t.uid,e,n,c]);return Ev(v,{onBlockNumber:r,onError:s},S=>vR(async()=>{try{const _=await nr(t,OM,"getBlockNumber")({cacheTime:0});if(p){if(_===p)return;if(_-p>1&&n)for(let A=p+1n;A<_;A++)S.onBlockNumber(A,p),p=A}(!p||_>p)&&(S.onBlockNumber(_,p),p=_)}catch(_){S.onError?.(_)}},{emitOnBegin:e,interval:c}))})():(()=>{const v=Uo(["watchBlockNumber",t.uid,e,n]);return Ev(v,{onBlockNumber:r,onError:s},S=>{let _=!0,A=()=>_=!1;return(async()=>{try{const N=(()=>{if(t.transport.type==="fallback"){const $=t.transport.transports.find(G=>G.config.type==="webSocket"||G.config.type==="ipc");return $?$.value:t.transport}return t.transport})(),{unsubscribe:R}=await N.subscribe({params:["newHeads"],onData($){if(!_)return;const G=mm($.result?.number);S.onBlockNumber(G,p),p=G},onError($){S.onError?.($)}});A=R,_||A()}catch(N){s?.(N)}})(),()=>A()})})()}async function YM(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function qM(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:o=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const m=Uo(["watchPendingTransactions",t.uid,e,o]);return Ev(m,{onTransactions:r,onError:n},y=>{let v;const S=vR(async()=>{try{if(!v)try{v=await nr(t,xM,"createPendingTransactionFilter")({});return}catch(A){throw S(),A}const _=await nr(t,UM,"getFilterChanges")({filter:v});if(_.length===0)return;if(e)y.onTransactions(_);else for(const A of _)y.onTransactions([A])}catch(_){y.onError?.(_)}},{emitOnBegin:!0,interval:o});return async()=>{v&&await nr(t,YM,"uninstallFilter")({filter:v}),S()}})})():(()=>{let m=!0,y=()=>m=!1;return(async()=>{try{const{unsubscribe:v}=await t.transport.subscribe({params:["newPendingTransactions"],onData(S){if(!m)return;const _=S.result;r([_])},onError(S){n?.(S)}});y=v,m||y()}catch(v){n?.(v)}})(),()=>y()})()}async function QM(t,e){const{checkReplacement:n=!0,confirmations:r=1,hash:s,onReplaced:o,retryCount:c=6,retryDelay:l=({count:j})=>~~(1<<j)*200,timeout:p=18e4}=e,m=Uo(["waitForTransactionReceipt",t.uid,s]),y=e.pollingInterval?e.pollingInterval:t.chain?.experimental_preconfirmationTime?t.chain.experimental_preconfirmationTime:t.pollingInterval;let v,S,_,A=!1,N,R;const{promise:$,resolve:G,reject:F}=hR(),X=p?setTimeout(()=>{R(),N(),F(new iL({hash:s}))},p):void 0;return N=Ev(m,{onReplaced:o,resolve:G,reject:F},async j=>{if(_=await nr(t,HE,"getTransactionReceipt")({hash:s}).catch(()=>{}),_&&r<=1){clearTimeout(X),j.resolve(_),N();return}R=nr(t,KM,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:y,async onBlockNumber(L){const Z=D=>{clearTimeout(X),R(),D(),N()};let U=L;if(!A)try{if(_){if(r>1&&(!_.blockNumber||U-_.blockNumber+1n<r))return;Z(()=>j.resolve(_));return}if(n&&!v&&(A=!0,await vv(async()=>{v=await nr(t,yR,"getTransaction")({hash:s}),v.blockNumber&&(U=v.blockNumber)},{delay:l,retryCount:c}),A=!1),_=await nr(t,HE,"getTransactionReceipt")({hash:s}),r>1&&(!_.blockNumber||U-_.blockNumber+1n<r))return;Z(()=>j.resolve(_))}catch(D){if(D instanceof x6||D instanceof T6){if(!v){A=!1;return}try{S=v,A=!0;const B=await vv(()=>nr(t,$y,"getBlock")({blockNumber:U,includeTransactions:!0}),{delay:l,retryCount:c,shouldRetry:({error:he})=>he instanceof I6});A=!1;const W=B.transactions.find(({from:he,nonce:pe})=>he===S.from&&pe===S.nonce);if(!W||(_=await nr(t,HE,"getTransactionReceipt")({hash:W.hash}),r>1&&(!_.blockNumber||U-_.blockNumber+1n<r)))return;let K="replaced";W.to===S.to&&W.value===S.value&&W.input===S.input?K="repriced":W.from===W.to&&W.value===0n&&(K="cancelled"),Z(()=>{j.onReplaced?.({reason:K,replacedTransaction:S,transaction:W,transactionReceipt:_}),j.resolve(_)})}catch(B){Z(()=>j.reject(B))}}else Z(()=>j.reject(D))}}})}),$}async function JM(t,{account:e=t.account,message:n}){if(!e)throw new Q_({docsPath:"/docs/actions/wallet/signMessage"});const r=Gc(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?Jv(n):n.raw instanceof Uint8Array?gm(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function eU(t,e){const{abi:n,account:r=t.account,address:s,args:o,dataSuffix:c,functionName:l,...p}=e;if(typeof r>"u")throw new Q_({docsPath:"/docs/contract/writeContract"});const m=r?Gc(r):null,y=c2({abi:n,args:o,functionName:l});try{return await nr(t,F6,"sendTransaction")({data:`${y}${c?c.replace("0x",""):""}`,to:s,account:m,...p})}catch(v){throw bv(v,{abi:n,address:s,args:o,docsPath:"/docs/contract/writeContract",functionName:l,sender:m?.address})}}function $o(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:o=>e(t,o)}const q1="2.18.0",tU=()=>`@wagmi/core@${q1}`;var ER=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Cv,CR;let Gl=class NS extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return tU()}constructor(e,n={}){super(),Cv.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof NS?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof NS&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return ER(this,Cv,"m",CR).call(this,this,e)}};Cv=new WeakSet,CR=function t(e,n){return n?.(e)?e:e.cause?ER(this,Cv,"m",t).call(this,e.cause,n):e};class By extends Gl{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class nU extends Gl{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class rU extends Gl{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class sU extends Gl{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class iU extends Gl{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class oU extends Gl{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function WE(t,e){let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new nU;try{t.setState(l=>({...l,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:r,...s}=e,o=await n.connect(s),c=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await t.storage?.setItem("recentConnectorId",n.id),t.setState(l=>({...l,connections:new Map(l.connections).set(n.uid,{accounts:c,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:c,chainId:o.chainId}}catch(r){throw t.setState(s=>({...s,status:s.current?"connected":"disconnected"})),r}}const RS=256;let w1=RS,v1;function SR(t=11){if(!v1||w1+t>RS*2){v1="",w1=0;for(let e=0;e<RS;e++)v1+=(256+Math.random()*256|0).toString(16).substring(1)}return v1.substring(w1,w1+++t)}function _R(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:o="Base Client",type:c="base"}=t,l=t.experimental_blockTag??(typeof n?.experimental_preconfirmationTime=="number"?"pending":void 0),p=n?.blockTime??12e3,m=Math.min(Math.max(Math.floor(p/2),500),4e3),y=t.pollingInterval??m,v=t.cacheTime??y,S=t.account?Gc(t.account):void 0,{config:_,request:A,value:N}=t.transport({chain:n,pollingInterval:y}),R={..._,...N},$={account:S,batch:e,cacheTime:v,ccipRead:r,chain:n,key:s,name:o,pollingInterval:y,request:A,transport:R,type:c,uid:SR(),...l?{experimental_blockTag:l}:{}};function G(F){return X=>{const j=X(F);for(const Z in $)delete j[Z];const L={...F,...j};return Object.assign(L,{extend:G(L)})}}return Object.assign($,{extend:G($)})}function p5({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:o=150,timeout:c,type:l},p){const m=SR();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:o,timeout:c,type:l},request:ZM(r,{methods:e,retryCount:s,retryDelay:o,uid:m}),value:p}}function aU(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:o}=e;return({retryCount:c})=>p5({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??c,retryDelay:o,type:"custom"})}function A3(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:o=cU,retryCount:c,retryDelay:l}=e;return({chain:p,pollingInterval:m=4e3,timeout:y,...v})=>{let S=t,_=()=>{};const A=p5({key:n,name:r,async request({method:N,params:R}){let $;const G=async(F=0)=>{const X=S[F]({...v,chain:p,retryCount:0,timeout:y});try{const j=await X.request({method:N,params:R});return _({method:N,params:R,response:j,transport:X,status:"success"}),j}catch(j){if(_({error:j,method:N,params:R,transport:X,status:"error"}),o(j)||F===S.length-1||($??=S.slice(F+1).some(L=>{const{include:Z,exclude:U}=L({chain:p}).config.methods||{};return Z?Z.includes(N):U?!U.includes(N):!0}),!$))throw j;return G(F+1)}};return G()},retryCount:c,retryDelay:l,type:"fallback"},{onResponse:N=>_=N,transports:S.map(N=>N({chain:p,retryCount:0}))});if(s){const N=typeof s=="object"?s:{};lU({chain:p,interval:N.interval??m,onTransports:R=>S=R,ping:N.ping,sampleCount:N.sampleCount,timeout:N.timeout,transports:S,weights:N.weights})}return A}}function cU(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===bm.code||t.code===Lr.code||Gh.nodeMessage.test(t.message)||t.code===5e3))}function lU({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:o=1e3,transports:c,weights:l={}}){const{stability:p=.7,latency:m=.3}=l,y=[],v=async()=>{const S=await Promise.all(c.map(async N=>{const R=N({chain:t,retryCount:0,timeout:o}),$=Date.now();let G,F;try{await(r?r({transport:R}):R.request({method:"net_listening"})),F=1}catch{F=0}finally{G=Date.now()}return{latency:G-$,success:F}}));y.push(S),y.length>s&&y.shift();const _=Math.max(...y.map(N=>Math.max(...N.map(({latency:R})=>R)))),A=c.map((N,R)=>{const $=y.map(L=>L[R].latency),F=1-$.reduce((L,Z)=>L+Z,0)/$.length/_,X=y.map(L=>L[R].success),j=X.reduce((L,Z)=>L+Z,0)/X.length;return j===0?[0,R]:[m*F+p*j,R]}).sort((N,R)=>R[0]-N[0]);n(A.map(([,N])=>c[N])),await wv(e),v()};v()}class uU extends tt{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function E1(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:o,name:c="HTTP JSON-RPC",onFetchRequest:l,onFetchResponse:p,retryDelay:m,raw:y}=e;return({chain:v,retryCount:S,timeout:_})=>{const{batchSize:A=1e3,wait:N=0}=typeof n=="object"?n:{},R=e.retryCount??S,$=_??e.timeout??1e4,G=t||v?.rpcUrls.default.http[0];if(!G)throw new uU;const F=HM(G,{fetchOptions:r,onRequest:l,onResponse:p,timeout:$});return p5({key:s,methods:o,name:c,async request({method:X,params:j}){const L={method:X,params:j},{schedule:Z}=fR({id:G,wait:N,shouldSplitBatch(W){return W.length>A},fn:W=>F.request({body:W}),sort:(W,K)=>W.id-K.id}),U=async W=>n?Z(W):[await F.request({body:W})],[{error:D,result:B}]=await U(L);if(y)return{error:D,result:B};if(D)throw new n5({body:L,error:D,url:G});return B},retryCount:R,retryDelay:m,timeout:$,type:"http"},{fetchOptions:r,url:G})}}async function l2(t,e={}){let n;if(e.connector){const{connector:m}=e;if(t.state.status==="reconnecting"&&!m.getAccounts&&!m.getChainId)throw new oU({connector:m});const[y,v]=await Promise.all([m.getAccounts().catch(S=>{if(e.account===null)return[];throw S}),m.getChainId()]);n={accounts:y,chainId:v,connector:m}}else n=t.state.connections.get(t.state.current);if(!n)throw new rU;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new iU({connectionChainId:n.chainId,connectorChainId:s});const o=n.connector;if(o.getClient)return o.getClient({chainId:r});const c=Gc(e.account??n.accounts[0]);if(c&&(c.address=zh(c.address)),e.account&&!n.accounts.some(m=>m.toLowerCase()===c.address.toLowerCase()))throw new sU({address:c.address,connector:o});const l=t.chains.find(m=>m.id===r),p=await n.connector.getProvider({chainId:r});return _R({account:c,chain:l,name:"Connector Client",transport:m=>aU(p)({...m,retryCount:0})})}async function I3(t,e={}){let n;if(e.connector)n=e.connector;else{const{connections:s,current:o}=t.state;n=s.get(o)?.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(s=>{if(r.size===0)return{...s,connections:new Map,current:null,status:"disconnected"};const o=r.values().next().value;return{...s,connections:new Map(r),current:o.connector.uid}});{const s=t.state.current;if(!s)return;const o=t.state.connections.get(s)?.connector;if(!o)return;await t.storage?.setItem("recentConnectorId",o.id)}}async function dU(t,e){const{chainId:n,connector:r,...s}=e;let o;e.account?o=e.account:o=(await l2(t,{account:e.account,chainId:n,connector:r})).account;const c=t.getClient({chainId:n});return $o(c,D6,"estimateGas")({...s,account:o})}function xR(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(tL[t])}function um(t){const e=t.state.current,n=t.state.connections.get(e),r=n?.accounts,s=r?.[0],o=t.chains.find(l=>l.id===n?.chainId),c=t.state.status;switch(c){case"connected":return{address:s,addresses:r,chain:o,chainId:n?.chainId,connector:n?.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:c};case"reconnecting":return{address:s,addresses:r,chain:o,chainId:n?.chainId,connector:n?.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:c};case"connecting":return{address:s,addresses:r,chain:o,chainId:n?.chainId,connector:n?.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:c};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:c}}}async function hU(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...o}=e,c=t.getClient({chainId:r});return $o(c,BM,"multicall")({allowFailure:n,contracts:s,...o})}function fU(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return $o(s,mR,"readContract")(r)}async function pU(t,e){const{allowFailure:n=!0,blockNumber:r,blockTag:s,...o}=e,c=e.contracts;try{const l={};for(const[v,S]of c.entries()){const _=S.chainId??t.state.chainId;l[_]||(l[_]=[]),l[_]?.push({contract:S,index:v})}const p=()=>Object.entries(l).map(([v,S])=>hU(t,{...o,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(v),contracts:S.map(({contract:_})=>_)})),m=(await Promise.all(p())).flat(),y=Object.values(l).flatMap(v=>v.map(({index:S})=>S));return m.reduce((v,S,_)=>(v&&(v[y[_]]=S),v),[])}catch(l){if(l instanceof oR)throw l;const p=()=>c.map(m=>fU(t,{...m,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(p())).map(m=>m.status==="fulfilled"?{result:m.value,status:"success"}:{error:m.reason,result:void 0,status:"failure"}):await Promise.all(p())}}async function mU(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:o,token:c,unit:l="ether"}=e;if(c)try{return await N3(t,{balanceAddress:n,chainId:o,symbolType:"string",tokenAddress:c})}catch(S){if(S.name==="ContractFunctionExecutionError"){const _=await N3(t,{balanceAddress:n,chainId:o,symbolType:"bytes32",tokenAddress:c}),A=JN(ad(_.symbol,{dir:"right"}));return{..._,symbol:A}}throw S}const p=t.getClient({chainId:o}),y=await $o(p,L6,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),v=t.chains.find(S=>S.id===o)??p.chain;return{decimals:v.nativeCurrency.decimals,formatted:Pm(y,xR(l)),symbol:v.nativeCurrency.symbol,value:y}}async function N3(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:o,unit:c}=e,l={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:o},[p,m,y]=await pU(t,{allowFailure:!1,contracts:[{...l,functionName:"balanceOf",args:[n],chainId:r},{...l,functionName:"decimals",chainId:r},{...l,functionName:"symbol",chainId:r}]}),v=Pm(p??"0",xR(c??m));return{decimals:m,formatted:v,symbol:y,value:p}}function Em(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Em(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(o&&!Em(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}let C1=[];function Nl(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Em(C1,e)?C1:(C1=e,e)}async function gU(t,e){const{account:n,chainId:r,...s}=e,o=n??um(t).address,c=t.getClient({chainId:r});return $o(c,c5,"prepareTransactionRequest")({...s,...o?{account:o}:{}})}let VE=!1;async function OS(t,e={}){if(VE)return[];VE=!0,t.setState(m=>({...m,status:m.current?"reconnecting":"connecting"}));const n=[];if(e.connectors?.length)for(const m of e.connectors){let y;typeof m=="function"?y=t._internal.connectors.setup(m):y=m,n.push(y)}else n.push(...t.connectors);let r;try{r=await t.storage?.getItem("recentConnectorId")}catch{}const s={};for(const[,m]of t.state.connections)s[m.connector.id]=1;r&&(s[r]=0);const o=Object.keys(s).length>0?[...n].sort((m,y)=>(s[m.id]??10)-(s[y.id]??10)):n;let c=!1;const l=[],p=[];for(const m of o){const y=await m.getProvider().catch(()=>{});if(!y||p.some(_=>_===y)||!await m.isAuthorized())continue;const S=await m.connect({isReconnecting:!0}).catch(()=>null);S&&(m.emitter.off("connect",t._internal.events.connect),m.emitter.on("change",t._internal.events.change),m.emitter.on("disconnect",t._internal.events.disconnect),t.setState(_=>{const A=new Map(c?_.connections:new Map).set(m.uid,{accounts:S.accounts,chainId:S.chainId,connector:m});return{..._,current:c?_.current:m.uid,connections:A}}),l.push({accounts:S.accounts,chainId:S.chainId,connector:m}),p.push(y),c=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(c?t.setState(m=>({...m,status:"connected"})):t.setState(m=>({...m,connections:new Map,current:null,status:"disconnected"}))),VE=!1,l}async function TR(t,e){const{account:n,chainId:r,connector:s,...o}=e;let c;return typeof n=="object"&&n?.type==="local"?c=t.getClient({chainId:r}):c=await l2(t,{account:n??void 0,chainId:r,connector:s}),await $o(c,F6,"sendTransaction")({...o,...n?{account:n}:{},chain:r?{id:r}:null,gas:o.gas??void 0})}async function yU(t,e){const{account:n,connector:r,...s}=e;let o;return typeof n=="object"&&n.type==="local"?o=t.getClient():o=await l2(t,{account:n,connector:r}),$o(o,JM,"signMessage")({...s,...n?{account:n}:{}})}class Yu extends Gl{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class bU extends Gl{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function R3(t,e){const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(e.connector?.uid??t.state.current);if(s){const c=s.connector;if(!c.switchChain)throw new bU({connector:c});return await c.switchChain({addEthereumChainParameter:n,chainId:r})}const o=t.chains.find(c=>c.id===r);if(!o)throw new By;return t.setState(c=>({...c,chainId:r})),o}function AR(t,e){const{onChange:n}=e;return t.subscribe(()=>um(t),n,{equalityFn(r,s){const{connector:o,...c}=r,{connector:l,...p}=s;return Em(c,p)&&o?.id===l?.id&&o?.uid===l?.uid}})}function wU(t,e){const{onChange:n}=e;return t.subscribe(()=>Nl(t),n,{equalityFn:Em})}function vU(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function EU(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const o=p=>{s&&s();const m=t.getClient({chainId:p});return s=$o(m,qM,"watchPendingTransactions")(r),s},c=o(e.chainId);let l;return n&&!e.chainId&&(l=t.subscribe(({chainId:p})=>p,async p=>o(p))),()=>{c?.(),l?.()}}async function CU(t,e){const{chainId:n,timeout:r=0,...s}=e,o=t.getClient({chainId:n}),l=await $o(o,QM,"waitForTransactionReceipt")({...s,timeout:r});if(l.status==="reverted"){const m=await $o(o,yR,"getTransaction")({hash:l.transactionHash}),v=await $o(o,pR,"call")({...m,data:m.input,gasPrice:m.type!=="eip1559"?m.gasPrice:void 0,maxFeePerGas:m.type==="eip1559"?m.maxFeePerGas:void 0,maxPriorityFeePerGas:m.type==="eip1559"?m.maxPriorityFeePerGas:void 0}),S=v?.data?JN(`0x${v.data.substring(138)}`):"unknown reason";throw new Error(S)}return{...l,chainId:o.chain.id}}async function SU(t,e){const{account:n,chainId:r,connector:s,...o}=e;let c;return typeof n=="object"&&n?.type==="local"?c=t.getClient({chainId:r}):c=await l2(t,{account:n??void 0,chainId:r,connector:s}),await $o(c,eU,"writeContract")({...o,...n?{account:n}:{},chain:r?{id:r}:null})}function $ae(t){return t}u2.type="injected";function u2(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const p=t.target;if(typeof p=="function"){const m=p();if(m)return m}return typeof p=="object"?p:typeof p=="string"?{..._U[p]??{id:p,name:`${p[0].toUpperCase()}${p.slice(1)}`,provider:`is${p[0].toUpperCase()}${p.slice(1)}`}}:{id:"injected",name:"Injected",provider(m){return m?.ethereum}}}let s,o,c,l;return p=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:u2.type,async setup(){const m=await this.getProvider();m?.on&&t.target&&(c||(c=this.onConnect.bind(this),m.on("connect",c)),s||(s=this.onAccountsChanged.bind(this),m.on("accountsChanged",s)))},async connect({chainId:m,isReconnecting:y}={}){const v=await this.getProvider();if(!v)throw new Yu;let S=[];if(y)S=await this.getAccounts().catch(()=>[]);else if(e)try{S=(await v.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0]?.caveats?.[0]?.value?.map(A=>zh(A)),S.length>0&&(S=await this.getAccounts())}catch(_){const A=_;if(A.code===Lr.code)throw new Lr(A);if(A.code===cd.code)throw A}try{!S?.length&&!y&&(S=(await v.request({method:"eth_requestAccounts"})).map(N=>zh(N))),c&&(v.removeListener("connect",c),c=void 0),s||(s=this.onAccountsChanged.bind(this),v.on("accountsChanged",s)),o||(o=this.onChainChanged.bind(this),v.on("chainChanged",o)),l||(l=this.onDisconnect.bind(this),v.on("disconnect",l));let _=await this.getChainId();return m&&_!==m&&(_=(await this.switchChain({chainId:m}).catch(N=>{if(N.code===Lr.code)throw N;return{id:_}}))?.id??_),e&&await p.storage?.removeItem(`${this.id}.disconnected`),t.target||await p.storage?.setItem("injected.connected",!0),{accounts:S,chainId:_}}catch(_){const A=_;throw A.code===Lr.code?new Lr(A):A.code===cd.code?new cd(A):A}},async disconnect(){const m=await this.getProvider();if(!m)throw new Yu;o&&(m.removeListener("chainChanged",o),o=void 0),l&&(m.removeListener("disconnect",l),l=void 0),c||(c=this.onConnect.bind(this),m.on("connect",c));try{await bR(()=>m.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await p.storage?.setItem(`${this.id}.disconnected`,!0),t.target||await p.storage?.removeItem("injected.connected")},async getAccounts(){const m=await this.getProvider();if(!m)throw new Yu;return(await m.request({method:"eth_accounts"})).map(v=>zh(v))},async getChainId(){const m=await this.getProvider();if(!m)throw new Yu;const y=await m.request({method:"eth_chainId"});return Number(y)},async getProvider(){if(typeof window>"u")return;let m;const y=r();return typeof y.provider=="function"?m=y.provider(window):typeof y.provider=="string"?m=Q1(window,y.provider):m=y.provider,m&&!m.removeListener&&("off"in m&&typeof m.off=="function"?m.removeListener=m.off:m.removeListener=()=>{}),m},async isAuthorized(){try{if(e&&await p.storage?.getItem(`${this.id}.disconnected`)||!t.target&&!await p.storage?.getItem("injected.connected"))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const S=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",S),!!await this.getProvider()),_=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(N=>window.addEventListener("ethereum#initialized",()=>N(S()),{once:!0}))]:[],new Promise(N=>setTimeout(()=>N(S()),_))]))return!0}throw new Yu}return!!(await vv(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:m,chainId:y}){const v=await this.getProvider();if(!v)throw new Yu;const S=p.chains.find(A=>A.id===y);if(!S)throw new Bc(new By);const _=new Promise(A=>{const N=R=>{"chainId"in R&&R.chainId===y&&(p.emitter.off("change",N),A())};p.emitter.on("change",N)});try{return await Promise.all([v.request({method:"wallet_switchEthereumChain",params:[{chainId:Qt(y)}]}).then(async()=>{await this.getChainId()===y&&p.emitter.emit("change",{chainId:y})}),_]),S}catch(A){const N=A;if(N.code===4902||N?.data?.originalError?.code===4902)try{const{default:R,...$}=S.blockExplorers??{};let G;m?.blockExplorerUrls?G=m.blockExplorerUrls:R&&(G=[R.url,...Object.values($).map(j=>j.url)]);let F;m?.rpcUrls?.length?F=m.rpcUrls:F=[S.rpcUrls.default?.http[0]??""];const X={blockExplorerUrls:G,chainId:Qt(y),chainName:m?.chainName??S.name,iconUrls:m?.iconUrls,nativeCurrency:m?.nativeCurrency??S.nativeCurrency,rpcUrls:F};return await Promise.all([v.request({method:"wallet_addEthereumChain",params:[X]}).then(async()=>{if(await this.getChainId()===y)p.emitter.emit("change",{chainId:y});else throw new Lr(new Error("User rejected switch after adding network."))}),_]),S}catch(R){throw new Lr(R)}throw N.code===Lr.code?new Lr(N):new Bc(N)}},async onAccountsChanged(m){if(m.length===0)this.onDisconnect();else if(p.emitter.listenerCount("connect")){const y=(await this.getChainId()).toString();this.onConnect({chainId:y}),e&&await p.storage?.removeItem(`${this.id}.disconnected`)}else p.emitter.emit("change",{accounts:m.map(y=>zh(y))})},onChainChanged(m){const y=Number(m);p.emitter.emit("change",{chainId:y})},async onConnect(m){const y=await this.getAccounts();if(y.length===0)return;const v=Number(m.chainId);p.emitter.emit("connect",{accounts:y,chainId:v});const S=await this.getProvider();S&&(c&&(S.removeListener("connect",c),c=void 0),s||(s=this.onAccountsChanged.bind(this),S.on("accountsChanged",s)),o||(o=this.onChainChanged.bind(this),S.on("chainChanged",o)),l||(l=this.onDisconnect.bind(this),S.on("disconnect",l)))},async onDisconnect(m){const y=await this.getProvider();m&&m.code===1013&&y&&(await this.getAccounts()).length||(p.emitter.emit("disconnect"),y&&(o&&(y.removeListener("chainChanged",o),o=void 0),l&&(y.removeListener("disconnect",l),l=void 0),c||(c=this.onConnect.bind(this),y.on("connect",c))))}})}const _U={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t?.coinbaseWalletExtension?t.coinbaseWalletExtension:Q1(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return Q1(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){return t?.phantom?.ethereum?t.phantom?.ethereum:Q1(t,"isPhantom")}}};function Q1(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r?.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function xU(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function TU(){const t=new Set;let e=[];const n=()=>xU(s=>{e.some(({info:o})=>o.uuid===s.info.uuid)||(e=[...e,s],t.forEach(o=>o(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r?.()},findProvider({rdns:s}){return e.find(o=>o.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r?.(),r=n()},subscribe(s,{emitImmediately:o}={}){return t.add(s),o&&s(e,{added:e}),()=>t.delete(s)}}}const AU=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(c,l,p)=>{let m=c;if(l){const y=p?.equalityFn||Object.is;let v=c(r.getState());m=S=>{const _=c(S);if(!y(v,_)){const A=v;l(v=_,A)}},p?.fireImmediately&&l(v,v)}return s(m)},t(e,n,r)},IU=AU;function NU(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var o;const c=p=>p===null?null:JSON.parse(p,void 0),l=(o=n.getItem(s))!=null?o:null;return l instanceof Promise?l.then(c):c(l)},setItem:(s,o)=>n.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>n.removeItem(s)}}const PS=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return PS(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return PS(r)(n)}}}},RU=(t,e)=>(n,r,s)=>{let o={storage:NU(()=>localStorage),partialize:N=>N,version:0,merge:(N,R)=>({...R,...N}),...e},c=!1;const l=new Set,p=new Set;let m=o.storage;if(!m)return t((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...N)},r,s);const y=()=>{const N=o.partialize({...r()});return m.setItem(o.name,{state:N,version:o.version})},v=s.setState;s.setState=(N,R)=>{v(N,R),y()};const S=t((...N)=>{n(...N),y()},r,s);s.getInitialState=()=>S;let _;const A=()=>{var N,R;if(!m)return;c=!1,l.forEach(G=>{var F;return G((F=r())!=null?F:S)});const $=((R=o.onRehydrateStorage)==null?void 0:R.call(o,(N=r())!=null?N:S))||void 0;return PS(m.getItem.bind(m))(o.name).then(G=>{if(G)if(typeof G.version=="number"&&G.version!==o.version){if(o.migrate)return[!0,o.migrate(G.state,G.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,G.state];return[!1,void 0]}).then(G=>{var F;const[X,j]=G;if(_=o.merge(j,(F=r())!=null?F:S),n(_,!0),X)return y()}).then(()=>{$?.(_,void 0),_=r(),c=!0,p.forEach(G=>G(_))}).catch(G=>{$?.(void 0,G)})};return s.persist={setOptions:N=>{o={...o,...N},N.storage&&(m=N.storage)},clearStorage:()=>{m?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>A(),hasHydrated:()=>c,onHydrate:N=>(l.add(N),()=>{l.delete(N)}),onFinishHydration:N=>(p.add(N),()=>{p.delete(N)})},o.skipHydration||A(),_||S},OU=RU,O3=t=>{let e;const n=new Set,r=(m,y)=>{const v=typeof m=="function"?m(e):m;if(!Object.is(v,e)){const S=e;e=y??(typeof v!="object"||v===null)?v:Object.assign({},e,v),n.forEach(_=>_(e,S))}},s=()=>e,l={setState:r,getState:s,getInitialState:()=>p,subscribe:m=>(n.add(m),()=>n.delete(m))},p=e=t(r,s,l);return l},KE=t=>t?O3(t):O3;var YE={exports:{}},P3;function PU(){return P3||(P3=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(p,m,y){this.fn=p,this.context=m,this.once=y||!1}function o(p,m,y,v,S){if(typeof y!="function")throw new TypeError("The listener must be a function");var _=new s(y,v||p,S),A=n?n+m:m;return p._events[A]?p._events[A].fn?p._events[A]=[p._events[A],_]:p._events[A].push(_):(p._events[A]=_,p._eventsCount++),p}function c(p,m){--p._eventsCount===0?p._events=new r:delete p._events[m]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var m=[],y,v;if(this._eventsCount===0)return m;for(v in y=this._events)e.call(y,v)&&m.push(n?v.slice(1):v);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(y)):m},l.prototype.listeners=function(m){var y=n?n+m:m,v=this._events[y];if(!v)return[];if(v.fn)return[v.fn];for(var S=0,_=v.length,A=new Array(_);S<_;S++)A[S]=v[S].fn;return A},l.prototype.listenerCount=function(m){var y=n?n+m:m,v=this._events[y];return v?v.fn?1:v.length:0},l.prototype.emit=function(m,y,v,S,_,A){var N=n?n+m:m;if(!this._events[N])return!1;var R=this._events[N],$=arguments.length,G,F;if(R.fn){switch(R.once&&this.removeListener(m,R.fn,void 0,!0),$){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,y),!0;case 3:return R.fn.call(R.context,y,v),!0;case 4:return R.fn.call(R.context,y,v,S),!0;case 5:return R.fn.call(R.context,y,v,S,_),!0;case 6:return R.fn.call(R.context,y,v,S,_,A),!0}for(F=1,G=new Array($-1);F<$;F++)G[F-1]=arguments[F];R.fn.apply(R.context,G)}else{var X=R.length,j;for(F=0;F<X;F++)switch(R[F].once&&this.removeListener(m,R[F].fn,void 0,!0),$){case 1:R[F].fn.call(R[F].context);break;case 2:R[F].fn.call(R[F].context,y);break;case 3:R[F].fn.call(R[F].context,y,v);break;case 4:R[F].fn.call(R[F].context,y,v,S);break;default:if(!G)for(j=1,G=new Array($-1);j<$;j++)G[j-1]=arguments[j];R[F].fn.apply(R[F].context,G)}}return!0},l.prototype.on=function(m,y,v){return o(this,m,y,v,!1)},l.prototype.once=function(m,y,v){return o(this,m,y,v,!0)},l.prototype.removeListener=function(m,y,v,S){var _=n?n+m:m;if(!this._events[_])return this;if(!y)return c(this,_),this;var A=this._events[_];if(A.fn)A.fn===y&&(!S||A.once)&&(!v||A.context===v)&&c(this,_);else{for(var N=0,R=[],$=A.length;N<$;N++)(A[N].fn!==y||S&&!A[N].once||v&&A[N].context!==v)&&R.push(A[N]);R.length?this._events[_]=R.length===1?R[0]:R:c(this,_)}return this},l.prototype.removeAllListeners=function(m){var y;return m?(y=n?n+m:m,this._events[y]&&c(this,y)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}(YE)),YE.exports}var kU=PU();const LU=Rm(kU);class DU{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new LU})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function MU(t){return new DU(t)}function UU(t,e){return JSON.parse(t,(n,r)=>{let s=r;return s?.__type==="bigint"&&(s=BigInt(s.value)),s?.__type==="Map"&&(s=new Map(s.value)),e?.(n,s)??s})}function k3(t,e){return t.slice(0,e).join(".")||"."}function L3(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function $U(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],o=[];return function(l,p){if(typeof p=="object")if(s.length){const m=L3(s,this);m===0?s[s.length]=this:(s.splice(m),o.splice(m)),o[o.length]=l;const y=L3(s,p);if(y!==0)return r?e.call(this,l,p,k3(o,y)):`[ref=${k3(o,y)}]`}else s[0]=p,o[0]=l;return n?t.call(this,l,p):p}}function jU(t,e,n,r){return JSON.stringify(t,$U((s,o)=>{let c=o;return typeof c=="bigint"&&(c={__type:"bigint",value:o.toString()}),c instanceof Map&&(c={__type:"Map",value:Array.from(o.entries())}),e?.(s,c)??c},r),n??void 0)}function BU(t){const{deserialize:e=UU,key:n="wagmi",serialize:r=jU,storage:s=IR}=t;function o(c){return c instanceof Promise?c.then(l=>l).catch(()=>null):c}return{...s,key:n,async getItem(c,l){const p=s.getItem(`${n}.${c}`),m=await o(p);return m?e(m)??null:l??null},async setItem(c,l){const p=`${n}.${c}`;l===null?await o(s.removeItem(p)):await o(s.setItem(p,r(l)))},async removeItem(c){await o(s.removeItem(`${n}.${c}`))}}}const IR={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function FU(){const t=typeof window<"u"&&window.localStorage?window.localStorage:IR;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const kS=256;let S1=kS,_1;function ZU(t=11){if(!_1||S1+t>kS*2){_1="",S1=0;for(let e=0;e<kS;e++)_1+=(256+Math.random()*256|0).toString(16).substring(1)}return _1.substring(S1,S1+++t)}function zU(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=BU({storage:FU()}),syncConnectedChain:r=!0,ssr:s=!1,...o}=t,c=typeof window<"u"&&e?TU():void 0,l=KE(()=>o.chains),p=KE(()=>{const j=[],L=new Set;for(const Z of o.connectors??[]){const U=m(Z);if(j.push(U),!s&&U.rdns){const D=typeof U.rdns=="string"?[U.rdns]:U.rdns;for(const B of D)L.add(B)}}if(!s&&c){const Z=c.getProviders();for(const U of Z)L.has(U.info.rdns)||j.push(m(y(U)))}return j});function m(j){const L=MU(ZU()),Z={...j({emitter:L,chains:l.getState(),storage:n,transports:o.transports}),emitter:L,uid:L.uid};return L.on("connect",F),Z.setup?.(),Z}function y(j){const{info:L}=j,Z=j.provider;return u2({target:{...L,id:L.rdns,provider:Z}})}const v=new Map;function S(j={}){const L=j.chainId??R.getState().chainId,Z=l.getState().find(D=>D.id===L);if(j.chainId&&!Z)throw new By;{const D=v.get(R.getState().chainId);if(D&&!Z)return D;if(!Z)throw new By}{const D=v.get(L);if(D)return D}let U;if(o.client)U=o.client({chain:Z});else{const D=Z.id,B=l.getState().map(he=>he.id),W={},K=Object.entries(o);for(const[he,pe]of K)if(!(he==="chains"||he==="client"||he==="connectors"||he==="transports"))if(typeof pe=="object")if(D in pe)W[he]=pe[D];else{if(B.some(P=>P in pe))continue;W[he]=pe}else W[he]=pe;U=_R({...W,chain:Z,batch:W.batch??{multicall:!0},transport:he=>o.transports[D]({...he,connectors:p})})}return v.set(L,U),U}function _(){return{chainId:l.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let A;const N="0.0.0-canary-";q1.startsWith(N)?A=Number.parseInt(q1.replace(N,"")):A=Number.parseInt(q1.split(".")[0]??"0");const R=KE(IU(n?OU(_,{migrate(j,L){if(L===A)return j;const Z=_(),U=$(j,Z.chainId);return{...Z,chainId:U}},name:"store",partialize(j){return{connections:{__type:"Map",value:Array.from(j.connections.entries()).map(([L,Z])=>{const{id:U,name:D,type:B,uid:W}=Z.connector;return[L,{...Z,connector:{id:U,name:D,type:B,uid:W}}]})},chainId:j.chainId,current:j.current}},merge(j,L){typeof j=="object"&&j&&"status"in j&&delete j.status;const Z=$(j,L.chainId);return{...L,...j,chainId:Z}},skipHydration:s,storage:n,version:A}):_));R.setState(_());function $(j,L){return j&&typeof j=="object"&&"chainId"in j&&typeof j.chainId=="number"&&l.getState().some(Z=>Z.id===j.chainId)?j.chainId:L}r&&R.subscribe(({connections:j,current:L})=>L?j.get(L)?.chainId:void 0,j=>{if(l.getState().some(Z=>Z.id===j))return R.setState(Z=>({...Z,chainId:j??Z.chainId}))}),c?.subscribe(j=>{const L=new Set,Z=new Set;for(const D of p.getState())if(L.add(D.id),D.rdns){const B=typeof D.rdns=="string"?[D.rdns]:D.rdns;for(const W of B)Z.add(W)}const U=[];for(const D of j){if(Z.has(D.info.rdns))continue;const B=m(y(D));L.has(B.id)||U.push(B)}n&&!R.persist.hasHydrated()||p.setState(D=>[...D,...U],!0)});function G(j){R.setState(L=>{const Z=L.connections.get(j.uid);return Z?{...L,connections:new Map(L.connections).set(j.uid,{accounts:j.accounts??Z.accounts,chainId:j.chainId??Z.chainId,connector:Z.connector})}:L})}function F(j){R.getState().status==="connecting"||R.getState().status==="reconnecting"||R.setState(L=>{const Z=p.getState().find(U=>U.uid===j.uid);return Z?(Z.emitter.listenerCount("connect")&&Z.emitter.off("connect",G),Z.emitter.listenerCount("change")||Z.emitter.on("change",G),Z.emitter.listenerCount("disconnect")||Z.emitter.on("disconnect",X),{...L,connections:new Map(L.connections).set(j.uid,{accounts:j.accounts,chainId:j.chainId,connector:Z}),current:j.uid,status:"connected"}):L})}function X(j){R.setState(L=>{const Z=L.connections.get(j.uid);if(Z){const D=Z.connector;D.emitter.listenerCount("change")&&Z.connector.emitter.off("change",G),D.emitter.listenerCount("disconnect")&&Z.connector.emitter.off("disconnect",X),D.emitter.listenerCount("connect")||Z.connector.emitter.on("connect",F)}if(L.connections.delete(j.uid),L.connections.size===0)return{...L,connections:new Map,current:null,status:"disconnected"};const U=L.connections.values().next().value;return{...L,connections:new Map(L.connections),current:U.connector.uid}})}return{get chains(){return l.getState()},get connectors(){return p.getState()},storage:n,getClient:S,get state(){return R.getState()},setState(j){let L;typeof j=="function"?L=j(R.getState()):L=j;const Z=_();typeof L!="object"&&(L=Z),Object.keys(Z).some(D=>!(D in L))&&(L=Z),R.setState(L,!0)},subscribe(j,L,Z){return R.subscribe(j,L,Z?{...Z,fireImmediately:Z.emitImmediately}:void 0)},_internal:{mipd:c,store:R,ssr:!!s,syncConnectedChain:r,transports:o.transports,chains:{setState(j){const L=typeof j=="function"?j(l.getState()):j;if(L.length!==0)return l.setState(L,!0)},subscribe(j){return l.subscribe(j)}},connectors:{providerDetailToConnector:y,setup:m,setState(j){return p.setState(typeof j=="function"?j(p.getState()):j,!0)},subscribe(j){return p.subscribe(j)}},events:{change:G,connect:F,disconnect:X}}}}function GU(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{const o=new Set;for(const p of s??[])if(p.rdns){const m=Array.isArray(p.rdns)?p.rdns:[p.rdns];for(const y of m)o.add(y)}const c=[],l=t._internal.mipd?.getProviders()??[];for(const p of l){if(o.has(p.info.rdns))continue;const m=t._internal.connectors.providerDetailToConnector(p),y=t._internal.connectors.setup(m);c.push(y)}return[...s,...c]})),r?OS(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function HU(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:o}=GU(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||o();const c=st.useRef(!0);return st.useEffect(()=>{if(c.current&&n._internal.ssr)return o(),()=>{c.current=!1}},[]),e}const NR=st.createContext(void 0);function XU(t){const{children:e,config:n}=t,r={value:n};return st.createElement(HU,t,st.createElement(NR.Provider,r,e))}const WU="2.16.0",VU=()=>`wagmi@${WU}`;let KU=class extends Gl{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return VU()}};class YU extends KU{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function RR(t={}){const e=t.config??st.useContext(NR);if(!e)throw new YU;return e}var qE={exports:{}},QE={},JE={exports:{}},eC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D3;function qU(){if(D3)return eC;D3=1;var t=pb();function e(v,S){return v===S&&(v!==0||1/v===1/S)||v!==v&&S!==S}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,o=t.useLayoutEffect,c=t.useDebugValue;function l(v,S){var _=S(),A=r({inst:{value:_,getSnapshot:S}}),N=A[0].inst,R=A[1];return o(function(){N.value=_,N.getSnapshot=S,p(N)&&R({inst:N})},[v,_,S]),s(function(){return p(N)&&R({inst:N}),v(function(){p(N)&&R({inst:N})})},[v]),c(_),_}function p(v){var S=v.getSnapshot;v=v.value;try{var _=S();return!n(v,_)}catch{return!0}}function m(v,S){return S()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:l;return eC.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,eC}var M3;function QU(){return M3||(M3=1,JE.exports=qU()),JE.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U3;function JU(){if(U3)return QE;U3=1;var t=pb(),e=QU();function n(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,o=t.useRef,c=t.useEffect,l=t.useMemo,p=t.useDebugValue;return QE.useSyncExternalStoreWithSelector=function(m,y,v,S,_){var A=o(null);if(A.current===null){var N={hasValue:!1,value:null};A.current=N}else N=A.current;A=l(function(){function $(L){if(!G){if(G=!0,F=L,L=S(L),_!==void 0&&N.hasValue){var Z=N.value;if(_(Z,L))return X=Z}return X=L}if(Z=X,r(F,L))return Z;var U=S(L);return _!==void 0&&_(Z,U)?(F=L,Z):(F=L,X=U)}var G=!1,F,X,j=v===void 0?null:v;return[function(){return $(y())},j===null?void 0:function(){return $(j())}]},[y,v,S,_]);var R=s(m,A[0],A[1]);return c(function(){N.hasValue=!0,N.value=R},[R]),p(R),R},QE}var $3;function e$(){return $3||($3=1,qE.exports=JU()),qE.exports}var t$=e$();const tC=t=>typeof t=="object"&&!Array.isArray(t);function n$(t,e,n=e,r=Em){const s=st.useRef([]),o=t$.useSyncExternalStoreWithSelector(t,e,n,c=>c,(c,l)=>{if(tC(c)&&tC(l)&&s.current.length){for(const p of s.current)if(!r(c[p],l[p]))return!1;return!0}return r(c,l)});return st.useMemo(()=>{if(tC(o)){const c={...o};let l={};for(const[p,m]of Object.entries(c))l={...l,[p]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(p)||s.current.push(p),m)}};return Object.defineProperties(c,l),c}return o},[o])}function m5(t={}){const e=RR(t);return n$(n=>AR(e,{onChange:n}),()=>um(e))}var yb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},d2=typeof window>"u"||"Deno"in globalThis;function Oo(){}function r$(t,e){return typeof t=="function"?t(e):t}function s$(t){return typeof t=="number"&&t>=0&&t!==1/0}function i$(t,e){return Math.max(t+(e||0)-Date.now(),0)}function LS(t,e){return typeof t=="function"?t(e):t}function o$(t,e){return typeof t=="function"?t(e):t}function j3(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:o,queryKey:c,stale:l}=t;if(c){if(r){if(e.queryHash!==g5(c,e.options))return!1}else if(!Fy(e.queryKey,c))return!1}if(n!=="all"){const p=e.isActive();if(n==="active"&&!p||n==="inactive"&&p)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||o&&!o(e))}function B3(t,e){const{exact:n,status:r,predicate:s,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(of(e.options.mutationKey)!==of(o))return!1}else if(!Fy(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function g5(t,e){return(e?.queryKeyHashFn||of)(t)}function of(t){return JSON.stringify(t,(e,n)=>DS(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Fy(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Fy(t[n],e[n])):!1}function OR(t,e){if(t===e)return t;const n=F3(t)&&F3(e);if(n||DS(t)&&DS(e)){const r=n?t:Object.keys(t),s=r.length,o=n?e:Object.keys(e),c=o.length,l=n?[]:{},p=new Set(r);let m=0;for(let y=0;y<c;y++){const v=n?y:o[y];(!n&&p.has(v)||n)&&t[v]===void 0&&e[v]===void 0?(l[v]=void 0,m++):(l[v]=OR(t[v],e[v]),l[v]===t[v]&&t[v]!==void 0&&m++)}return s===c&&m===s?t:l}return e}function a$(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function F3(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function DS(t){if(!Z3(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Z3(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Z3(t){return Object.prototype.toString.call(t)==="[object Object]"}function c$(t){return new Promise(e=>{setTimeout(e,t)})}function l$(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?OR(t,e):e}function u$(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function d$(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var y5=Symbol();function PR(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===y5?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function h$(t,e){return typeof t=="function"?t(...e):!!t}var f$=class extends yb{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!d2&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},kR=new f$,p$=class extends yb{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!d2&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},Sv=new p$;function m$(){let t,e;const n=new Promise((s,o)=>{t=s,e=o});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function g$(t){return Math.min(1e3*2**t,3e4)}function LR(t){return(t??"online")==="online"?Sv.isOnline():!0}var DR=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function nC(t){return t instanceof DR}function MR(t){let e=!1,n=0,r=!1,s;const o=m$(),c=N=>{r||(S(new DR(N)),t.abort?.())},l=()=>{e=!0},p=()=>{e=!1},m=()=>kR.isFocused()&&(t.networkMode==="always"||Sv.isOnline())&&t.canRun(),y=()=>LR(t.networkMode)&&t.canRun(),v=N=>{r||(r=!0,t.onSuccess?.(N),s?.(),o.resolve(N))},S=N=>{r||(r=!0,t.onError?.(N),s?.(),o.reject(N))},_=()=>new Promise(N=>{s=R=>{(r||m())&&N(R)},t.onPause?.()}).then(()=>{s=void 0,r||t.onContinue?.()}),A=()=>{if(r)return;let N;const R=n===0?t.initialPromise:void 0;try{N=R??t.fn()}catch($){N=Promise.reject($)}Promise.resolve(N).then(v).catch($=>{if(r)return;const G=t.retry??(d2?0:3),F=t.retryDelay??g$,X=typeof F=="function"?F(n,$):F,j=G===!0||typeof G=="number"&&n<G||typeof G=="function"&&G(n,$);if(e||!j){S($);return}n++,t.onFail?.(n,$),c$(X).then(()=>m()?void 0:_()).then(()=>{e?S($):A()})})};return{promise:o,cancel:c,continue:()=>(s?.(),o),cancelRetry:l,continueRetry:p,canStart:y,start:()=>(y()?A():_().then(A),o)}}var y$=t=>setTimeout(t,0);function b$(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=y$;const o=l=>{e?t.push(l):s(()=>{n(l)})},c=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(p=>{n(p)})})})};return{batch:l=>{let p;e++;try{p=l()}finally{e--,e||c()}return p},batchCalls:l=>(...p)=>{o(()=>{l(...p)})},schedule:o,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var bs=b$(),UR=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),s$(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(d2?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},w$=class extends UR{#e;#t;#n;#r;#s;#o;#a;constructor(t){super(),this.#a=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=E$(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=l$(this.state.data,t,this.options);return this.#i({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#i({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#s?.promise;return this.#s?.cancel(t),e?e.then(Oo).catch(Oo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>o$(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===y5||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>LS(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!i$(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#s&&(this.#a?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const p=this.observers.find(m=>m.options.queryFn);p&&this.setOptions(p.options)}const n=new AbortController,r=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},s=()=>{const p=PR(this.options,e),y=(()=>{const v={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(v),v})();return this.#a=!1,this.options.persister?this.options.persister(p,y,this):p(y)},c=(()=>{const p={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:s};return r(p),p})();this.options.behavior?.onFetch(c,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==c.fetchOptions?.meta)&&this.#i({type:"fetch",meta:c.fetchOptions?.meta});const l=p=>{nC(p)&&p.silent||this.#i({type:"error",error:p}),nC(p)||(this.#n.config.onError?.(p,this),this.#n.config.onSettled?.(this.state.data,p,this)),this.scheduleGc()};return this.#s=MR({initialPromise:e?.initialPromise,fn:c.fetchFn,abort:n.abort.bind(n),onSuccess:p=>{if(p===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(m){l(m);return}this.#n.config.onSuccess?.(p,this),this.#n.config.onSettled?.(p,this.state.error,this),this.scheduleGc()},onError:l,onFail:(p,m)=>{this.#i({type:"failed",failureCount:p,error:m})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}),this.#s.start()}#i(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...v$(n.data,this.options),fetchMeta:t.meta??null};case"success":return this.#t=void 0,{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=t.error;return nC(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),bs.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function v$(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:LR(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function E$(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var C$=class extends yb{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,s=e.queryHash??g5(r,e);let o=this.get(s);return o||(o=new w$({client:t,queryKey:r,queryHash:s,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(o)),o}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){bs.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>j3(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>j3(t,n)):e}notify(t){bs.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){bs.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){bs.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},S$=class extends UR{#e;#t;#n;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||$R(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#r({type:"continue"})};this.#n=MR({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(s,o)=>{this.#r({type:"failed",failureCount:s,error:o})},onPause:()=>{this.#r({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const n=this.state.status==="pending",r=!this.#n.canStart();try{if(n)e();else{this.#r({type:"pending",variables:t,isPaused:r}),await this.#t.config.onMutate?.(t,this);const o=await this.options.onMutate?.(t);o!==this.state.context&&this.#r({type:"pending",context:o,variables:t,isPaused:r})}const s=await this.#n.start();return await this.#t.config.onSuccess?.(s,t,this.state.context,this),await this.options.onSuccess?.(s,t,this.state.context),await this.#t.config.onSettled?.(s,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(s,null,t,this.state.context),this.#r({type:"success",data:s}),s}catch(s){try{throw await this.#t.config.onError?.(s,t,this.state.context,this),await this.options.onError?.(s,t,this.state.context),await this.#t.config.onSettled?.(void 0,s,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,s,t,this.state.context),s}finally{this.#r({type:"error",error:s})}}finally{this.#t.runNext(this)}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),bs.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function $R(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _$=class extends yb{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new S$({mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=x1(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=x1(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=x1(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(s=>s.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=x1(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){bs.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>B3(e,n))}findAll(t={}){return this.getAll().filter(e=>B3(t,e))}notify(t){bs.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return bs.batch(()=>Promise.all(t.map(e=>e.continue().catch(Oo))))}};function x1(t){return t.options.scope?.id}function z3(t){return{onFetch:(e,n)=>{const r=e.options,s=e.fetchOptions?.meta?.fetchMore?.direction,o=e.state.data?.pages||[],c=e.state.data?.pageParams||[];let l={pages:[],pageParams:[]},p=0;const m=async()=>{let y=!1;const v=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},S=PR(e.options,e.fetchOptions),_=async(A,N,R)=>{if(y)return Promise.reject();if(N==null&&A.pages.length)return Promise.resolve(A);const G=(()=>{const L={client:e.client,queryKey:e.queryKey,pageParam:N,direction:R?"backward":"forward",meta:e.options.meta};return v(L),L})(),F=await S(G),{maxPages:X}=e.options,j=R?d$:u$;return{pages:j(A.pages,F,X),pageParams:j(A.pageParams,N,X)}};if(s&&o.length){const A=s==="backward",N=A?x$:G3,R={pages:o,pageParams:c},$=N(r,R);l=await _(R,$,A)}else{const A=t??o.length;do{const N=p===0?c[0]??r.initialPageParam:G3(r,l);if(p>0&&N==null)break;l=await _(l,N),p++}while(p<A)}return l};e.options.persister?e.fetchFn=()=>e.options.persister?.(m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=m}}}function G3(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function x$(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var T$=class{#e;#t;#n;#r;#s;#o;#a;#i;constructor(t={}){this.#e=t.queryCache||new C$,this.#t=t.mutationCache||new _$,this.#n=t.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=kR.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=Sv.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#i?.(),this.#i=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(LS(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),o=this.#e.get(r.queryHash)?.state.data,c=r$(e,o);if(c!==void 0)return this.#e.build(this,r).setData(c,{...n,manual:!0})}setQueriesData(t,e,n){return bs.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;bs.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return bs.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=bs.batch(()=>this.#e.findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Oo).catch(Oo)}invalidateQueries(t,e={}){return bs.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=bs.batch(()=>this.#e.findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(Oo)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Oo)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(LS(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Oo).catch(Oo)}fetchInfiniteQuery(t){return t.behavior=z3(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Oo).catch(Oo)}ensureInfiniteQueryData(t){return t.behavior=z3(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Sv.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(of(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{Fy(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#s.set(of(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(r=>{Fy(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=g5(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===y5&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},A$=class extends yb{#e;#t=void 0;#n;#r;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),a$(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&of(n.mutationKey)!==of(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#s(),this.#o(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#s(),this.#o()}mutate(e,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#s(){const e=this.#n?.state??$R();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#o(e){bs.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,n,r),this.#r.onSettled?.(e.data,null,n,r)):e?.type==="error"&&(this.#r.onError?.(e.error,n,r),this.#r.onSettled?.(void 0,e.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}};function I$(t){return{mutationFn(e){return TR(t,e)},mutationKey:["sendTransaction"]}}var jR=st.createContext(void 0),N$=t=>{const e=st.useContext(jR);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},R$=({client:t,children:e})=>(st.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),Se.jsx(jR.Provider,{value:t,children:e}));function O$(t,e){const n=N$(),[r]=st.useState(()=>new A$(n,t));st.useEffect(()=>{r.setOptions(t)},[r,t]);const s=st.useSyncExternalStore(st.useCallback(c=>r.subscribe(bs.batchCalls(c)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=st.useCallback((c,l)=>{r.mutate(c,l).catch(Oo)},[r]);if(s.error&&h$(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:o,mutateAsync:s.mutate}}function P$(t={}){const{mutation:e}=t,n=RR(t),r=I$(n),{mutate:s,mutateAsync:o,...c}=O$({...e,...r});return{...c,sendTransaction:s,sendTransactionAsync:o}}function BR(){const{address:t,isConnected:e}=m5(),[n,r]=st.useState(!1),[s,o]=st.useState(null),c="0x5EE15251C47e60769F2E63605d4323ba54c07983",l=t?`paid-fee-${t}-${new Date().toISOString().slice(0,10)}`:null;st.useEffect(()=>{l&&localStorage.getItem(l)==="true"&&r(!0)},[l]);const{sendTransactionAsync:p,isLoading:m,error:y}=P$();return st.useEffect(()=>{s&&l&&(localStorage.setItem(l,"true"),r(!0))},[s,l]),{pay:st.useCallback(async()=>{if(n)return!0;if(!e)throw new Error("Wallet not connected");try{const S=await p({to:c,value:WM("0.001")});return o(S),!0}catch(S){throw console.error("sendTransaction failed",S),S}},[n,e,c]),alreadyPaid:n,isPaying:m,txHash:s,error:y}}function k$(){const[t,e]=cm("lobby-state",{name:"",maxPlayers:2,isActive:!1,createdAt:null}),n=X_(),r=b8(),s=XN(),{pay:o,alreadyPaid:c}=BR(),[l,p]=st.useState({lobbyName:"",maxPlayers:2}),[m,y]=st.useState(!1),v=async()=>{if(!l.lobbyName.trim()){alert("Please enter a lobby name");return}try{c||await o()}catch(R){console.error("Payment failed or rejected:",R),alert("Payment failed or rejected. Lobby not created.");return}const N={name:l.lobbyName.trim(),maxPlayers:parseInt(l.maxPlayers),isActive:!0,createdAt:new Date().toISOString()};e(N),y(!0)},S=async()=>{try{await r(),y(!0)}catch(N){console.error("Failed to create new session:",N),alert("Failed to create new session. Please try again.")}},_=()=>{if(s){const N=s.replace(/https?:\/\/[0-9.]+:5173/,"https://monad-devil-level.duckdns.org");navigator.clipboard.writeText(N),alert("Join URL copied to clipboard!")}},A=s?s.replace(/https?:\/\/[0-9.]+:5173/,"https://monad-devil-level.duckdns.org"):"";return t.isActive?Se.jsx("div",{className:"lobby-creator",children:Se.jsxs("div",{className:"lobby-success",children:[Se.jsx("h2",{children:"🎉 Lobby Created Successfully!"}),Se.jsxs("div",{className:"lobby-details",children:[Se.jsxs("h3",{children:["🎮 ",t.name]}),Se.jsxs("p",{children:["Max Players: ",t.maxPlayers]}),Se.jsxs("p",{children:["Connected Users: ",n.length]})]}),m&&s&&Se.jsxs("div",{className:"join-url-section",children:[Se.jsx("h4",{children:"Share this URL to invite friends:"}),Se.jsxs("div",{className:"join-url-container",children:[Se.jsx("input",{type:"text",value:A,readOnly:!0,className:"join-url"}),Se.jsx("button",{onClick:_,className:"copy-btn",children:"📋 Copy"})]}),Se.jsx("p",{className:"sync-info",children:"🚀 Real-time synchronized via React Together"})]}),Se.jsx("div",{className:"lobby-actions",children:Se.jsx("button",{onClick:S,className:"new-session-btn",children:"🔄 Create New Session"})})]})}):Se.jsxs("div",{className:"lobby-creator",children:[Se.jsx("h2",{children:"Create a New Lobby"}),Se.jsx("p",{children:"Set up a collaborative gaming session for 2-10 players"}),Se.jsxs("div",{className:"form-section",children:[Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"lobbyName",children:"Lobby Name"}),Se.jsx("input",{id:"lobbyName",type:"text",value:l.lobbyName,onChange:N=>p(R=>({...R,lobbyName:N.target.value})),placeholder:"Enter lobby name...",maxLength:50})]}),Se.jsxs("div",{className:"form-group",children:[Se.jsx("label",{htmlFor:"maxPlayers",children:"Max Players"}),Se.jsx("select",{id:"maxPlayers",value:l.maxPlayers,onChange:N=>p(R=>({...R,maxPlayers:parseInt(N.target.value)})),children:Array.from({length:9},(N,R)=>R+2).map(N=>Se.jsxs("option",{value:N,children:[N," players"]},N))})]}),Se.jsxs("div",{className:"preview-section",children:[Se.jsx("h3",{children:"Preview"}),Se.jsxs("div",{className:"lobby-preview",children:[Se.jsxs("div",{className:"preview-header",children:[Se.jsx("span",{className:"preview-emoji",children:"🎮"}),Se.jsx("span",{className:"preview-name",children:l.lobbyName||"Your Lobby Name"})]}),Se.jsx("div",{className:"preview-details",children:Se.jsxs("span",{children:["👥 ",l.maxPlayers," max players"]})})]})]}),Se.jsx("button",{onClick:v,className:"create-btn",disabled:!l.lobbyName.trim(),children:"🚀 Create Lobby with React Together"})]}),Se.jsxs("div",{className:"connection-info",children:[Se.jsxs("p",{children:["🔗 Connected Users: ",n.length]}),Se.jsx("p",{children:"🚀 Powered by React Together & Multisynq"})]})]})}const L$=()=>{const[t,e]=cm("game-timer",{startTime:null,timeLeft:600,isActive:!1,gameEnded:!1}),[n,r]=st.useState({level:1,score:0,lives:1,deaths:0}),[s,o]=st.useState(!1),[c,l]=st.useState(!1),p=st.useRef(null),m=st.useRef(null),y=st.useRef({...n,running:!1}),v=st.useRef({x:50,y:400,width:25,height:25,velX:0,velY:0,speed:4,jumpPower:12,onGround:!1,jumpsMade:0,maxJumps:1,color:"#FFFFFF"}),S=st.useRef({}),_=st.useRef(!0),A=st.useRef([]),N=st.useRef([]),R=st.useRef([]),$=st.useRef([]),G=st.useRef([]),F=st.useRef([]),X=st.useRef({}),j=st.useCallback((K,he)=>K.x<he.x+he.width&&K.x+K.width>he.x&&K.y<he.y+he.height&&K.y+K.height>he.y,[]),L=st.useCallback(K=>{if(A.current=[],N.current=[],R.current=[],$.current=[],G.current=[],F.current=[],v.current.maxJumps=K,v.current.jumpsMade=0,A.current.push({x:0,y:450,width:200,height:50,color:"#444"}),A.current.push({x:800,y:450,width:100,height:50,color:"#444"}),X.current={x:850,y:410,width:30,height:40,color:"#FF0000"},K===1)A.current.push({x:250,y:400,width:40,height:15,color:"#666"},{x:350,y:350,width:35,height:15,color:"#666"},{x:450,y:300,width:30,height:15,color:"#666"},{x:550,y:250,width:35,height:15,color:"#666"},{x:650,y:300,width:40,height:15,color:"#666"},{x:750,y:350,width:35,height:15,color:"#666"}),N.current.push({x:200,y:435,width:50,height:15},{x:290,y:435,width:60,height:15},{x:385,y:435,width:65,height:15},{x:480,y:435,width:70,height:15},{x:585,y:435,width:65,height:15},{x:690,y:435,width:60,height:15}),$.current.push({x:270,y:360,width:15,height:15,velX:2,color:"#FF4444",range:80,startX:270},{x:470,y:260,width:15,height:15,velX:-1.5,color:"#FF4444",range:60,startX:470},{x:670,y:260,width:15,height:15,velX:2.5,color:"#FF4444",range:100,startX:670});else if(K===2){A.current.push({x:220,y:420,width:25,height:10,color:"#666"},{x:300,y:380,width:20,height:10,color:"#666"},{x:380,y:340,width:25,height:10,color:"#666"},{x:460,y:280,width:20,height:10,color:"#666"},{x:540,y:240,width:25,height:10,color:"#666"},{x:620,y:200,width:20,height:10,color:"#666"},{x:700,y:280,width:25,height:10,color:"#666"},{x:780,y:350,width:20,height:10,color:"#666"});for(let he=200;he<800;he+=30)Math.random()>.3&&N.current.push({x:he,y:435,width:25,height:15});R.current.push({x:340,y:300,width:40,height:10,velY:2,color:"#888",range:100,startY:300},{x:500,y:150,width:30,height:10,velX:3,color:"#888",range:120,startX:500}),$.current.push({x:240,y:380,width:12,height:12,velX:3,color:"#FF0000",range:60,startX:240},{x:400,y:300,width:12,height:12,velX:-4,color:"#FF0000",range:80,startX:400},{x:560,y:200,width:12,height:12,velX:3.5,color:"#FF0000",range:100,startX:560},{x:720,y:240,width:12,height:12,velX:-3,color:"#FF0000",range:70,startX:720}),G.current.push({x:270,y:435,width:110,height:15},{x:420,y:435,width:90,height:15},{x:580,y:435,width:100,height:15})}else if(K===3){A.current.push({x:210,y:430,width:15,height:8,color:"#666"},{x:270,y:400,width:12,height:8,color:"#666"},{x:330,y:370,width:15,height:8,color:"#666"},{x:390,y:320,width:12,height:8,color:"#666"},{x:450,y:280,width:15,height:8,color:"#666"},{x:510,y:240,width:12,height:8,color:"#666"},{x:570,y:200,width:15,height:8,color:"#666"},{x:630,y:160,width:12,height:8,color:"#666"},{x:690,y:200,width:15,height:8,color:"#666"},{x:750,y:280,width:12,height:8,color:"#666"},{x:790,y:380,width:15,height:8,color:"#666"});for(let he=200;he<850;he+=20)N.current.push({x:he,y:435,width:15,height:15});R.current.push({x:240,y:350,width:30,height:8,velY:4,color:"#888",range:150,startY:350},{x:420,y:180,width:25,height:8,velX:5,color:"#888",range:180,startX:420},{x:650,y:120,width:30,height:8,velY:-3,color:"#888",range:120,startY:120}),$.current.push({x:230,y:390,width:10,height:10,velX:4,color:"#8B0000",range:50,startX:230},{x:350,y:330,width:10,height:10,velX:-5,color:"#8B0000",range:60,startX:350},{x:470,y:240,width:10,height:10,velX:4.5,color:"#8B0000",range:70,startX:470},{x:590,y:160,width:10,height:10,velX:-4,color:"#8B0000",range:80,startX:590},{x:710,y:160,width:10,height:10,velX:5,color:"#8B0000",range:90,startX:710}),G.current.push({x:225,y:435,width:45,height:15},{x:285,y:435,width:45,height:15},{x:345,y:435,width:45,height:15},{x:405,y:435,width:45,height:15},{x:465,y:435,width:45,height:15},{x:525,y:435,width:45,height:15},{x:585,y:435,width:45,height:15},{x:645,y:435,width:45,height:15},{x:705,y:435,width:45,height:15}),F.current.push({x:300,y:350,width:20,height:20,targetX:50,targetY:400},{x:500,y:200,width:20,height:20,targetX:250,targetY:400})}v.current.x=50,v.current.y=400,v.current.velX=0,v.current.velY=0},[]),Z=()=>{y.current.running=!1,r(K=>({...K,deaths:K.deaths+1})),o(!0)},U=()=>{y.current.running=!0,l(!1),o(!1),L(y.current.level)},D=()=>{const K={running:!0,level:1,score:0,lives:1,deaths:0};y.current=K,r(K),o(!1),l(!1),L(1)},B=()=>{l(K=>!K)},W=st.useCallback(()=>{if(y.current.running&&!c){const K=()=>{const P=v.current,ne=p.current;if(!ne)return;S.current.a||S.current.arrowleft?P.velX=-P.speed:S.current.d||S.current.arrowright?P.velX=P.speed:P.velX*=.7,P.velY+=.6,P.velY>15&&(P.velY=15),P.x+=P.velX,P.y+=P.velY,P.x<0&&(P.x=0),P.x+P.width>ne.width&&(P.x=ne.width-P.width),P.onGround=!1;for(let me of[...A.current,...R.current])j(P,me)&&P.velY>=0&&P.y+P.height-P.velY<=me.y+1&&(P.y=me.y-P.height,P.velY=0,P.onGround=!0,P.jumpsMade=0);let de=N.current.some(me=>j(P,me))||G.current.some(me=>j(P,me))||$.current.some(me=>j(P,me))||P.y>ne.height;for(let me of F.current)j(P,me)&&(P.x=me.targetX,P.y=me.targetY,P.velX=0,P.velY=0);de&&Z()},he=()=>{for(let P of R.current)P.velX&&(P.x+=P.velX,(P.x<=P.startX-P.range||P.x>=P.startX+P.range)&&(P.velX*=-1)),P.velY&&(P.y+=P.velY,(P.y<=P.startY-P.range||P.y>=P.startY+P.range)&&(P.velY*=-1));for(let P of $.current)P.x+=P.velX,(P.x<=P.startX-P.range||P.x>=P.startX+P.range)&&(P.velX*=-1)},pe=()=>{if(j(v.current,X.current)){const P=y.current.level+1,ne=y.current.score+1e3;P>3?(alert(`🎉 CONGRATULATIONS! You have defeated the devil! 🎉
Total Deaths: ${y.current.deaths}`),D()):(y.current={...y.current,level:P,score:ne},r(de=>({...de,level:P,score:ne})),L(P))}},V=()=>{const P=p.current.getContext("2d");P.clearRect(0,0,P.canvas.width,P.canvas.height),P.fillStyle="#000000",P.fillRect(0,0,P.canvas.width,P.canvas.height);for(let H of[...A.current,...R.current])P.fillStyle=H.color,P.fillRect(H.x,H.y,H.width,H.height),P.fillStyle="#999",P.fillRect(H.x,H.y,H.width,2);for(let H of N.current){P.fillStyle="#666",P.beginPath();for(let fe=0;fe<H.width;fe+=5)P.moveTo(H.x+fe,H.y+H.height),P.lineTo(H.x+fe+2.5,H.y),P.lineTo(H.x+fe+5,H.y+H.height);P.fill()}for(let H of G.current){let fe=P.createLinearGradient(0,H.y,0,H.y+H.height);fe.addColorStop(0,"#FF4500"),fe.addColorStop(1,"#FF0000"),P.fillStyle=fe,P.fillRect(H.x,H.y,H.width,H.height)}for(let H of F.current)P.fillStyle="#800080",P.fillRect(H.x,H.y,H.width,H.height),P.fillStyle="#FF00FF",P.fillRect(H.x+2,H.y+2,H.width-4,H.height-4);for(let H of $.current)P.fillStyle=H.color,P.fillRect(H.x,H.y,H.width,H.height),P.fillStyle="#FFFF00",P.fillRect(H.x+2,H.y+2,3,3),P.fillRect(H.x+H.width-5,H.y+2,3,3);const ne=v.current;P.fillStyle=ne.color,P.fillRect(ne.x,ne.y,ne.width,ne.height),P.fillStyle="#FFFFFF",P.fillRect(ne.x+3,ne.y+3,4,4),P.fillRect(ne.x+ne.width-7,ne.y+3,4,4);const de=X.current;let me=P.createRadialGradient(de.x+de.width/2,de.y+de.height/2,0,de.x+de.width/2,de.y+de.height/2,de.width);me.addColorStop(0,"#FF0000"),me.addColorStop(1,"#8B0000"),P.fillStyle=me,P.fillRect(de.x,de.y,de.width,de.height)};K(),he(),pe(),V()}m.current=requestAnimationFrame(W)},[c,L,j]);return st.useEffect(()=>{if(!t.isActive&&!t.startTime){const K=Date.now();e({startTime:K,timeLeft:600,isActive:!0,gameEnded:!1})}},[]),st.useEffect(()=>{let K=null;return t.isActive&&!t.gameEnded&&t.startTime&&(K=setInterval(()=>{const he=Date.now(),pe=Math.floor((he-t.startTime)/1e3),V=Math.max(0,600-pe);V<=0?(e(P=>({...P,timeLeft:0,isActive:!1,gameEnded:!0})),o(!0)):e(P=>({...P,timeLeft:V}))},1e3)),()=>{K&&clearInterval(K)}},[t.isActive,t.startTime,t.gameEnded,e]),st.useEffect(()=>{L(1),m.current=requestAnimationFrame(W);const K=pe=>{const V=pe.key.toLowerCase();S.current[V]=!0,(V==="w"||V==="arrowup"||V===" ")&&_.current&&v.current.jumpsMade<v.current.maxJumps&&(v.current.velY=-v.current.jumpPower,v.current.onGround=!1,v.current.jumpsMade++,_.current=!1),V==="r"&&D(),V===" "&&pe.preventDefault()},he=pe=>{const V=pe.key.toLowerCase();S.current[V]=!1,(V==="w"||V==="arrowup"||V===" ")&&(_.current=!0)};return window.addEventListener("keydown",K),window.addEventListener("keyup",he),()=>{window.removeEventListener("keydown",K),window.removeEventListener("keyup",he),cancelAnimationFrame(m.current)}},[W,L]),st.useEffect(()=>{const K=(P,ne,de)=>{de.preventDefault(),(P==="a"||P==="d")&&(S.current[P]=ne),P===" "&&(ne&&_.current?v.current.jumpsMade<v.current.maxJumps&&(v.current.velY=-v.current.jumpPower,v.current.onGround=!1,v.current.jumpsMade++,_.current=!1):ne||(_.current=!0))},he=document.getElementById("btnLeft"),pe=document.getElementById("btnRight"),V=document.getElementById("btnJump");if(he&&pe&&V){const P=Ae=>K("a",!0,Ae),ne=Ae=>K("a",!1,Ae),de=Ae=>K("d",!0,Ae),me=Ae=>K("d",!1,Ae),H=Ae=>K(" ",!0,Ae),fe=Ae=>K(" ",!1,Ae);return he.addEventListener("touchstart",P),he.addEventListener("touchend",ne),pe.addEventListener("touchstart",de),pe.addEventListener("touchend",me),V.addEventListener("touchstart",H),V.addEventListener("touchend",fe),()=>{he.removeEventListener("touchstart",P),he.removeEventListener("touchend",ne),pe.removeEventListener("touchstart",de),pe.removeEventListener("touchend",me),V.removeEventListener("touchstart",H),V.removeEventListener("touchend",fe)}}},[]),Se.jsxs(Se.Fragment,{children:[Se.jsx("style",{children:`
                body {
                    margin: 0;
                    padding: 20px;
                    background: linear-gradient(45deg, #000000, #4A0000, #8B0000);
                    font-family: 'Courier New', monospace;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    color: white;
                }
                canvas {
                    border: 3px solid #FF0000;
                    background: linear-gradient(to bottom, #1a0000, #000000);
                    box-shadow: 0 0 30px rgba(255,0,0,0.5);
                    width: 100%;
                    max-width: 900px;
                    height: auto;
                }
                .controls { margin: 20px 0; text-align: center; }
                .info { margin: 10px 0; font-size: 18px; font-weight: bold; color: #FF6666; text-shadow: 0 0 10px #FF0000; }
                .instructions { margin: 10px 0; font-size: 14px; color: #FFB6C1; max-width: 600px; text-align: center; background: rgba(139,0,0,0.3); padding: 15px; border-radius: 10px; border: 1px solid #FF0000; }
                button { padding: 12px 25px; font-size: 16px; margin: 5px; border: 2px solid #FF0000; border-radius: 5px; background: linear-gradient(45deg, #8B0000, #FF0000); color: white; cursor: pointer; transition: all 0.3s; text-shadow: 0 0 5px #000; }
                button:hover { background: linear-gradient(45deg, #FF0000, #FF6666); box-shadow: 0 0 15px #FF0000; }
                .game-over { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(139,0,0,0.9); color: white; padding: 30px; border-radius: 15px; text-align: center; border: 2px solid #FF0000; box-shadow: 0 0 30px #FF0000; z-index: 10; }
                h1 { color: #FF0000; text-shadow: 0 0 20px #FF0000; font-size: 2.5em; margin-bottom: 10px; text-align: center; }
                .death-count { color: #FF4444; font-size: 16px; margin-top: 10px; }
                .warning { background: rgba(255,0,0,0.2); border: 1px solid #FF0000; padding: 10px; margin: 10px 0; border-radius: 5px; animation: pulse 2s infinite; text-align: center; }
                @keyframes pulse { 0% { box-shadow: 0 0 5px #FF0000; } 50% { box-shadow: 0 0 20px #FF0000; } 100% { box-shadow: 0 0 5px #FF0000; } }
                .mobile-controls { display: none; width: 100%; max-width: 900px; margin-top: 15px; justify-content: space-between; align-items: center; padding: 0 10px; box-sizing: border-box; }
                .mobile-controls button { width: 70px; height: 70px; font-size: 2em; border-radius: 50%; background: #8B0000; display: flex; align-items: center; justify-content: center; padding: 0; }
                .mobile-controls .move-controls { display: flex; gap: 20px; }
                @media (max-width: 768px) {
                    body { padding: 10px; }
                    h1 { font-size: 2em; }
                    .instructions { font-size: 12px; max-width: 100%; }
                    #keyboard-instructions { display: none; }
                    .controls { display: flex; flex-wrap: wrap; justify-content: center; }
                    .mobile-controls { display: flex; }
                }
                `}),Se.jsx("h1",{children:"👹 DEVIL LEVEL 👹"}),Se.jsxs("div",{className:"warning",children:[Se.jsx("strong",{children:"⚠️ WARNING ⚠️"}),Se.jsx("br",{}),"This game is extremely difficult and may be frustrating!"]}),Se.jsxs("div",{className:"info",children:[Se.jsxs("span",{children:["Level: ",Se.jsx("span",{id:"level",children:n.level})]})," |",Se.jsxs("span",{children:["Score: ",Se.jsx("span",{id:"score",children:n.score})]})," |",Se.jsxs("span",{children:["Lives: ",Se.jsx("span",{id:"lives",children:n.lives})]})]}),Se.jsxs("div",{className:"timer-display",style:{background:t.timeLeft<=60?"rgba(255,0,0,0.3)":"rgba(139,0,0,0.3)",border:`2px solid ${t.timeLeft<=60?"#FF0000":"#FF6666"}`,padding:"10px 20px",borderRadius:"10px",margin:"10px 0",textAlign:"center",fontSize:"20px",fontWeight:"bold",color:t.timeLeft<=60?"#FF4444":"#FFB6C1",textShadow:"0 0 10px #FF0000",animation:t.timeLeft<=60?"pulse 1s infinite":"none"},children:["⏰ Time Remaining: ",Math.floor(t.timeLeft/60),":",(t.timeLeft%60).toString().padStart(2,"0"),t.timeLeft<=60&&Se.jsx("span",{style:{display:"block",fontSize:"14px",marginTop:"5px"},children:"⚠️ HURRY UP! ⚠️"})]}),Se.jsxs("div",{className:"death-count",children:["Deaths: ",Se.jsx("span",{id:"deaths",children:n.deaths})," 💀"]}),Se.jsx("canvas",{ref:p,id:"gameCanvas",width:"900",height:"500"}),Se.jsxs("div",{className:"mobile-controls",children:[Se.jsxs("div",{className:"move-controls",children:[Se.jsx("button",{id:"btnLeft",children:"◀"}),Se.jsx("button",{id:"btnRight",children:"▶"})]}),Se.jsx("button",{id:"btnJump",children:"▲"})]}),Se.jsxs("div",{className:"instructions",children:[Se.jsxs("span",{id:"keyboard-instructions",children:[Se.jsx("strong",{children:"Controls:"})," WASD or Arrow Keys, SPACE to jump",Se.jsx("br",{})]}),Se.jsx("strong",{children:"Goal:"})," Reach the red portal... If you can! 😈",Se.jsx("br",{}),Se.jsx("strong",{children:"Rule:"})," Jumps are equal to the level number. Good luck."]}),Se.jsxs("div",{className:"controls",children:[Se.jsx("button",{onClick:U,children:"Start Game"}),Se.jsx("button",{onClick:B,children:c?"Resume":"Pause"}),Se.jsx("button",{onClick:D,children:"Restart"})]}),s&&Se.jsxs("div",{className:"game-over",id:"gameOver",children:[Se.jsx("h2",{children:"💀 YOU DIED! 💀"}),Se.jsxs("p",{children:["Your Score: ",Se.jsx("span",{children:n.score})]}),Se.jsxs("p",{children:["Total Deaths: ",Se.jsx("span",{children:n.deaths})]}),Se.jsx("button",{onClick:D,children:"Try Again"})]})]})};function D$(){const{address:t,isConnected:e}=m5(),{pay:n,alreadyPaid:r,isPaying:s,error:o}=BR(),[c,l,p]=HN(),[m,y]=st.useState(""),[v,S]=st.useState(!1),[_,A]=cm("lobby-state",{name:"",maxPlayers:4,isActive:!1,createdAt:null,gameStarted:!1});cm("shared-nicknames",{});const[N,R]=cm("chat-messages",[]),[$,G,F]=lS("player-ready",!1),[X,j,L]=lS("wallet-address",""),Z=X_(),U=Z&&Z[0]?.isYou;if(!U&&!r)return Se.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"60vh",gap:"1rem",textAlign:"center"},children:[Se.jsx("h2",{children:"Pay 0.001 MON to Join Lobby"}),Se.jsx("button",{disabled:s,onClick:async()=>{try{await n()}catch{alert("Payment failed or rejected.")}},children:s?"Waiting for wallet...":"Pay & Continue"}),o&&Se.jsxs("p",{style:{color:"red"},children:["Error: ",o.message]})]});const D=XN(),B=R8(),W=Z.length>=(_?.maxPlayers||4);Z.length<=(_?.maxPlayers||4),aS.useEffect(()=>{if(Z.length>(_?.maxPlayers||4)){const Fe=_?.maxPlayers||4;Z.find(De=>De.isYou),Z.findIndex(De=>De.isYou)>=Fe&&(console.log(`Lobby full (${Z.length}/${Fe}). Removing excess user.`),B())}},[Z.length,_?.maxPlayers,B]);const[K,he]=st.useState(""),[pe,V]=st.useState(!1);aS.useEffect(()=>{e&&t&&X!==t?j(t):!e&&X&&j("")},[e,t,X,j]);const P=Fe=>{if(Fe.preventDefault(),K.trim()){const wt=Z?.find(Q=>Q.isYou),De={id:Date.now()+Math.random(),text:K.trim(),userId:wt?.id||"unknown",nickname:c||"Anonymous",timestamp:new Date().toISOString()};R(Q=>[...(Q||[]).slice(-49),De]),he("")}},ne=Fe=>{if(Fe.preventDefault(),m.trim()&&m.trim()!==c){const wt=m.trim();l(wt),localStorage.setItem("lobby-user-nickname",wt),y(""),S(!1)}},de=()=>{y(""),S(!1)},me=()=>{G(!$)},H=async()=>{if(confirm("Are you sure you want to leave the lobby?"))try{await B(),A({name:"",maxPlayers:4,isActive:!1,createdAt:null,gameStarted:!1});const Fe=new URL(window.location);Fe.search="",window.history.pushState({},"",Fe),window.dispatchEvent(new CustomEvent("lobby-session-reset"))}catch(Fe){console.error("Error leaving lobby:",Fe),window.location.reload()}},fe=()=>{D&&(navigator.clipboard.writeText(D),alert("Join URL copied to clipboard!"))},Ae=Object.values(F||{}).filter(Boolean).length,ke=(Z?.length||0)>=2&&Ae===(Z?.length||0);if(_?.gameStarted)return Se.jsx(L$,{});const $e=Z.findIndex(Fe=>Fe.isYou),Ve=_?.maxPlayers||4;return Z.length>Ve&&$e>=Ve?Se.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"60vh",padding:"3rem",textAlign:"center"},children:Se.jsxs("div",{style:{background:"#fef2f2",border:"2px solid #fecaca",borderRadius:"12px",padding:"3rem 2rem",maxWidth:"500px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[Se.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:"🚫"}),Se.jsx("h1",{style:{color:"#dc2626",marginBottom:"1rem",fontSize:"1.5rem"},children:"Lobby Full!"}),Se.jsx("p",{style:{color:"#7f1d1d",marginBottom:"1rem",fontSize:"1.1rem"},children:"This lobby is currently full"}),Se.jsxs("div",{style:{background:"#fee2e2",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",border:"1px solid #fca5a5"},children:[Se.jsxs("strong",{style:{color:"#991b1b"},children:[Z.length,"/",Ve]}),Se.jsx("span",{style:{color:"#7f1d1d"},children:" players currently in lobby"})]}),Se.jsx("p",{style:{color:"#6b7280",fontSize:"0.95rem",marginBottom:"2rem"},children:"Sorry, you can't join this lobby right now. You can create your own lobby or try joining a different one."}),Se.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[Se.jsx("button",{onClick:()=>{window.history.replaceState({},"",window.location.pathname),window.location.reload()},style:{padding:"0.75rem 1.5rem",background:"#059669",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"600",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:"🆕 Create New Lobby"}),Se.jsx("button",{onClick:()=>window.location.href=window.location.origin,style:{padding:"0.75rem 1.5rem",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:"🏠 Back to Home"})]})]})}):Se.jsxs("div",{className:"lobby-room",children:[Se.jsxs("div",{className:"lobby-header",children:[Se.jsxs("div",{className:"lobby-info",children:[Se.jsxs("h2",{children:["🎮 ",_?.name||"Loading..."]}),Se.jsxs("div",{className:"lobby-meta",children:[Se.jsxs("span",{className:"player-count",style:{color:W?"#dc2626":"inherit",fontWeight:W?"bold":"normal"},children:["👥 ",Z?.length||0,"/",_?.maxPlayers||4," players",W&&" 🚫 FULL"]}),Se.jsx("span",{style:{fontSize:"0.8rem",opacity:.8},children:"🚀 React Together Session"})]})]}),Se.jsxs("div",{className:"lobby-actions",children:[Se.jsxs("button",{className:"nickname-btn",onClick:()=>S(!v),style:{marginRight:"0.5rem",background:"#8b5cf6",color:"white"},children:["✏️ ",v?"Cancel":"Edit Name"]}),Se.jsxs("button",{className:"invite-btn",onClick:()=>V(!pe),disabled:W,style:{opacity:W?.5:1,cursor:W?"not-allowed":"pointer"},title:W?"Lobby is full - cannot invite more players":"Invite friends to join",children:["📨 ",W?"Full":"Invite"]}),Se.jsx("button",{className:"leave-btn",onClick:H,children:"🚪 Leave"}),U&&Se.jsx("button",{className:"start-game-btn",style:{marginLeft:"1rem",background:"#22c55e",color:"white",fontWeight:600},onClick:()=>A(Fe=>({...Fe,gameStarted:!0})),disabled:Z.length<2,children:"🚀 Start Game"})]})]}),pe&&D&&Se.jsxs("div",{className:"invite-section",children:[Se.jsx("h3",{children:"Invite Friends to Join"}),Se.jsxs("div",{className:"join-url-container",children:[Se.jsx("input",{type:"text",value:D,readOnly:!0,className:"join-url"}),Se.jsx("button",{onClick:fe,className:"copy-btn",children:"📋 Copy"})]}),Se.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:"#6b7280"},children:"🚀 Real-time synchronized lobby powered by React Together"})]}),v&&Se.jsxs("div",{className:"nickname-editor",style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:[Se.jsx("h4",{style:{margin:"0 0 1rem 0",color:"#374151"},children:"✏️ Edit Your Nickname"}),Se.jsxs("form",{onSubmit:ne,style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[Se.jsx("input",{type:"text",value:m,onChange:Fe=>y(Fe.target.value),placeholder:"Enter new nickname...",maxLength:20,style:{flex:"1",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"0.9rem"},autoFocus:!0}),Se.jsx("button",{type:"submit",disabled:!m.trim()||m.trim()===c,style:{padding:"0.5rem 1rem",background:"#10b981",color:"white",border:"none",borderRadius:"4px",fontSize:"0.9rem",cursor:"pointer",opacity:!m.trim()||m.trim()===c?.5:1},children:"✅ Save"}),Se.jsx("button",{type:"button",onClick:de,style:{padding:"0.5rem 1rem",background:"#6b7280",color:"white",border:"none",borderRadius:"4px",fontSize:"0.9rem",cursor:"pointer"},children:"❌ Cancel"})]}),Se.jsxs("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.8rem",color:"#6b7280"},children:["Current: ",Se.jsx("strong",{children:c||"Anonymous"})]})]}),Se.jsxs("div",{className:"lobby-content",children:[Se.jsxs("div",{className:"players-section",children:[Se.jsxs("h3",{children:["Players (",Z?.length||0,"/",_?.maxPlayers||4,")"]}),Se.jsxs("div",{className:"players-list",children:[(Z||[]).map(Fe=>{const wt=Fe?.userId||Fe?.id,De=(F||{})[wt]||!1,Q=(L||{})[wt]||"";return Se.jsxs("div",{className:`player-card ${De?"ready":""}`,children:[Se.jsxs("div",{className:"player-info",children:[Se.jsxs("span",{className:"player-name",children:[Fe?.isYou?c||"You":p[wt]||`User ${wt?.slice(-4)}`," ",Fe?.isYou&&"(You)"]}),Q&&Se.jsxs("span",{className:"player-wallet",style:{fontFamily:"monospace",fontSize:"0.85em",color:"#6366f1",marginLeft:4},children:[Q.slice(0,6),"...",Q.slice(-4)]}),Se.jsx("span",{className:"player-status",children:De?"✅ Ready":"⏳ Not Ready"})]}),Fe?.isYou&&Se.jsx("button",{className:`ready-btn ${De?"ready":""}`,onClick:me,children:De?"Not Ready":"Ready Up"})]},wt||Math.random())}),Array.from({length:Math.max(0,(_?.maxPlayers||4)-(Z?.length||0))}).map((Fe,wt)=>Se.jsx("div",{className:"player-card empty",children:Se.jsx("div",{className:"player-info",children:Se.jsx("span",{className:"player-name",children:"Waiting for player..."})})},`empty-${wt}`))]}),ke&&Se.jsxs("div",{className:"all-ready-banner",children:["🎉 All players are ready! Game can start!",Se.jsx("div",{style:{fontSize:"0.9rem",marginTop:"0.5rem",opacity:.9},children:"🚀 Synchronized via React Together"})]})]}),Se.jsxs("div",{className:"chat-section",children:[Se.jsx("h3",{children:"Real-time Chat"}),Se.jsx("div",{className:"chat-messages",children:(N||[]).length===0?Se.jsxs("div",{className:"no-messages",children:["No messages yet. Say hello! 👋",Se.jsx("div",{style:{fontSize:"0.8rem",marginTop:"0.5rem",opacity:.7},children:"🚀 Messages sync in real-time via React Together"})]}):(N||[]).map(Fe=>Se.jsxs("div",{className:"chat-message",children:[Se.jsxs("span",{className:"message-author",children:[Fe?.nickname||"Unknown",":"]}),Se.jsx("span",{className:"message-text",children:Fe?.text||""}),Se.jsx("span",{className:"message-time",children:Fe?.timestamp?new Date(Fe.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]},Fe?.id||Math.random()))}),Se.jsxs("form",{onSubmit:P,className:"chat-input-form",children:[Se.jsx("input",{type:"text",value:K,onChange:Fe=>he(Fe.target.value),placeholder:"Type a message...",maxLength:200,className:"chat-input"}),Se.jsx("button",{type:"submit",disabled:!K.trim(),className:"send-btn",children:"📤"})]})]})]})]})}function M$(){const{address:t,isConnected:e}=m5();return Se.jsxs("div",{className:"wallet-connect",style:{display:"flex",alignItems:"center",gap:"1rem"},children:[Se.jsx("appkit-button",{}),e&&t&&Se.jsxs("span",{style:{fontFamily:"monospace",fontSize:"0.95em"},children:["🦊 ",t.slice(0,6),"...",t.slice(-4)]})]})}function U$(){const[t]=cm("lobby-state",{name:"",maxPlayers:4,isActive:!1,createdAt:null}),e=X_(),n=W_();return Se.jsxs("div",{className:"app",children:[Se.jsxs("header",{className:"app-header",style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[Se.jsxs("div",{children:[Se.jsx("h1",{children:"🎮 Collaborative Lobby Manager"}),Se.jsx("div",{className:"connection-status",children:n?Se.jsxs("span",{className:"status connected",children:["✅ Connected via React Together (",e.length," users)"]}):Se.jsx("span",{className:"status disconnected",children:"⚠️ Connecting to React Together..."})})]}),Se.jsx(M$,{})]}),Se.jsx("main",{className:"app-main",children:n?!t.isActive&&!t.name?Se.jsx(k$,{}):Se.jsx(D$,{}):Se.jsxs("div",{className:"loading-state",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"3rem",gap:"1rem"},children:[Se.jsx("div",{className:"spinner",style:{width:"40px",height:"40px",border:"4px solid #f3f4f6",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),Se.jsx("p",{children:"Connecting to React Together..."}),Se.jsx("p",{style:{fontSize:"0.9rem",opacity:"0.7"},children:"Restoring lobby state..."})]})})]})}class $$ extends aS.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error("Error Boundary caught an error:",e,n),this.setState({error:e,errorInfo:n})}render(){return this.state.hasError?Se.jsxs("div",{style:{padding:"2rem",background:"#fee2e2",border:"1px solid #fecaca",borderRadius:"8px",margin:"2rem",fontFamily:"monospace"},children:[Se.jsx("h2",{style:{color:"#dc2626",marginBottom:"1rem"},children:"🚨 Something went wrong"}),Se.jsxs("details",{style:{whiteSpace:"pre-wrap"},children:[Se.jsx("summary",{style:{cursor:"pointer",marginBottom:"1rem"},children:"Click to see error details"}),Se.jsxs("div",{style:{background:"#fef2f2",padding:"1rem",borderRadius:"4px"},children:[Se.jsx("strong",{children:"Error:"})," ",this.state.error&&this.state.error.toString(),Se.jsx("br",{}),Se.jsx("strong",{children:"Component Stack:"}),this.state.errorInfo?.componentStack||"No stack trace available"]})]}),Se.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"1rem",padding:"0.5rem 1rem",background:"#dc2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Reload Page"})]}):this.props.children}}function j$({children:t}){const e="2xzX6RWl3yDjUNRcrwCHevFrnsXrrz8MZyuPeKIUQ2",[n,r]=st.useState(null);if(st.useEffect(()=>{const o=()=>{const p=new URLSearchParams(window.location.search),m=p.get("session"),y=p.get("password");if(m&&y)r({name:m,password:y,apiKey:e});else{const v=`lobby-${Date.now()}`,S="lobby-secure-2024";r({name:v,password:S,apiKey:e});const _=new URL(window.location);_.searchParams.set("session",v),_.searchParams.set("password",S),window.history.pushState({},"",_)}};o();const c=()=>{o()},l=()=>{r(null),setTimeout(o,100)};return window.addEventListener("popstate",c),window.addEventListener("lobby-session-reset",l),()=>{window.removeEventListener("popstate",c),window.removeEventListener("lobby-session-reset",l)}},[e]),!n)return Se.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"3rem",gap:"1rem"},children:[Se.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f4f6",borderTop:"4px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),Se.jsx("p",{children:"Initializing session..."})]});const s=()=>{const o=localStorage.getItem("lobby-user-nickname");if(o)return o;const c=["Swift","Brave","Clever","Bold","Wise","Fierce","Noble","Quick","Strong","Bright"],l=["Tiger","Eagle","Lion","Wolf","Hawk","Bear","Fox","Shark","Panther","Dragon"],p=c[Math.floor(Math.random()*c.length)],m=l[Math.floor(Math.random()*l.length)];return`${p} ${m}`};return Se.jsx(M8,{apiKey:e,appId:"com.lobby.manager",sessionParams:n,deriveNickname:s,children:t})}const B$=Symbol(),H3=Object.getPrototypeOf,MS=new WeakMap,F$=t=>t&&(MS.has(t)?MS.get(t):H3(t)===Object.prototype||H3(t)===Array.prototype),Z$=t=>F$(t)&&t[B$]||null,X3=(t,e=!0)=>{MS.set(t,e)},_v={},b5=t=>typeof t=="object"&&t!==null,z$=t=>b5(t)&&!bb.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),FR=(t,e)=>{const n=US.get(t);if(n?.[0]===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return X3(r,!0),US.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const o=Reflect.get(t,s),{enumerable:c}=Reflect.getOwnPropertyDescriptor(t,s),l={value:o,enumerable:c,configurable:!0};if(bb.has(o))X3(o,!1);else if(pd.has(o)){const[p,m]=pd.get(o);l.value=FR(p,m())}Object.defineProperty(r,s,l)}),Object.preventExtensions(r)},G$=(t,e,n,r)=>({deleteProperty(s,o){const c=Reflect.get(s,o);n(o);const l=Reflect.deleteProperty(s,o);return l&&r(["delete",[o],c]),l},set(s,o,c,l){const p=!t()&&Reflect.has(s,o),m=Reflect.get(s,o,l);if(p&&(W3(m,c)||Zy.has(c)&&W3(m,Zy.get(c))))return!0;n(o),b5(c)&&(c=Z$(c)||c);const y=!pd.has(c)&&X$(c)?Zn(c):c;return e(o,y),Reflect.set(s,o,y,l),r(["set",[o],c,m]),!0}}),pd=new WeakMap,bb=new WeakSet,US=new WeakMap,Q0=[1,1],Zy=new WeakMap;let W3=Object.is,H$=(t,e)=>new Proxy(t,e),X$=z$,W$=FR,V$=G$;function Zn(t={}){if(!b5(t))throw new Error("object required");const e=Zy.get(t);if(e)return e;let n=Q0[0];const r=new Set,s=(R,$=++Q0[0])=>{n!==$&&(n=$,r.forEach(G=>G(R,$)))};let o=Q0[1];const c=(R=++Q0[1])=>(o!==R&&!r.size&&(o=R,p.forEach(([$])=>{const G=$[1](R);G>n&&(n=G)})),n),l=R=>($,G)=>{const F=[...$];F[1]=[R,...F[1]],s(F,G)},p=new Map,m=(R,$)=>{const G=!bb.has($)&&pd.get($);if(G){if((_v?"production":void 0)!=="production"&&p.has(R))throw new Error("prop listener already exists");if(r.size){const F=G[2](l(R));p.set(R,[G,F])}else p.set(R,[G])}},y=R=>{var $;const G=p.get(R);G&&(p.delete(R),($=G[1])==null||$.call(G))},v=R=>(r.add(R),r.size===1&&p.forEach(([G,F],X)=>{if((_v?"production":void 0)!=="production"&&F)throw new Error("remove already exists");const j=G[2](l(X));p.set(X,[G,j])}),()=>{r.delete(R),r.size===0&&p.forEach(([G,F],X)=>{F&&(F(),p.set(X,[G]))})});let S=!0;const _=V$(()=>S,m,y,s),A=H$(t,_);Zy.set(t,A);const N=[t,c,v];return pd.set(A,N),Reflect.ownKeys(t).forEach(R=>{const $=Object.getOwnPropertyDescriptor(t,R);"value"in $&&$.writable&&(A[R]=t[R])}),S=!1,A}function ws(t,e,n){const r=pd.get(t);(_v?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const o=[],c=r[2];let l=!1;const m=c(y=>{o.push(y),s||(s=Promise.resolve().then(()=>{s=void 0,l&&e(o.splice(0))}))});return l=!0,()=>{l=!1,m()}}function zy(t){const e=pd.get(t);(_v?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return W$(n,r())}function af(t){return bb.add(t),t}function K$(){return{proxyStateMap:pd,refSet:bb,snapCache:US,versionHolder:Q0,proxyCache:Zy}}function vs(t,e,n,r){let s=t[e];return ws(t,()=>{const o=t[e];Object.is(s,o)||n(s=o)})}const{proxyStateMap:Y$,snapCache:q$}=K$(),T1=t=>Y$.has(t);function Q$(t){const e=[];let n=0;const r=new Map,s=new WeakMap,o=()=>{const m=q$.get(l),y=m?.[1];if(y&&!s.has(y)){const v=new Map(r);s.set(y,v)}},c=m=>s.get(m)||r,l={data:e,index:n,epoch:0,get size(){return T1(this)||o(),c(this).size},get(m){const v=c(this).get(m);if(v===void 0){this.epoch;return}return this.data[v]},has(m){const y=c(this);return this.epoch,y.has(m)},set(m,y){if(!T1(this))throw new Error("Cannot perform mutations on a snapshot");const v=r.get(m);return v===void 0?(r.set(m,this.index),this.data[this.index++]=y):this.data[v]=y,this.epoch++,this},delete(m){if(!T1(this))throw new Error("Cannot perform mutations on a snapshot");const y=r.get(m);return y===void 0?!1:(delete this.data[y],r.delete(m),this.epoch++,!0)},clear(){if(!T1(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(m){this.epoch,c(this).forEach((v,S)=>{m(this.data[v],S,this)})},*entries(){this.epoch;const m=c(this);for(const[y,v]of m)yield[y,this.data[v]]},*keys(){this.epoch;const m=c(this);for(const y of m.keys())yield y},*values(){this.epoch;const m=c(this);for(const y of m.values())yield this.data[y]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},p=Zn(l);return Object.defineProperties(p,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(p),p}var V3={};const Oe={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof V3<"u"?V3.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},Gy={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return t?.filter(n=>n.chainNamespace===e)||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){if(!e)return;const n=t.find(s=>s.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return Oe.CHAIN_NAME_MAP?.[r]||void 0}};var J$=20,e7=1,cf=1e6,K3=1e6,t7=-7,n7=21,r7=!1,wb="[big.js] ",yf=wb+"Invalid ",h2=yf+"decimal places",s7=yf+"rounding mode",ZR=wb+"Division by zero",On={},Lc=void 0,i7=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function zR(){function t(e){var n=this;if(!(n instanceof t))return e===Lc?zR():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(yf+"value");e=e===0&&1/e<0?"-0":String(e)}o7(n,e)}n.constructor=t}return t.prototype=On,t.DP=J$,t.RM=e7,t.NE=t7,t.PE=n7,t.strict=r7,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function o7(t,e){var n,r,s;if(!i7.test(e))throw Error(yf+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function bf(t,e,n,r){var s=t.c;if(n===Lc&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(s7);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Lc))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Lc||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function wf(t,e,n){var r=t.e,s=t.c.join(""),o=s.length;if(e)s=s.charAt(0)+(o>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>o)for(r-=o;r--;)s+="0";else r<o&&(s=s.slice(0,r)+"."+s.slice(r));else o>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}On.abs=function(){var t=new this.constructor(this);return t.s=1,t};On.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,o=n.s,c=t.s,l=n.e,p=t.e;if(!r[0]||!s[0])return r[0]?o:s[0]?-c:0;if(o!=c)return o;if(e=o<0,l!=p)return l>p^e?1:-1;for(c=(l=r.length)<(p=s.length)?l:p,o=-1;++o<c;)if(r[o]!=s[o])return r[o]>s[o]^e?1:-1;return l==p?0:l>p^e?1:-1};On.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,o=e.s==t.s?1:-1,c=n.DP;if(c!==~~c||c<0||c>cf)throw Error(h2);if(!s[0])throw Error(ZR);if(!r[0])return t.s=o,t.c=[t.e=0],t;var l,p,m,y,v,S=s.slice(),_=l=s.length,A=r.length,N=r.slice(0,l),R=N.length,$=t,G=$.c=[],F=0,X=c+($.e=e.e-t.e)+1;for($.s=o,o=X<0?0:X,S.unshift(0);R++<l;)N.push(0);do{for(m=0;m<10;m++){if(l!=(R=N.length))y=l>R?1:-1;else for(v=-1,y=0;++v<l;)if(s[v]!=N[v]){y=s[v]>N[v]?1:-1;break}if(y<0){for(p=R==l?s:S;R;){if(N[--R]<p[R]){for(v=R;v&&!N[--v];)N[v]=9;--N[v],N[R]+=10}N[R]-=p[R]}for(;!N[0];)N.shift()}else break}G[F++]=y?m:++m,N[0]&&y?N[R]=r[_]||0:N=[r[_]]}while((_++<A||N[0]!==Lc)&&o--);return!G[0]&&F!=1&&(G.shift(),$.e--,X--),F>X&&bf($,X,n.RM,N[0]!==Lc),$};On.eq=function(t){return this.cmp(t)===0};On.gt=function(t){return this.cmp(t)>0};On.gte=function(t){return this.cmp(t)>-1};On.lt=function(t){return this.cmp(t)<0};On.lte=function(t){return this.cmp(t)<1};On.minus=On.sub=function(t){var e,n,r,s,o=this,c=o.constructor,l=o.s,p=(t=new c(t)).s;if(l!=p)return t.s=-p,o.plus(t);var m=o.c.slice(),y=o.e,v=t.c,S=t.e;if(!m[0]||!v[0])return v[0]?t.s=-p:m[0]?t=new c(o):t.s=1,t;if(l=y-S){for((s=l<0)?(l=-l,r=m):(S=y,r=v),r.reverse(),p=l;p--;)r.push(0);r.reverse()}else for(n=((s=m.length<v.length)?m:v).length,l=p=0;p<n;p++)if(m[p]!=v[p]){s=m[p]<v[p];break}if(s&&(r=m,m=v,v=r,t.s=-t.s),(p=(n=v.length)-(e=m.length))>0)for(;p--;)m[e++]=0;for(p=e;n>l;){if(m[--n]<v[n]){for(e=n;e&&!m[--e];)m[e]=9;--m[e],m[n]+=10}m[n]-=v[n]}for(;m[--p]===0;)m.pop();for(;m[0]===0;)m.shift(),--S;return m[0]||(t.s=1,m=[S=0]),t.c=m,t.e=S,t};On.mod=function(t){var e,n=this,r=n.constructor,s=n.s,o=(t=new r(t)).s;if(!t.c[0])throw Error(ZR);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=o,e?new r(n):(s=r.DP,o=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=o,this.minus(n.times(t)))};On.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};On.plus=On.add=function(t){var e,n,r,s=this,o=s.constructor;if(t=new o(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var c=s.e,l=s.c,p=t.e,m=t.c;if(!l[0]||!m[0])return m[0]||(l[0]?t=new o(s):t.s=s.s),t;if(l=l.slice(),e=c-p){for(e>0?(p=c,r=m):(e=-e,r=l),r.reverse();e--;)r.push(0);r.reverse()}for(l.length-m.length<0&&(r=m,m=l,l=r),e=m.length,n=0;e;l[e]%=10)n=(l[--e]=l[e]+m[e]+n)/10|0;for(n&&(l.unshift(n),++p),e=l.length;l[--e]===0;)l.pop();return t.c=l,t.e=p,t};On.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-K3||t>K3)throw Error(yf+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};On.prec=function(t,e){if(t!==~~t||t<1||t>cf)throw Error(yf+"precision");return bf(new this.constructor(this),t,e)};On.round=function(t,e){if(t===Lc)t=0;else if(t!==~~t||t<-cf||t>cf)throw Error(h2);return bf(new this.constructor(this),t+this.e+1,e)};On.sqrt=function(){var t,e,n,r=this,s=r.constructor,o=r.s,c=r.e,l=new s("0.5");if(!r.c[0])return new s(r);if(o<0)throw Error(wb+"No square root");o=Math.sqrt(+wf(r,!0,!0)),o===0||o===1/0?(e=r.c.join(""),e.length+c&1||(e+="0"),o=Math.sqrt(e),c=((c+1)/2|0)-(c<0||c&1),t=new s((o==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+c)):t=new s(o+""),c=t.e+(s.DP+=4);do n=t,t=l.times(n.plus(r.div(n)));while(n.c.slice(0,c).join("")!==t.c.slice(0,c).join(""));return bf(t,(s.DP-=4)+t.e+1,s.RM)};On.times=On.mul=function(t){var e,n=this,r=n.constructor,s=n.c,o=(t=new r(t)).c,c=s.length,l=o.length,p=n.e,m=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!o[0])return t.c=[t.e=0],t;for(t.e=p+m,c<l&&(e=s,s=o,o=e,m=c,c=l,l=m),e=new Array(m=c+l);m--;)e[m]=0;for(p=l;p--;){for(l=0,m=c+p;m>p;)l=e[m]+o[p]*s[m-p-1]+l,e[m--]=l%10,l=l/10|0;e[m]=l}for(l?++t.e:e.shift(),p=e.length;!e[--p];)e.pop();return t.c=e,t};On.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Lc){if(t!==~~t||t<0||t>cf)throw Error(h2);for(n=bf(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return wf(n,!0,!!r)};On.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Lc){if(t!==~~t||t<0||t>cf)throw Error(h2);for(n=bf(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return wf(n,!1,!!r)};On[Symbol.for("nodejs.util.inspect.custom")]=On.toJSON=On.toString=function(){var t=this,e=t.constructor;return wf(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};On.toNumber=function(){var t=+wf(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(wb+"Imprecise conversion");return t};On.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Lc){if(t!==~~t||t<1||t>cf)throw Error(yf+"precision");for(n=bf(new r(n),t,e);n.c.length<t;)n.c.push(0)}return wf(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};On.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(wb+"valueOf disallowed");return wf(t,t.e<=e.NE||t.e>=e.PE,!0)};var k0=zR();const a7={bigNumber(t){return t?new k0(t):new k0(0)},multiply(t,e){if(t===void 0||e===void 0)return new k0(0);const n=new k0(t),r=new k0(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},c7=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],l7=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],u7=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],d7={getERC20Abi:t=>Oe.USDT_CONTRACT_ADDRESSES.includes(t)?u7:c7,getSwapAbi:()=>l7},Ii={validateCaipAddress(t){if(t.split(":")?.length!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},$t={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function rC(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Lt={setItem(t,e){J0()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(J0())return localStorage.getItem(t)||void 0},removeItem(t){J0()&&localStorage.removeItem(t)},clear(){J0()&&localStorage.clear()}};function J0(){return typeof window<"u"&&typeof localStorage<"u"}function Ll(t,e){return e==="light"?{"--w3m-accent":t?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":t?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var Y3={};const sC=(typeof process<"u"&&typeof Y3<"u"?Y3.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",GR=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],h7="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",En={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:sC,SECURE_SITE_DASHBOARD:`${sC}/dashboard`,SECURE_SITE_FAVICON:`${sC}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:[Oe.CHAIN.EVM,Oe.CHAIN.SOLANA],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[Oe.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[Oe.CHAIN.EVM,Oe.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[Oe.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[Oe.CHAIN.EVM,Oe.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},nt={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=nt.getActiveNamespace(),e=nt.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Lt.setItem($t.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Lt.getItem($t.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Lt.removeItem($t.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Lt.setItem($t.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Lt.setItem($t.ACTIVE_CAIP_NETWORK_ID,t),nt.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Lt.getItem($t.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Lt.removeItem($t.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=rC(t);Lt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=nt.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Lt.setItem($t.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Lt.getItem($t.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=rC(t);Lt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Lt.getItem($t.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=rC(t);return Lt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Lt.setItem($t.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Lt.getItem($t.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Lt.removeItem($t.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Lt.getItem($t.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){return Lt.getItem($t.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1]},setConnectionStatus(t){try{Lt.setItem($t.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Lt.getItem($t.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Lt.getItem($t.CONNECTED_NAMESPACES);return t?.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Lt.setItem($t.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=nt.getConnectedNamespaces();e.includes(t)||(e.push(t),nt.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=nt.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),nt.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Lt.getItem($t.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Lt.setItem($t.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Lt.removeItem($t.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Lt.getItem($t.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=nt.getBalanceCache();Lt.setItem($t.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=nt.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;nt.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=nt.getBalanceCache();e[t.caipAddress]=t,Lt.setItem($t.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Lt.getItem($t.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=nt.getBalanceCache();Lt.setItem($t.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=nt.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),nt.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=nt.getNativeBalanceCache();e[t.caipAddress]=t,Lt.setItem($t.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Lt.getItem($t.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=nt.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;nt.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=nt.getEnsCache();e[t.address]=t,Lt.setItem($t.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=nt.getEnsCache();Lt.setItem($t.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Lt.getItem($t.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=nt.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;nt.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=nt.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Lt.setItem($t.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=nt.getIdentityCache();Lt.setItem($t.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Lt.removeItem($t.PORTFOLIO_CACHE),Lt.removeItem($t.NATIVE_BALANCE_CACHE),Lt.removeItem($t.ENS_CACHE),Lt.removeItem($t.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Lt.setItem($t.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Lt.getItem($t.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=nt.getConnections(),r=n[e]??[],s=new Map;for(const c of r)s.set(c.connectorId,{...c});for(const c of t){const l=s.get(c.connectorId),p=c.connectorId===Oe.CONNECTOR_ID.AUTH;if(l&&!p){const m=new Set(l.accounts.map(v=>v.address.toLowerCase())),y=c.accounts.filter(v=>!m.has(v.address.toLowerCase()));l.accounts.push(...y)}else s.set(c.connectorId,{...c})}const o={...n,[e]:Array.from(s.values())};Lt.setItem($t.CONNECTIONS,JSON.stringify(o))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Lt.getItem($t.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=nt.getConnections(),s=r[n]??[],o=new Map(s.map(l=>[l.connectorId,l])),c=o.get(t);c&&(c.accounts.filter(p=>p.address.toLowerCase()!==e.toLowerCase()).length===0?o.delete(t):o.set(t,{...c,accounts:c.accounts.filter(p=>p.address.toLowerCase()!==e.toLowerCase())})),Lt.setItem($t.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(o.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Lt.getItem($t.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=nt.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Lt.setItem($t.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=nt.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Lt.setItem($t.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(nt.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},yt={isMobile(){return this.isClient()?!!(window?.matchMedia&&typeof window.matchMedia=="function"&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t?.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return yt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window?.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=En.TEN_SEC_MS:!0},isAllowedRetry(t,e=En.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},isSafeApp(){if(yt.isClient()&&window.self!==window.top)try{const t=window?.location?.ancestorOrigins?.[0],e="https://app.safe.global";if(t){const n=new URL(t),r=new URL(e);return n.hostname===r.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+En.FOUR_MINUTES_MS},getNetworkId(t){return t?.split(":")[1]},getPlainAddress(t){return t?.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(yt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!s?.endsWith("/")&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const o=encodeURIComponent(e);return{redirect:`${r}wc?uri=${o}`,redirectUniversalLink:s?`${s}wc?uri=${o}`:void 0,href:r}},formatUniversalUrl(t,e){if(!yt.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?nt.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window?.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window?.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){if(typeof window>"u")return!1;const t=window?.matchMedia&&typeof window.matchMedia=="function"?window.matchMedia("(display-mode: standalone)")?.matches:!1,e=window?.navigator?.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,yt.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){let n;if(t==="0")n="0";else if(typeof t=="string"){const r=Number(t);r&&(n=r.toString().match(/^-?\d+(?:\.\d{0,3})?/u)?.[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return Oe.W3M_API_URL},getBlockchainApiUrl(){return Oe.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return Oe.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){return typeof t=="string"?t:typeof t?.issues?.[0]?.message=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const o=n[r.id],c=n[s.id];return o!==void 0&&c!==void 0?o-c:o!==void 0?-1:c!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?En.ADAPTER_TYPES.UNIVERSAL:t.map(o=>o.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in Oe.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window?.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window?.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",o=t.substring(t.indexOf(s)+s.length),c=this.injectIntoUrl(decodeURIComponent(o),n,e);return t.replace(o,encodeURIComponent(c))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),o=e.length,c=s!==-1?s:t.length,l=t.substring(0,r+o),p=t.substring(r+o,c),m=t.substring(s),y=p+n;return l+y+m}};async function L0(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class vb{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const o=this.createUrl(s);return(await L0(o,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await L0(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const o=this.createUrl(s);return(await L0(o,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const o=this.createUrl(s);return(await L0(o,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const o=this.createUrl(s);return(await L0(o,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,o])=>{o&&r.searchParams.append(s,o)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const f7={getFeatureValue(t,e){const n=e?.[t];return n===void 0?En.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(yt.isTelegram()){if(yt.isIos())return t.filter(e=>e!=="google");if(yt.isMac())return t.filter(e=>e!=="x");if(yt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},_t=Zn({features:En.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:En.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),Ke={state:_t,subscribeKey(t,e){return vs(_t,t,e)},setOptions(t){Object.assign(_t,t)},setRemoteFeatures(t){if(!t)return;const e={..._t.remoteFeatures,...t};_t.remoteFeatures=e,_t.remoteFeatures?.socials&&(_t.remoteFeatures.socials=f7.filterSocialsByPlatform(_t.remoteFeatures.socials)),_t.features?.pay&&(_t.remoteFeatures.email=!1,_t.remoteFeatures.socials=!1)},setFeatures(t){if(!t)return;_t.features||(_t.features=En.DEFAULT_FEATURES);const e={..._t.features,...t};_t.features=e,_t.features?.pay&&_t.remoteFeatures&&(_t.remoteFeatures.email=!1,_t.remoteFeatures.socials=!1)},setProjectId(t){_t.projectId=t},setCustomRpcUrls(t){_t.customRpcUrls=t},setAllWallets(t){_t.allWallets=t},setIncludeWalletIds(t){_t.includeWalletIds=t},setExcludeWalletIds(t){_t.excludeWalletIds=t},setFeaturedWalletIds(t){_t.featuredWalletIds=t},setTokens(t){_t.tokens=t},setTermsConditionsUrl(t){_t.termsConditionsUrl=t},setPrivacyPolicyUrl(t){_t.privacyPolicyUrl=t},setCustomWallets(t){_t.customWallets=t},setIsSiweEnabled(t){_t.isSiweEnabled=t},setIsUniversalProvider(t){_t.isUniversalProvider=t},setSdkVersion(t){_t.sdkVersion=t},setMetadata(t){_t.metadata=t},setDisableAppend(t){_t.disableAppend=t},setEIP6963Enabled(t){_t.enableEIP6963=t},setDebug(t){_t.debug=t},setEnableWalletConnect(t){_t.enableWalletConnect=t},setEnableWalletGuide(t){_t.enableWalletGuide=t},setEnableAuthLogger(t){_t.enableAuthLogger=t},setEnableWallets(t){_t.enableWallets=t},setPreferUniversalLinks(t){_t.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(En.SIWX_DEFAULTS))t[e]??=n;_t.siwx=t},setConnectMethodsOrder(t){_t.features={..._t.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){_t.features={..._t.features,walletFeaturesOrder:t}},setSocialsOrder(t){_t.remoteFeatures={..._t.remoteFeatures,socials:t}},setCollapseWallets(t){_t.features={..._t.features,collapseWallets:t}},setEnableEmbedded(t){_t.enableEmbedded=t},setAllowUnsupportedChain(t){_t.allowUnsupportedChain=t},setManualWCControl(t){_t.manualWCControl=t},setEnableNetworkSwitch(t){_t.enableNetworkSwitch=t},setEnableReconnect(t){_t.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(_t.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){_t.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return _t.universalProviderConfigOverride},getSnapshot(){return zy(_t)}},p7=Object.freeze({enabled:!0,events:[]}),m7=new vb({baseUrl:yt.getAnalyticsUrl(),clientId:null}),g7=5,y7=60*1e3,Bu=Zn({...p7}),b7={state:Bu,subscribeKey(t,e){return vs(Bu,t,e)},async sendError(t,e){if(!Bu.enabled)return;const n=Date.now();if(Bu.events.filter(o=>{const c=new Date(o.properties.timestamp||"").getTime();return n-c<y7}).length>=g7)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Bu.events.push(s);try{if(typeof window>"u")return;const{projectId:o,sdkType:c,sdkVersion:l}=Ke.state;await m7.post({path:"/e",params:{projectId:o,st:c,sv:l||"html-wagmi-4.2.2"},body:{eventId:yt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Bu.enabled=!0},disable(){Bu.enabled=!1},clearEvents(){Bu.events=[]}};class Cm extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Cm.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const o=r.stack,c=o.indexOf(`
`);if(c>-1){const l=o.substring(c+1);this.stack=`${this.name}: ${this.message}
${l}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Cm):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function q3(t,e){const n=t instanceof Cm?t:new Cm(t instanceof Error?t.message:String(t),e,t);throw b7.sendError(n,n.category),n}function io(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let o=s;s.constructor.name==="AsyncFunction"?o=async(...c)=>{try{return await s(...c)}catch(l){return q3(l,e)}}:o=(...c)=>{try{return s(...c)}catch(l){return q3(l,e)}},n[r]=o}else n[r]=s}),n}var Sm={};const w7="https://secure.walletconnect.org/sdk",v7=(typeof process<"u"&&typeof Sm<"u"?Sm.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||w7,E7=(typeof process<"u"&&typeof Sm<"u"?Sm.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",C7=(typeof process<"u"&&typeof Sm<"u"?Sm.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",bt={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Ur={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Rc={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},S7={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Rc.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",o=n.split("/")[2],c=encodeURIComponent(`${s}://${o}`);window.location.href=`${Rc.PHANTOM.url}/ul/browse/${r}?ref=${c}`}t===Rc.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Rc.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===Oe.CHAIN.SOLANA&&t===Rc.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Rc.COINBASE.url}/dapp?cb_url=${r}`)}},Vi=Zn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),_7={state:Vi,subscribeNetworkImages(t){return ws(Vi.networkImages,()=>t(Vi.networkImages))},subscribeKey(t,e){return vs(Vi,t,e)},subscribe(t){return ws(Vi,()=>t(Vi))},setWalletImage(t,e){Vi.walletImages[t]=e},setNetworkImage(t,e){Vi.networkImages[t]=e},setChainImage(t,e){Vi.chainImages[t]=e},setConnectorImage(t,e){Vi.connectorImages={...Vi.connectorImages,[t]:e}},setTokenImage(t,e){Vi.tokenImages[t]=e},setCurrencyImage(t,e){Vi.currencyImages[t]=e}},Sa=io(_7),x7={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},iC=Zn({networkImagePromises:{}}),HR={async fetchWalletImage(t){if(t)return await Tt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(iC.networkImagePromises[t]||(iC.networkImagePromises[t]=Tt._fetchNetworkImage(t)),await iC.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Sa.state.walletImages[t]},getWalletImage(t){if(t?.image_url)return t?.image_url;if(t?.image_id)return Sa.state.walletImages[t.image_id]},getNetworkImage(t){if(t?.assets?.imageUrl)return t?.assets?.imageUrl;if(t?.assets?.imageId)return Sa.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Sa.state.networkImages[t]},getConnectorImage(t){if(t?.imageUrl)return t.imageUrl;if(t?.info?.icon)return t.info.icon;if(t?.imageId)return Sa.state.connectorImages[t.imageId]},getChainImage(t){return Sa.state.networkImages[x7[t]]}},Fu=Zn({message:"",variant:"info",open:!1}),T7={state:Fu,subscribeKey(t,e){return vs(Fu,t,e)},open(t,e){const{debug:n}=Ke.state,{shortMessage:r,longMessage:s}=t;n&&(Fu.message=r,Fu.variant=e,Fu.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Fu.open=!1,Fu.message="",Fu.variant="info"}},er=io(T7),A7=yt.getAnalyticsUrl(),I7=new vb({baseUrl:A7,clientId:null}),N7=["MODAL_CREATED"],El=Zn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Rn={state:El,subscribe(t){return ws(El,()=>t(El))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Ke.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Et.state.address;if(N7.includes(t.data.event)||typeof window>"u")return;await I7.post({path:"/e",params:Rn.getSdkProperties(),body:{eventId:yt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),El.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===Oe.HTTP_STATUS_CODES.FORBIDDEN&&!El.reportedErrors.FORBIDDEN&&(er.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${J0()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),El.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){El.timestamp=Date.now(),El.data=t,(Ke.state.features?.analytics||t.event==="INITIALIZE")&&Rn._sendAnalyticsEvent(El)}},R7=yt.getApiUrl(),gi=new vb({baseUrl:R7,clientId:null}),O7=40,Q3=4,P7=20,Zt=Zn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Tt={state:Zt,subscribeKey(t,e){return vs(Zt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Ke.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return Ke.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${gi.baseUrl}/getWalletImage/${t}`,n=await gi.getBlob({path:e,params:Tt._getSdkProperties()});Sa.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${gi.baseUrl}/public/getAssetImage/${t}`,n=await gi.getBlob({path:e,params:Tt._getSdkProperties()});Sa.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${gi.baseUrl}/public/getAssetImage/${t}`,n=await gi.getBlob({path:e,params:Tt._getSdkProperties()});Sa.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${gi.baseUrl}/public/getCurrencyImage/${t}`,n=await gi.getBlob({path:e,params:Tt._getSdkProperties()});Sa.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${gi.baseUrl}/public/getTokenImage/${t}`,n=await gi.getBlob({path:e,params:Tt._getSdkProperties()});Sa.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return yt.isMobile()?t?.filter(n=>n.mobile_link||n.id===Rc.COINBASE.id?!0:ae.state.activeChain==="solana"&&(n.id===Rc.SOLFLARE.id||n.id===Rc.PHANTOM.id)):t},async fetchProjectConfig(){return(await gi.get({path:"/appkit/v1/config",params:Tt._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await gi.get({path:"/projects/v1/origins",params:Tt._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===Oe.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=Oe.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const e=ae.getAllRequestedCaipNetworks()?.map(({assets:n})=>n?.imageId).filter(Boolean).filter(n=>!HR.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Tt._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=at.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Tt._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Tt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Tt._fetchTokenImage(e)))},async fetchWallets(t){const e=t.exclude??[];Tt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Rc).map(o=>o.id));const r=await gi.get({path:"/getWallets",params:{...Tt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:t.include?.join(","),exclude:e.join(",")}});return{data:Tt._filterWalletsByPlatform(r?.data)||[],count:r?.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=Ke.state;if(t?.length){const e={...Tt._getSdkProperties(),page:1,entries:t?.length??Q3,include:t},{data:n}=await Tt.fetchWallets(e),r=[...n].sort((o,c)=>t.indexOf(o.id)-t.indexOf(c.id)),s=r.map(o=>o.image_id).filter(Boolean);await Promise.allSettled(s.map(o=>Tt._fetchWalletImage(o))),Zt.featured=r,Zt.allFeatured=r}},async fetchRecommendedWallets(){try{Zt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=Ke.state,r=[...e??[],...n??[]].filter(Boolean),s=ae.getRequestedCaipNetworkIds().join(","),o={page:1,entries:Q3,include:t,exclude:r,chains:s},{data:c,count:l}=await Tt.fetchWallets(o),p=nt.getRecentWallets(),m=c.map(v=>v.image_id).filter(Boolean),y=p.map(v=>v.image_id).filter(Boolean);await Promise.allSettled([...m,...y].map(v=>Tt._fetchWalletImage(v))),Zt.recommended=c,Zt.allRecommended=c,Zt.count=l??0}catch{}finally{Zt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=Ke.state,s=ae.getRequestedCaipNetworkIds().join(","),o=[...Zt.recommended.map(({id:y})=>y),...n??[],...r??[]].filter(Boolean),c={page:t,entries:O7,include:e,exclude:o,chains:s},{data:l,count:p}=await Tt.fetchWallets(c),m=l.slice(0,P7).map(y=>y.image_id).filter(Boolean);await Promise.allSettled(m.map(y=>Tt._fetchWalletImage(y))),Zt.wallets=yt.uniqueBy([...Zt.wallets,...Tt._filterOutExtensions(l)],"id").filter(y=>y.chains?.some(v=>s.includes(v))),Zt.count=p>Zt.count?p:Zt.count,Zt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Tt.fetchWallets(e);n&&n.forEach(r=>{Zt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=Ke.state,s=ae.getRequestedCaipNetworkIds().join(",");Zt.search=[];const o={page:1,entries:100,search:t?.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:c}=await Tt.fetchWallets(o);Rn.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const l=c.map(p=>p.image_id).filter(Boolean);await Promise.allSettled([...l.map(p=>Tt._fetchWalletImage(p)),yt.wait(300)]),Zt.search=Tt._filterOutExtensions(c)},initPromise(t,e){const n=Zt.promises[t];return n||(Zt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Tt.initPromise("connectorImages",Tt.fetchConnectorImages),e&&Tt.initPromise("featuredWallets",Tt.fetchFeaturedWallets),n&&Tt.initPromise("recommendedWallets",Tt.fetchRecommendedWallets),r&&Tt.initPromise("networkImages",Tt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){Ke.state.features?.analytics&&Tt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await gi.get({path:"/getAnalyticsConfig",params:Tt._getSdkProperties()});Ke.setFeatures({analytics:t})}catch{Ke.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!t?.length){Zt.featured=Zt.allFeatured,Zt.recommended=Zt.allRecommended;return}const e=ae.getRequestedCaipNetworkIds().join(",");Zt.featured=Zt.allFeatured.filter(n=>n.chains?.some(r=>e.includes(r))),Zt.recommended=Zt.allRecommended.filter(n=>n.chains?.some(r=>e.includes(r))),Zt.filteredWallets=Zt.wallets.filter(n=>n.chains?.some(r=>e.includes(r)))},clearFilterByNamespaces(){Zt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Zt.featured=Zt.allFeatured,Zt.recommended=Zt.allRecommended;return}const e=ae.getRequestedCaipNetworkIds().join(",");Zt.featured=Zt.allFeatured.filter(n=>n.chains?.some(r=>e.includes(r))),Zt.recommended=Zt.allRecommended.filter(n=>n.chains?.some(r=>e.includes(r))),Zt.filteredWallets=Zt.wallets.filter(n=>n.chains?.some(r=>e.includes(r)))}},Dn=Zn({view:"Connect",history:["Connect"],transactionStack:[]}),k7={state:Dn,subscribeKey(t,e){return vs(Dn,t,e)},pushTransactionStack(t){Dn.transactionStack.push(t)},popTransactionStack(t){const e=Dn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n?.();break;case"error":r?.(),Dt.goBack();break;case"cancel":s?.(),Dt.goBack();break}},push(t,e){t!==Dn.view&&(Dn.view=t,Dn.history.push(t),Dn.data=e)},reset(t,e){Dn.view=t,Dn.history=[t],Dn.data=e},replace(t,e){Dn.history.at(-1)===t||(Dn.view=t,Dn.history[Dn.history.length-1]=t,Dn.data=e)},goBack(){const t=ae.state.activeCaipAddress,e=Dt.state.view==="ConnectingFarcaster",n=!t&&e;if(Dn.history.length>1){Dn.history.pop();const[r]=Dn.history.slice(-1);r&&(t&&r==="Connect"?Dn.view="Account":Dn.view=r)}else mn.close();Dn.data?.wallet&&(Dn.data.wallet=void 0),setTimeout(()=>{if(n){Et.setFarcasterUrl(void 0,ae.state.activeChain);const r=at.getAuthConnector();r?.provider?.reload();const s=zy(Ke.state);r?.provider?.syncDappData?.({metadata:s.metadata,sdkVersion:s.sdkVersion,projectId:s.projectId,sdkType:s.sdkType})}},100)},goBackToIndex(t){if(Dn.history.length>1){Dn.history=Dn.history.slice(0,t+1);const[e]=Dn.history.slice(-1);e&&(Dn.view=e)}},goBackOrCloseModal(){Dt.state.history.length>1?Dt.goBack():mn.close()}},Dt=io(k7),Cl=Zn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),$S={state:Cl,subscribe(t){return ws(Cl,()=>t(Cl))},setThemeMode(t){Cl.themeMode=t;try{const e=at.getAuthConnector();if(e){const n=$S.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Ll(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Cl.themeVariables={...Cl.themeVariables,...t};try{const e=at.getAuthConnector();if(e){const n=$S.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Ll(Cl.themeVariables,Cl.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return zy(Cl)}},xi=io($S),XR={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},dn=Zn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...XR},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),L7={state:dn,subscribe(t){return ws(dn,()=>{t(dn)})},subscribeKey(t,e){return vs(dn,t,e)},initialize(t){t.forEach(e=>{const n=nt.getConnectedConnectorId(e);n&&at.setConnectorId(n,e)})},setActiveConnector(t){t&&(dn.activeConnector=af(t))},setConnectors(t){t.filter(s=>!dn.allConnectors.some(o=>o.id===s.id&&at.getConnectorName(o.name)===at.getConnectorName(s.name)&&o.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&dn.allConnectors.push(af(s))});const n=at.getEnabledNamespaces(),r=at.getEnabledConnectors(n);dn.connectors=at.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(dn.filterByNamespaceMap).forEach(e=>{dn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{dn.filterByNamespaceMap[e]=!0}),at.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){dn.filterByNamespaceMap[t]=e,at.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=at.getEnabledNamespaces(),e=at.getEnabledConnectors(t),n=at.areAllNamespacesEnabled();dn.connectors=at.mergeMultiChainConnectors(e),n?Tt.clearFilterByNamespaces():Tt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(dn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return dn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(dn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=at.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],o=s?.id===Oe.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:o?"AUTH":"MULTI_CHAIN",chain:"eip155",id:s?.id||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=at.getConnectorName(r);if(!s)return;const o=e.get(s)||[];o.find(l=>l.chain===n.chain)||o.push(n),e.set(s,o)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){if(t.id===Oe.CONNECTOR_ID.AUTH){const e=t,n=zy(Ke.state),r=xi.getSnapshot().themeMode,s=xi.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:n.metadata,sdkVersion:n.sdkVersion,projectId:n.projectId,sdkType:n.sdkType}),e?.provider?.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Ll(s,r)}),at.setConnectors([t])}else at.setConnectors([t])},getAuthConnector(t){const e=t||ae.state.activeChain,n=dn.connectors.find(r=>r.id===Oe.CONNECTOR_ID.AUTH);if(n)return n?.connectors?.length?n.connectors.find(s=>s.chain===e):n},getAnnouncedConnectorRdns(){return dn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>t.info?.rdns)},getConnectorById(t){return dn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return dn.allConnectors.filter(r=>r.chain===ae.state.activeChain).find(r=>r.explorerId===t||r.info?.rdns===e)},syncIfAuthConnector(t){if(t.id!=="ID_AUTH")return;const e=t,n=zy(Ke.state),r=xi.getSnapshot().themeMode,s=xi.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Ll(s,r)})},getConnectorsByNamespace(t){const e=dn.allConnectors.filter(n=>n.chain===t);return at.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return ae.checkIfSmartAccountEnabled()&&to(t)===Ur.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=at.getConnector(t.id,t.rdns);S7.handleMobileDeeplinkRedirect(e?.explorerId||t.id,ae.state.activeChain),e?Dt.push("ConnectingExternal",{connector:e,wallet:t}):Dt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?at.getConnectorsByNamespace(t):at.mergeMultiChainConnectors(dn.allConnectors)},setFilterByNamespace(t){dn.filterByNamespace=t,dn.connectors=at.getConnectors(t),Tt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(dn.activeConnectorIds={...dn.activeConnectorIds,[e]:t},nt.setConnectedConnectorId(e,t))},removeConnectorId(t){dn.activeConnectorIds={...dn.activeConnectorIds,[t]:void 0},nt.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return dn.activeConnectorIds[t]},isConnected(t){return t?!!dn.activeConnectorIds[t]:Object.values(dn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){dn.activeConnectorIds={...XR}}},at=io(L7),D7=1e3,D0={checkNamespaceConnectorId(t,e){return at.getConnectorId(t)===e},isSocialProvider(t){return En.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:o}){return new Promise((c,l)=>{if(t&&at.setActiveConnector(e),s?.(yt.isMobile()&&t),r){const m=mn.subscribeKey("open",y=>{y||(Dt.state.view!==r&&Dt.replace(r),m(),l(new Error("Modal closed")))})}const p=ae.subscribeKey("activeCaipAddress",m=>{m&&(o?.(),n&&mn.close(),p(),c(Ii.parseCaipAddress(m)))})})},connectExternal(t){return new Promise((e,n)=>{const r=ae.subscribeKey("activeCaipAddress",s=>{s&&(mn.close(),r(),e(Ii.parseCaipAddress(s)))});ut.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=Et.state.socialWindow,o=Et.state.socialProvider,c=!1,l=null;const p=ae.subscribeKey("activeCaipAddress",m=>{m&&(e&&mn.close(),p())});return new Promise((m,y)=>{async function v(_){if(_.data?.resultUri)if(_.origin===Oe.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",v,!1);try{const A=at.getAuthConnector();if(A&&!c){s&&(s.close(),Et.setSocialWindow(void 0,ae.state.activeChain),s=Et.state.socialWindow),c=!0;const N=_.data.resultUri;if(o&&Rn.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:o}}),o){nt.setConnectedSocialProvider(o),await ut.connectExternal({id:A.id,type:A.type,socialUri:N},A.chain);const R=ae.state.activeCaipAddress;if(!R){y(new Error("Failed to connect"));return}m(Ii.parseCaipAddress(R)),Rn.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:o,caipNetworkId:ae.getActiveCaipNetwork()?.caipNetworkId}})}}}catch{o&&Rn.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:o}}),y(new Error("Failed to connect"))}}else o&&Rn.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:o}})}async function S(){if(t&&(Et.setSocialProvider(t,ae.state.activeChain),o=Et.state.socialProvider,Rn.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:o}})),o==="farcaster"){n?.();const _=mn.subscribeKey("open",N=>{!N&&t==="farcaster"&&(y(new Error("Popup closed")),r?.(),_())}),A=at.getAuthConnector();if(A&&!Et.state.farcasterUrl)try{const{url:N}=await A.provider.getFarcasterUri();Et.setFarcasterUrl(N,ae.state.activeChain)}catch{y(new Error("Failed to connect to farcaster"))}}else{const _=at.getAuthConnector();l=yt.returnOpenHref(`${Oe.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(_&&o){const{uri:A}=await _.provider.getSocialRedirectUri({provider:o});if(l&&A){Et.setSocialWindow(l,ae.state.activeChain),s=Et.state.socialWindow,l.location.href=A;const N=setInterval(()=>{s?.closed&&!c&&(y(new Error("Popup closed")),clearInterval(N))},1e3);window.addEventListener("message",v,!1)}else l?.close(),y(new Error("Failed to initiate social connection"))}}catch{y(new Error("Failed to initiate social connection")),l?.close()}}}S()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,o)=>{if(n?.(),e){const l=mn.subscribeKey("open",p=>{p||(Dt.state.view!==e&&Dt.replace(e),l(),o(new Error("Modal closed")))})}const c=ae.subscribeKey("activeCaipAddress",l=>{l&&(r?.(),t&&mn.close(),c(),s(Ii.parseCaipAddress(l)))})})},async updateEmail(){const t=nt.getConnectedConnectorId(ae.state.activeChain),e=at.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==Oe.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return Dt.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const o=setInterval(()=>{const l=e.provider.getEmail()??"";l!==n&&(mn.close(),clearInterval(o),c(),r({email:l}))},D7),c=mn.subscribeKey("open",l=>{l||(Dt.state.view!=="Connect"&&Dt.push("Connect"),clearInterval(o),c(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return ae.checkIfSmartAccountEnabled()&&to(t)===Ur.ACCOUNT_TYPES.EOA}};function WR(){const t=ae.state.activeCaipNetwork?.chainNamespace||"eip155",e=ae.state.activeCaipNetwork?.id||1,n=En.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function to(t){return ae.getAccountData(t)?.preferredAccountType}const xv={getConnectionStatus(t,e){const n=at.state.activeConnectorIds[e],r=ut.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(c=>c.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const o=r.accounts.filter(c=>!n.some(p=>p.toLowerCase()===c.address.toLowerCase()));return{...r,accounts:o}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){const e=!!Ke.state.remoteFeatures?.multiWallet,n=at.state.activeConnectorIds[t],r=ut.getConnections(t),o=(ut.state.recentConnections.get(t)??[]).filter(l=>at.getConnectorById(l.connectorId)),c=xv.excludeExistingConnections([...r.map(l=>l.connectorId),...n?[n]:[]],o);return e?{connections:r,recentConnections:c}:{connections:r.filter(l=>l.connectorId.toLowerCase()===n?.toLowerCase()),recentConnections:[]}}},$h=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Or=Zn({...$h}),M7={state:Or,subscribeKey(t,e){return vs(Or,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=yt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Or.message=$h.message,Or.variant=$h.variant,Or.svg=$h.svg,Or.open=$h.open,Or.autoClose=$h.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=$h.autoClose}){Or.open?(Or.open=!1,setTimeout(()=>{Or.message=t,Or.variant=n,Or.svg=e,Or.open=!0,Or.autoClose=r},150)):(Or.message=t,Or.variant=n,Or.svg=e,Or.open=!0,Or.autoClose=r)}},kc=M7,ir=Zn({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),U7={state:ir,subscribe(t){return ws(ir,()=>t(ir))},setLastNetworkInView(t){ir.lastNetworkInView=t},async fetchTransactions(t){if(!t)throw new Error("Transactions can't be fetched without an accountAddress");ir.loading=!0;try{const e=await It.fetchTransactions({account:t,cursor:ir.next,chainId:ae.state.activeCaipNetwork?.caipNetworkId}),n=J1.filterSpamTransactions(e.data),r=J1.filterByConnectedChain(n),s=[...ir.transactions,...r];ir.loading=!1,ir.transactions=s,ir.transactionsByYear=J1.groupTransactionsByYearAndMonth(ir.transactionsByYear,r),ir.empty=s.length===0,ir.next=e.next?e.next:void 0}catch{const n=ae.state.activeChain;Rn.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:Ke.state.projectId,cursor:ir.next,isSmartAccount:to(n)===Ur.ACCOUNT_TYPES.SMART_ACCOUNT}}),kc.showError("Failed to fetch transactions"),ir.loading=!1,ir.empty=!0,ir.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),o=new Date(r.metadata.minedAt).getMonth(),c=n[s]??{},p=(c[o]??[]).filter(m=>m.id!==r.id);n[s]={...c,[o]:[...p,r].sort((m,y)=>new Date(y.metadata.minedAt).getTime()-new Date(m.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>r.nft_info?.flags.is_spam===!0))},filterByConnectedChain(t){const e=ae.state.activeCaipNetwork?.caipNetworkId;return t.filter(r=>r.metadata.chain===e)},clearCursor(){ir.next=void 0},resetTransactions(){ir.transactions=[],ir.transactionsByYear={},ir.lastNetworkInView=void 0,ir.loading=!1,ir.empty=!1,ir.next=void 0}},J1=io(U7,"API_ERROR"),hn=Zn({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Oh;const $7={state:hn,subscribe(t){return ws(hn,()=>t(hn))},subscribeKey(t,e){return vs(hn,t,e)},_getClient(){return hn._client},setClient(t){hn._client=af(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);ut.syncStorageConnections(e)},syncStorageConnections(t){const e=nt.getConnections(),n=t??Array.from(ae.state.chains.keys());for(const r of n){const s=e[r]??[],o=new Map(hn.recentConnections);o.set(r,s),hn.recentConnections=o}},getConnections(t){return t?hn.connections.get(t)??[]:[]},hasAnyConnection(t){const e=ut.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){if(yt.isTelegram()||yt.isSafari()&&yt.isIos()){if(Oh){await Oh,Oh=void 0;return}if(!yt.isPairingExpired(hn?.wcPairingExpiry)){const t=hn.wcUri;hn.wcUri=t;return}Oh=ut._getClient()?.connectWalletConnect?.().catch(()=>{}),ut.state.status="connecting",await Oh,Oh=void 0,hn.wcPairingExpiry=void 0,ut.state.status="connected"}else await ut._getClient()?.connectWalletConnect?.()},async connectExternal(t,e,n=!0){const r=await ut._getClient()?.connectExternal?.(t);return n&&ae.setActiveNamespace(e),r},async reconnectExternal(t){await ut._getClient()?.reconnectExternal?.(t);const e=t.chain||ae.state.activeChain;e&&at.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){if(!e)return;mn.setLoading(!0,ae.state.activeChain);const n=at.getAuthConnector();n&&(Et.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),nt.setPreferredAccountTypes(Object.entries(ae.state.chains).reduce((r,[s,o])=>{const c=s,l=to(c);return l!==void 0&&(r[c]=l),r},{})),await ut.reconnectExternal(n),mn.setLoading(!1,ae.state.activeChain),Rn.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:ae.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(t){return ut._getClient()?.signMessage(t)},parseUnits(t,e){return ut._getClient()?.parseUnits(t,e)},formatUnits(t,e){return ut._getClient()?.formatUnits(t,e)},async sendTransaction(t){return ut._getClient()?.sendTransaction(t)},async getCapabilities(t){return ut._getClient()?.getCapabilities(t)},async grantPermissions(t){return ut._getClient()?.grantPermissions(t)},async walletGetAssets(t){return ut._getClient()?.walletGetAssets(t)??{}},async estimateGas(t){return ut._getClient()?.estimateGas(t)},async writeContract(t){return ut._getClient()?.writeContract(t)},async getEnsAddress(t){return ut._getClient()?.getEnsAddress(t)},async getEnsAvatar(t){return ut._getClient()?.getEnsAvatar(t)},checkInstalled(t){return ut._getClient()?.checkInstalled?.(t)||!1},resetWcConnection(){hn.wcUri=void 0,hn.wcPairingExpiry=void 0,hn.wcLinking=void 0,hn.recentWallet=void 0,hn.status="disconnected",J1.resetTransactions(),nt.deleteWalletConnectDeepLink()},resetUri(){hn.wcUri=void 0,hn.wcPairingExpiry=void 0,Oh=void 0},finalizeWcConnection(){const{wcLinking:t,recentWallet:e}=ut.state;t&&nt.setWalletConnectDeepLink(t),e&&nt.setAppKitRecent(e),Rn.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:Dt.state.data?.wallet?.name||"Unknown",caipNetworkId:ae.getActiveCaipNetwork()?.caipNetworkId}})},setWcBasic(t){hn.wcBasic=t},setUri(t){hn.wcUri=t,hn.wcPairingExpiry=yt.getPairingExpiry()},setWcLinking(t){hn.wcLinking=t},setWcError(t){hn.wcError=t,hn.buffering=!1},setRecentWallet(t){hn.recentWallet=t},setBuffering(t){hn.buffering=t},setStatus(t){hn.status=t},setIsSwitchingConnection(t){hn.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){try{await ut._getClient()?.disconnect({id:t,chainNamespace:e,initialDisconnect:n})}catch(r){throw new Cm("Failed to disconnect","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){const n=new Map(hn.connections);n.set(e,t),hn.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){const n=Et.state.user?.accounts?.find(s=>s.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&D0.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await ut.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=at.getConnectorById(t.connectorId),s=t.connectorId===Oe.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await ut.handleAuthAccountSwitch({address:n,namespace:e});else return(await ut.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e))?.address;return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){const s=at.getConnectorById(t.connectorId),o=t.auth?.name?.toLowerCase(),c=t.connectorId===Oe.CONNECTOR_ID.AUTH,l=t.connectorId===Oe.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let p;if(c)if(o&&D0.isSocialProvider(o)){const{address:m}=await D0.connectSocial({social:o,closeModalOnConnect:r,onOpenFarcaster(){mn.open({view:"ConnectingFarcaster"})},onConnect(){Dt.replace("ProfileWallets")}});p=m}else{const{address:m}=await D0.connectEmail({closeModalOnConnect:r,onOpen(){mn.open({view:"EmailLogin"})},onConnect(){Dt.replace("ProfileWallets")}});p=m}else if(l){const{address:m}=await D0.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(y){mn.open({view:y?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Dt.replace("ProfileWallets")}});p=m}else{const m=await ut.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);m&&(p=m.address)}return c&&n&&await ut.handleAuthAccountSwitch({address:n,namespace:e}),p},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let o;const c=Et.getCaipAddress(n);if(c){const{address:p}=Ii.parseCaipAddress(c);o=p}const l=xv.getConnectionStatus(t,n);switch(l){case"connected":case"active":{const p=await ut.handleActiveConnection({connection:t,namespace:n,address:e});if(o&&p){const m=p.toLowerCase()!==o.toLowerCase();s?.({address:p,namespace:n,hasSwitchedAccount:m,hasSwitchedWallet:l==="active"})}break}case"disconnected":{const p=await ut.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});p&&s?.({address:p,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw new Error(`Invalid connection status: ${l}`)}}},ut=io($7),Mp=Zn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),xa={state:Mp,subscribe(t){return ws(Mp,()=>t(Mp))},subscribeOpen(t){return vs(Mp,"open",t)},set(t){Object.assign(Mp,{...Mp,...t})}},j7={async getTokenList(){const t=ae.state.activeCaipNetwork;return(await It.fetchSwapTokens({chainId:t?.caipNetworkId}))?.tokens?.map(r=>({...r,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[]},async fetchGasPrice(){const t=ae.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const e=(await ut?.estimateGas({chainNamespace:"solana"}))?.toString();return{standard:e,fast:e,instant:e};case"eip155":default:return await It.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await It.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s?.allowance&&n&&r){const o=ut.parseUnits(n,r)||0;return BigInt(s.allowance)>=o}return!1},async getMyTokensWithBalance(t){const e=await w5.getMyTokensWithBalance(t);return Et.setTokenBalance(e,ae.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return t?.map(e=>({...e,address:e?.address?e.address:WR(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[]}},Nn=Zn({tokenBalances:[],loading:!1}),B7={state:Nn,subscribe(t){return ws(Nn,()=>t(Nn))},subscribeKey(t,e){return vs(Nn,t,e)},setToken(t){t&&(Nn.token=af(t))},setTokenAmount(t){Nn.sendTokenAmount=t},setReceiverAddress(t){Nn.receiverAddress=t},setReceiverProfileImageUrl(t){Nn.receiverProfileImageUrl=t},setReceiverProfileName(t){Nn.receiverProfileName=t},setNetworkBalanceInUsd(t){Nn.networkBalanceInUSD=t},setLoading(t){Nn.loading=t},async sendToken(){try{switch(vn.setLoading(!0),ae.state.activeCaipNetwork?.chainNamespace){case"eip155":await vn.sendEvmToken();return;case"solana":await vn.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{vn.setLoading(!1)}},async sendEvmToken(){const t=ae.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=to(t);if(!vn.state.sendTokenAmount||!vn.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!vn.state.token)throw new Error("A token is required");vn.state.token?.address?(Rn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ur.ACCOUNT_TYPES.SMART_ACCOUNT,token:vn.state.token.address,amount:vn.state.sendTokenAmount,network:ae.state.activeCaipNetwork?.caipNetworkId||""}}),await vn.sendERC20Token({receiverAddress:vn.state.receiverAddress,tokenAddress:vn.state.token.address,sendTokenAmount:vn.state.sendTokenAmount,decimals:vn.state.token.quantity.decimals})):(Rn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ur.ACCOUNT_TYPES.SMART_ACCOUNT,token:vn.state.token.symbol||"",amount:vn.state.sendTokenAmount,network:ae.state.activeCaipNetwork?.caipNetworkId||""}}),await vn.sendNativeToken({receiverAddress:vn.state.receiverAddress,sendTokenAmount:vn.state.sendTokenAmount,decimals:vn.state.token.quantity.decimals}))},async fetchTokenBalance(t){Nn.loading=!0;const e=ae.state.activeCaipNetwork?.caipNetworkId,n=ae.state.activeCaipNetwork?.chainNamespace,r=ae.state.activeCaipAddress,s=r?yt.getPlainAddress(r):void 0;if(Nn.lastRetry&&!yt.isAllowedRetry(Nn.lastRetry,30*En.ONE_SEC_MS))return Nn.loading=!1,[];try{if(s&&e&&n){const o=await w5.getMyTokensWithBalance();return Nn.tokenBalances=o,Nn.lastRetry=void 0,o}}catch(o){Nn.lastRetry=Date.now(),t?.(o),kc.showError("Token Balance Unavailable")}finally{Nn.loading=!1}return[]},fetchNetworkBalance(){if(Nn.tokenBalances.length===0)return;const t=j7.mapBalancesToSwapTokens(Nn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===WR());e&&(Nn.networkBalanceInUSD=e?a7.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){Dt.pushTransactionStack({});const e=t.receiverAddress,n=Et.state.address,r=ut.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await ut.sendTransaction({chainNamespace:Oe.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),Rn.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:to("eip155")===Ur.ACCOUNT_TYPES.SMART_ACCOUNT,token:vn.state.token?.symbol||"",amount:t.sendTokenAmount,network:ae.state.activeCaipNetwork?.caipNetworkId||""}}),ut._getClient()?.updateBalance("eip155"),vn.resetSend()},async sendERC20Token(t){Dt.pushTransactionStack({onSuccess(){Dt.replace("Account")}});const e=ut.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Et.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=yt.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await ut.writeContract({fromAddress:Et.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:d7.getERC20Abi(n),chainNamespace:Oe.CHAIN.EVM}),vn.resetSend()}},async sendSolanaToken(){if(!vn.state.sendTokenAmount||!vn.state.receiverAddress)throw new Error("An amount and receiver address are required");Dt.pushTransactionStack({onSuccess(){Dt.replace("Account")}}),await ut.sendTransaction({chainNamespace:"solana",to:vn.state.receiverAddress,value:vn.state.sendTokenAmount}),ut._getClient()?.updateBalance("solana"),vn.resetSend()},resetSend(){Nn.token=void 0,Nn.sendTokenAmount=void 0,Nn.receiverAddress=void 0,Nn.receiverProfileImageUrl=void 0,Nn.receiverProfileName=void 0,Nn.loading=!1,Nn.tokenBalances=[]}},vn=io(B7),oC={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},A1={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},lt=Zn({chains:Q$(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),F7={state:lt,subscribe(t){return ws(lt,()=>{t(lt)})},subscribeKey(t,e){return vs(lt,t,e)},subscribeChainProp(t,e,n){let r;return ws(lt.chains,()=>{const s=n||lt.activeChain;if(s){const o=lt.chains.get(s)?.[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=nt.getActiveNetworkProps(),o=e?.find(y=>y.id.toString()===r?.toString()),l=t.find(y=>y?.namespace===s)||t?.[0],p=t.map(y=>y.namespace).filter(y=>y!==void 0),m=Ke.state.enableEmbedded?new Set([...p]):new Set([...e?.map(y=>y.chainNamespace)??[]]);(t?.length===0||!l)&&(lt.noAdapters=!0),lt.noAdapters||(lt.activeChain=l?.namespace,lt.activeCaipNetwork=o,ae.setChainNetworkData(l?.namespace,{caipNetwork:o}),lt.activeChain&&xa.set({activeChain:l?.namespace})),m.forEach(y=>{const v=e?.filter(A=>A.chainNamespace===y),S=nt.getPreferredAccountTypes()||{},_={...Ke.state.defaultAccountTypes,...S};ae.state.chains.set(y,{namespace:y,networkState:Zn({...A1,caipNetwork:v?.[0]}),accountState:Zn({...oC,preferredAccountType:_[y]}),caipNetworks:v??[],...n}),ae.setRequestedCaipNetworks(v??[],y)})},removeAdapter(t){if(lt.activeChain===t){const e=Array.from(lt.chains.entries()).find(([n])=>n!==t);if(e){const n=e[1]?.caipNetworks?.[0];n&&ae.setActiveCaipNetwork(n)}}lt.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");lt.chains.set(t.namespace,{namespace:t.namespace,networkState:{...A1,caipNetwork:r[0]},accountState:oC,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),ae.setRequestedCaipNetworks(r?.filter(s=>s.chainNamespace===t.namespace)??[],t.namespace)},addNetwork(t){const e=lt.chains.get(t.chainNamespace);if(e){const n=[...e.caipNetworks||[]];e.caipNetworks?.find(r=>r.id===t.id)||n.push(t),lt.chains.set(t.chainNamespace,{...e,caipNetworks:n}),ae.setRequestedCaipNetworks(n,t.chainNamespace),at.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){const n=lt.chains.get(t);if(n){const r=lt.activeCaipNetwork?.id===e,s=[...n.caipNetworks?.filter(o=>o.id!==e)||[]];r&&n?.caipNetworks?.[0]&&ae.setActiveCaipNetwork(n.caipNetworks[0]),lt.chains.set(t,{...n,caipNetworks:s}),ae.setRequestedCaipNetworks(s||[],t),s.length===0&&at.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=lt.chains.get(t);n&&(n.networkState={...n.networkState||A1,...e},lt.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=lt.chains.get(t);if(r){const s={...r.accountState||oC,...e};lt.chains.set(t,{...r,accountState:s}),(lt.chains.size===1||lt.activeChain===t)&&(e.caipAddress&&(lt.activeCaipAddress=e.caipAddress),Et.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=lt.chains.get(t);if(n){const r={...n.networkState||A1,...e};lt.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){ae.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){lt.activeChain=t;const e=t?lt.chains.get(t):void 0,n=e?.networkState?.caipNetwork;n?.id&&t&&(lt.activeCaipAddress=e?.accountState?.caipAddress,lt.activeCaipNetwork=n,ae.setChainNetworkData(t,{caipNetwork:n}),nt.setActiveCaipNetworkId(n?.caipNetworkId),xa.set({activeChain:t,selectedNetworkId:n?.caipNetworkId}))},setActiveCaipNetwork(t){if(!t)return;lt.activeChain!==t.chainNamespace&&ae.setIsSwitchingNamespace(!0);const e=lt.chains.get(t.chainNamespace);lt.activeChain=t.chainNamespace,lt.activeCaipNetwork=t,ae.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),e?.accountState?.address?lt.activeCaipAddress=`${t.chainNamespace}:${t.id}:${e?.accountState?.address}`:lt.activeCaipAddress=void 0,ae.setAccountProp("caipAddress",lt.activeCaipAddress,t.chainNamespace),e&&Et.replaceState(e.accountState),vn.resetSend(),xa.set({activeChain:lt.activeChain,selectedNetworkId:lt.activeCaipNetwork?.caipNetworkId}),nt.setActiveCaipNetworkId(t.caipNetworkId),!ae.checkIfSupportedNetwork(t.chainNamespace)&&Ke.state.enableNetworkSwitch&&!Ke.state.allowUnsupportedChain&&!ut.state.wcBasic&&ae.showUnsupportedChainUI()},addCaipNetwork(t){if(!t)return;const e=lt.chains.get(t.chainNamespace);e&&e?.caipNetworks?.push(t)},async switchActiveNamespace(t){if(!t)return;const e=t!==ae.state.activeChain,n=ae.getNetworkData(t)?.caipNetwork,r=ae.getCaipNetworkByNamespace(t,n?.id);e&&r&&await ae.switchActiveNetwork(r)},async switchActiveNetwork(t){const e=ae.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const r=!ae.state.chains.get(e)?.caipNetworks?.some(o=>o.id===lt.activeCaipNetwork?.id),s=ae.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&mn.close()}catch{Dt.goBack()}Rn.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||lt.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=lt.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||lt.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=lt.chains.get(e);if(!n?.connectionControllerClient)throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){let n=lt.activeChain;if(e&&(n=e),!n)return;const r=lt.chains.get(n)?.accountState;if(r)return r[t]},getNetworkProp(t,e){const n=lt.chains.get(e)?.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=lt.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=e?.networkState||{};return yt.sortRequestedNetworks(n,r).filter(c=>c?.id)},getAllRequestedCaipNetworks(){const t=[];return lt.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=ae.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){ae.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=ae.getAllRequestedCaipNetworks().map(o=>o.chainNamespace),s=Array.from(new Set(r));at.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return lt.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=ae.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){return t?lt.chains.get(t)?.networkState?.caipNetwork:lt.activeCaipNetwork},getActiveCaipAddress(){return lt.activeCaipAddress},getApprovedCaipNetworkIds(t){return lt.chains.get(t)?.networkState?.approvedCaipNetworkIds||[]},async setApprovedCaipNetworksData(t){const n=await ae.getNetworkControllerClient()?.getApprovedCaipNetworksData();ae.setAdapterNetworkState(t,{approvedCaipNetworkIds:n?.approvedCaipNetworkIds,supportsAllNetworks:n?.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||lt.activeCaipNetwork?.caipNetworkId,r=ae.getRequestedCaipNetworks(t);return r.length?r?.some(s=>s.caipNetworkId===n):!0},checkIfSupportedChainId(t){return lt.activeChain?ae.getRequestedCaipNetworks(lt.activeChain)?.some(n=>n.id===t):!0},setSmartAccountEnabledNetworks(t,e){ae.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){const t=Gy.caipNetworkIdToNumber(lt.activeCaipNetwork?.caipNetworkId),e=lt.activeChain;return!e||!t?!1:!!ae.getNetworkProp("smartAccountEnabledNetworks",e)?.includes(Number(t))},showUnsupportedChainUI(){mn.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=lt.activeCaipNetwork;return!!(t?.chainNamespace&&En.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){ae.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=Ke.state.defaultAccountTypes[e],r=ae.getAccountProp("preferredAccountType",e);lt.activeCaipAddress=void 0,ae.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n||r,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),at.removeConnectorId(e)},setIsSwitchingNamespace(t){lt.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){const t=[];let e;if(lt.chains.forEach(n=>{Oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(r=>r===n.namespace)&&n.namespace&&t.push(n.namespace)}),t.length>0){const n=t[0];return e=n?lt.chains.get(n)?.caipNetworks?.[0]:void 0,e}},getAccountData(t){return t?ae.state.chains.get(t)?.accountState:Et.state},getNetworkData(t){const e=t||lt.activeChain;if(e)return ae.state.chains.get(e)?.networkState},getCaipNetworkByNamespace(t,e){if(!t)return;const n=ae.state.chains.get(t),r=n?.caipNetworks?.find(s=>s.id===e);return r||n?.networkState?.caipNetwork||n?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const t=at.state.filterByNamespace;return(t?[lt.chains.get(t)]:Array.from(lt.chains.values())).flatMap(n=>n?.caipNetworks||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?ae.getRequestedCaipNetworks(t):ae.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){lt.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return lt.lastConnectedSIWECaipNetwork}},ae=io(F7),Z7={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},VR=yt.getBlockchainApiUrl(),yi=Zn({clientId:null,api:new vb({baseUrl:VR,clientId:null}),supportedChains:{http:[],ws:[]}}),It={state:yi,async get(t){const{st:e,sv:n}=It.getSdkProperties(),r=Ke.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return yi.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=Ke.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{yi.supportedChains.http.length||await It.getSupportedNetworks()}catch{return!1}return yi.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await It.get({path:"v1/supported-chains"});return yi.supportedChains=t,t}catch{return yi.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await It.isNetworkSupported(e))return{avatar:"",name:""};const r=nt.getIdentityFromCacheForAddress(t);if(r)return r;const s=await It.get({path:`/v1/identity/${t}`,params:{sender:ae.state.activeCaipAddress?yt.getPlainAddress(ae.state.activeCaipAddress):void 0}});return nt.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,signal:n,cache:r,chainId:s}){return await It.isNetworkSupported(ae.state.activeCaipNetwork?.caipNetworkId)?It.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:n,cache:r}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){return await It.isNetworkSupported(ae.state.activeCaipNetwork?.caipNetworkId)?It.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){return await It.isNetworkSupported(ae.state.activeCaipNetwork?.caipNetworkId)?It.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){return await It.isNetworkSupported(ae.state.activeCaipNetwork?.caipNetworkId)?yi.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:Ke.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){return await It.isNetworkSupported(ae.state.activeCaipNetwork?.caipNetworkId)?It.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){const{st:e,sv:n}=It.getSdkProperties();if(!await It.isNetworkSupported(ae.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return It.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){if(!await It.isNetworkSupported(ae.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return yi.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:En.CONVERT_SLIPPAGE_TOLERANCE},projectId:Ke.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){const{st:r,sv:s}=It.getSdkProperties();if(!await It.isNetworkSupported(ae.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return It.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){const{st:r,sv:s}=It.getSdkProperties();if(!await It.isNetworkSupported(ae.state.activeCaipNetwork?.caipNetworkId))return kc.showError("Token Balance Unavailable"),{balances:[]};const c=`${e}:${t}`,l=nt.getBalanceCacheForCaipAddress(c);if(l)return l;const p=await It.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return nt.updateBalanceCache({caipAddress:c,balance:p,timestamp:Date.now()}),p},async lookupEnsName(t){return await It.isNetworkSupported(ae.state.activeCaipNetwork?.caipNetworkId)?It.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){return await It.isNetworkSupported(ae.state.activeCaipNetwork?.caipNetworkId)?It.get({path:`/v1/profile/reverse/${t}`,params:{sender:Et.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){return await It.isNetworkSupported(ae.state.activeCaipNetwork?.caipNetworkId)?It.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){return await It.isNetworkSupported(ae.state.activeCaipNetwork?.caipNetworkId)?yi.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){return await It.isNetworkSupported(ae.state.activeCaipNetwork?.caipNetworkId)?(await yi.api.post({path:"/v1/generators/onrampurl",params:{projectId:Ke.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){if(!await It.isNetworkSupported(ae.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await It.get({path:"/v1/onramp/options"})}catch{return Z7}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){try{return await It.isNetworkSupported(ae.state.activeCaipNetwork?.caipNetworkId)?await yi.api.post({path:"/v1/onramp/quote",params:{projectId:Ke.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){return await It.isNetworkSupported(ae.state.activeCaipNetwork?.caipNetworkId)?It.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){return await It.isNetworkSupported(ae.state.activeCaipNetwork?.caipNetworkId)?yi.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:Ke.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){yi.clientId=t,yi.api=new vb({baseUrl:VR,clientId:t})}},aC={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Pm(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},w5={async getMyTokensWithBalance(t){const e=Et.state.address,n=ae.state.activeCaipNetwork,r=at.getConnectorId("eip155")===Oe.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,o=nt.getBalanceCacheForCaipAddress(s);if(o)return o.balances;if(n.chainNamespace===Oe.CHAIN.EVM&&r){const l=await this.getEIP155Balances(e,n);if(l)return this.filterLowQualityTokens(l)}const c=await It.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(c.balances)},async getEIP155Balances(t,e){try{const n=aC.getChainIdHexFromCAIP2ChainId(e.caipNetworkId);if(!(await ut.getCapabilities(t))?.[n]?.assetDiscovery?.supported)return null;const s=await ut.walletGetAssets({account:t,chainFilter:[n]});if(!aC.isWalletGetAssetsResponse(s))return null;const c=(s[n]||[]).map(l=>aC.createBalance(l,e.caipNetworkId));return nt.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Cc=Zn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),z7={state:Cc,replaceState(t){t&&Object.assign(Cc,af(t))},subscribe(t){return ae.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return ae.subscribeChainProp("accountState",s=>{if(s){const o=s[t];r!==o&&(r=o,e(o))}},n)},setStatus(t,e){ae.setAccountProp("status",t,e)},getCaipAddress(t){return ae.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?yt.getPlainAddress(t):void 0;e===ae.state.activeChain&&(ae.state.activeCaipAddress=t),ae.setAccountProp("caipAddress",t,e),ae.setAccountProp("address",n,e)},setBalance(t,e,n){ae.setAccountProp("balance",t,n),ae.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){ae.setAccountProp("profileName",t,e)},setProfileImage(t,e){ae.setAccountProp("profileImage",t,e)},setUser(t,e){ae.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){ae.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){ae.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){ae.setAccountProp("currentTab",t,ae.state.activeChain)},setTokenBalance(t,e){t&&ae.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){ae.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=ae.getAccountProp("addressLabels",n)||new Map;r.set(t,e),ae.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=ae.getAccountProp("addressLabels",e)||new Map;n.delete(t),ae.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){ae.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){ae.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&ae.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){ae.setAccountProp("socialWindow",t?af(t):void 0,e)},setFarcasterUrl(t,e){ae.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){Cc.balanceLoading=!0;const e=ae.state.activeCaipNetwork?.caipNetworkId,n=ae.state.activeCaipNetwork?.chainNamespace,r=ae.state.activeCaipAddress,s=r?yt.getPlainAddress(r):void 0;if(Cc.lastRetry&&!yt.isAllowedRetry(Cc.lastRetry,30*En.ONE_SEC_MS))return Cc.balanceLoading=!1,[];try{if(s&&e&&n){const o=await w5.getMyTokensWithBalance();return Et.setTokenBalance(o,n),Cc.lastRetry=void 0,Cc.balanceLoading=!1,o}}catch(o){Cc.lastRetry=Date.now(),t?.(o),kc.showError("Token Balance Unavailable")}finally{Cc.balanceLoading=!1}return[]},resetAccount(t){ae.resetAccount(t)}},Et=io(z7),G7={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=ae.state.activeCaipNetwork,r=Dt.state.data;if(t.id===n?.id)return;const o=Et.getCaipAddress(ae.state.activeChain),c=t.chainNamespace!==ae.state.activeChain,l=Et.getCaipAddress(t.chainNamespace),m=at.getConnectorId(ae.state.activeChain)===Oe.CONNECTOR_ID.AUTH,y=Oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(v=>v===t.chainNamespace);e||m&&y?Dt.push("SwitchNetwork",{...r,network:t}):o&&c&&!l?Dt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Dt.push("SwitchNetwork",{...r,network:t})}},bi=Zn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),H7={state:bi,subscribe(t){return ws(bi,()=>t(bi))},subscribeKey(t,e){return vs(bi,t,e)},async open(t){const e=t?.namespace,n=ae.state.activeChain,r=e&&e!==n,s=ae.getAccountData(t?.namespace)?.caipAddress;if(ut.state.wcBasic?Tt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Tt.prefetch(),at.setFilterByNamespace(t?.namespace),mn.setLoading(!0,e),e&&r){const o=ae.getNetworkData(e)?.caipNetwork||ae.getRequestedCaipNetworks(e)[0];o&&G7.onSwitchNetwork({network:o,ignoreSwitchConfirmation:!0})}else{const o=ae.state.noAdapters;Ke.state.manualWCControl||o&&!s?yt.isMobile()?Dt.reset("AllWallets"):Dt.reset("ConnectingWalletConnectBasic"):t?.view?Dt.reset(t.view,t.data):s?Dt.reset("Account"):Dt.reset("Connect")}bi.open=!0,xa.set({open:!0}),Rn.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=Ke.state.enableEmbedded,e=!!ae.state.activeCaipAddress;bi.open&&Rn.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),bi.open=!1,Dt.reset("Connect"),mn.clearLoading(),t?e?Dt.replace("Account"):Dt.push("Connect"):xa.set({open:!1}),ut.resetUri()},setLoading(t,e){e&&bi.loadingNamespaceMap.set(e,t),bi.loading=t,xa.set({loading:t})},clearLoading(){bi.loadingNamespaceMap.clear(),bi.loading=!1,xa.set({loading:!1})},shake(){bi.shake||(bi.shake=!0,setTimeout(()=>{bi.shake=!1},500))}},mn=io(H7),oy={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},jS={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},X7={providers:GR,selectedProvider:null,error:null,purchaseCurrency:oy,paymentCurrency:jS,purchaseCurrencies:[oy],paymentCurrencies:[],quotesLoading:!1},cn=Zn(X7),W7={state:cn,subscribe(t){return ws(cn,()=>t(cn))},subscribeKey(t,e){return vs(cn,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=ae.state.activeChain,n=e===Oe.CHAIN.SOLANA?"SOL":"USDC",r=ae.getAccountProp("address",e)??"",s=new URL(t.url);s.searchParams.append("publicKey",h7),s.searchParams.append("destinationCurrencyCode",n),s.searchParams.append("walletAddress",r),s.searchParams.append("externalCustomerId",Ke.state.projectId),cn.selectedProvider={...t,url:s.toString()}}else cn.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=GR.filter(r=>e.includes(r.name));cn.providers=n}else cn.providers=[]},setPurchaseCurrency(t){cn.purchaseCurrency=t},setPaymentCurrency(t){cn.paymentCurrency=t},setPurchaseAmount(t){BS.state.purchaseAmount=t},setPaymentAmount(t){BS.state.paymentAmount=t},async getAvailableCurrencies(){const t=await It.getOnrampOptions();cn.purchaseCurrencies=t.purchaseCurrencies,cn.paymentCurrencies=t.paymentCurrencies,cn.paymentCurrency=t.paymentCurrencies[0]||jS,cn.purchaseCurrency=t.purchaseCurrencies[0]||oy,await Tt.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Tt.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){cn.quotesLoading=!0;try{const t=await It.getOnrampQuote({purchaseCurrency:cn.purchaseCurrency,paymentCurrency:cn.paymentCurrency,amount:cn.paymentAmount?.toString()||"0",network:cn.purchaseCurrency?.symbol});return cn.quotesLoading=!1,cn.purchaseAmount=Number(t?.purchaseAmount.amount),t}catch(t){return cn.error=t.message,cn.quotesLoading=!1,null}finally{cn.quotesLoading=!1}},resetState(){cn.selectedProvider=null,cn.error=null,cn.purchaseCurrency=oy,cn.paymentCurrency=jS,cn.purchaseCurrencies=[oy],cn.paymentCurrencies=[],cn.paymentAmount=void 0,cn.purchaseAmount=void 0,cn.quotesLoading=!1}},BS=io(W7),J3=2147483648,V7={convertEVMChainIdToCoinType(t){if(t>=J3)throw new Error("Invalid chainId");return(J3|t)>>>0}},To=Zn({suggestions:[],loading:!1}),K7={state:To,subscribe(t){return ws(To,()=>t(To))},subscribeKey(t,e){return vs(To,t,e)},async resolveName(t){try{return await It.lookupEnsName(t)}catch(e){const n=e;throw new Error(n?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(t){try{return await It.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{To.loading=!0,To.suggestions=[];const e=await It.getEnsNameSuggestions(t);return To.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],To.suggestions}catch(e){const n=ay.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{To.loading=!1}},async getNamesForAddress(t){try{if(!ae.state.activeCaipNetwork)return[];const n=nt.getEnsFromCacheForAddress(t);if(n)return n;const r=await It.reverseLookupEnsName({address:t});return nt.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=ay.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=ae.state.activeCaipNetwork,n=Et.state.address,r=at.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");To.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Dt.pushTransactionStack({onCancel(){Dt.replace("RegisterAccountName")}});const o=await ut.signMessage(s);To.loading=!1;const c=e.id;if(!c)throw new Error("Network not found");const l=V7.convertEVMChainIdToCoinType(Number(c));await It.registerEnsName({coinType:l,address:n,signature:o,message:s}),Et.setProfileName(t,e.chainNamespace),Dt.replace("RegisterAccountNameSuccess")}catch(s){const o=ay.parseEnsApiError(s,`Error registering name ${t}`);throw Dt.replace("RegisterAccountName"),new Error(o)}finally{To.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){return t?.reasons?.[0]?.description||e}},ay=io(K7);var I1={exports:{}},eT;function Y7(){if(eT)return I1.exports;eT=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(j,L,Z){return Function.prototype.apply.call(j,L,Z)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(j){return Object.getOwnPropertyNames(j).concat(Object.getOwnPropertySymbols(j))}:n=function(j){return Object.getOwnPropertyNames(j)};function r(X){console&&console.warn&&console.warn(X)}var s=Number.isNaN||function(j){return j!==j};function o(){o.init.call(this)}I1.exports=o,I1.exports.once=$,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var c=10;function l(X){if(typeof X!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof X)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(X){if(typeof X!="number"||X<0||s(X))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+X+".");c=X}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(j){if(typeof j!="number"||j<0||s(j))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+j+".");return this._maxListeners=j,this};function p(X){return X._maxListeners===void 0?o.defaultMaxListeners:X._maxListeners}o.prototype.getMaxListeners=function(){return p(this)},o.prototype.emit=function(j){for(var L=[],Z=1;Z<arguments.length;Z++)L.push(arguments[Z]);var U=j==="error",D=this._events;if(D!==void 0)U=U&&D.error===void 0;else if(!U)return!1;if(U){var B;if(L.length>0&&(B=L[0]),B instanceof Error)throw B;var W=new Error("Unhandled error."+(B?" ("+B.message+")":""));throw W.context=B,W}var K=D[j];if(K===void 0)return!1;if(typeof K=="function")e(K,this,L);else for(var he=K.length,pe=A(K,he),Z=0;Z<he;++Z)e(pe[Z],this,L);return!0};function m(X,j,L,Z){var U,D,B;if(l(L),D=X._events,D===void 0?(D=X._events=Object.create(null),X._eventsCount=0):(D.newListener!==void 0&&(X.emit("newListener",j,L.listener?L.listener:L),D=X._events),B=D[j]),B===void 0)B=D[j]=L,++X._eventsCount;else if(typeof B=="function"?B=D[j]=Z?[L,B]:[B,L]:Z?B.unshift(L):B.push(L),U=p(X),U>0&&B.length>U&&!B.warned){B.warned=!0;var W=new Error("Possible EventEmitter memory leak detected. "+B.length+" "+String(j)+" listeners added. Use emitter.setMaxListeners() to increase limit");W.name="MaxListenersExceededWarning",W.emitter=X,W.type=j,W.count=B.length,r(W)}return X}o.prototype.addListener=function(j,L){return m(this,j,L,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(j,L){return m(this,j,L,!0)};function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(X,j,L){var Z={fired:!1,wrapFn:void 0,target:X,type:j,listener:L},U=y.bind(Z);return U.listener=L,Z.wrapFn=U,U}o.prototype.once=function(j,L){return l(L),this.on(j,v(this,j,L)),this},o.prototype.prependOnceListener=function(j,L){return l(L),this.prependListener(j,v(this,j,L)),this},o.prototype.removeListener=function(j,L){var Z,U,D,B,W;if(l(L),U=this._events,U===void 0)return this;if(Z=U[j],Z===void 0)return this;if(Z===L||Z.listener===L)--this._eventsCount===0?this._events=Object.create(null):(delete U[j],U.removeListener&&this.emit("removeListener",j,Z.listener||L));else if(typeof Z!="function"){for(D=-1,B=Z.length-1;B>=0;B--)if(Z[B]===L||Z[B].listener===L){W=Z[B].listener,D=B;break}if(D<0)return this;D===0?Z.shift():N(Z,D),Z.length===1&&(U[j]=Z[0]),U.removeListener!==void 0&&this.emit("removeListener",j,W||L)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(j){var L,Z,U;if(Z=this._events,Z===void 0)return this;if(Z.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Z[j]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Z[j]),this;if(arguments.length===0){var D=Object.keys(Z),B;for(U=0;U<D.length;++U)B=D[U],B!=="removeListener"&&this.removeAllListeners(B);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(L=Z[j],typeof L=="function")this.removeListener(j,L);else if(L!==void 0)for(U=L.length-1;U>=0;U--)this.removeListener(j,L[U]);return this};function S(X,j,L){var Z=X._events;if(Z===void 0)return[];var U=Z[j];return U===void 0?[]:typeof U=="function"?L?[U.listener||U]:[U]:L?R(U):A(U,U.length)}o.prototype.listeners=function(j){return S(this,j,!0)},o.prototype.rawListeners=function(j){return S(this,j,!1)},o.listenerCount=function(X,j){return typeof X.listenerCount=="function"?X.listenerCount(j):_.call(X,j)},o.prototype.listenerCount=_;function _(X){var j=this._events;if(j!==void 0){var L=j[X];if(typeof L=="function")return 1;if(L!==void 0)return L.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function A(X,j){for(var L=new Array(j),Z=0;Z<j;++Z)L[Z]=X[Z];return L}function N(X,j){for(;j+1<X.length;j++)X[j]=X[j+1];X.pop()}function R(X){for(var j=new Array(X.length),L=0;L<j.length;++L)j[L]=X[L].listener||X[L];return j}function $(X,j){return new Promise(function(L,Z){function U(B){X.removeListener(j,D),Z(B)}function D(){typeof X.removeListener=="function"&&X.removeListener("error",U),L([].slice.call(arguments))}F(X,j,D,{once:!0}),j!=="error"&&G(X,U,{once:!0})})}function G(X,j,L){typeof X.on=="function"&&F(X,"error",j,L)}function F(X,j,L,Z){if(typeof X.on=="function")Z.once?X.once(j,L):X.on(j,L);else if(typeof X.addEventListener=="function")X.addEventListener(j,function U(D){Z.once&&X.removeEventListener(j,U),L(D)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof X)}return I1.exports}var Zo=Y7();const v5=Rm(Zo);var cC={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var FS=function(t,e){return FS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},FS(t,e)};function q7(t,e){FS(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ZS=function(){return ZS=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ZS.apply(this,arguments)};function Q7(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function J7(t,e,n,r){var s=arguments.length,o=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(c=t[l])&&(o=(s<3?c(o):s>3?c(e,n,o):c(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function ej(t,e){return function(n,r){e(n,r,t)}}function tj(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function nj(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function l(y){try{m(r.next(y))}catch(v){c(v)}}function p(y){try{m(r.throw(y))}catch(v){c(v)}}function m(y){y.done?o(y.value):s(y.value).then(l,p)}m((r=r.apply(t,e||[])).next())})}function rj(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(m){return function(y){return p([m,y])}}function p(m){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(o=m[0]&2?s.return:m[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,m[1])).done)return o;switch(s=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){n.label=m[1];break}if(m[0]===6&&n.label<o[1]){n.label=o[1],o=m;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(m);break}o[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(y){m=[6,y],s=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function sj(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function ij(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function zS(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function KR(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],c;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(l){c={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(c)throw c.error}}return o}function oj(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(KR(arguments[e]));return t}function aj(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var o=arguments[e],c=0,l=o.length;c<l;c++,s++)r[s]=o[c];return r}function Hy(t){return this instanceof Hy?(this.v=t,this):new Hy(t)}function cj(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,o=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(S){r[S]&&(s[S]=function(_){return new Promise(function(A,N){o.push([S,_,A,N])>1||l(S,_)})})}function l(S,_){try{p(r[S](_))}catch(A){v(o[0][3],A)}}function p(S){S.value instanceof Hy?Promise.resolve(S.value.v).then(m,y):v(o[0][2],S)}function m(S){l("next",S)}function y(S){l("throw",S)}function v(S,_){S(_),o.shift(),o.length&&l(o[0][0],o[0][1])}}function lj(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,o){e[s]=t[s]?function(c){return(n=!n)?{value:Hy(t[s](c)),done:s==="return"}:o?o(c):c}:o}}function uj(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof zS=="function"?zS(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(c){return new Promise(function(l,p){c=t[o](c),s(l,p,c.done,c.value)})}}function s(o,c,l,p){Promise.resolve(p).then(function(m){o({value:m,done:l})},c)}}function dj(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function hj(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function fj(t){return t&&t.__esModule?t:{default:t}}function pj(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function mj(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const gj=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return ZS},__asyncDelegator:lj,__asyncGenerator:cj,__asyncValues:uj,__await:Hy,__awaiter:nj,__classPrivateFieldGet:pj,__classPrivateFieldSet:mj,__createBinding:sj,__decorate:J7,__exportStar:ij,__extends:q7,__generator:rj,__importDefault:fj,__importStar:hj,__makeTemplateObject:dj,__metadata:tj,__param:ej,__read:KR,__rest:Q7,__spread:oj,__spreadArrays:aj,__values:zS},Symbol.toStringTag,{value:"Module"})),f2=ON(gj);var lC={},M0={},tT;function yj(){if(tT)return M0;tT=1,Object.defineProperty(M0,"__esModule",{value:!0}),M0.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return M0.delay=t,M0}var Ph={},uC={},kh={},nT;function bj(){return nT||(nT=1,Object.defineProperty(kh,"__esModule",{value:!0}),kh.ONE_THOUSAND=kh.ONE_HUNDRED=void 0,kh.ONE_HUNDRED=100,kh.ONE_THOUSAND=1e3),kh}var dC={},rT;function wj(){return rT||(rT=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(dC)),dC}var sT;function YR(){return sT||(sT=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=f2;e.__exportStar(bj(),t),e.__exportStar(wj(),t)}(uC)),uC}var iT;function vj(){if(iT)return Ph;iT=1,Object.defineProperty(Ph,"__esModule",{value:!0}),Ph.fromMiliseconds=Ph.toMiliseconds=void 0;const t=YR();function e(r){return r*t.ONE_THOUSAND}Ph.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Ph.fromMiliseconds=n,Ph}var oT;function Ej(){return oT||(oT=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=f2;e.__exportStar(yj(),t),e.__exportStar(vj(),t)}(lC)),lC}var Up={},aT;function Cj(){if(aT)return Up;aT=1,Object.defineProperty(Up,"__esModule",{value:!0}),Up.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Up.Watch=t,Up.default=t,Up}var hC={},U0={},cT;function Sj(){if(cT)return U0;cT=1,Object.defineProperty(U0,"__esModule",{value:!0}),U0.IWatch=void 0;class t{}return U0.IWatch=t,U0}var lT;function _j(){return lT||(lT=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),f2.__exportStar(Sj(),t)}(hC)),hC}var uT;function xj(){return uT||(uT=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=f2;e.__exportStar(Ej(),t),e.__exportStar(Cj(),t),e.__exportStar(_j(),t),e.__exportStar(YR(),t)}(cC)),cC}var ct=xj();class vf{}let Tj=class extends vf{constructor(e){super()}};const dT=ct.FIVE_SECONDS,Ef={pulse:"heartbeat_pulse"};let Aj=class qR extends Tj{constructor(e){super(e),this.events=new Zo.EventEmitter,this.interval=dT,this.interval=e?.interval||dT}static async init(e){const n=new qR(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),ct.toMiliseconds(this.interval))}pulse(){this.events.emit(Ef.pulse)}};const Ij=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Nj=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Rj=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Oj(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Pj(t);return}return e}function Pj(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function N1(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Rj.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Ij.test(t)||Nj.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Oj)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function kj(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Yr(t,...e){try{return kj(t(...e))}catch(n){return Promise.reject(n)}}function Lj(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Dj(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function ev(t){if(Lj(t))return String(t);if(Dj(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return ev(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const GS="base64:";function Mj(t){return typeof t=="string"?t:GS+jj(t)}function Uj(t){return typeof t!="string"||!t.startsWith(GS)?t:$j(t.slice(GS.length))}function $j(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function jj(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Si(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function Bj(...t){return Si(t.join(":"))}function R1(t){return t=Si(t),t?t+":":""}function Fj(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function Zj(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const zj="memory",Gj=()=>{const t=new Map;return{name:zj,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function Hj(t={}){const e={mounts:{"":t.driver||Gj()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=m=>{for(const y of e.mountpoints)if(m.startsWith(y))return{base:y,relativeKey:m.slice(y.length),driver:e.mounts[y]};return{base:"",relativeKey:m,driver:e.mounts[""]}},r=(m,y)=>e.mountpoints.filter(v=>v.startsWith(m)||y&&m.startsWith(v)).map(v=>({relativeBase:m.length>v.length?m.slice(v.length):void 0,mountpoint:v,driver:e.mounts[v]})),s=(m,y)=>{if(e.watching){y=Si(y);for(const v of e.watchListeners)v(m,y)}},o=async()=>{if(!e.watching){e.watching=!0;for(const m in e.mounts)e.unwatch[m]=await hT(e.mounts[m],s,m)}},c=async()=>{if(e.watching){for(const m in e.unwatch)await e.unwatch[m]();e.unwatch={},e.watching=!1}},l=(m,y,v)=>{const S=new Map,_=A=>{let N=S.get(A.base);return N||(N={driver:A.driver,base:A.base,items:[]},S.set(A.base,N)),N};for(const A of m){const N=typeof A=="string",R=Si(N?A:A.key),$=N?void 0:A.value,G=N||!A.options?y:{...y,...A.options},F=n(R);_(F).items.push({key:R,value:$,relativeKey:F.relativeKey,options:G})}return Promise.all([...S.values()].map(A=>v(A))).then(A=>A.flat())},p={hasItem(m,y={}){m=Si(m);const{relativeKey:v,driver:S}=n(m);return Yr(S.hasItem,v,y)},getItem(m,y={}){m=Si(m);const{relativeKey:v,driver:S}=n(m);return Yr(S.getItem,v,y).then(_=>N1(_))},getItems(m,y={}){return l(m,y,v=>v.driver.getItems?Yr(v.driver.getItems,v.items.map(S=>({key:S.relativeKey,options:S.options})),y).then(S=>S.map(_=>({key:Bj(v.base,_.key),value:N1(_.value)}))):Promise.all(v.items.map(S=>Yr(v.driver.getItem,S.relativeKey,S.options).then(_=>({key:S.key,value:N1(_)})))))},getItemRaw(m,y={}){m=Si(m);const{relativeKey:v,driver:S}=n(m);return S.getItemRaw?Yr(S.getItemRaw,v,y):Yr(S.getItem,v,y).then(_=>Uj(_))},async setItem(m,y,v={}){if(y===void 0)return p.removeItem(m);m=Si(m);const{relativeKey:S,driver:_}=n(m);_.setItem&&(await Yr(_.setItem,S,ev(y),v),_.watch||s("update",m))},async setItems(m,y){await l(m,y,async v=>{if(v.driver.setItems)return Yr(v.driver.setItems,v.items.map(S=>({key:S.relativeKey,value:ev(S.value),options:S.options})),y);v.driver.setItem&&await Promise.all(v.items.map(S=>Yr(v.driver.setItem,S.relativeKey,ev(S.value),S.options)))})},async setItemRaw(m,y,v={}){if(y===void 0)return p.removeItem(m,v);m=Si(m);const{relativeKey:S,driver:_}=n(m);if(_.setItemRaw)await Yr(_.setItemRaw,S,y,v);else if(_.setItem)await Yr(_.setItem,S,Mj(y),v);else return;_.watch||s("update",m)},async removeItem(m,y={}){typeof y=="boolean"&&(y={removeMeta:y}),m=Si(m);const{relativeKey:v,driver:S}=n(m);S.removeItem&&(await Yr(S.removeItem,v,y),(y.removeMeta||y.removeMata)&&await Yr(S.removeItem,v+"$",y),S.watch||s("remove",m))},async getMeta(m,y={}){typeof y=="boolean"&&(y={nativeOnly:y}),m=Si(m);const{relativeKey:v,driver:S}=n(m),_=Object.create(null);if(S.getMeta&&Object.assign(_,await Yr(S.getMeta,v,y)),!y.nativeOnly){const A=await Yr(S.getItem,v+"$",y).then(N=>N1(N));A&&typeof A=="object"&&(typeof A.atime=="string"&&(A.atime=new Date(A.atime)),typeof A.mtime=="string"&&(A.mtime=new Date(A.mtime)),Object.assign(_,A))}return _},setMeta(m,y,v={}){return this.setItem(m+"$",y,v)},removeMeta(m,y={}){return this.removeItem(m+"$",y)},async getKeys(m,y={}){m=R1(m);const v=r(m,!0);let S=[];const _=[];let A=!0;for(const R of v){R.driver.flags?.maxDepth||(A=!1);const $=await Yr(R.driver.getKeys,R.relativeBase,y);for(const G of $){const F=R.mountpoint+Si(G);S.some(X=>F.startsWith(X))||_.push(F)}S=[R.mountpoint,...S.filter(G=>!G.startsWith(R.mountpoint))]}const N=y.maxDepth!==void 0&&!A;return _.filter(R=>(!N||Fj(R,y.maxDepth))&&Zj(R,m))},async clear(m,y={}){m=R1(m),await Promise.all(r(m,!1).map(async v=>{if(v.driver.clear)return Yr(v.driver.clear,v.relativeBase,y);if(v.driver.removeItem){const S=await v.driver.getKeys(v.relativeBase||"",y);return Promise.all(S.map(_=>v.driver.removeItem(_,y)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(m=>fT(m)))},async watch(m){return await o(),e.watchListeners.push(m),async()=>{e.watchListeners=e.watchListeners.filter(y=>y!==m),e.watchListeners.length===0&&await c()}},async unwatch(){e.watchListeners=[],await c()},mount(m,y){if(m=R1(m),m&&e.mounts[m])throw new Error(`already mounted at ${m}`);return m&&(e.mountpoints.push(m),e.mountpoints.sort((v,S)=>S.length-v.length)),e.mounts[m]=y,e.watching&&Promise.resolve(hT(y,s,m)).then(v=>{e.unwatch[m]=v}).catch(console.error),p},async unmount(m,y=!0){m=R1(m),!(!m||!e.mounts[m])&&(e.watching&&m in e.unwatch&&(e.unwatch[m]?.(),delete e.unwatch[m]),y&&await fT(e.mounts[m]),e.mountpoints=e.mountpoints.filter(v=>v!==m),delete e.mounts[m])},getMount(m=""){m=Si(m)+":";const y=n(m);return{driver:y.driver,base:y.base}},getMounts(m="",y={}){return m=Si(m),r(m,y.parents).map(S=>({driver:S.driver,base:S.mountpoint}))},keys:(m,y={})=>p.getKeys(m,y),get:(m,y={})=>p.getItem(m,y),set:(m,y,v={})=>p.setItem(m,y,v),has:(m,y={})=>p.hasItem(m,y),del:(m,y={})=>p.removeItem(m,y),remove:(m,y={})=>p.removeItem(m,y)};return p}function hT(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function fT(t){typeof t.dispose=="function"&&await Yr(t.dispose)}function Cf(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function QR(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=Cf(n);return(s,o)=>r.then(c=>o(c.transaction(e,s).objectStore(e)))}let fC;function Eb(){return fC||(fC=QR("keyval-store","keyval")),fC}function pT(t,e=Eb()){return e("readonly",n=>Cf(n.get(t)))}function Xj(t,e,n=Eb()){return n("readwrite",r=>(r.put(e,t),Cf(r.transaction)))}function Wj(t,e=Eb()){return e("readwrite",n=>(n.delete(t),Cf(n.transaction)))}function Vj(t=Eb()){return t("readwrite",e=>(e.clear(),Cf(e.transaction)))}function Kj(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Cf(t.transaction)}function Yj(t=Eb()){return t("readonly",e=>{if(e.getAllKeys)return Cf(e.getAllKeys());const n=[];return Kj(e,r=>n.push(r.key)).then(()=>n)})}const qj=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),Qj=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function lf(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Qj(t)}catch{return t}}function jl(t){return typeof t=="string"?t:qj(t)||""}const Jj="idb-keyval";var eB=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=QR(t.dbName,t.storeName)),{name:Jj,options:t,async hasItem(s){return!(typeof await pT(n(s),r)>"u")},async getItem(s){return await pT(n(s),r)??null},setItem(s,o){return Xj(n(s),o,r)},removeItem(s){return Wj(n(s),r)},getKeys(){return Yj(r)},clear(){return Vj(r)}}};const tB="WALLET_CONNECT_V2_INDEXED_DB",nB="keyvaluestorage";let rB=class{constructor(){this.indexedDb=Hj({driver:eB({dbName:tB,storeName:nB})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,jl(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var pC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tv={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof pC<"u"&&pC.localStorage?tv.exports=pC.localStorage:typeof window<"u"&&window.localStorage?tv.exports=window.localStorage:tv.exports=new e})();function sB(t){var e;return[t[0],lf((e=t[1])!=null?e:"")]}let iB=class{constructor(){this.localStorage=tv.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(sB)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return lf(n)}async setItem(e,n){this.localStorage.setItem(e,jl(n))}async removeItem(e){this.localStorage.removeItem(e)}};const oB="wc_storage_version",mT=1,aB=async(t,e,n)=>{const r=oB,s=await e.getItem(r);if(s&&s>=mT){n(e);return}const o=await t.getKeys();if(!o.length){n(e);return}const c=[];for(;o.length;){const l=o.shift();if(!l)continue;const p=l.toLowerCase();if(p.includes("wc@")||p.includes("walletconnect")||p.includes("wc_")||p.includes("wallet_connect")){const m=await t.getItem(l);await e.setItem(l,m),c.push(l)}}await e.setItem(r,mT),n(e),cB(t,c)},cB=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let lB=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new iB;this.storage=e;try{const n=new rB;aB(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var mC,gT;function uB(){if(gT)return mC;gT=1;function t(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}mC=e;function e(n,r,s){var o=s&&s.stringify||t,c=1;if(typeof n=="object"&&n!==null){var l=r.length+c;if(l===1)return n;var p=new Array(l);p[0]=o(n);for(var m=1;m<l;m++)p[m]=o(r[m]);return p.join(" ")}if(typeof n!="string")return n;var y=r.length;if(y===0)return n;for(var v="",S=1-c,_=-1,A=n&&n.length||0,N=0;N<A;){if(n.charCodeAt(N)===37&&N+1<A){switch(_=_>-1?_:0,n.charCodeAt(N+1)){case 100:case 102:if(S>=y||r[S]==null)break;_<N&&(v+=n.slice(_,N)),v+=Number(r[S]),_=N+2,N++;break;case 105:if(S>=y||r[S]==null)break;_<N&&(v+=n.slice(_,N)),v+=Math.floor(Number(r[S])),_=N+2,N++;break;case 79:case 111:case 106:if(S>=y||r[S]===void 0)break;_<N&&(v+=n.slice(_,N));var R=typeof r[S];if(R==="string"){v+="'"+r[S]+"'",_=N+2,N++;break}if(R==="function"){v+=r[S].name||"<anonymous>",_=N+2,N++;break}v+=o(r[S]),_=N+2,N++;break;case 115:if(S>=y)break;_<N&&(v+=n.slice(_,N)),v+=String(r[S]),_=N+2,N++;break;case 37:_<N&&(v+=n.slice(_,N)),v+="%",_=N+2,N++,S--;break}++S}++N}return _===-1?n:(_<A&&(v+=n.slice(_)),v)}return mC}var gC,yT;function dB(){if(yT)return gC;yT=1;const t=uB();gC=s;const e=j().console||{},n={mapHttpRequest:A,mapHttpResponse:A,wrapRequestSerializer:N,wrapResponseSerializer:N,wrapErrorSerializer:N,req:A,res:A,err:S};function r(L,Z){return Array.isArray(L)?L.filter(function(D){return D!=="!stdSerializers.err"}):L===!0?Object.keys(Z):!1}function s(L){L=L||{},L.browser=L.browser||{};const Z=L.browser.transmit;if(Z&&typeof Z.send!="function")throw Error("pino: transmit option must have a send function");const U=L.browser.write||e;L.browser.write&&(L.browser.asObject=!0);const D=L.serializers||{},B=r(L.browser.serialize,D);let W=L.browser.serialize;Array.isArray(L.browser.serialize)&&L.browser.serialize.indexOf("!stdSerializers.err")>-1&&(W=!1);const K=["error","fatal","warn","info","debug","trace"];typeof U=="function"&&(U.error=U.fatal=U.warn=U.info=U.debug=U.trace=U),L.enabled===!1&&(L.level="silent");const he=L.level||"info",pe=Object.create(U);pe.log||(pe.log=R),Object.defineProperty(pe,"levelVal",{get:P}),Object.defineProperty(pe,"level",{get:ne,set:de});const V={transmit:Z,serialize:B,asObject:L.browser.asObject,levels:K,timestamp:_(L)};pe.levels=s.levels,pe.level=he,pe.setMaxListeners=pe.getMaxListeners=pe.emit=pe.addListener=pe.on=pe.prependListener=pe.once=pe.prependOnceListener=pe.removeListener=pe.removeAllListeners=pe.listeners=pe.listenerCount=pe.eventNames=pe.write=pe.flush=R,pe.serializers=D,pe._serialize=B,pe._stdErrSerialize=W,pe.child=me,Z&&(pe._logEvent=v());function P(){return this.level==="silent"?1/0:this.levels.values[this.level]}function ne(){return this._level}function de(H){if(H!=="silent"&&!this.levels.values[H])throw Error("unknown level "+H);this._level=H,o(V,pe,"error","log"),o(V,pe,"fatal","error"),o(V,pe,"warn","error"),o(V,pe,"info","log"),o(V,pe,"debug","log"),o(V,pe,"trace","log")}function me(H,fe){if(!H)throw new Error("missing bindings for child Pino");fe=fe||{},B&&H.serializers&&(fe.serializers=H.serializers);const Ae=fe.serializers;if(B&&Ae){var ke=Object.assign({},D,Ae),$e=L.browser.serialize===!0?Object.keys(ke):B;delete H.serializers,p([H],$e,ke,this._stdErrSerialize)}function Ve(Fe){this._childLevel=(Fe._childLevel|0)+1,this.error=m(Fe,H,"error"),this.fatal=m(Fe,H,"fatal"),this.warn=m(Fe,H,"warn"),this.info=m(Fe,H,"info"),this.debug=m(Fe,H,"debug"),this.trace=m(Fe,H,"trace"),ke&&(this.serializers=ke,this._serialize=$e),Z&&(this._logEvent=v([].concat(Fe._logEvent.bindings,H)))}return Ve.prototype=this,new Ve(this)}return pe}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=n,s.stdTimeFunctions=Object.assign({},{nullTime:$,epochTime:G,unixTime:F,isoTime:X});function o(L,Z,U,D){const B=Object.getPrototypeOf(Z);Z[U]=Z.levelVal>Z.levels.values[U]?R:B[U]?B[U]:e[U]||e[D]||R,c(L,Z,U)}function c(L,Z,U){!L.transmit&&Z[U]===R||(Z[U]=function(D){return function(){const W=L.timestamp(),K=new Array(arguments.length),he=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var pe=0;pe<K.length;pe++)K[pe]=arguments[pe];if(L.serialize&&!L.asObject&&p(K,this._serialize,this.serializers,this._stdErrSerialize),L.asObject?D.call(he,l(this,U,K,W)):D.apply(he,K),L.transmit){const V=L.transmit.level||Z.level,P=s.levels.values[V],ne=s.levels.values[U];if(ne<P)return;y(this,{ts:W,methodLevel:U,methodValue:ne,transmitValue:s.levels.values[L.transmit.level||Z.level],send:L.transmit.send,val:Z.levelVal},K)}}}(Z[U]))}function l(L,Z,U,D){L._serialize&&p(U,L._serialize,L.serializers,L._stdErrSerialize);const B=U.slice();let W=B[0];const K={};D&&(K.time=D),K.level=s.levels.values[Z];let he=(L._childLevel|0)+1;if(he<1&&(he=1),W!==null&&typeof W=="object"){for(;he--&&typeof B[0]=="object";)Object.assign(K,B.shift());W=B.length?t(B.shift(),B):void 0}else typeof W=="string"&&(W=t(B.shift(),B));return W!==void 0&&(K.msg=W),K}function p(L,Z,U,D){for(const B in L)if(D&&L[B]instanceof Error)L[B]=s.stdSerializers.err(L[B]);else if(typeof L[B]=="object"&&!Array.isArray(L[B]))for(const W in L[B])Z&&Z.indexOf(W)>-1&&W in U&&(L[B][W]=U[W](L[B][W]))}function m(L,Z,U){return function(){const D=new Array(1+arguments.length);D[0]=Z;for(var B=1;B<D.length;B++)D[B]=arguments[B-1];return L[U].apply(this,D)}}function y(L,Z,U){const D=Z.send,B=Z.ts,W=Z.methodLevel,K=Z.methodValue,he=Z.val,pe=L._logEvent.bindings;p(U,L._serialize||Object.keys(L.serializers),L.serializers,L._stdErrSerialize===void 0?!0:L._stdErrSerialize),L._logEvent.ts=B,L._logEvent.messages=U.filter(function(V){return pe.indexOf(V)===-1}),L._logEvent.level.label=W,L._logEvent.level.value=K,D(W,L._logEvent,he),L._logEvent=v(pe)}function v(L){return{ts:0,messages:[],bindings:L||[],level:{label:"",value:0}}}function S(L){const Z={type:L.constructor.name,msg:L.message,stack:L.stack};for(const U in L)Z[U]===void 0&&(Z[U]=L[U]);return Z}function _(L){return typeof L.timestamp=="function"?L.timestamp:L.timestamp===!1?$:G}function A(){return{}}function N(L){return L}function R(){}function $(){return!1}function G(){return Date.now()}function F(){return Math.round(Date.now()/1e3)}function X(){return new Date(Date.now()).toISOString()}function j(){function L(Z){return typeof Z<"u"&&Z}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return L(self)||L(window)||L(this)||{}}}return gC}var nm=dB();const Cb=Rm(nm),hB={level:"info"},Sb="custom_context",E5=1e3*1024;let fB=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},bT=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new fB(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},JR=class{constructor(e,n=E5){this.level=e??"error",this.levelValue=nm.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new bT(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===nm.levels.values.error?console.error(e):n===nm.levels.values.warn?console.warn(e):n===nm.levels.values.debug?console.debug(e):n===nm.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(jl({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new bT(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(jl({extraMetadata:e})),new Blob(n,{type:"application/json"})}},pB=class{constructor(e,n=E5){this.baseChunkLogger=new JR(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},mB=class{constructor(e,n=E5){this.baseChunkLogger=new JR(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var gB=Object.defineProperty,yB=Object.defineProperties,bB=Object.getOwnPropertyDescriptors,wT=Object.getOwnPropertySymbols,wB=Object.prototype.hasOwnProperty,vB=Object.prototype.propertyIsEnumerable,vT=(t,e,n)=>e in t?gB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tv=(t,e)=>{for(var n in e||(e={}))wB.call(e,n)&&vT(t,n,e[n]);if(wT)for(var n of wT(e))vB.call(e,n)&&vT(t,n,e[n]);return t},Av=(t,e)=>yB(t,bB(e));function Dm(t){return Av(Tv({},t),{level:t?.level||hB.level})}function EB(t,e=Sb){return t[e]||""}function CB(t,e,n=Sb){return t[n]=e,t}function Li(t,e=Sb){let n="";return typeof t.bindings>"u"?n=EB(t,e):n=t.bindings().context||"",n}function SB(t,e,n=Sb){const r=Li(t,n);return r.trim()?`${r}/${e}`:e}function Zs(t,e,n=Sb){const r=SB(t,e,n),s=t.child({context:r});return CB(s,r,n)}function _B(t){var e,n;const r=new pB((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Cb(Av(Tv({},t.opts),{level:"trace",browser:Av(Tv({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function xB(t){var e;const n=new mB((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Cb(Av(Tv({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function C5(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?_B(t):xB(t)}var TB=Object.defineProperty,AB=(t,e,n)=>e in t?TB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ET=(t,e,n)=>AB(t,typeof e!="symbol"?e+"":e,n);let IB=class extends vf{constructor(e){super(),this.opts=e,ET(this,"protocol","wc"),ET(this,"version",2)}};var NB=Object.defineProperty,RB=(t,e,n)=>e in t?NB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,OB=(t,e,n)=>RB(t,e+"",n);let PB=class extends vf{constructor(e,n){super(),this.core=e,this.logger=n,OB(this,"records",new Map)}},kB=class{constructor(e,n){this.logger=e,this.core=n}},LB=class extends vf{constructor(e,n){super(),this.relayer=e,this.logger=n}},DB=class extends vf{constructor(e){super()}},MB=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},UB=class extends vf{constructor(e,n){super(),this.relayer=e,this.logger=n}},$B=class extends vf{constructor(e,n){super(),this.core=e,this.logger=n}},jB=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},BB=class{constructor(e,n){this.projectId=e,this.logger=n}},FB=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var ZB=Object.defineProperty,zB=(t,e,n)=>e in t?ZB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,CT=(t,e,n)=>zB(t,typeof e!="symbol"?e+"":e,n);let GB=class{constructor(e){this.opts=e,CT(this,"protocol","wc"),CT(this,"version",2)}},HB=class{constructor(e){this.client=e}};function XB(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function e4(t,...e){if(!XB(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ST(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function WB(t,e){e4(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const $p=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yC=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function VB(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function t4(t){return typeof t=="string"&&(t=VB(t)),e4(t),t}let KB=class{clone(){return this._cloneInto()}};function YB(t){const e=r=>t().update(t4(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function n4(t=32){if($p&&typeof $p.getRandomValues=="function")return $p.getRandomValues(new Uint8Array(t));if($p&&typeof $p.randomBytes=="function")return $p.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function qB(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),o=BigInt(4294967295),c=Number(n>>s&o),l=Number(n&o),p=r?4:0,m=r?0:4;t.setUint32(e+p,c,r),t.setUint32(e+m,l,r)}let QB=class extends KB{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=yC(this.buffer)}update(e){ST(this);const{view:n,buffer:r,blockLen:s}=this;e=t4(e);const o=e.length;for(let c=0;c<o;){const l=Math.min(s-this.pos,o-c);if(l===s){const p=yC(e);for(;s<=o-c;c+=s)this.process(p,c);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,c+=l,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ST(this),WB(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:c}=this;n[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>s-c&&(this.process(r,0),c=0);for(let v=c;v<s;v++)n[v]=0;qB(r,s-8,BigInt(this.length*8),o),this.process(r,0);const l=yC(e),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const m=p/4,y=this.get();if(m>y.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<m;v++)l.setUint32(4*v,y[v],o)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:c,pos:l}=this;return e.length=s,e.pos=l,e.finished=o,e.destroyed=c,s%n&&e.buffer.set(r),e}};const O1=BigInt(2**32-1),HS=BigInt(32);function r4(t,e=!1){return e?{h:Number(t&O1),l:Number(t>>HS&O1)}:{h:Number(t>>HS&O1)|0,l:Number(t&O1)|0}}function JB(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:o,l:c}=r4(t[s],e);[n[s],r[s]]=[o,c]}return[n,r]}const eF=(t,e)=>BigInt(t>>>0)<<HS|BigInt(e>>>0),tF=(t,e,n)=>t>>>n,nF=(t,e,n)=>t<<32-n|e>>>n,rF=(t,e,n)=>t>>>n|e<<32-n,sF=(t,e,n)=>t<<32-n|e>>>n,iF=(t,e,n)=>t<<64-n|e>>>n-32,oF=(t,e,n)=>t>>>n-32|e<<64-n,aF=(t,e)=>e,cF=(t,e)=>t,lF=(t,e,n)=>t<<n|e>>>32-n,uF=(t,e,n)=>e<<n|t>>>32-n,dF=(t,e,n)=>e<<n-32|t>>>64-n,hF=(t,e,n)=>t<<n-32|e>>>64-n;function fF(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const pF=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),mF=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,gF=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),yF=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,bF=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),wF=(t,e,n,r,s,o)=>e+n+r+s+o+(t/2**32|0)|0,Ht={fromBig:r4,split:JB,toBig:eF,shrSH:tF,shrSL:nF,rotrSH:rF,rotrSL:sF,rotrBH:iF,rotrBL:oF,rotr32H:aF,rotr32L:cF,rotlSH:lF,rotlSL:uF,rotlBH:dF,rotlBL:hF,add:fF,add3L:pF,add3H:mF,add4L:gF,add4H:yF,add5H:wF,add5L:bF},[vF,EF]=Ht.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Zu=new Uint32Array(80),zu=new Uint32Array(80);let CF=class extends QB{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:o,Cl:c,Dh:l,Dl:p,Eh:m,El:y,Fh:v,Fl:S,Gh:_,Gl:A,Hh:N,Hl:R}=this;return[e,n,r,s,o,c,l,p,m,y,v,S,_,A,N,R]}set(e,n,r,s,o,c,l,p,m,y,v,S,_,A,N,R){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=o|0,this.Cl=c|0,this.Dh=l|0,this.Dl=p|0,this.Eh=m|0,this.El=y|0,this.Fh=v|0,this.Fl=S|0,this.Gh=_|0,this.Gl=A|0,this.Hh=N|0,this.Hl=R|0}process(e,n){for(let F=0;F<16;F++,n+=4)Zu[F]=e.getUint32(n),zu[F]=e.getUint32(n+=4);for(let F=16;F<80;F++){const X=Zu[F-15]|0,j=zu[F-15]|0,L=Ht.rotrSH(X,j,1)^Ht.rotrSH(X,j,8)^Ht.shrSH(X,j,7),Z=Ht.rotrSL(X,j,1)^Ht.rotrSL(X,j,8)^Ht.shrSL(X,j,7),U=Zu[F-2]|0,D=zu[F-2]|0,B=Ht.rotrSH(U,D,19)^Ht.rotrBH(U,D,61)^Ht.shrSH(U,D,6),W=Ht.rotrSL(U,D,19)^Ht.rotrBL(U,D,61)^Ht.shrSL(U,D,6),K=Ht.add4L(Z,W,zu[F-7],zu[F-16]),he=Ht.add4H(K,L,B,Zu[F-7],Zu[F-16]);Zu[F]=he|0,zu[F]=K|0}let{Ah:r,Al:s,Bh:o,Bl:c,Ch:l,Cl:p,Dh:m,Dl:y,Eh:v,El:S,Fh:_,Fl:A,Gh:N,Gl:R,Hh:$,Hl:G}=this;for(let F=0;F<80;F++){const X=Ht.rotrSH(v,S,14)^Ht.rotrSH(v,S,18)^Ht.rotrBH(v,S,41),j=Ht.rotrSL(v,S,14)^Ht.rotrSL(v,S,18)^Ht.rotrBL(v,S,41),L=v&_^~v&N,Z=S&A^~S&R,U=Ht.add5L(G,j,Z,EF[F],zu[F]),D=Ht.add5H(U,$,X,L,vF[F],Zu[F]),B=U|0,W=Ht.rotrSH(r,s,28)^Ht.rotrBH(r,s,34)^Ht.rotrBH(r,s,39),K=Ht.rotrSL(r,s,28)^Ht.rotrBL(r,s,34)^Ht.rotrBL(r,s,39),he=r&o^r&l^o&l,pe=s&c^s&p^c&p;$=N|0,G=R|0,N=_|0,R=A|0,_=v|0,A=S|0,{h:v,l:S}=Ht.add(m|0,y|0,D|0,B|0),m=l|0,y=p|0,l=o|0,p=c|0,o=r|0,c=s|0;const V=Ht.add3L(B,K,pe);r=Ht.add3H(V,D,W,he),s=V|0}({h:r,l:s}=Ht.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:o,l:c}=Ht.add(this.Bh|0,this.Bl|0,o|0,c|0),{h:l,l:p}=Ht.add(this.Ch|0,this.Cl|0,l|0,p|0),{h:m,l:y}=Ht.add(this.Dh|0,this.Dl|0,m|0,y|0),{h:v,l:S}=Ht.add(this.Eh|0,this.El|0,v|0,S|0),{h:_,l:A}=Ht.add(this.Fh|0,this.Fl|0,_|0,A|0),{h:N,l:R}=Ht.add(this.Gh|0,this.Gl|0,N|0,R|0),{h:$,l:G}=Ht.add(this.Hh|0,this.Hl|0,$|0,G|0),this.set(r,s,o,c,l,p,m,y,v,S,_,A,N,R,$,G)}roundClean(){Zu.fill(0),zu.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const SF=YB(()=>new CF);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const S5=BigInt(0),s4=BigInt(1),_F=BigInt(2);function _5(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function x5(t){if(!_5(t))throw new Error("Uint8Array expected")}function bC(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const xF=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function T5(t){x5(t);let e="";for(let n=0;n<t.length;n++)e+=xF[t[n]];return e}function i4(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?S5:BigInt("0x"+t)}const Sl={_0:48,_9:57,A:65,F:70,a:97,f:102};function _T(t){if(t>=Sl._0&&t<=Sl._9)return t-Sl._0;if(t>=Sl.A&&t<=Sl.F)return t-(Sl.A-10);if(t>=Sl.a&&t<=Sl.f)return t-(Sl.a-10)}function o4(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const c=_T(t.charCodeAt(o)),l=_T(t.charCodeAt(o+1));if(c===void 0||l===void 0){const p=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+o)}r[s]=c*16+l}return r}function TF(t){return i4(T5(t))}function nv(t){return x5(t),i4(T5(Uint8Array.from(t).reverse()))}function a4(t,e){return o4(t.toString(16).padStart(e*2,"0"))}function XS(t,e){return a4(t,e).reverse()}function _l(t,e,n){let r;if(typeof e=="string")try{r=o4(e)}catch(o){throw new Error(t+" must be hex string or Uint8Array, cause: "+o)}else if(_5(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function xT(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];x5(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const o=t[r];n.set(o,s),s+=o.length}return n}const wC=t=>typeof t=="bigint"&&S5<=t;function AF(t,e,n){return wC(t)&&wC(e)&&wC(n)&&e<=t&&t<n}function $0(t,e,n,r){if(!AF(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function IF(t){let e;for(e=0;t>S5;t>>=s4,e+=1);return e}const NF=t=>(_F<<BigInt(t-1))-s4,RF={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||_5(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function A5(t,e,n={}){const r=(s,o,c)=>{const l=RF[o];if(typeof l!="function")throw new Error("invalid validator function");const p=t[s];if(!(c&&p===void 0)&&!l(p,t))throw new Error("param "+String(s)+" is invalid. Expected "+o+", got "+p)};for(const[s,o]of Object.entries(e))r(s,o,!1);for(const[s,o]of Object.entries(n))r(s,o,!0);return t}function TT(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const o=t(n,...r);return e.set(n,o),o}}const es=BigInt(0),Er=BigInt(1),Bh=BigInt(2),OF=BigInt(3),WS=BigInt(4),AT=BigInt(5),IT=BigInt(8);function Dr(t,e){const n=t%e;return n>=es?n:e+n}function PF(t,e,n){if(e<es)throw new Error("invalid exponent, negatives unsupported");if(n<=es)throw new Error("invalid modulus");if(n===Er)return es;let r=Er;for(;e>es;)e&Er&&(r=r*t%n),t=t*t%n,e>>=Er;return r}function Sc(t,e,n){let r=t;for(;e-- >es;)r*=r,r%=n;return r}function NT(t,e){if(t===es)throw new Error("invert: expected non-zero number");if(e<=es)throw new Error("invert: expected positive modulus, got "+e);let n=Dr(t,e),r=e,s=es,o=Er;for(;n!==es;){const c=r/n,l=r%n,p=s-o*c;r=n,n=l,s=o,o=p}if(r!==Er)throw new Error("invert: does not exist");return Dr(s,e)}function kF(t){const e=(t-Er)/Bh;let n,r,s;for(n=t-Er,r=0;n%Bh===es;n/=Bh,r++);for(s=Bh;s<t&&PF(s,e,t)!==t-Er;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const c=(t+Er)/WS;return function(l,p){const m=l.pow(p,c);if(!l.eql(l.sqr(m),p))throw new Error("Cannot find square root");return m}}const o=(n+Er)/Bh;return function(c,l){if(c.pow(l,e)===c.neg(c.ONE))throw new Error("Cannot find square root");let p=r,m=c.pow(c.mul(c.ONE,s),n),y=c.pow(l,o),v=c.pow(l,n);for(;!c.eql(v,c.ONE);){if(c.eql(v,c.ZERO))return c.ZERO;let S=1;for(let A=c.sqr(v);S<p&&!c.eql(A,c.ONE);S++)A=c.sqr(A);const _=c.pow(m,Er<<BigInt(p-S-1));m=c.sqr(_),y=c.mul(y,_),v=c.mul(v,m),p=S}return y}}function LF(t){if(t%WS===OF){const e=(t+Er)/WS;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%IT===AT){const e=(t-AT)/IT;return function(n,r){const s=n.mul(r,Bh),o=n.pow(s,e),c=n.mul(r,o),l=n.mul(n.mul(c,Bh),o),p=n.mul(c,n.sub(l,n.ONE));if(!n.eql(n.sqr(p),r))throw new Error("Cannot find square root");return p}}return kF(t)}const DF=(t,e)=>(Dr(t,e)&Er)===Er,MF=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function UF(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=MF.reduce((r,s)=>(r[s]="function",r),e);return A5(t,n)}function $F(t,e,n){if(n<es)throw new Error("invalid exponent, negatives unsupported");if(n===es)return t.ONE;if(n===Er)return e;let r=t.ONE,s=e;for(;n>es;)n&Er&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Er;return r}function jF(t,e){const n=new Array(e.length),r=e.reduce((o,c,l)=>t.is0(c)?o:(n[l]=o,t.mul(o,c)),t.ONE),s=t.inv(r);return e.reduceRight((o,c,l)=>t.is0(c)?o:(n[l]=t.mul(o,n[l]),t.mul(o,c)),s),n}function c4(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function l4(t,e,n=!1,r={}){if(t<=es)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:o}=c4(t,e);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:o,MASK:NF(s),ZERO:es,ONE:Er,create:p=>Dr(p,t),isValid:p=>{if(typeof p!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof p);return es<=p&&p<t},is0:p=>p===es,isOdd:p=>(p&Er)===Er,neg:p=>Dr(-p,t),eql:(p,m)=>p===m,sqr:p=>Dr(p*p,t),add:(p,m)=>Dr(p+m,t),sub:(p,m)=>Dr(p-m,t),mul:(p,m)=>Dr(p*m,t),pow:(p,m)=>$F(l,p,m),div:(p,m)=>Dr(p*NT(m,t),t),sqrN:p=>p*p,addN:(p,m)=>p+m,subN:(p,m)=>p-m,mulN:(p,m)=>p*m,inv:p=>NT(p,t),sqrt:r.sqrt||(p=>(c||(c=LF(t)),c(l,p))),invertBatch:p=>jF(l,p),cmov:(p,m,y)=>y?m:p,toBytes:p=>n?XS(p,o):a4(p,o),fromBytes:p=>{if(p.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+p.length);return n?nv(p):TF(p)}});return Object.freeze(l)}const RT=BigInt(0),P1=BigInt(1);function vC(t,e){const n=e.negate();return t?n:e}function u4(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function EC(t,e){u4(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function BF(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function FF(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const CC=new WeakMap,d4=new WeakMap;function SC(t){return d4.get(t)||1}function ZF(t,e){return{constTimeNegate:vC,hasPrecomputes(n){return SC(n)!==1},unsafeLadder(n,r,s=t.ZERO){let o=n;for(;r>RT;)r&P1&&(s=s.add(o)),o=o.double(),r>>=P1;return s},precomputeWindow(n,r){const{windows:s,windowSize:o}=EC(r,e),c=[];let l=n,p=l;for(let m=0;m<s;m++){p=l,c.push(p);for(let y=1;y<o;y++)p=p.add(l),c.push(p);l=p.double()}return c},wNAF(n,r,s){const{windows:o,windowSize:c}=EC(n,e);let l=t.ZERO,p=t.BASE;const m=BigInt(2**n-1),y=2**n,v=BigInt(n);for(let S=0;S<o;S++){const _=S*c;let A=Number(s&m);s>>=v,A>c&&(A-=y,s+=P1);const N=_,R=_+Math.abs(A)-1,$=S%2!==0,G=A<0;A===0?p=p.add(vC($,r[N])):l=l.add(vC(G,r[R]))}return{p:l,f:p}},wNAFUnsafe(n,r,s,o=t.ZERO){const{windows:c,windowSize:l}=EC(n,e),p=BigInt(2**n-1),m=2**n,y=BigInt(n);for(let v=0;v<c;v++){const S=v*l;if(s===RT)break;let _=Number(s&p);if(s>>=y,_>l&&(_-=m,s+=P1),_===0)continue;let A=r[S+Math.abs(_)-1];_<0&&(A=A.negate()),o=o.add(A)}return o},getPrecomputes(n,r,s){let o=CC.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&CC.set(r,s(o))),o},wNAFCached(n,r,s){const o=SC(n);return this.wNAF(o,this.getPrecomputes(o,n,s),r)},wNAFCachedUnsafe(n,r,s,o){const c=SC(n);return c===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(c,this.getPrecomputes(c,n,s),r,o)},setWindowSize(n,r){u4(r,e),d4.set(n,r),CC.delete(n)}}}function zF(t,e,n,r){if(BF(n,t),FF(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,o=IF(BigInt(n.length)),c=o>12?o-3:o>4?o-2:o?2:1,l=(1<<c)-1,p=new Array(l+1).fill(s),m=Math.floor((e.BITS-1)/c)*c;let y=s;for(let v=m;v>=0;v-=c){p.fill(s);for(let _=0;_<r.length;_++){const A=r[_],N=Number(A>>BigInt(v)&BigInt(l));p[N]=p[N].add(n[_])}let S=s;for(let _=p.length-1,A=s;_>0;_--)A=A.add(p[_]),S=S.add(A);if(y=y.add(S),v!==0)for(let _=0;_<c;_++)y=y.double()}return y}function GF(t){return UF(t.Fp),A5(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...c4(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const ya=BigInt(0),wi=BigInt(1),k1=BigInt(2),HF=BigInt(8),XF={zip215:!0};function WF(t){const e=GF(t);return A5(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function VF(t){const e=WF(t),{Fp:n,n:r,prehash:s,hash:o,randomBytes:c,nByteLength:l,h:p}=e,m=k1<<BigInt(l*8)-wi,y=n.create,v=l4(e.n,e.nBitLength),S=e.uvRatio||((V,P)=>{try{return{isValid:!0,value:n.sqrt(V*n.inv(P))}}catch{return{isValid:!1,value:ya}}}),_=e.adjustScalarBytes||(V=>V),A=e.domain||((V,P,ne)=>{if(bC("phflag",ne),P.length||ne)throw new Error("Contexts/pre-hash are not supported");return V});function N(V,P){$0("coordinate "+V,P,ya,m)}function R(V){if(!(V instanceof F))throw new Error("ExtendedPoint expected")}const $=TT((V,P)=>{const{ex:ne,ey:de,ez:me}=V,H=V.is0();P==null&&(P=H?HF:n.inv(me));const fe=y(ne*P),Ae=y(de*P),ke=y(me*P);if(H)return{x:ya,y:wi};if(ke!==wi)throw new Error("invZ was invalid");return{x:fe,y:Ae}}),G=TT(V=>{const{a:P,d:ne}=e;if(V.is0())throw new Error("bad point: ZERO");const{ex:de,ey:me,ez:H,et:fe}=V,Ae=y(de*de),ke=y(me*me),$e=y(H*H),Ve=y($e*$e),Fe=y(Ae*P),wt=y($e*y(Fe+ke)),De=y(Ve+y(ne*y(Ae*ke)));if(wt!==De)throw new Error("bad point: equation left != right (1)");const Q=y(de*me),ue=y(H*fe);if(Q!==ue)throw new Error("bad point: equation left != right (2)");return!0});class F{constructor(P,ne,de,me){this.ex=P,this.ey=ne,this.ez=de,this.et=me,N("x",P),N("y",ne),N("z",de),N("t",me),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(P){if(P instanceof F)throw new Error("extended point not allowed");const{x:ne,y:de}=P||{};return N("x",ne),N("y",de),new F(ne,de,wi,y(ne*de))}static normalizeZ(P){const ne=n.invertBatch(P.map(de=>de.ez));return P.map((de,me)=>de.toAffine(ne[me])).map(F.fromAffine)}static msm(P,ne){return zF(F,v,P,ne)}_setWindowSize(P){L.setWindowSize(this,P)}assertValidity(){G(this)}equals(P){R(P);const{ex:ne,ey:de,ez:me}=this,{ex:H,ey:fe,ez:Ae}=P,ke=y(ne*Ae),$e=y(H*me),Ve=y(de*Ae),Fe=y(fe*me);return ke===$e&&Ve===Fe}is0(){return this.equals(F.ZERO)}negate(){return new F(y(-this.ex),this.ey,this.ez,y(-this.et))}double(){const{a:P}=e,{ex:ne,ey:de,ez:me}=this,H=y(ne*ne),fe=y(de*de),Ae=y(k1*y(me*me)),ke=y(P*H),$e=ne+de,Ve=y(y($e*$e)-H-fe),Fe=ke+fe,wt=Fe-Ae,De=ke-fe,Q=y(Ve*wt),ue=y(Fe*De),Ee=y(Ve*De),Ye=y(wt*Fe);return new F(Q,ue,Ye,Ee)}add(P){R(P);const{a:ne,d:de}=e,{ex:me,ey:H,ez:fe,et:Ae}=this,{ex:ke,ey:$e,ez:Ve,et:Fe}=P;if(ne===BigInt(-1)){const Xn=y((H-me)*($e+ke)),Jt=y((H+me)*($e-ke)),Nt=y(Jt-Xn);if(Nt===ya)return this.double();const An=y(fe*k1*Fe),Wn=y(Ae*k1*Ve),ts=Wn+An,xf=Jt+Xn,$r=Wn-An,jr=y(ts*Nt),zs=y(xf*$r),Vt=y(ts*$r),Ed=y(Nt*xf);return new F(jr,zs,Ed,Vt)}const wt=y(me*ke),De=y(H*$e),Q=y(Ae*de*Fe),ue=y(fe*Ve),Ee=y((me+H)*(ke+$e)-wt-De),Ye=ue-Q,qe=ue+Q,it=y(De-ne*wt),Bt=y(Ee*Ye),bn=y(qe*it),Wt=y(Ee*it),hr=y(Ye*qe);return new F(Bt,bn,hr,Wt)}subtract(P){return this.add(P.negate())}wNAF(P){return L.wNAFCached(this,P,F.normalizeZ)}multiply(P){const ne=P;$0("scalar",ne,wi,r);const{p:de,f:me}=this.wNAF(ne);return F.normalizeZ([de,me])[0]}multiplyUnsafe(P,ne=F.ZERO){const de=P;return $0("scalar",de,ya,r),de===ya?j:this.is0()||de===wi?this:L.wNAFCachedUnsafe(this,de,F.normalizeZ,ne)}isSmallOrder(){return this.multiplyUnsafe(p).is0()}isTorsionFree(){return L.unsafeLadder(this,r).is0()}toAffine(P){return $(this,P)}clearCofactor(){const{h:P}=e;return P===wi?this:this.multiplyUnsafe(P)}static fromHex(P,ne=!1){const{d:de,a:me}=e,H=n.BYTES;P=_l("pointHex",P,H),bC("zip215",ne);const fe=P.slice(),Ae=P[H-1];fe[H-1]=Ae&-129;const ke=nv(fe),$e=ne?m:n.ORDER;$0("pointHex.y",ke,ya,$e);const Ve=y(ke*ke),Fe=y(Ve-wi),wt=y(de*Ve-me);let{isValid:De,value:Q}=S(Fe,wt);if(!De)throw new Error("Point.fromHex: invalid y coordinate");const ue=(Q&wi)===wi,Ee=(Ae&128)!==0;if(!ne&&Q===ya&&Ee)throw new Error("Point.fromHex: x=0 and x_0=1");return Ee!==ue&&(Q=y(-Q)),F.fromAffine({x:Q,y:ke})}static fromPrivateKey(P){return D(P).point}toRawBytes(){const{x:P,y:ne}=this.toAffine(),de=XS(ne,n.BYTES);return de[de.length-1]|=P&wi?128:0,de}toHex(){return T5(this.toRawBytes())}}F.BASE=new F(e.Gx,e.Gy,wi,y(e.Gx*e.Gy)),F.ZERO=new F(ya,wi,wi,ya);const{BASE:X,ZERO:j}=F,L=ZF(F,l*8);function Z(V){return Dr(V,r)}function U(V){return Z(nv(V))}function D(V){const P=n.BYTES;V=_l("private key",V,P);const ne=_l("hashed private key",o(V),2*P),de=_(ne.slice(0,P)),me=ne.slice(P,2*P),H=U(de),fe=X.multiply(H),Ae=fe.toRawBytes();return{head:de,prefix:me,scalar:H,point:fe,pointBytes:Ae}}function B(V){return D(V).pointBytes}function W(V=new Uint8Array,...P){const ne=xT(...P);return U(o(A(ne,_l("context",V),!!s)))}function K(V,P,ne={}){V=_l("message",V),s&&(V=s(V));const{prefix:de,scalar:me,pointBytes:H}=D(P),fe=W(ne.context,de,V),Ae=X.multiply(fe).toRawBytes(),ke=W(ne.context,Ae,H,V),$e=Z(fe+ke*me);$0("signature.s",$e,ya,r);const Ve=xT(Ae,XS($e,n.BYTES));return _l("result",Ve,n.BYTES*2)}const he=XF;function pe(V,P,ne,de=he){const{context:me,zip215:H}=de,fe=n.BYTES;V=_l("signature",V,2*fe),P=_l("message",P),ne=_l("publicKey",ne,fe),H!==void 0&&bC("zip215",H),s&&(P=s(P));const Ae=nv(V.slice(fe,2*fe));let ke,$e,Ve;try{ke=F.fromHex(ne,H),$e=F.fromHex(V.slice(0,fe),H),Ve=X.multiplyUnsafe(Ae)}catch{return!1}if(!H&&ke.isSmallOrder())return!1;const Fe=W(me,$e.toRawBytes(),ke.toRawBytes(),P);return $e.add(ke.multiplyUnsafe(Fe)).subtract(Ve).clearCofactor().equals(F.ZERO)}return X._setWindowSize(8),{CURVE:e,getPublicKey:B,sign:K,verify:pe,ExtendedPoint:F,utils:{getExtendedPublicKey:D,randomPrivateKey:()=>c(n.BYTES),precompute(V=8,P=F.BASE){return P._setWindowSize(V),P.multiply(BigInt(3)),P}}}}BigInt(0),BigInt(1);const I5=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),OT=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const KF=BigInt(1),PT=BigInt(2);BigInt(3);const YF=BigInt(5),qF=BigInt(8);function QF(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),o=I5,c=t*t%o*t%o,l=Sc(c,PT,o)*c%o,p=Sc(l,KF,o)*t%o,m=Sc(p,YF,o)*p%o,y=Sc(m,e,o)*m%o,v=Sc(y,n,o)*y%o,S=Sc(v,r,o)*v%o,_=Sc(S,s,o)*S%o,A=Sc(_,s,o)*S%o,N=Sc(A,e,o)*m%o;return{pow_p_5_8:Sc(N,PT,o)*t%o,b2:c}}function JF(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function eZ(t,e){const n=I5,r=Dr(e*e*e,n),s=Dr(r*r*e,n),o=QF(t*s).pow_p_5_8;let c=Dr(t*r*o,n);const l=Dr(e*c*c,n),p=c,m=Dr(c*OT,n),y=l===t,v=l===Dr(-t,n),S=l===Dr(-t*OT,n);return y&&(c=p),(v||S)&&(c=m),DF(c,n)&&(c=Dr(-c,n)),{isValid:y||v,value:c}}const tZ=l4(I5,void 0,!0),nZ={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:tZ,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:qF,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:SF,randomBytes:n4,adjustScalarBytes:JF,uvRatio:eZ},h4=VF(nZ),rZ="EdDSA",sZ="JWT",Iv=".",p2="base64url",f4="utf8",p4="utf8",iZ=":",oZ="did",aZ="key",kT="base58btc",cZ="z",lZ="K36",uZ=32;function N5(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function m4(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?N5(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function g4(t,e){e||(e=t.reduce((s,o)=>s+o.length,0));const n=m4(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return N5(n)}function dZ(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var o=t.charAt(s),c=o.charCodeAt(0);if(n[c]!==255)throw new TypeError(o+" is ambiguous");n[c]=s}var l=t.length,p=t.charAt(0),m=Math.log(l)/Math.log(256),y=Math.log(256)/Math.log(l);function v(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var N=0,R=0,$=0,G=A.length;$!==G&&A[$]===0;)$++,N++;for(var F=(G-$)*y+1>>>0,X=new Uint8Array(F);$!==G;){for(var j=A[$],L=0,Z=F-1;(j!==0||L<R)&&Z!==-1;Z--,L++)j+=256*X[Z]>>>0,X[Z]=j%l>>>0,j=j/l>>>0;if(j!==0)throw new Error("Non-zero carry");R=L,$++}for(var U=F-R;U!==F&&X[U]===0;)U++;for(var D=p.repeat(N);U<F;++U)D+=t.charAt(X[U]);return D}function S(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var N=0;if(A[N]!==" "){for(var R=0,$=0;A[N]===p;)R++,N++;for(var G=(A.length-N)*m+1>>>0,F=new Uint8Array(G);A[N];){var X=n[A.charCodeAt(N)];if(X===255)return;for(var j=0,L=G-1;(X!==0||j<$)&&L!==-1;L--,j++)X+=l*F[L]>>>0,F[L]=X%256>>>0,X=X/256>>>0;if(X!==0)throw new Error("Non-zero carry");$=j,N++}if(A[N]!==" "){for(var Z=G-$;Z!==G&&F[Z]===0;)Z++;for(var U=new Uint8Array(R+(G-Z)),D=R;Z!==G;)U[D++]=F[Z++];return U}}}function _(A){var N=S(A);if(N)return N;throw new Error(`Non-${e} character`)}return{encode:v,decodeUnsafe:S,decode:_}}var hZ=dZ,fZ=hZ;const y4=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},pZ=t=>new TextEncoder().encode(t),mZ=t=>new TextDecoder().decode(t);let gZ=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},yZ=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return b4(this,e)}},bZ=class{constructor(e){this.decoders=e}or(e){return b4(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const b4=(t,e)=>new bZ({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let wZ=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new gZ(e,n,r),this.decoder=new yZ(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const m2=({name:t,prefix:e,encode:n,decode:r})=>new wZ(t,e,n,r),_b=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=fZ(n,e);return m2({prefix:t,name:e,encode:r,decode:o=>y4(s(o))})},vZ=(t,e,n,r)=>{const s={};for(let y=0;y<e.length;++y)s[e[y]]=y;let o=t.length;for(;t[o-1]==="=";)--o;const c=new Uint8Array(o*n/8|0);let l=0,p=0,m=0;for(let y=0;y<o;++y){const v=s[t[y]];if(v===void 0)throw new SyntaxError(`Non-${r} character`);p=p<<n|v,l+=n,l>=8&&(l-=8,c[m++]=255&p>>l)}if(l>=n||255&p<<8-l)throw new SyntaxError("Unexpected end of data");return c},EZ=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let o="",c=0,l=0;for(let p=0;p<t.length;++p)for(l=l<<8|t[p],c+=8;c>n;)c-=n,o+=e[s&l>>c];if(c&&(o+=e[s&l<<n-c]),r)for(;o.length*n&7;)o+="=";return o},Es=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>m2({prefix:e,name:t,encode(s){return EZ(s,r,n)},decode(s){return vZ(s,r,n,t)}}),CZ=m2({prefix:"\0",name:"identity",encode:t=>mZ(t),decode:t=>pZ(t)});var SZ=Object.freeze({__proto__:null,identity:CZ});const _Z=Es({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var xZ=Object.freeze({__proto__:null,base2:_Z});const TZ=Es({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var AZ=Object.freeze({__proto__:null,base8:TZ});const IZ=_b({prefix:"9",name:"base10",alphabet:"0123456789"});var NZ=Object.freeze({__proto__:null,base10:IZ});const RZ=Es({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),OZ=Es({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var PZ=Object.freeze({__proto__:null,base16:RZ,base16upper:OZ});const kZ=Es({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),LZ=Es({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),DZ=Es({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),MZ=Es({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),UZ=Es({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$Z=Es({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),jZ=Es({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),BZ=Es({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),FZ=Es({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var ZZ=Object.freeze({__proto__:null,base32:kZ,base32upper:LZ,base32pad:DZ,base32padupper:MZ,base32hex:UZ,base32hexupper:$Z,base32hexpad:jZ,base32hexpadupper:BZ,base32z:FZ});const zZ=_b({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),GZ=_b({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var HZ=Object.freeze({__proto__:null,base36:zZ,base36upper:GZ});const XZ=_b({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),WZ=_b({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var VZ=Object.freeze({__proto__:null,base58btc:XZ,base58flickr:WZ});const KZ=Es({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),YZ=Es({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),qZ=Es({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),QZ=Es({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var JZ=Object.freeze({__proto__:null,base64:KZ,base64pad:YZ,base64url:qZ,base64urlpad:QZ});const w4=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),ez=w4.reduce((t,e,n)=>(t[n]=e,t),[]),tz=w4.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function nz(t){return t.reduce((e,n)=>(e+=ez[n],e),"")}function rz(t){const e=[];for(const n of t){const r=tz[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const sz=m2({prefix:"🚀",name:"base256emoji",encode:nz,decode:rz});var iz=Object.freeze({__proto__:null,base256emoji:sz}),oz=v4,LT=128,az=-128,cz=Math.pow(2,31);function v4(t,e,n){e=e||[],n=n||0;for(var r=n;t>=cz;)e[n++]=t&255|LT,t/=128;for(;t&az;)e[n++]=t&255|LT,t>>>=7;return e[n]=t|0,v4.bytes=n-r+1,e}var lz=VS,uz=128,DT=127;function VS(t,r){var n=0,r=r||0,s=0,o=r,c,l=t.length;do{if(o>=l)throw VS.bytes=0,new RangeError("Could not decode varint");c=t[o++],n+=s<28?(c&DT)<<s:(c&DT)*Math.pow(2,s),s+=7}while(c>=uz);return VS.bytes=o-r,n}var dz=Math.pow(2,7),hz=Math.pow(2,14),fz=Math.pow(2,21),pz=Math.pow(2,28),mz=Math.pow(2,35),gz=Math.pow(2,42),yz=Math.pow(2,49),bz=Math.pow(2,56),wz=Math.pow(2,63),vz=function(t){return t<dz?1:t<hz?2:t<fz?3:t<pz?4:t<mz?5:t<gz?6:t<yz?7:t<bz?8:t<wz?9:10},Ez={encode:oz,decode:lz,encodingLength:vz},E4=Ez;const MT=(t,e,n=0)=>(E4.encode(t,e,n),e),UT=t=>E4.encodingLength(t),KS=(t,e)=>{const n=e.byteLength,r=UT(t),s=r+UT(n),o=new Uint8Array(s+n);return MT(t,o,0),MT(n,o,r),o.set(e,s),new Cz(t,n,e,o)};let Cz=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const C4=({name:t,code:e,encode:n})=>new Sz(t,e,n);let Sz=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?KS(this.code,n):n.then(r=>KS(this.code,r))}else throw Error("Unknown type, must be binary type")}};const S4=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),_z=C4({name:"sha2-256",code:18,encode:S4("SHA-256")}),xz=C4({name:"sha2-512",code:19,encode:S4("SHA-512")});var Tz=Object.freeze({__proto__:null,sha256:_z,sha512:xz});const _4=0,Az="identity",x4=y4,Iz=t=>KS(_4,x4(t)),Nz={code:_4,name:Az,encode:x4,digest:Iz};var Rz=Object.freeze({__proto__:null,identity:Nz});new TextEncoder,new TextDecoder;const $T={...SZ,...xZ,...AZ,...NZ,...PZ,...ZZ,...HZ,...VZ,...JZ,...iz};({...Tz,...Rz});function T4(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const jT=T4("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),_C=T4("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=m4(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),A4={utf8:jT,"utf-8":jT,hex:$T.base16,latin1:_C,ascii:_C,binary:_C,...$T};function g2(t,e="utf8"){const n=A4[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Mm(t,e="utf8"){const n=A4[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?N5(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function BT(t){return lf(g2(Mm(t,p2),f4))}function Nv(t){return g2(Mm(jl(t),f4),p2)}function I4(t){const e=Mm(lZ,kT),n=cZ+g2(g4([e,t]),kT);return[oZ,aZ,n].join(iZ)}function Oz(t){return g2(t,p2)}function Pz(t){return Mm(t,p2)}function kz(t){return Mm([Nv(t.header),Nv(t.payload)].join(Iv),p4)}function Lz(t){return[Nv(t.header),Nv(t.payload),Oz(t.signature)].join(Iv)}function YS(t){const e=t.split(Iv),n=BT(e[0]),r=BT(e[1]),s=Pz(e[2]),o=Mm(e.slice(0,2).join(Iv),p4);return{header:n,payload:r,signature:s,data:o}}function FT(t=n4(uZ)){const e=h4.getPublicKey(t);return{secretKey:g4([t,e]),publicKey:e}}async function Dz(t,e,n,r,s=ct.fromMiliseconds(Date.now())){const o={alg:rZ,typ:sZ},c=I4(r.publicKey),l=s+n,p={iss:c,sub:t,aud:e,iat:s,exp:l},m=kz({header:o,payload:p}),y=h4.sign(m,r.secretKey.slice(0,32));return Lz({header:o,payload:p,signature:y})}var ZT=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Mz=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),Uz=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),$z=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),jz=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Bz=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Fz=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Zz=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,zT=3,zz=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Fz]],GT=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Gz(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Bz:typeof navigator<"u"?Xz(navigator.userAgent):Vz()}function Hz(t){return t!==""&&zz.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var o=s.exec(t);return!!o&&[r,o]},!1)}function Xz(t){var e=Hz(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new jz;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<zT&&(s=ZT(ZT([],s,!0),Kz(zT-s.length),!0)):s=[];var o=s.join("."),c=Wz(t),l=Zz.exec(t);return l&&l[1]?new $z(n,o,c,l[1]):new Mz(n,o,c)}function Wz(t){for(var e=0,n=GT.length;e<n;e++){var r=GT[e],s=r[0],o=r[1],c=o.exec(t);if(c)return s}return null}function Vz(){var t=typeof process<"u"&&process.version;return t?new Uz(process.version.slice(1)):null}function Kz(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Bn={},HT;function N4(){if(HT)return Bn;HT=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.getLocalStorage=Bn.getLocalStorageOrThrow=Bn.getCrypto=Bn.getCryptoOrThrow=Bn.getLocation=Bn.getLocationOrThrow=Bn.getNavigator=Bn.getNavigatorOrThrow=Bn.getDocument=Bn.getDocumentOrThrow=Bn.getFromWindowOrThrow=Bn.getFromWindow=void 0;function t(S){let _;return typeof window<"u"&&typeof window[S]<"u"&&(_=window[S]),_}Bn.getFromWindow=t;function e(S){const _=t(S);if(!_)throw new Error(`${S} is not defined in Window`);return _}Bn.getFromWindowOrThrow=e;function n(){return e("document")}Bn.getDocumentOrThrow=n;function r(){return t("document")}Bn.getDocument=r;function s(){return e("navigator")}Bn.getNavigatorOrThrow=s;function o(){return t("navigator")}Bn.getNavigator=o;function c(){return e("location")}Bn.getLocationOrThrow=c;function l(){return t("location")}Bn.getLocation=l;function p(){return e("crypto")}Bn.getCryptoOrThrow=p;function m(){return t("crypto")}Bn.getCrypto=m;function y(){return e("localStorage")}Bn.getLocalStorageOrThrow=y;function v(){return t("localStorage")}return Bn.getLocalStorage=v,Bn}var Bl=N4(),j0={},XT;function Yz(){if(XT)return j0;XT=1,Object.defineProperty(j0,"__esModule",{value:!0}),j0.getWindowMetadata=void 0;const t=N4();function e(){let n,r;try{n=t.getDocumentOrThrow(),r=t.getLocationOrThrow()}catch{return null}function s(){const _=n.getElementsByTagName("link"),A=[];for(let N=0;N<_.length;N++){const R=_[N],$=R.getAttribute("rel");if($&&$.toLowerCase().indexOf("icon")>-1){const G=R.getAttribute("href");if(G)if(G.toLowerCase().indexOf("https:")===-1&&G.toLowerCase().indexOf("http:")===-1&&G.indexOf("//")!==0){let F=r.protocol+"//"+r.host;if(G.indexOf("/")===0)F+=G;else{const X=r.pathname.split("/");X.pop();const j=X.join("/");F+=j+"/"+G}A.push(F)}else if(G.indexOf("//")===0){const F=r.protocol+G;A.push(F)}else A.push(G)}}return A}function o(..._){const A=n.getElementsByTagName("meta");for(let N=0;N<A.length;N++){const R=A[N],$=["itemprop","property","name"].map(G=>R.getAttribute(G)).filter(G=>G?_.includes(G):!1);if($.length&&$){const G=R.getAttribute("content");if(G)return G}}return""}function c(){let _=o("name","og:site_name","og:title","twitter:title");return _||(_=n.title),_}function l(){return o("description","og:description","twitter:description","keywords")}const p=c(),m=l(),y=r.origin,v=s();return{description:m,url:y,icons:v,name:p}}return j0.getWindowMetadata=e,j0}var qz=Yz();function Xy(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function qS(t){return Xy(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const R4="2.31.0";let xC={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${R4}`};class uf extends Error{constructor(e,n={}){const r=n.cause instanceof uf?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof uf&&n.cause.docsPath||n.docsPath,o=xC.getDocsUrl?.({...n,docsPath:s}),c=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...r?[`Details: ${r}`]:[],...xC.version?[`Version: ${xC.version}`]:[]].join(`
`);super(c,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=R4}walk(e){return O4(this,e)}}function O4(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?O4(t.cause,e):e?null:t}class P4 extends uf{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Um(t,{dir:e,size:n=32}={}){return typeof t=="string"?Qz(t,{dir:e,size:n}):Jz(t,{dir:e,size:n})}function Qz(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new P4({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Jz(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new P4({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const o=e==="right";r[o?s:n-s-1]=t[o?s:t.length-s-1]}return r}class eG extends uf{constructor({max:e,min:n,signed:r,size:s,value:o}){super(`Number "${o}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class tG extends uf{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function $m(t,{size:e}){if(qS(t)>e)throw new tG({givenSize:qS(t),maxSize:e})}function QS(t,e={}){const{signed:n}=e;e.size&&$m(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,o=(1n<<BigInt(s)*8n-1n)-1n;return r<=o?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function nG(t,e={}){return Number(QS(t,e))}const rG=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function JS(t,e={}){return typeof t=="number"||typeof t=="bigint"?L4(t,e):typeof t=="string"?oG(t,e):typeof t=="boolean"?sG(t,e):k4(t,e)}function sG(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?($m(n,{size:e.size}),Um(n,{size:e.size})):n}function k4(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=rG[t[s]];const r=`0x${n}`;return typeof e.size=="number"?($m(r,{size:e.size}),Um(r,{dir:"right",size:e.size})):r}function L4(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const c=typeof o=="bigint"&&n?-o-1n:0;if(o&&s>o||s<c){const p=typeof t=="bigint"?"n":"";throw new eG({max:o?`${o}${p}`:void 0,min:`${c}${p}`,signed:n,size:r,value:`${t}${p}`})}const l=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Um(l,{size:r}):l}const iG=new TextEncoder;function oG(t,e={}){const n=iG.encode(t);return k4(n,e)}const aG=new TextEncoder;function cG(t,e={}){return typeof t=="number"||typeof t=="bigint"?uG(t,e):typeof t=="boolean"?lG(t,e):Xy(t)?D4(t,e):M4(t,e)}function lG(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?($m(n,{size:e.size}),Um(n,{size:e.size})):n}const xl={zero:48,nine:57,A:65,F:70,a:97,f:102};function WT(t){if(t>=xl.zero&&t<=xl.nine)return t-xl.zero;if(t>=xl.A&&t<=xl.F)return t-(xl.A-10);if(t>=xl.a&&t<=xl.f)return t-(xl.a-10)}function D4(t,e={}){let n=t;e.size&&($m(n,{size:e.size}),n=Um(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,o=new Uint8Array(s);for(let c=0,l=0;c<s;c++){const p=WT(r.charCodeAt(l++)),m=WT(r.charCodeAt(l++));if(p===void 0||m===void 0)throw new uf(`Invalid byte sequence ("${r[l-2]}${r[l-1]}" in "${r}").`);o[c]=p*16+m}return o}function uG(t,e){const n=L4(t,e);return D4(n)}function M4(t,e={}){const n=aG.encode(t);return typeof e.size=="number"?($m(n,{size:e.size}),Um(n,{dir:"right",size:e.size})):n}const L1=BigInt(2**32-1),VT=BigInt(32);function dG(t,e=!1){return e?{h:Number(t&L1),l:Number(t>>VT&L1)}:{h:Number(t>>VT&L1)|0,l:Number(t&L1)|0}}function hG(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let o=0;o<n;o++){const{h:c,l}=dG(t[o],e);[r[o],s[o]]=[c,l]}return[r,s]}const fG=(t,e,n)=>t<<n|e>>>32-n,pG=(t,e,n)=>e<<n|t>>>32-n,mG=(t,e,n)=>e<<n-32|t>>>64-n,gG=(t,e,n)=>t<<n-32|e>>>64-n,jp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function yG(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Rv(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Wy(t,...e){if(!yG(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function bce(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Rv(t.outputLen),Rv(t.blockLen)}function KT(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function bG(t,e){Wy(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function wG(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function U4(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function wce(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function vce(t,e){return t<<32-e|t>>>e}const vG=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function EG(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function CG(t){for(let e=0;e<t.length;e++)t[e]=EG(t[e]);return t}const YT=vG?t=>t:CG;function SG(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function $4(t){return typeof t=="string"&&(t=SG(t)),Wy(t),t}function Ece(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Wy(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const o=t[r];n.set(o,s),s+=o.length}return n}class _G{}function xG(t){const e=r=>t().update($4(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Cce(t=32){if(jp&&typeof jp.getRandomValues=="function")return jp.getRandomValues(new Uint8Array(t));if(jp&&typeof jp.randomBytes=="function")return Uint8Array.from(jp.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const TG=BigInt(0),B0=BigInt(1),AG=BigInt(2),IG=BigInt(7),NG=BigInt(256),RG=BigInt(113),j4=[],B4=[],F4=[];for(let t=0,e=B0,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],j4.push(2*(5*r+n)),B4.push((t+1)*(t+2)/2%64);let s=TG;for(let o=0;o<7;o++)e=(e<<B0^(e>>IG)*RG)%NG,e&AG&&(s^=B0<<(B0<<BigInt(o))-B0);F4.push(s)}const Z4=hG(F4,!0),OG=Z4[0],PG=Z4[1],qT=(t,e,n)=>n>32?mG(t,e,n):fG(t,e,n),QT=(t,e,n)=>n>32?gG(t,e,n):pG(t,e,n);function kG(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let c=0;c<10;c++)n[c]=t[c]^t[c+10]^t[c+20]^t[c+30]^t[c+40];for(let c=0;c<10;c+=2){const l=(c+8)%10,p=(c+2)%10,m=n[p],y=n[p+1],v=qT(m,y,1)^n[l],S=QT(m,y,1)^n[l+1];for(let _=0;_<50;_+=10)t[c+_]^=v,t[c+_+1]^=S}let s=t[2],o=t[3];for(let c=0;c<24;c++){const l=B4[c],p=qT(s,o,l),m=QT(s,o,l),y=j4[c];s=t[y],o=t[y+1],t[y]=p,t[y+1]=m}for(let c=0;c<50;c+=10){for(let l=0;l<10;l++)n[l]=t[c+l];for(let l=0;l<10;l++)t[c+l]^=~n[(l+2)%10]&n[(l+4)%10]}t[0]^=OG[r],t[1]^=PG[r]}U4(n)}class R5 extends _G{constructor(e,n,r,s=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=o,Rv(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=wG(this.state)}clone(){return this._cloneInto()}keccak(){YT(this.state32),kG(this.state32,this.rounds),YT(this.state32),this.posOut=0,this.pos=0}update(e){KT(this),e=$4(e),Wy(e);const{blockLen:n,state:r}=this,s=e.length;for(let o=0;o<s;){const c=Math.min(n-this.pos,s-o);for(let l=0;l<c;l++)r[this.pos++]^=e[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){KT(this,!1),Wy(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,o=e.length;s<o;){this.posOut>=r&&this.keccak();const c=Math.min(r-this.posOut,o-s);e.set(n.subarray(this.posOut,this.posOut+c),s),this.posOut+=c,s+=c}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Rv(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(bG(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,U4(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:o,enableXOF:c}=this;return e||(e=new R5(n,r,s,c,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=r,e.outputLen=s,e.enableXOF=c,e.destroyed=this.destroyed,e}}const LG=(t,e,n)=>xG(()=>new R5(e,t,n)),DG=LG(1,136,256/8);function z4(t,e){const n=e||"hex",r=DG(Xy(t,{strict:!1})?cG(t):t);return n==="bytes"?r:JS(r)}class MG extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const TC=new MG(8192);function UG(t,e){if(TC.has(`${t}.${e}`))return TC.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=z4(M4(n),"bytes"),s=n.split("");for(let c=0;c<40;c+=2)r[c>>1]>>4>=8&&s[c]&&(s[c]=s[c].toUpperCase()),(r[c>>1]&15)>=8&&s[c+1]&&(s[c+1]=s[c+1].toUpperCase());const o=`0x${s.join("")}`;return TC.set(`${t}.${e}`,o),o}function $G(t){const e=z4(`0x${t.substring(4)}`).substring(26);return UG(`0x${e}`)}async function jG({hash:t,signature:e}){const n=Xy(t)?t:JS(t),{secp256k1:r}=await Bs(async()=>{const{secp256k1:c}=await import("./secp256k1-AMSFMgm3.js");return{secp256k1:c}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:m,s:y,v,yParity:S}=e,_=Number(S??v),A=JT(_);return new r.Signature(QS(m),QS(y)).addRecoveryBit(A)}const c=Xy(e)?e:JS(e);if(qS(c)!==65)throw new Error("invalid signature length");const l=nG(`0x${c.slice(130)}`),p=JT(l);return r.Signature.fromCompact(c.substring(2,130)).addRecoveryBit(p)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function JT(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function BG({hash:t,signature:e}){return $G(await jG({hash:t,signature:e}))}function FG(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let m=0;m<e.length;m++)e[m]=255;for(let m=0;m<t.length;m++){const y=t.charAt(m),v=y.charCodeAt(0);if(e[v]!==255)throw new TypeError(y+" is ambiguous");e[v]=m}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),o=Math.log(256)/Math.log(n);function c(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";let y=0,v=0,S=0;const _=m.length;for(;S!==_&&m[S]===0;)S++,y++;const A=(_-S)*o+1>>>0,N=new Uint8Array(A);for(;S!==_;){let G=m[S],F=0;for(let X=A-1;(G!==0||F<v)&&X!==-1;X--,F++)G+=256*N[X]>>>0,N[X]=G%n>>>0,G=G/n>>>0;if(G!==0)throw new Error("Non-zero carry");v=F,S++}let R=A-v;for(;R!==A&&N[R]===0;)R++;let $=r.repeat(y);for(;R<A;++R)$+=t.charAt(N[R]);return $}function l(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;let y=0,v=0,S=0;for(;m[y]===r;)v++,y++;const _=(m.length-y)*s+1>>>0,A=new Uint8Array(_);for(;y<m.length;){const G=m.charCodeAt(y);if(G>255)return;let F=e[G];if(F===255)return;let X=0;for(let j=_-1;(F!==0||X<S)&&j!==-1;j--,X++)F+=n*A[j]>>>0,A[j]=F%256>>>0,F=F/256>>>0;if(F!==0)throw new Error("Non-zero carry");S=X,y++}let N=_-S;for(;N!==_&&A[N]===0;)N++;const R=new Uint8Array(v+(_-N));let $=v;for(;N!==_;)R[$++]=A[N++];return R}function p(m){const y=l(m);if(y)return y;throw new Error("Non-base"+n+" character")}return{encode:c,decodeUnsafe:l,decode:p}}var ZG="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const jm=FG(ZG);function zG(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if((s&4294967168)===0){n++;continue}else if((s&4294965248)===0)n+=2;else{if(s>=55296&&s<=56319&&r<e){const o=t.charCodeAt(r);(o&64512)===56320&&(++r,s=((s&1023)<<10)+(o&1023)+65536)}(s&4294901760)===0?n+=3:n+=4}}return n}function GG(t,e,n){const r=t.length;let s=n,o=0;for(;o<r;){let c=t.charCodeAt(o++);if((c&4294967168)===0){e[s++]=c;continue}else if((c&4294965248)===0)e[s++]=c>>6&31|192;else{if(c>=55296&&c<=56319&&o<r){const l=t.charCodeAt(o);(l&64512)===56320&&(++o,c=((c&1023)<<10)+(l&1023)+65536)}(c&4294901760)===0?(e[s++]=c>>12&15|224,e[s++]=c>>6&63|128):(e[s++]=c>>18&7|240,e[s++]=c>>12&63|128,e[s++]=c>>6&63|128)}e[s++]=c&63|128}}const HG=new TextEncoder,XG=50;function WG(t,e,n){HG.encodeInto(t,e.subarray(n))}function VG(t,e,n){t.length>XG?WG(t,e,n):GG(t,e,n)}const KG=4096;function G4(t,e,n){let r=e;const s=r+n,o=[];let c="";for(;r<s;){const l=t[r++];if((l&128)===0)o.push(l);else if((l&224)===192){const p=t[r++]&63;o.push((l&31)<<6|p)}else if((l&240)===224){const p=t[r++]&63,m=t[r++]&63;o.push((l&31)<<12|p<<6|m)}else if((l&248)===240){const p=t[r++]&63,m=t[r++]&63,y=t[r++]&63;let v=(l&7)<<18|p<<12|m<<6|y;v>65535&&(v-=65536,o.push(v>>>10&1023|55296),v=56320|v&1023),o.push(v)}else o.push(l);o.length>=KG&&(c+=String.fromCharCode(...o),o.length=0)}return o.length>0&&(c+=String.fromCharCode(...o)),c}const YG=new TextDecoder,qG=200;function QG(t,e,n){const r=t.subarray(e,e+n);return YG.decode(r)}function JG(t,e,n){return n>qG?QG(t,e,n):G4(t,e,n)}class D1{constructor(e,n){this.type=e,this.data=n}}class qi extends Error{constructor(e){super(e);const n=Object.create(qi.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:qi.name})}}const F0=4294967295;function eH(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function H4(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function X4(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function tH(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const nH=-1,rH=4294967296-1,sH=17179869184-1;function iH({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=sH)if(e===0&&t<=rH){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),o=new DataView(s.buffer);return o.setUint32(0,e<<2|n&3),o.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),H4(r,4,t),n}}function oH(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function aH(t){if(t instanceof Date){const e=oH(t);return iH(e)}else return null}function cH(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,o=n>>>2;return{sec:s,nsec:o}}case 12:{const n=X4(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new qi(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function lH(t){const e=cH(t);return new Date(e.sec*1e3+e.nsec/1e6)}const uH={type:nH,encode:aH,decode:lH};class Ov{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(uH)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const o=s(e,n);if(o!=null){const c=-1-r;return new D1(c,o)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const o=s(e,n);if(o!=null){const c=r;return new D1(c,o)}}}return e instanceof D1?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new D1(n,e)}}Ov.defaultCodec=new Ov;function dH(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function e_(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):dH(t)?new Uint8Array(t):Uint8Array.from(t)}const hH=100,fH=2048;let pH=class W4{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??Ov.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??hH,this.initialBufferSize=e?.initialBufferSize??fH,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new W4({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=zG(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),VG(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=e_(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const o of r){const c=e[o];this.ignoreUndefined&&c===void 0||(this.encodeString(o),this.doEncode(c,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),eH(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),H4(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function mH(t,e){return new pH(e).encodeSharedRef(t)}function AC(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const gH=16,yH=16;class bH{constructor(e=gH,n=yH){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const o of s){const c=o.bytes;for(let l=0;l<r;l++)if(c[l]!==e[n+l])continue e;return o.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const o=G4(e,n,r),c=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(c,o),o}}const t_="array",cy="map_key",V4="map_value",wH=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new qi("The type of key must be string or number but "+typeof t)};class vH{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=t_,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=cy,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===t_){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===cy||e.type===V4){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Z0=-1,O5=new DataView(new ArrayBuffer(0)),EH=new Uint8Array(O5.buffer);try{O5.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const eA=new RangeError("Insufficient data"),CH=new bH;let SH=class K4{constructor(e){this.totalPos=0,this.pos=0,this.view=O5,this.bytes=EH,this.headByte=Z0,this.stack=new vH,this.entered=!1,this.extensionCodec=e?.extensionCodec??Ov.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??F0,this.maxBinLength=e?.maxBinLength??F0,this.maxArrayLength=e?.maxArrayLength??F0,this.maxMapLength=e?.maxMapLength??F0,this.maxExtLength=e?.maxExtLength??F0,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:CH,this.mapKeyConverter=e?.mapKeyConverter??wH}clone(){return new K4({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Z0,this.stack.reset()}setBuffer(e){const n=e_(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Z0&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=e_(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const l of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(l);try{r=this.doDecodeSync(),n=!0}catch(p){if(!(p instanceof RangeError))throw p}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:o,totalPos:c}=this;throw new RangeError(`Insufficient data in parsing ${AC(s)} at ${c} (${o} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const o of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new qi(`Unrecognized type byte: ${AC(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===t_)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===cy){if(n==="__proto__")throw new qi("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=V4;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=cy;continue e}}return n}}readHeadByte(){return this.headByte===Z0&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Z0}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new qi(`Unrecognized array type byte: ${AC(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new qi(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new qi(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){if(e>this.maxStrLength)throw new qi(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw eA;const r=this.pos+n;let s;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?s=this.keyDecoder.decode(this.bytes,r,e):s=JG(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===cy:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new qi(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw eA;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new qi(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=tH(this.view,this.pos);return this.pos+=8,e}readI64(){const e=X4(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function _H(t,e){return new SH(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function xH(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Y4(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function Pv(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function P5(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function n_(t){if(!Array.isArray(t))throw new Error("array expected")}function kv(t,e){if(!Y4(!0,e))throw new Error(`${t}: array of strings expected`)}function TH(t,e){if(!Y4(!1,e))throw new Error(`${t}: array of numbers expected`)}function AH(...t){const e=o=>o,n=(o,c)=>l=>o(c(l)),r=t.map(o=>o.encode).reduceRight(n,e),s=t.map(o=>o.decode).reduce(n,e);return{encode:r,decode:s}}function IH(t){const e=typeof t=="string"?t.split(""):t,n=e.length;kv("alphabet",e);const r=new Map(e.map((s,o)=>[s,o]));return{encode:s=>(n_(s),s.map(o=>{if(!Number.isSafeInteger(o)||o<0||o>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${o}". Allowed: ${t}`);return e[o]})),decode:s=>(n_(s),s.map(o=>{Pv("alphabet.decode",o);const c=r.get(o);if(c===void 0)throw new Error(`Unknown letter: "${o}". Allowed: ${t}`);return c}))}}function NH(t=""){return Pv("join",t),{encode:e=>(kv("join.decode",e),e.join(t)),decode:e=>(Pv("join.decode",e),e.split(t))}}function RH(t,e="="){return P5(t),Pv("padding",e),{encode(n){for(kv("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){kv("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const q4=(t,e)=>e===0?t:q4(e,t%e),Lv=(t,e)=>t+(e-q4(t,e)),IC=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function tA(t,e,n,r){if(n_(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Lv(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${Lv(e,n)}`);let s=0,o=0;const c=IC[e],l=IC[n]-1,p=[];for(const m of t){if(P5(m),m>=c)throw new Error(`convertRadix2: invalid data word=${m} from=${e}`);if(s=s<<e|m,o+e>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${e}`);for(o+=e;o>=n;o-=n)p.push((s>>o-n&l)>>>0);const y=IC[o];if(y===void 0)throw new Error("invalid carry");s&=y-1}if(s=s<<n-o&l,!r&&o>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&o>0&&p.push(s>>>0),p}function OH(t,e=!1){if(P5(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Lv(8,t)>32||Lv(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!xH(n))throw new Error("radix2.encode input should be Uint8Array");return tA(Array.from(n),8,t,!e)},decode:n=>(TH("radix2.decode",n),Uint8Array.from(tA(n,t,8,e)))}}const PH=AH(OH(5),IH("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),RH(5),NH(""));function k5(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Q4(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?k5(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function ly(t,e){e||(e=t.reduce((s,o)=>s+o.length,0));const n=Q4(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return k5(n)}function kH(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var o=t.charAt(s),c=o.charCodeAt(0);if(n[c]!==255)throw new TypeError(o+" is ambiguous");n[c]=s}var l=t.length,p=t.charAt(0),m=Math.log(l)/Math.log(256),y=Math.log(256)/Math.log(l);function v(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var N=0,R=0,$=0,G=A.length;$!==G&&A[$]===0;)$++,N++;for(var F=(G-$)*y+1>>>0,X=new Uint8Array(F);$!==G;){for(var j=A[$],L=0,Z=F-1;(j!==0||L<R)&&Z!==-1;Z--,L++)j+=256*X[Z]>>>0,X[Z]=j%l>>>0,j=j/l>>>0;if(j!==0)throw new Error("Non-zero carry");R=L,$++}for(var U=F-R;U!==F&&X[U]===0;)U++;for(var D=p.repeat(N);U<F;++U)D+=t.charAt(X[U]);return D}function S(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var N=0;if(A[N]!==" "){for(var R=0,$=0;A[N]===p;)R++,N++;for(var G=(A.length-N)*m+1>>>0,F=new Uint8Array(G);A[N];){var X=n[A.charCodeAt(N)];if(X===255)return;for(var j=0,L=G-1;(X!==0||j<$)&&L!==-1;L--,j++)X+=l*F[L]>>>0,F[L]=X%256>>>0,X=X/256>>>0;if(X!==0)throw new Error("Non-zero carry");$=j,N++}if(A[N]!==" "){for(var Z=G-$;Z!==G&&F[Z]===0;)Z++;for(var U=new Uint8Array(R+(G-Z)),D=R;Z!==G;)U[D++]=F[Z++];return U}}}function _(A){var N=S(A);if(N)return N;throw new Error(`Non-${e} character`)}return{encode:v,decodeUnsafe:S,decode:_}}var LH=kH,DH=LH;const MH=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},UH=t=>new TextEncoder().encode(t),$H=t=>new TextDecoder().decode(t);class jH{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class BH{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return J4(this,e)}}class FH{constructor(e){this.decoders=e}or(e){return J4(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const J4=(t,e)=>new FH({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class ZH{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new jH(e,n,r),this.decoder=new BH(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const y2=({name:t,prefix:e,encode:n,decode:r})=>new ZH(t,e,n,r),xb=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=DH(n,e);return y2({prefix:t,name:e,encode:r,decode:o=>MH(s(o))})},zH=(t,e,n,r)=>{const s={};for(let y=0;y<e.length;++y)s[e[y]]=y;let o=t.length;for(;t[o-1]==="=";)--o;const c=new Uint8Array(o*n/8|0);let l=0,p=0,m=0;for(let y=0;y<o;++y){const v=s[t[y]];if(v===void 0)throw new SyntaxError(`Non-${r} character`);p=p<<n|v,l+=n,l>=8&&(l-=8,c[m++]=255&p>>l)}if(l>=n||255&p<<8-l)throw new SyntaxError("Unexpected end of data");return c},GH=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let o="",c=0,l=0;for(let p=0;p<t.length;++p)for(l=l<<8|t[p],c+=8;c>n;)c-=n,o+=e[s&l>>c];if(c&&(o+=e[s&l<<n-c]),r)for(;o.length*n&7;)o+="=";return o},Cs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>y2({prefix:e,name:t,encode(s){return GH(s,r,n)},decode(s){return zH(s,r,n,t)}}),HH=y2({prefix:"\0",name:"identity",encode:t=>$H(t),decode:t=>UH(t)}),XH=Object.freeze(Object.defineProperty({__proto__:null,identity:HH},Symbol.toStringTag,{value:"Module"})),WH=Cs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),VH=Object.freeze(Object.defineProperty({__proto__:null,base2:WH},Symbol.toStringTag,{value:"Module"})),KH=Cs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),YH=Object.freeze(Object.defineProperty({__proto__:null,base8:KH},Symbol.toStringTag,{value:"Module"})),qH=xb({prefix:"9",name:"base10",alphabet:"0123456789"}),QH=Object.freeze(Object.defineProperty({__proto__:null,base10:qH},Symbol.toStringTag,{value:"Module"})),JH=Cs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),eX=Cs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),tX=Object.freeze(Object.defineProperty({__proto__:null,base16:JH,base16upper:eX},Symbol.toStringTag,{value:"Module"})),nX=Cs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),rX=Cs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),sX=Cs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),iX=Cs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),oX=Cs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),aX=Cs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),cX=Cs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),lX=Cs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),uX=Cs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),dX=Object.freeze(Object.defineProperty({__proto__:null,base32:nX,base32hex:oX,base32hexpad:cX,base32hexpadupper:lX,base32hexupper:aX,base32pad:sX,base32padupper:iX,base32upper:rX,base32z:uX},Symbol.toStringTag,{value:"Module"})),hX=xb({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),fX=xb({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),pX=Object.freeze(Object.defineProperty({__proto__:null,base36:hX,base36upper:fX},Symbol.toStringTag,{value:"Module"})),mX=xb({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),gX=xb({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),yX=Object.freeze(Object.defineProperty({__proto__:null,base58btc:mX,base58flickr:gX},Symbol.toStringTag,{value:"Module"})),bX=Cs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),wX=Cs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),vX=Cs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),EX=Cs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),CX=Object.freeze(Object.defineProperty({__proto__:null,base64:bX,base64pad:wX,base64url:vX,base64urlpad:EX},Symbol.toStringTag,{value:"Module"})),e9=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),SX=e9.reduce((t,e,n)=>(t[n]=e,t),[]),_X=e9.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function xX(t){return t.reduce((e,n)=>(e+=SX[n],e),"")}function TX(t){const e=[];for(const n of t){const r=_X[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const AX=y2({prefix:"🚀",name:"base256emoji",encode:xX,decode:TX}),IX=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:AX},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const nA={...XH,...VH,...YH,...QH,...tX,...dX,...pX,...yX,...CX,...IX};function t9(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const rA=t9("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),NC=t9("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Q4(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),n9={utf8:rA,"utf-8":rA,hex:nA.base16,latin1:NC,ascii:NC,binary:NC,...nA};function Mo(t,e="utf8"){const n=n9[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?k5(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function Oi(t,e="utf8"){const n=n9[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const NX={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var RC,sA;function r9(){if(sA)return RC;sA=1;const t="Input must be an string, Buffer or Uint8Array";function e(c){let l;if(c instanceof Uint8Array)l=c;else if(typeof c=="string")l=new TextEncoder().encode(c);else throw new Error(t);return l}function n(c){return Array.prototype.map.call(c,function(l){return(l<16?"0":"")+l.toString(16)}).join("")}function r(c){return(4294967296+c).toString(16).substring(1)}function s(c,l,p){let m=`
`+c+" = ";for(let y=0;y<l.length;y+=2){if(p===32)m+=r(l[y]).toUpperCase(),m+=" ",m+=r(l[y+1]).toUpperCase();else if(p===64)m+=r(l[y+1]).toUpperCase(),m+=r(l[y]).toUpperCase();else throw new Error("Invalid size "+p);y%6===4?m+=`
`+new Array(c.length+4).join(" "):y<l.length-2&&(m+=" ")}console.log(m)}function o(c,l,p){let m=new Date().getTime();const y=new Uint8Array(l);for(let S=0;S<l;S++)y[S]=S%256;const v=new Date().getTime();console.log("Generated random input in "+(v-m)+"ms"),m=v;for(let S=0;S<p;S++){const _=c(y),A=new Date().getTime(),N=A-m;m=A,console.log("Hashed in "+N+"ms: "+_.substring(0,20)+"..."),console.log(Math.round(l/(1<<20)/(N/1e3)*100)/100+" MB PER SECOND")}}return RC={normalizeInput:e,toHex:n,debugPrint:s,testSpeed:o},RC}var OC,iA;function RX(){if(iA)return OC;iA=1;const t=r9();function e($,G,F){const X=$[G]+$[F];let j=$[G+1]+$[F+1];X>=4294967296&&j++,$[G]=X,$[G+1]=j}function n($,G,F,X){let j=$[G]+F;F<0&&(j+=4294967296);let L=$[G+1]+X;j>=4294967296&&L++,$[G]=j,$[G+1]=L}function r($,G){return $[G]^$[G+1]<<8^$[G+2]<<16^$[G+3]<<24}function s($,G,F,X,j,L){const Z=m[j],U=m[j+1],D=m[L],B=m[L+1];e(p,$,G),n(p,$,Z,U);let W=p[X]^p[$],K=p[X+1]^p[$+1];p[X]=K,p[X+1]=W,e(p,F,X),W=p[G]^p[F],K=p[G+1]^p[F+1],p[G]=W>>>24^K<<8,p[G+1]=K>>>24^W<<8,e(p,$,G),n(p,$,D,B),W=p[X]^p[$],K=p[X+1]^p[$+1],p[X]=W>>>16^K<<16,p[X+1]=K>>>16^W<<16,e(p,F,X),W=p[G]^p[F],K=p[G+1]^p[F+1],p[G]=K>>>31^W<<1,p[G+1]=W>>>31^K<<1}const o=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],l=new Uint8Array(c.map(function($){return $*2})),p=new Uint32Array(32),m=new Uint32Array(32);function y($,G){let F=0;for(F=0;F<16;F++)p[F]=$.h[F],p[F+16]=o[F];for(p[24]=p[24]^$.t,p[25]=p[25]^$.t/4294967296,G&&(p[28]=~p[28],p[29]=~p[29]),F=0;F<32;F++)m[F]=r($.b,4*F);for(F=0;F<12;F++)s(0,8,16,24,l[F*16+0],l[F*16+1]),s(2,10,18,26,l[F*16+2],l[F*16+3]),s(4,12,20,28,l[F*16+4],l[F*16+5]),s(6,14,22,30,l[F*16+6],l[F*16+7]),s(0,10,20,30,l[F*16+8],l[F*16+9]),s(2,12,22,24,l[F*16+10],l[F*16+11]),s(4,14,16,26,l[F*16+12],l[F*16+13]),s(6,8,18,28,l[F*16+14],l[F*16+15]);for(F=0;F<16;F++)$.h[F]=$.h[F]^p[F]^p[F+16]}const v=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function S($,G,F,X){if($===0||$>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(G&&G.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(F&&F.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(X&&X.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const j={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:$};v.fill(0),v[0]=$,G&&(v[1]=G.length),v[2]=1,v[3]=1,F&&v.set(F,32),X&&v.set(X,48);for(let L=0;L<16;L++)j.h[L]=o[L]^r(v,L*4);return G&&(_(j,G),j.c=128),j}function _($,G){for(let F=0;F<G.length;F++)$.c===128&&($.t+=$.c,y($,!1),$.c=0),$.b[$.c++]=G[F]}function A($){for($.t+=$.c;$.c<128;)$.b[$.c++]=0;y($,!0);const G=new Uint8Array($.outlen);for(let F=0;F<$.outlen;F++)G[F]=$.h[F>>2]>>8*(F&3);return G}function N($,G,F,X,j){F=F||64,$=t.normalizeInput($),X&&(X=t.normalizeInput(X)),j&&(j=t.normalizeInput(j));const L=S(F,G,X,j);return _(L,$),A(L)}function R($,G,F,X,j){const L=N($,G,F,X,j);return t.toHex(L)}return OC={blake2b:N,blake2bHex:R,blake2bInit:S,blake2bUpdate:_,blake2bFinal:A},OC}var PC,oA;function OX(){if(oA)return PC;oA=1;const t=r9();function e(A,N){return A[N]^A[N+1]<<8^A[N+2]<<16^A[N+3]<<24}function n(A,N,R,$,G,F){c[A]=c[A]+c[N]+G,c[$]=r(c[$]^c[A],16),c[R]=c[R]+c[$],c[N]=r(c[N]^c[R],12),c[A]=c[A]+c[N]+F,c[$]=r(c[$]^c[A],8),c[R]=c[R]+c[$],c[N]=r(c[N]^c[R],7)}function r(A,N){return A>>>N^A<<32-N}const s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),o=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),c=new Uint32Array(16),l=new Uint32Array(16);function p(A,N){let R=0;for(R=0;R<8;R++)c[R]=A.h[R],c[R+8]=s[R];for(c[12]^=A.t,c[13]^=A.t/4294967296,N&&(c[14]=~c[14]),R=0;R<16;R++)l[R]=e(A.b,4*R);for(R=0;R<10;R++)n(0,4,8,12,l[o[R*16+0]],l[o[R*16+1]]),n(1,5,9,13,l[o[R*16+2]],l[o[R*16+3]]),n(2,6,10,14,l[o[R*16+4]],l[o[R*16+5]]),n(3,7,11,15,l[o[R*16+6]],l[o[R*16+7]]),n(0,5,10,15,l[o[R*16+8]],l[o[R*16+9]]),n(1,6,11,12,l[o[R*16+10]],l[o[R*16+11]]),n(2,7,8,13,l[o[R*16+12]],l[o[R*16+13]]),n(3,4,9,14,l[o[R*16+14]],l[o[R*16+15]]);for(R=0;R<8;R++)A.h[R]^=c[R]^c[R+8]}function m(A,N){if(!(A>0&&A<=32))throw new Error("Incorrect output length, should be in [1, 32]");const R=N?N.length:0;if(N&&!(R>0&&R<=32))throw new Error("Incorrect key length, should be in [1, 32]");const $={h:new Uint32Array(s),b:new Uint8Array(64),c:0,t:0,outlen:A};return $.h[0]^=16842752^R<<8^A,R>0&&(y($,N),$.c=64),$}function y(A,N){for(let R=0;R<N.length;R++)A.c===64&&(A.t+=A.c,p(A,!1),A.c=0),A.b[A.c++]=N[R]}function v(A){for(A.t+=A.c;A.c<64;)A.b[A.c++]=0;p(A,!0);const N=new Uint8Array(A.outlen);for(let R=0;R<A.outlen;R++)N[R]=A.h[R>>2]>>8*(R&3)&255;return N}function S(A,N,R){R=R||32,A=t.normalizeInput(A);const $=m(R,N);return y($,A),v($)}function _(A,N,R){const $=S(A,N,R);return t.toHex($)}return PC={blake2s:S,blake2sHex:_,blake2sInit:m,blake2sUpdate:y,blake2sFinal:v},PC}var kC,aA;function PX(){if(aA)return kC;aA=1;const t=RX(),e=OX();return kC={blake2b:t.blake2b,blake2bHex:t.blake2bHex,blake2bInit:t.blake2bInit,blake2bUpdate:t.blake2bUpdate,blake2bFinal:t.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},kC}var kX=PX(),LX={};const DX=":";function dm(t){const[e,n]=t.split(DX);return{namespace:e,reference:n}}function s9(t,e){return t.includes(":")?[t]:e.chains||[]}var MX=Object.defineProperty,UX=Object.defineProperties,$X=Object.getOwnPropertyDescriptors,cA=Object.getOwnPropertySymbols,jX=Object.prototype.hasOwnProperty,BX=Object.prototype.propertyIsEnumerable,r_=(t,e,n)=>e in t?MX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lA=(t,e)=>{for(var n in e||(e={}))jX.call(e,n)&&r_(t,n,e[n]);if(cA)for(var n of cA(e))BX.call(e,n)&&r_(t,n,e[n]);return t},FX=(t,e)=>UX(t,$X(e)),uA=(t,e,n)=>r_(t,typeof e!="symbol"?e+"":e,n);const ZX="ReactNative",eo={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},zX="js";function Dv(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function vd(){return!Bl.getDocument()&&!!Bl.getNavigator()&&navigator.product===ZX}function GX(){return vd()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function HX(){return vd()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Bm(){return!Dv()&&!!Bl.getNavigator()&&!!Bl.getDocument()}function Tb(){return vd()?eo.reactNative:Dv()?eo.node:Bm()?eo.browser:eo.unknown}function dA(){var t;try{return vd()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function XX(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function WX(t){var e,n;const r=i9();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),FX(lA(lA({},r),t),{url:t?.url||r.url,name:t?.name||r.name,description:t?.description||r.description,icons:(n=t?.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function i9(){return qz.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function VX(){if(Tb()===eo.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=Gz();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function KX(){var t;const e=Tb();return e===eo.browser?[e,((t=Bl.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function o9(t,e,n){const r=VX(),s=KX();return[[t,e].join("-"),[zX,n].join("-"),r,s].join("/")}function YX({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:o,useOnCloseEvent:c,bundleId:l,packageName:p}){const m=n.split("?"),y=o9(t,e,r),v={auth:s,ua:y,projectId:o,useOnCloseEvent:c,packageName:p||void 0,bundleId:l||void 0},S=XX(m[1]||"",v);return m[0]+"?"+S}function Xh(t,e){return t.filter(n=>e.includes(n)).length===t.length}function s_(t){return Object.fromEntries(t.entries())}function i_(t){return new Map(Object.entries(t))}function jh(t=ct.FIVE_MINUTES,e){const n=ct.toMiliseconds(t||ct.FIVE_MINUTES);let r,s,o,c;return{resolve:l=>{o&&r&&(clearTimeout(o),r(l),c=Promise.resolve(l))},reject:l=>{o&&s&&(clearTimeout(o),s(l))},done:()=>new Promise((l,p)=>{if(c)return l(c);o=setTimeout(()=>{const m=new Error(e);c=Promise.reject(m),p(m)},n),r=l,s=p})}}function sd(t,e,n){return new Promise(async(r,s)=>{const o=setTimeout(()=>s(new Error(n)),e);try{const c=await t;r(c)}catch(c){s(c)}clearTimeout(o)})}function a9(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function qX(t){return a9("topic",t)}function QX(t){return a9("id",t)}function c9(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function kr(t,e){return ct.fromMiliseconds(Date.now()+ct.toMiliseconds(t))}function qu(t){return Date.now()>=ct.toMiliseconds(t)}function Tn(t,e){return`${t}${e?`:${e}`:""}`}function Dc(t=[],e=[]){return[...new Set([...t,...e])]}async function JX({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,o=s?.href;if(typeof o!="string")return;const c=eW(o,t,e),l=Tb();if(l===eo.browser){if(!((r=Bl.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}tW(c)}else l===eo.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(s){console.error(s)}}function eW(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const o=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${o}${iW(r,!0)}`}else s=`${s}/wc?${r}`;return s}function tW(t){let e="_self";sW()?e="_top":(rW()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function nW(t,e){let n="";try{if(Bm()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function hA(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function fA(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function L5(){return typeof process<"u"&&LX.IS_VITEST==="true"}function rW(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function sW(){try{return window.self!==window.top}catch{return!1}}function iW(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function l9(t){return Buffer.from(t,"base64").toString("utf-8")}function oW(t){return new Promise(e=>setTimeout(e,t))}let aW=class{constructor({limit:e}){uA(this,"limit"),uA(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(e)}}has(e){return this.set.has(e)}};const M1=BigInt(2**32-1),pA=BigInt(32);function u9(t,e=!1){return e?{h:Number(t&M1),l:Number(t>>pA&M1)}:{h:Number(t>>pA&M1)|0,l:Number(t&M1)|0}}function d9(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let o=0;o<n;o++){const{h:c,l}=u9(t[o],e);[r[o],s[o]]=[c,l]}return[r,s]}const mA=(t,e,n)=>t>>>n,gA=(t,e,n)=>t<<32-n|e>>>n,Qu=(t,e,n)=>t>>>n|e<<32-n,Ju=(t,e,n)=>t<<32-n|e>>>n,ey=(t,e,n)=>t<<64-n|e>>>n-32,ty=(t,e,n)=>t>>>n-32|e<<64-n,cW=(t,e)=>e,lW=(t,e)=>t,uW=(t,e,n)=>t<<n|e>>>32-n,dW=(t,e,n)=>e<<n|t>>>32-n,hW=(t,e,n)=>e<<n-32|t>>>64-n,fW=(t,e,n)=>t<<n-32|e>>>64-n;function Ca(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const D5=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),M5=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,pW=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),mW=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,gW=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),yW=(t,e,n,r,s,o)=>e+n+r+s+o+(t/2**32|0)|0,Bp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function U5(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Fl(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function jo(t,...e){if(!U5(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function $5(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Fl(t.outputLen),Fl(t.blockLen)}function md(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function j5(t,e){jo(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Vy(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Bo(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function LC(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function _c(t,e){return t<<32-e|t>>>e}const h9=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function f9(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Rl=h9?t=>t:t=>f9(t);function bW(t){for(let e=0;e<t.length;e++)t[e]=f9(t[e]);return t}const ed=h9?t=>t:bW,p9=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",wW=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ky(t){if(jo(t),p9)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=wW[t[n]];return e}const Tl={_0:48,_9:57,A:65,F:70,a:97,f:102};function yA(t){if(t>=Tl._0&&t<=Tl._9)return t-Tl._0;if(t>=Tl.A&&t<=Tl.F)return t-(Tl.A-10);if(t>=Tl.a&&t<=Tl.f)return t-(Tl.a-10)}function B5(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(p9)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const c=yA(t.charCodeAt(o)),l=yA(t.charCodeAt(o+1));if(c===void 0||l===void 0){const p=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+o)}r[s]=c*16+l}return r}function vW(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Ia(t){return typeof t=="string"&&(t=vW(t)),jo(t),t}function Wh(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];jo(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const o=t[r];n.set(o,s),s+=o.length}return n}let b2=class{};function Ab(t){const e=r=>t().update(Ia(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function EW(t){const e=(r,s)=>t(s).update(Ia(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function Fm(t=32){if(Bp&&typeof Bp.getRandomValues=="function")return Bp.getRandomValues(new Uint8Array(t));if(Bp&&typeof Bp.randomBytes=="function")return Uint8Array.from(Bp.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const CW=BigInt(0),z0=BigInt(1),SW=BigInt(2),_W=BigInt(7),xW=BigInt(256),TW=BigInt(113),m9=[],g9=[],y9=[];for(let t=0,e=z0,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],m9.push(2*(5*r+n)),g9.push((t+1)*(t+2)/2%64);let s=CW;for(let o=0;o<7;o++)e=(e<<z0^(e>>_W)*TW)%xW,e&SW&&(s^=z0<<(z0<<BigInt(o))-z0);y9.push(s)}const b9=d9(y9,!0),AW=b9[0],IW=b9[1],bA=(t,e,n)=>n>32?hW(t,e,n):uW(t,e,n),wA=(t,e,n)=>n>32?fW(t,e,n):dW(t,e,n);function NW(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let c=0;c<10;c++)n[c]=t[c]^t[c+10]^t[c+20]^t[c+30]^t[c+40];for(let c=0;c<10;c+=2){const l=(c+8)%10,p=(c+2)%10,m=n[p],y=n[p+1],v=bA(m,y,1)^n[l],S=wA(m,y,1)^n[l+1];for(let _=0;_<50;_+=10)t[c+_]^=v,t[c+_+1]^=S}let s=t[2],o=t[3];for(let c=0;c<24;c++){const l=g9[c],p=bA(s,o,l),m=wA(s,o,l),y=m9[c];s=t[y],o=t[y+1],t[y]=p,t[y+1]=m}for(let c=0;c<50;c+=10){for(let l=0;l<10;l++)n[l]=t[c+l];for(let l=0;l<10;l++)t[c+l]^=~n[(l+2)%10]&n[(l+4)%10]}t[0]^=AW[r],t[1]^=IW[r]}Bo(n)}let RW=class w9 extends b2{constructor(e,n,r,s=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=o,Fl(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Vy(this.state)}clone(){return this._cloneInto()}keccak(){ed(this.state32),NW(this.state32,this.rounds),ed(this.state32),this.posOut=0,this.pos=0}update(e){md(this),e=Ia(e),jo(e);const{blockLen:n,state:r}=this,s=e.length;for(let o=0;o<s;){const c=Math.min(n-this.pos,s-o);for(let l=0;l<c;l++)r[this.pos++]^=e[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){md(this,!1),jo(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,o=e.length;s<o;){this.posOut>=r&&this.keccak();const c=Math.min(r-this.posOut,o-s);e.set(n.subarray(this.posOut,this.posOut+c),s),this.posOut+=c,s+=c}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Fl(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(j5(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Bo(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:o,enableXOF:c}=this;return e||(e=new w9(n,r,s,c,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=r,e.outputLen=s,e.enableXOF=c,e.destroyed=this.destroyed,e}};const OW=(t,e,n)=>Ab(()=>new RW(e,t,n)),PW=OW(1,136,256/8);function kW(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),o=BigInt(4294967295),c=Number(n>>s&o),l=Number(n&o),p=r?4:0,m=r?0:4;t.setUint32(e+p,c,r),t.setUint32(e+m,l,r)}function LW(t,e,n){return t&e^~t&n}function DW(t,e,n){return t&e^t&n^e&n}let v9=class extends b2{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=LC(this.buffer)}update(e){md(this),e=Ia(e),jo(e);const{view:n,buffer:r,blockLen:s}=this,o=e.length;for(let c=0;c<o;){const l=Math.min(s-this.pos,o-c);if(l===s){const p=LC(e);for(;s<=o-c;c+=s)this.process(p,c);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,c+=l,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){md(this),j5(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:c}=this;n[c++]=128,Bo(this.buffer.subarray(c)),this.padOffset>s-c&&(this.process(r,0),c=0);for(let v=c;v<s;v++)n[v]=0;kW(r,s-8,BigInt(this.length*8),o),this.process(r,0);const l=LC(e),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const m=p/4,y=this.get();if(m>y.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<m;v++)l.setUint32(4*v,y[v],o)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:c,pos:l}=this;return e.destroyed=c,e.finished=o,e.length=s,e.pos=l,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Gu=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ms=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Us=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),MW=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Hu=new Uint32Array(64);let UW=class extends v9{constructor(e=32){super(64,e,8,!1),this.A=Gu[0]|0,this.B=Gu[1]|0,this.C=Gu[2]|0,this.D=Gu[3]|0,this.E=Gu[4]|0,this.F=Gu[5]|0,this.G=Gu[6]|0,this.H=Gu[7]|0}get(){const{A:e,B:n,C:r,D:s,E:o,F:c,G:l,H:p}=this;return[e,n,r,s,o,c,l,p]}set(e,n,r,s,o,c,l,p){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=c|0,this.G=l|0,this.H=p|0}process(e,n){for(let v=0;v<16;v++,n+=4)Hu[v]=e.getUint32(n,!1);for(let v=16;v<64;v++){const S=Hu[v-15],_=Hu[v-2],A=_c(S,7)^_c(S,18)^S>>>3,N=_c(_,17)^_c(_,19)^_>>>10;Hu[v]=N+Hu[v-7]+A+Hu[v-16]|0}let{A:r,B:s,C:o,D:c,E:l,F:p,G:m,H:y}=this;for(let v=0;v<64;v++){const S=_c(l,6)^_c(l,11)^_c(l,25),_=y+S+LW(l,p,m)+MW[v]+Hu[v]|0,A=(_c(r,2)^_c(r,13)^_c(r,22))+DW(r,s,o)|0;y=m,m=p,p=l,l=c+_|0,c=o,o=s,s=r,r=_+A|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,c=c+this.D|0,l=l+this.E|0,p=p+this.F|0,m=m+this.G|0,y=y+this.H|0,this.set(r,s,o,c,l,p,m,y)}roundClean(){Bo(Hu)}destroy(){this.set(0,0,0,0,0,0,0,0),Bo(this.buffer)}};const E9=d9(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),$W=E9[0],jW=E9[1],Xu=new Uint32Array(80),Wu=new Uint32Array(80);let F5=class extends v9{constructor(e=64){super(128,e,16,!1),this.Ah=Us[0]|0,this.Al=Us[1]|0,this.Bh=Us[2]|0,this.Bl=Us[3]|0,this.Ch=Us[4]|0,this.Cl=Us[5]|0,this.Dh=Us[6]|0,this.Dl=Us[7]|0,this.Eh=Us[8]|0,this.El=Us[9]|0,this.Fh=Us[10]|0,this.Fl=Us[11]|0,this.Gh=Us[12]|0,this.Gl=Us[13]|0,this.Hh=Us[14]|0,this.Hl=Us[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:o,Cl:c,Dh:l,Dl:p,Eh:m,El:y,Fh:v,Fl:S,Gh:_,Gl:A,Hh:N,Hl:R}=this;return[e,n,r,s,o,c,l,p,m,y,v,S,_,A,N,R]}set(e,n,r,s,o,c,l,p,m,y,v,S,_,A,N,R){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=o|0,this.Cl=c|0,this.Dh=l|0,this.Dl=p|0,this.Eh=m|0,this.El=y|0,this.Fh=v|0,this.Fl=S|0,this.Gh=_|0,this.Gl=A|0,this.Hh=N|0,this.Hl=R|0}process(e,n){for(let F=0;F<16;F++,n+=4)Xu[F]=e.getUint32(n),Wu[F]=e.getUint32(n+=4);for(let F=16;F<80;F++){const X=Xu[F-15]|0,j=Wu[F-15]|0,L=Qu(X,j,1)^Qu(X,j,8)^mA(X,j,7),Z=Ju(X,j,1)^Ju(X,j,8)^gA(X,j,7),U=Xu[F-2]|0,D=Wu[F-2]|0,B=Qu(U,D,19)^ey(U,D,61)^mA(U,D,6),W=Ju(U,D,19)^ty(U,D,61)^gA(U,D,6),K=pW(Z,W,Wu[F-7],Wu[F-16]),he=mW(K,L,B,Xu[F-7],Xu[F-16]);Xu[F]=he|0,Wu[F]=K|0}let{Ah:r,Al:s,Bh:o,Bl:c,Ch:l,Cl:p,Dh:m,Dl:y,Eh:v,El:S,Fh:_,Fl:A,Gh:N,Gl:R,Hh:$,Hl:G}=this;for(let F=0;F<80;F++){const X=Qu(v,S,14)^Qu(v,S,18)^ey(v,S,41),j=Ju(v,S,14)^Ju(v,S,18)^ty(v,S,41),L=v&_^~v&N,Z=S&A^~S&R,U=gW(G,j,Z,jW[F],Wu[F]),D=yW(U,$,X,L,$W[F],Xu[F]),B=U|0,W=Qu(r,s,28)^ey(r,s,34)^ey(r,s,39),K=Ju(r,s,28)^ty(r,s,34)^ty(r,s,39),he=r&o^r&l^o&l,pe=s&c^s&p^c&p;$=N|0,G=R|0,N=_|0,R=A|0,_=v|0,A=S|0,{h:v,l:S}=Ca(m|0,y|0,D|0,B|0),m=l|0,y=p|0,l=o|0,p=c|0,o=r|0,c=s|0;const V=D5(B,K,pe);r=M5(V,D,W,he),s=V|0}({h:r,l:s}=Ca(this.Ah|0,this.Al|0,r|0,s|0)),{h:o,l:c}=Ca(this.Bh|0,this.Bl|0,o|0,c|0),{h:l,l:p}=Ca(this.Ch|0,this.Cl|0,l|0,p|0),{h:m,l:y}=Ca(this.Dh|0,this.Dl|0,m|0,y|0),{h:v,l:S}=Ca(this.Eh|0,this.El|0,v|0,S|0),{h:_,l:A}=Ca(this.Fh|0,this.Fl|0,_|0,A|0),{h:N,l:R}=Ca(this.Gh|0,this.Gl|0,N|0,R|0),{h:$,l:G}=Ca(this.Hh|0,this.Hl|0,$|0,G|0),this.set(r,s,o,c,l,p,m,y,v,S,_,A,N,R,$,G)}roundClean(){Bo(Xu,Wu)}destroy(){Bo(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},BW=class extends F5{constructor(){super(48),this.Ah=Ms[0]|0,this.Al=Ms[1]|0,this.Bh=Ms[2]|0,this.Bl=Ms[3]|0,this.Ch=Ms[4]|0,this.Cl=Ms[5]|0,this.Dh=Ms[6]|0,this.Dl=Ms[7]|0,this.Eh=Ms[8]|0,this.El=Ms[9]|0,this.Fh=Ms[10]|0,this.Fl=Ms[11]|0,this.Gh=Ms[12]|0,this.Gl=Ms[13]|0,this.Hh=Ms[14]|0,this.Hl=Ms[15]|0}};const $s=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class FW extends F5{constructor(){super(32),this.Ah=$s[0]|0,this.Al=$s[1]|0,this.Bh=$s[2]|0,this.Bl=$s[3]|0,this.Ch=$s[4]|0,this.Cl=$s[5]|0,this.Dh=$s[6]|0,this.Dl=$s[7]|0,this.Eh=$s[8]|0,this.El=$s[9]|0,this.Fh=$s[10]|0,this.Fl=$s[11]|0,this.Gh=$s[12]|0,this.Gl=$s[13]|0,this.Hh=$s[14]|0,this.Hl=$s[15]|0}}const w2=Ab(()=>new UW),ZW=Ab(()=>new F5),zW=Ab(()=>new BW),GW=Ab(()=>new FW),HW=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Pr=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),dt=new Uint32Array(32);function Vu(t,e,n,r,s,o){const c=s[o],l=s[o+1];let p=dt[2*t],m=dt[2*t+1],y=dt[2*e],v=dt[2*e+1],S=dt[2*n],_=dt[2*n+1],A=dt[2*r],N=dt[2*r+1],R=D5(p,y,c);m=M5(R,m,v,l),p=R|0,{Dh:N,Dl:A}={Dh:N^m,Dl:A^p},{Dh:N,Dl:A}={Dh:cW(N,A),Dl:lW(N)},{h:_,l:S}=Ca(_,S,N,A),{Bh:v,Bl:y}={Bh:v^_,Bl:y^S},{Bh:v,Bl:y}={Bh:Qu(v,y,24),Bl:Ju(v,y,24)},dt[2*t]=p,dt[2*t+1]=m,dt[2*e]=y,dt[2*e+1]=v,dt[2*n]=S,dt[2*n+1]=_,dt[2*r]=A,dt[2*r+1]=N}function Ku(t,e,n,r,s,o){const c=s[o],l=s[o+1];let p=dt[2*t],m=dt[2*t+1],y=dt[2*e],v=dt[2*e+1],S=dt[2*n],_=dt[2*n+1],A=dt[2*r],N=dt[2*r+1],R=D5(p,y,c);m=M5(R,m,v,l),p=R|0,{Dh:N,Dl:A}={Dh:N^m,Dl:A^p},{Dh:N,Dl:A}={Dh:Qu(N,A,16),Dl:Ju(N,A,16)},{h:_,l:S}=Ca(_,S,N,A),{Bh:v,Bl:y}={Bh:v^_,Bl:y^S},{Bh:v,Bl:y}={Bh:ey(v,y,63),Bl:ty(v,y,63)},dt[2*t]=p,dt[2*t+1]=m,dt[2*e]=y,dt[2*e+1]=v,dt[2*n]=S,dt[2*n+1]=_,dt[2*r]=A,dt[2*r+1]=N}function XW(t,e={},n,r,s){if(Fl(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:o,salt:c,personalization:l}=e;if(o!==void 0&&(o.length<1||o.length>n))throw new Error("key length must be undefined or 1.."+n);if(c!==void 0&&c.length!==r)throw new Error("salt must be undefined or "+r);if(l!==void 0&&l.length!==s)throw new Error("personalization must be undefined or "+s)}class WW extends b2{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Fl(e),Fl(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=Vy(this.buffer)}update(e){md(this),e=Ia(e),jo(e);const{blockLen:n,buffer:r,buffer32:s}=this,o=e.length,c=e.byteOffset,l=e.buffer;for(let p=0;p<o;){this.pos===n&&(ed(s),this.compress(s,0,!1),ed(s),this.pos=0);const m=Math.min(n-this.pos,o-p),y=c+p;if(m===n&&!(y%4)&&p+m<o){const v=new Uint32Array(l,y,Math.floor((o-p)/4));ed(v);for(let S=0;p+n<o;S+=s.length,p+=n)this.length+=n,this.compress(v,S,!1);ed(v);continue}r.set(e.subarray(p,p+m),this.pos),this.pos+=m,this.length+=m,p+=m}return this}digestInto(e){md(this),j5(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,Bo(this.buffer.subarray(n)),ed(r),this.compress(r,0,!0),ed(r);const s=Vy(e);this.get().forEach((o,c)=>s[c]=Rl(o))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:o,outputLen:c,pos:l}=this;return e||(e=new this.constructor({dkLen:c})),e.set(...this.get()),e.buffer.set(n),e.destroyed=o,e.finished=s,e.length=r,e.pos=l,e.outputLen=c,e}clone(){return this._cloneInto()}}class VW extends WW{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=Pr[0]|0,this.v0h=Pr[1]|0,this.v1l=Pr[2]|0,this.v1h=Pr[3]|0,this.v2l=Pr[4]|0,this.v2h=Pr[5]|0,this.v3l=Pr[6]|0,this.v3h=Pr[7]|0,this.v4l=Pr[8]|0,this.v4h=Pr[9]|0,this.v5l=Pr[10]|0,this.v5h=Pr[11]|0,this.v6l=Pr[12]|0,this.v6h=Pr[13]|0,this.v7l=Pr[14]|0,this.v7h=Pr[15]|0,XW(n,e,64,16,16);let{key:r,personalization:s,salt:o}=e,c=0;if(r!==void 0&&(r=Ia(r),c=r.length),this.v0l^=this.outputLen|c<<8|65536|1<<24,o!==void 0){o=Ia(o);const l=Vy(o);this.v4l^=Rl(l[0]),this.v4h^=Rl(l[1]),this.v5l^=Rl(l[2]),this.v5h^=Rl(l[3])}if(s!==void 0){s=Ia(s);const l=Vy(s);this.v6l^=Rl(l[0]),this.v6h^=Rl(l[1]),this.v7l^=Rl(l[2]),this.v7h^=Rl(l[3])}if(r!==void 0){const l=new Uint8Array(this.blockLen);l.set(r),this.update(l)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:o,v2h:c,v3l:l,v3h:p,v4l:m,v4h:y,v5l:v,v5h:S,v6l:_,v6h:A,v7l:N,v7h:R}=this;return[e,n,r,s,o,c,l,p,m,y,v,S,_,A,N,R]}set(e,n,r,s,o,c,l,p,m,y,v,S,_,A,N,R){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=o|0,this.v2h=c|0,this.v3l=l|0,this.v3h=p|0,this.v4l=m|0,this.v4h=y|0,this.v5l=v|0,this.v5h=S|0,this.v6l=_|0,this.v6h=A|0,this.v7l=N|0,this.v7h=R|0}compress(e,n,r){this.get().forEach((p,m)=>dt[m]=p),dt.set(Pr,16);let{h:s,l:o}=u9(BigInt(this.length));dt[24]=Pr[8]^o,dt[25]=Pr[9]^s,r&&(dt[28]=~dt[28],dt[29]=~dt[29]);let c=0;const l=HW;for(let p=0;p<12;p++)Vu(0,4,8,12,e,n+2*l[c++]),Ku(0,4,8,12,e,n+2*l[c++]),Vu(1,5,9,13,e,n+2*l[c++]),Ku(1,5,9,13,e,n+2*l[c++]),Vu(2,6,10,14,e,n+2*l[c++]),Ku(2,6,10,14,e,n+2*l[c++]),Vu(3,7,11,15,e,n+2*l[c++]),Ku(3,7,11,15,e,n+2*l[c++]),Vu(0,5,10,15,e,n+2*l[c++]),Ku(0,5,10,15,e,n+2*l[c++]),Vu(1,6,11,12,e,n+2*l[c++]),Ku(1,6,11,12,e,n+2*l[c++]),Vu(2,7,8,13,e,n+2*l[c++]),Ku(2,7,8,13,e,n+2*l[c++]),Vu(3,4,9,14,e,n+2*l[c++]),Ku(3,4,9,14,e,n+2*l[c++]);this.v0l^=dt[0]^dt[16],this.v0h^=dt[1]^dt[17],this.v1l^=dt[2]^dt[18],this.v1h^=dt[3]^dt[19],this.v2l^=dt[4]^dt[20],this.v2h^=dt[5]^dt[21],this.v3l^=dt[6]^dt[22],this.v3h^=dt[7]^dt[23],this.v4l^=dt[8]^dt[24],this.v4h^=dt[9]^dt[25],this.v5l^=dt[10]^dt[26],this.v5h^=dt[11]^dt[27],this.v6l^=dt[12]^dt[28],this.v6h^=dt[13]^dt[29],this.v7l^=dt[14]^dt[30],this.v7h^=dt[15]^dt[31],Bo(dt)}destroy(){this.destroyed=!0,Bo(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const KW=EW(t=>new VW(t)),YW="https://rpc.walletconnect.org/v1";function C9(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(PW(n)).toString("hex")}async function qW(t,e,n,r,s,o){switch(n.t){case"eip191":return await QW(t,e,n.s);case"eip1271":return await JW(t,e,n.s,r,s,o);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function QW(t,e,n){return(await BG({hash:C9(e),signature:n})).toLowerCase()===t.toLowerCase()}async function JW(t,e,n,r,s,o){const c=dm(r);if(!c.namespace||!c.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const l="0x1626ba7e",p="0000000000000000000000000000000000000000000000000000000000000040",m=n.substring(2),y=(m.length/2).toString(16).padStart(64,"0"),v=(e.startsWith("0x")?e:C9(e)).substring(2),S=l+v+p+y+m,_=await fetch(`${o||YW}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:eV(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:S},"latest"]})}),{result:A}=await _.json();return A?A.slice(0,l.length).toLowerCase()===l.toLowerCase():!1}catch(l){return console.error("isValidEip1271Signature: ",l),!1}}function eV(){return Date.now()+Math.floor(Math.random()*1e3)}function tV(t){const e=atob(t),n=new Uint8Array(e.length);for(let c=0;c<e.length;c++)n[c]=e.charCodeAt(c);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const o=Buffer.from(t,"base64").slice(1,65);return jm.encode(o)}function nV(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(o=>o.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=KW(r,{dkLen:32});return jm.encode(s)}function vA(t){const e=new Uint8Array(w2(rV(t)));return jm.encode(e)}function rV(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function EA(t){const e=Buffer.from(t,"base64"),n=_H(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=mH(n),s=Buffer.from("TX"),o=Buffer.concat([s,Buffer.from(r)]),c=GW(o);return PH.encode(c).replace(/=+$/,"")}function DC(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function sV(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(DC(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(DC(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(DC(r.length)),s.push(r);const o=Buffer.concat(s),c=w2(o);return Buffer.from(c).toString("hex").toUpperCase()}var iV=Object.defineProperty,oV=Object.defineProperties,aV=Object.getOwnPropertyDescriptors,CA=Object.getOwnPropertySymbols,cV=Object.prototype.hasOwnProperty,lV=Object.prototype.propertyIsEnumerable,SA=(t,e,n)=>e in t?iV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uV=(t,e)=>{for(var n in e||(e={}))cV.call(e,n)&&SA(t,n,e[n]);if(CA)for(var n of CA(e))lV.call(e,n)&&SA(t,n,e[n]);return t},dV=(t,e)=>oV(t,aV(e));const hV="did:pkh:",Z5=t=>t?.split(":"),fV=t=>{const e=t&&Z5(t);if(e)return t.includes(hV)?e[3]:e[1]},o_=t=>{const e=t&&Z5(t);if(e)return e[2]+":"+e[3]},Mv=t=>{const e=t&&Z5(t);if(e)return e.pop()};async function _A(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,o=S9(s,s.iss),c=Mv(s.iss);return await qW(c,o,r,o_(s.iss),n)}const S9=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=Mv(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const o=`URI: ${t.aud||t.uri}`,c=`Version: ${t.version}`,l=`Chain ID: ${fV(e)}`,p=`Nonce: ${t.nonce}`,m=`Issued At: ${t.iat}`,y=t.exp?`Expiration Time: ${t.exp}`:void 0,v=t.nbf?`Not Before: ${t.nbf}`:void 0,S=t.requestId?`Request ID: ${t.requestId}`:void 0,_=t.resources?`Resources:${t.resources.map(N=>`
- ${N}`).join("")}`:void 0,A=rv(t.resources);if(A){const N=Yy(A);s=CV(s,N)}return[n,r,"",s,"",o,c,l,p,m,y,v,S,_].filter(N=>N!=null).join(`
`)};function pV(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function mV(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function df(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const o=r[s];if(!Array.isArray(o))throw new Error(`Ability limits ${s} must be an array of objects, found: ${o}`);if(!o.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);o.forEach(c=>{if(typeof c!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${c}`)})})})}function gV(t,e,n,r={}){return n?.sort((s,o)=>s.localeCompare(o)),{att:{[t]:yV(e,n,r)}}}function yV(t,e,n={}){e=e?.sort((s,o)=>s.localeCompare(o));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function _9(t){return df(t),`urn:recap:${pV(t).replace(/=/g,"")}`}function Yy(t){const e=mV(t.replace("urn:recap:",""));return df(e),e}function bV(t,e,n){const r=gV(t,e,n);return _9(r)}function wV(t){return t&&t.includes("urn:recap:")}function vV(t,e){const n=Yy(t),r=Yy(e),s=EV(n,r);return _9(s)}function EV(t,e){df(t),df(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,o)=>s.localeCompare(o)),r={att:{}};return n.forEach(s=>{var o,c;Object.keys(((o=t.att)==null?void 0:o[s])||{}).concat(Object.keys(((c=e.att)==null?void 0:c[s])||{})).sort((l,p)=>l.localeCompare(p)).forEach(l=>{var p,m;r.att[s]=dV(uV({},r.att[s]),{[l]:((p=t.att[s])==null?void 0:p[l])||((m=e.att[s])==null?void 0:m[l])})})}),r}function CV(t="",e){df(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(l=>{const p=Object.keys(e.att[l]).map(v=>({ability:v.split("/")[0],action:v.split("/")[1]}));p.sort((v,S)=>v.action.localeCompare(S.action));const m={};p.forEach(v=>{m[v.ability]||(m[v.ability]=[]),m[v.ability].push(v.action)});const y=Object.keys(m).map(v=>(s++,`(${s}) '${v}': '${m[v].join("', '")}' for '${l}'.`));r.push(y.join(", ").replace(".,","."))});const o=r.join(" "),c=`${n}${o}`;return`${t?t+" ":""}${c}`}function xA(t){var e;const n=Yy(t);df(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function TA(t){const e=Yy(t);df(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var o;(o=s?.[0])!=null&&o.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function rv(t){if(!t)return;const e=t?.[t.length-1];return wV(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function x9(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function a_(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function MC(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ai(t,...e){if(!x9(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function AA(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function SV(t,e){Ai(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function ld(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function _m(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function _V(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const xV=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function TV(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function c_(t){if(typeof t=="string")t=TV(t);else if(x9(t))t=l_(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function AV(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function IV(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const NV=(t,e)=>{function n(r,...s){if(Ai(r),!xV)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const m=s[0];if(!m)throw new Error("nonce / iv required");t.varSizeNonce?Ai(m):Ai(m,t.nonceLength)}const o=t.tagLength;o&&s[1]!==void 0&&Ai(s[1]);const c=e(r,...s),l=(m,y)=>{if(y!==void 0){if(m!==2)throw new Error("cipher output not supported");Ai(y)}};let p=!1;return{encrypt(m,y){if(p)throw new Error("cannot encrypt() twice with same key + nonce");return p=!0,Ai(m),l(c.encrypt.length,y),c.encrypt(m,y)},decrypt(m,y){if(Ai(m),o&&m.length<o)throw new Error("invalid ciphertext length: smaller than tagLength="+o);return l(c.decrypt.length,y),c.decrypt(m,y)}}}return Object.assign(n,t),n};function IA(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!OV(e))throw new Error("invalid output, must be aligned");return e}function NA(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),o=BigInt(4294967295),c=Number(n>>s&o),l=Number(n&o);t.setUint32(e+4,c,r),t.setUint32(e+0,l,r)}function RV(t,e,n){a_(n);const r=new Uint8Array(16),s=_V(r);return NA(s,0,BigInt(e),n),NA(s,8,BigInt(t),n),r}function OV(t){return t.byteOffset%4===0}function l_(t){return Uint8Array.from(t)}const T9=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),PV=T9("expand 16-byte k"),kV=T9("expand 32-byte k"),LV=ld(PV),DV=ld(kV);function fn(t,e){return t<<e|t>>>32-e}function u_(t){return t.byteOffset%4===0}const U1=64,MV=16,A9=2**32-1,RA=new Uint32Array;function UV(t,e,n,r,s,o,c,l){const p=s.length,m=new Uint8Array(U1),y=ld(m),v=u_(s)&&u_(o),S=v?ld(s):RA,_=v?ld(o):RA;for(let A=0;A<p;c++){if(t(e,n,r,y,c,l),c>=A9)throw new Error("arx: counter overflow");const N=Math.min(U1,p-A);if(v&&N===U1){const R=A/4;if(A%4!==0)throw new Error("arx: invalid block position");for(let $=0,G;$<MV;$++)G=R+$,_[G]=S[G]^y[$];A+=U1;continue}for(let R=0,$;R<N;R++)$=A+R,o[$]=s[$]^m[R];A+=N}}function $V(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:o,rounds:c}=AV({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return MC(s),MC(c),a_(o),a_(n),(l,p,m,y,v=0)=>{Ai(l),Ai(p),Ai(m);const S=m.length;if(y===void 0&&(y=new Uint8Array(S)),Ai(y),MC(v),v<0||v>=A9)throw new Error("arx: counter overflow");if(y.length<S)throw new Error(`arx: output (${y.length}) is shorter than data (${S})`);const _=[];let A=l.length,N,R;if(A===32)_.push(N=l_(l)),R=DV;else if(A===16&&n)N=new Uint8Array(32),N.set(l),N.set(l,16),R=LV,_.push(N);else throw new Error(`arx: invalid 32-byte key, got length=${A}`);u_(p)||_.push(p=l_(p));const $=ld(N);if(r){if(p.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(R,$,ld(p.subarray(0,16)),$),p=p.subarray(16)}const G=16-s;if(G!==p.length)throw new Error(`arx: nonce must be ${G} or 16 bytes`);if(G!==12){const X=new Uint8Array(12);X.set(p,o?0:12-p.length),p=X,_.push(p)}const F=ld(p);return UV(t,R,$,F,m,y,v,c),_m(..._),y}}const hs=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class jV{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=c_(e),Ai(e,32);const n=hs(e,0),r=hs(e,2),s=hs(e,4),o=hs(e,6),c=hs(e,8),l=hs(e,10),p=hs(e,12),m=hs(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|o<<9)&8191,this.r[4]=(o>>>4|c<<12)&255,this.r[5]=c>>>1&8190,this.r[6]=(c>>>14|l<<2)&8191,this.r[7]=(l>>>11|p<<5)&8065,this.r[8]=(p>>>8|m<<8)&8191,this.r[9]=m>>>5&127;for(let y=0;y<8;y++)this.pad[y]=hs(e,16+2*y)}process(e,n,r=!1){const s=r?0:2048,{h:o,r:c}=this,l=c[0],p=c[1],m=c[2],y=c[3],v=c[4],S=c[5],_=c[6],A=c[7],N=c[8],R=c[9],$=hs(e,n+0),G=hs(e,n+2),F=hs(e,n+4),X=hs(e,n+6),j=hs(e,n+8),L=hs(e,n+10),Z=hs(e,n+12),U=hs(e,n+14);let D=o[0]+($&8191),B=o[1]+(($>>>13|G<<3)&8191),W=o[2]+((G>>>10|F<<6)&8191),K=o[3]+((F>>>7|X<<9)&8191),he=o[4]+((X>>>4|j<<12)&8191),pe=o[5]+(j>>>1&8191),V=o[6]+((j>>>14|L<<2)&8191),P=o[7]+((L>>>11|Z<<5)&8191),ne=o[8]+((Z>>>8|U<<8)&8191),de=o[9]+(U>>>5|s),me=0,H=me+D*l+B*(5*R)+W*(5*N)+K*(5*A)+he*(5*_);me=H>>>13,H&=8191,H+=pe*(5*S)+V*(5*v)+P*(5*y)+ne*(5*m)+de*(5*p),me+=H>>>13,H&=8191;let fe=me+D*p+B*l+W*(5*R)+K*(5*N)+he*(5*A);me=fe>>>13,fe&=8191,fe+=pe*(5*_)+V*(5*S)+P*(5*v)+ne*(5*y)+de*(5*m),me+=fe>>>13,fe&=8191;let Ae=me+D*m+B*p+W*l+K*(5*R)+he*(5*N);me=Ae>>>13,Ae&=8191,Ae+=pe*(5*A)+V*(5*_)+P*(5*S)+ne*(5*v)+de*(5*y),me+=Ae>>>13,Ae&=8191;let ke=me+D*y+B*m+W*p+K*l+he*(5*R);me=ke>>>13,ke&=8191,ke+=pe*(5*N)+V*(5*A)+P*(5*_)+ne*(5*S)+de*(5*v),me+=ke>>>13,ke&=8191;let $e=me+D*v+B*y+W*m+K*p+he*l;me=$e>>>13,$e&=8191,$e+=pe*(5*R)+V*(5*N)+P*(5*A)+ne*(5*_)+de*(5*S),me+=$e>>>13,$e&=8191;let Ve=me+D*S+B*v+W*y+K*m+he*p;me=Ve>>>13,Ve&=8191,Ve+=pe*l+V*(5*R)+P*(5*N)+ne*(5*A)+de*(5*_),me+=Ve>>>13,Ve&=8191;let Fe=me+D*_+B*S+W*v+K*y+he*m;me=Fe>>>13,Fe&=8191,Fe+=pe*p+V*l+P*(5*R)+ne*(5*N)+de*(5*A),me+=Fe>>>13,Fe&=8191;let wt=me+D*A+B*_+W*S+K*v+he*y;me=wt>>>13,wt&=8191,wt+=pe*m+V*p+P*l+ne*(5*R)+de*(5*N),me+=wt>>>13,wt&=8191;let De=me+D*N+B*A+W*_+K*S+he*v;me=De>>>13,De&=8191,De+=pe*y+V*m+P*p+ne*l+de*(5*R),me+=De>>>13,De&=8191;let Q=me+D*R+B*N+W*A+K*_+he*S;me=Q>>>13,Q&=8191,Q+=pe*v+V*y+P*m+ne*p+de*l,me+=Q>>>13,Q&=8191,me=(me<<2)+me|0,me=me+H|0,H=me&8191,me=me>>>13,fe+=me,o[0]=H,o[1]=fe,o[2]=Ae,o[3]=ke,o[4]=$e,o[5]=Ve,o[6]=Fe,o[7]=wt,o[8]=De,o[9]=Q}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let l=2;l<10;l++)e[l]+=s,s=e[l]>>>13,e[l]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let l=1;l<10;l++)r[l]=e[l]+s,s=r[l]>>>13,r[l]&=8191;r[9]-=8192;let o=(s^1)-1;for(let l=0;l<10;l++)r[l]&=o;o=~o;for(let l=0;l<10;l++)e[l]=e[l]&o|r[l];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let c=e[0]+n[0];e[0]=c&65535;for(let l=1;l<8;l++)c=(e[l]+n[l]|0)+(c>>>16)|0,e[l]=c&65535;_m(r)}update(e){AA(this),e=c_(e),Ai(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let o=0;o<s;){const c=Math.min(r-this.pos,s-o);if(c===r){for(;r<=s-o;o+=r)this.process(e,o);continue}n.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){_m(this.h,this.r,this.buffer,this.pad)}digestInto(e){AA(this),SV(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let o=0;for(let c=0;c<8;c++)e[o++]=r[c]>>>0,e[o++]=r[c]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function BV(t){const e=(r,s)=>t(s).update(c_(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const FV=BV(t=>new jV(t));function ZV(t,e,n,r,s,o=20){let c=t[0],l=t[1],p=t[2],m=t[3],y=e[0],v=e[1],S=e[2],_=e[3],A=e[4],N=e[5],R=e[6],$=e[7],G=s,F=n[0],X=n[1],j=n[2],L=c,Z=l,U=p,D=m,B=y,W=v,K=S,he=_,pe=A,V=N,P=R,ne=$,de=G,me=F,H=X,fe=j;for(let ke=0;ke<o;ke+=2)L=L+B|0,de=fn(de^L,16),pe=pe+de|0,B=fn(B^pe,12),L=L+B|0,de=fn(de^L,8),pe=pe+de|0,B=fn(B^pe,7),Z=Z+W|0,me=fn(me^Z,16),V=V+me|0,W=fn(W^V,12),Z=Z+W|0,me=fn(me^Z,8),V=V+me|0,W=fn(W^V,7),U=U+K|0,H=fn(H^U,16),P=P+H|0,K=fn(K^P,12),U=U+K|0,H=fn(H^U,8),P=P+H|0,K=fn(K^P,7),D=D+he|0,fe=fn(fe^D,16),ne=ne+fe|0,he=fn(he^ne,12),D=D+he|0,fe=fn(fe^D,8),ne=ne+fe|0,he=fn(he^ne,7),L=L+W|0,fe=fn(fe^L,16),P=P+fe|0,W=fn(W^P,12),L=L+W|0,fe=fn(fe^L,8),P=P+fe|0,W=fn(W^P,7),Z=Z+K|0,de=fn(de^Z,16),ne=ne+de|0,K=fn(K^ne,12),Z=Z+K|0,de=fn(de^Z,8),ne=ne+de|0,K=fn(K^ne,7),U=U+he|0,me=fn(me^U,16),pe=pe+me|0,he=fn(he^pe,12),U=U+he|0,me=fn(me^U,8),pe=pe+me|0,he=fn(he^pe,7),D=D+B|0,H=fn(H^D,16),V=V+H|0,B=fn(B^V,12),D=D+B|0,H=fn(H^D,8),V=V+H|0,B=fn(B^V,7);let Ae=0;r[Ae++]=c+L|0,r[Ae++]=l+Z|0,r[Ae++]=p+U|0,r[Ae++]=m+D|0,r[Ae++]=y+B|0,r[Ae++]=v+W|0,r[Ae++]=S+K|0,r[Ae++]=_+he|0,r[Ae++]=A+pe|0,r[Ae++]=N+V|0,r[Ae++]=R+P|0,r[Ae++]=$+ne|0,r[Ae++]=G+de|0,r[Ae++]=F+me|0,r[Ae++]=X+H|0,r[Ae++]=j+fe|0}const zV=$V(ZV,{counterRight:!1,counterLength:4,allowShortKeys:!1}),GV=new Uint8Array(16),OA=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(GV.subarray(n))},HV=new Uint8Array(32);function PA(t,e,n,r,s){const o=t(e,n,HV),c=FV.create(o);s&&OA(c,s),OA(c,r);const l=RV(r.length,s?s.length:0,!0);c.update(l);const p=c.digest();return _m(o,l),p}const XV=t=>(e,n,r)=>({encrypt(s,o){const c=s.length;o=IA(c+16,o,!1),o.set(s);const l=o.subarray(0,-16);t(e,n,l,l,1);const p=PA(t,e,n,l,r);return o.set(p,c),_m(p),o},decrypt(s,o){o=IA(s.length-16,o,!1);const c=s.subarray(0,-16),l=s.subarray(-16),p=PA(t,e,n,c,r);if(!IV(l,p))throw new Error("invalid tag");return o.set(s.subarray(0,-16)),t(e,n,o,o,1),_m(p),o}}),I9=NV({blockSize:64,nonceLength:12,tagLength:16},XV(zV));let N9=class extends b2{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,$5(e);const r=Ia(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?e.create().update(r).digest():r);for(let c=0;c<o.length;c++)o[c]^=54;this.iHash.update(o),this.oHash=e.create();for(let c=0;c<o.length;c++)o[c]^=106;this.oHash.update(o),Bo(o)}update(e){return md(this),this.iHash.update(e),this}digestInto(e){md(this),jo(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:o,blockLen:c,outputLen:l}=this;return e=e,e.finished=s,e.destroyed=o,e.blockLen=c,e.outputLen=l,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const v2=(t,e,n)=>new N9(t,e).update(n).digest();v2.create=(t,e)=>new N9(t,e);function WV(t,e,n){return $5(t),n===void 0&&(n=new Uint8Array(t.outputLen)),v2(t,Ia(n),Ia(e))}const UC=Uint8Array.from([0]),kA=Uint8Array.of();function VV(t,e,n,r=32){$5(t),Fl(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const o=Math.ceil(r/s);n===void 0&&(n=kA);const c=new Uint8Array(o*s),l=v2.create(t,e),p=l._cloneInto(),m=new Uint8Array(l.outputLen);for(let y=0;y<o;y++)UC[0]=y+1,p.update(y===0?kA:m).update(n).update(UC).digestInto(m),c.set(m,s*y),l._cloneInto(p);return l.destroy(),p.destroy(),Bo(m,UC),c.slice(0,r)}const KV=(t,e,n,r,s)=>VV(t,WV(t,e,n),r,s),E2=w2,z5=BigInt(0),d_=BigInt(1);function Uv(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function $1(t){const e=t.toString(16);return e.length&1?"0"+e:e}function R9(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?z5:BigInt("0x"+t)}function C2(t){return R9(Ky(t))}function $v(t){return jo(t),R9(Ky(Uint8Array.from(t).reverse()))}function G5(t,e){return B5(t.toString(16).padStart(e*2,"0"))}function H5(t,e){return G5(t,e).reverse()}function Ti(t,e,n){let r;if(typeof e=="string")try{r=B5(e)}catch(o){throw new Error(t+" must be hex string or Uint8Array, cause: "+o)}else if(U5(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const $C=t=>typeof t=="bigint"&&z5<=t;function YV(t,e,n){return $C(t)&&$C(e)&&$C(n)&&e<=t&&t<n}function h_(t,e,n,r){if(!YV(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function qV(t){let e;for(e=0;t>z5;t>>=d_,e+=1);return e}const S2=t=>(d_<<BigInt(t))-d_;function QV(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=S=>new Uint8Array(S),s=S=>Uint8Array.of(S);let o=r(t),c=r(t),l=0;const p=()=>{o.fill(1),c.fill(0),l=0},m=(...S)=>n(c,o,...S),y=(S=r(0))=>{c=m(s(0),S),o=m(),S.length!==0&&(c=m(s(1),S),o=m())},v=()=>{if(l++>=1e3)throw new Error("drbg: tried 1000 values");let S=0;const _=[];for(;S<e;){o=m();const A=o.slice();_.push(A),S+=o.length}return Wh(..._)};return(S,_)=>{p(),y(S);let A;for(;!(A=_(v()));)y();return p(),A}}function _2(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,o,c){const l=t[s];if(c&&l===void 0)return;const p=typeof l;if(p!==o||l===null)throw new Error(`param "${s}" is invalid: expected ${o}, got ${p}`)}Object.entries(e).forEach(([s,o])=>r(s,o,!1)),Object.entries(n).forEach(([s,o])=>r(s,o,!0))}function LA(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const o=t(n,...r);return e.set(n,o),o}}const Ni=BigInt(0),ei=BigInt(1),Vh=BigInt(2),JV=BigInt(3),O9=BigInt(4),P9=BigInt(5),k9=BigInt(8);function ko(t,e){const n=t%e;return n>=Ni?n:e+n}function Ea(t,e,n){let r=t;for(;e-- >Ni;)r*=r,r%=n;return r}function DA(t,e){if(t===Ni)throw new Error("invert: expected non-zero number");if(e<=Ni)throw new Error("invert: expected positive modulus, got "+e);let n=ko(t,e),r=e,s=Ni,o=ei;for(;n!==Ni;){const c=r/n,l=r%n,p=s-o*c;r=n,n=l,s=o,o=p}if(r!==ei)throw new Error("invert: does not exist");return ko(s,e)}function L9(t,e){const n=(t.ORDER+ei)/O9,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function eK(t,e){const n=(t.ORDER-P9)/k9,r=t.mul(e,Vh),s=t.pow(r,n),o=t.mul(e,s),c=t.mul(t.mul(o,Vh),s),l=t.mul(o,t.sub(c,t.ONE));if(!t.eql(t.sqr(l),e))throw new Error("Cannot find square root");return l}function tK(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-ei,n=0;for(;e%Vh===Ni;)e/=Vh,n++;let r=Vh;const s=Zm(t);for(;MA(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return L9;let o=s.pow(r,e);const c=(e+ei)/Vh;return function(l,p){if(l.is0(p))return p;if(MA(l,p)!==1)throw new Error("Cannot find square root");let m=n,y=l.mul(l.ONE,o),v=l.pow(p,e),S=l.pow(p,c);for(;!l.eql(v,l.ONE);){if(l.is0(v))return l.ZERO;let _=1,A=l.sqr(v);for(;!l.eql(A,l.ONE);)if(_++,A=l.sqr(A),_===m)throw new Error("Cannot find square root");const N=ei<<BigInt(m-_-1),R=l.pow(y,N);m=_,y=l.sqr(R),v=l.mul(v,y),S=l.mul(S,R)}return S}}function nK(t){return t%O9===JV?L9:t%k9===P9?eK:tK(t)}const rK=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function sK(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=rK.reduce((r,s)=>(r[s]="function",r),e);return _2(t,n),t}function iK(t,e,n){if(n<Ni)throw new Error("invalid exponent, negatives unsupported");if(n===Ni)return t.ONE;if(n===ei)return e;let r=t.ONE,s=e;for(;n>Ni;)n&ei&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ei;return r}function D9(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((c,l,p)=>t.is0(l)?c:(r[p]=c,t.mul(c,l)),t.ONE),o=t.inv(s);return e.reduceRight((c,l,p)=>t.is0(l)?c:(r[p]=t.mul(c,r[p]),t.mul(c,l)),o),r}function MA(t,e){const n=(t.ORDER-ei)/Vh,r=t.pow(e,n),s=t.eql(r,t.ONE),o=t.eql(r,t.ZERO),c=t.eql(r,t.neg(t.ONE));if(!s&&!o&&!c)throw new Error("invalid Legendre symbol result");return s?1:o?0:-1}function oK(t,e){e!==void 0&&Fl(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Zm(t,e,n=!1,r={}){if(t<=Ni)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,o;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const y=e;y.BITS&&(s=y.BITS),y.sqrt&&(o=y.sqrt),typeof y.isLE=="boolean"&&(n=y.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(o=r.sqrt);const{nBitLength:c,nByteLength:l}=oK(t,s);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let p;const m=Object.freeze({ORDER:t,isLE:n,BITS:c,BYTES:l,MASK:S2(c),ZERO:Ni,ONE:ei,create:y=>ko(y,t),isValid:y=>{if(typeof y!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof y);return Ni<=y&&y<t},is0:y=>y===Ni,isValidNot0:y=>!m.is0(y)&&m.isValid(y),isOdd:y=>(y&ei)===ei,neg:y=>ko(-y,t),eql:(y,v)=>y===v,sqr:y=>ko(y*y,t),add:(y,v)=>ko(y+v,t),sub:(y,v)=>ko(y-v,t),mul:(y,v)=>ko(y*v,t),pow:(y,v)=>iK(m,y,v),div:(y,v)=>ko(y*DA(v,t),t),sqrN:y=>y*y,addN:(y,v)=>y+v,subN:(y,v)=>y-v,mulN:(y,v)=>y*v,inv:y=>DA(y,t),sqrt:o||(y=>(p||(p=nK(t)),p(m,y))),toBytes:y=>n?H5(y,l):G5(y,l),fromBytes:y=>{if(y.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+y.length);return n?$v(y):C2(y)},invertBatch:y=>D9(m,y),cmov:(y,v,S)=>S?v:y});return Object.freeze(m)}function M9(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function U9(t){const e=M9(t);return e+Math.ceil(e/2)}function aK(t,e,n=!1){const r=t.length,s=M9(e),o=U9(e);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const c=n?$v(t):C2(t),l=ko(c,e-ei)+ei;return n?H5(l,s):G5(l,s)}const xm=BigInt(0),Kh=BigInt(1);function uy(t,e){const n=e.negate();return t?n:e}function cK(t,e,n){const r=o=>o.pz,s=D9(t.Fp,n.map(r));return n.map((o,c)=>o.toAffine(s[c])).map(t.fromAffine)}function $9(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function jC(t,e){$9(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,o=S2(t),c=BigInt(t);return{windows:n,windowSize:r,mask:o,maxNumber:s,shiftBy:c}}function UA(t,e,n){const{windowSize:r,mask:s,maxNumber:o,shiftBy:c}=n;let l=Number(t&s),p=t>>c;l>r&&(l-=o,p+=Kh);const m=e*r,y=m+Math.abs(l)-1,v=l===0,S=l<0,_=e%2!==0;return{nextN:p,offset:y,isZero:v,isNeg:S,isNegF:_,offsetF:m}}function lK(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function uK(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const BC=new WeakMap,j9=new WeakMap;function FC(t){return j9.get(t)||1}function $A(t){if(t!==xm)throw new Error("invalid wNAF")}function dK(t,e){return{constTimeNegate:uy,hasPrecomputes(n){return FC(n)!==1},unsafeLadder(n,r,s=t.ZERO){let o=n;for(;r>xm;)r&Kh&&(s=s.add(o)),o=o.double(),r>>=Kh;return s},precomputeWindow(n,r){const{windows:s,windowSize:o}=jC(r,e),c=[];let l=n,p=l;for(let m=0;m<s;m++){p=l,c.push(p);for(let y=1;y<o;y++)p=p.add(l),c.push(p);l=p.double()}return c},wNAF(n,r,s){let o=t.ZERO,c=t.BASE;const l=jC(n,e);for(let p=0;p<l.windows;p++){const{nextN:m,offset:y,isZero:v,isNeg:S,isNegF:_,offsetF:A}=UA(s,p,l);s=m,v?c=c.add(uy(_,r[A])):o=o.add(uy(S,r[y]))}return $A(s),{p:o,f:c}},wNAFUnsafe(n,r,s,o=t.ZERO){const c=jC(n,e);for(let l=0;l<c.windows&&s!==xm;l++){const{nextN:p,offset:m,isZero:y,isNeg:v}=UA(s,l,c);if(s=p,!y){const S=r[m];o=o.add(v?S.negate():S)}}return $A(s),o},getPrecomputes(n,r,s){let o=BC.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(o=s(o)),BC.set(r,o))),o},wNAFCached(n,r,s){const o=FC(n);return this.wNAF(o,this.getPrecomputes(o,n,s),r)},wNAFCachedUnsafe(n,r,s,o){const c=FC(n);return c===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(c,this.getPrecomputes(c,n,s),r,o)},setWindowSize(n,r){$9(r,e),j9.set(n,r),BC.delete(n)}}}function hK(t,e,n,r){let s=e,o=t.ZERO,c=t.ZERO;for(;n>xm||r>xm;)n&Kh&&(o=o.add(s)),r&Kh&&(c=c.add(s)),s=s.double(),n>>=Kh,r>>=Kh;return{p1:o,p2:c}}function fK(t,e,n,r){lK(n,t),uK(r,e);const s=n.length,o=r.length;if(s!==o)throw new Error("arrays of points and scalars must have equal length");const c=t.ZERO,l=qV(BigInt(s));let p=1;l>12?p=l-3:l>4?p=l-2:l>0&&(p=2);const m=S2(p),y=new Array(Number(m)+1).fill(c),v=Math.floor((e.BITS-1)/p)*p;let S=c;for(let _=v;_>=0;_-=p){y.fill(c);for(let N=0;N<o;N++){const R=r[N],$=Number(R>>BigInt(_)&m);y[$]=y[$].add(n[N])}let A=c;for(let N=y.length-1,R=c;N>0;N--)R=R.add(y[N]),A=A.add(R);if(S=S.add(A),_!==0)for(let N=0;N<p;N++)S=S.double()}return S}function jA(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return sK(e),e}else return Zm(t)}function pK(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const c of["p","n","h"]){const l=e[c];if(!(typeof l=="bigint"&&l>xm))throw new Error(`CURVE.${c} must be positive bigint`)}const r=jA(e.p,n.Fp),s=jA(e.n,n.Fn),o=["Gx","Gy","a","b"];for(const c of o)if(!r.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const G0=BigInt(0),Fp=BigInt(1),j1=BigInt(2);function mK(t){return _2(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function gK(t){const e=mK(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:o,randomBytes:c}=e,l=r==="x25519";if(!l&&r!=="x448")throw new Error("invalid type");const p=c||Fm,m=l?255:448,y=l?32:56,v=BigInt(l?9:5),S=BigInt(l?121665:39081),_=l?j1**BigInt(254):j1**BigInt(447),A=l?BigInt(8)*j1**BigInt(251)-Fp:BigInt(4)*j1**BigInt(445)-Fp,N=_+A+Fp,R=D=>ko(D,n),$=G(v);function G(D){return H5(R(D),y)}function F(D){const B=Ti("u coordinate",D,y);return l&&(B[31]&=127),R($v(B))}function X(D){return $v(s(Ti("scalar",D,y)))}function j(D,B){const W=U(F(B),X(D));if(W===G0)throw new Error("invalid private or public key received");return G(W)}function L(D){return j(D,$)}function Z(D,B,W){const K=R(D*(B-W));return B=R(B-K),W=R(W+K),{x_2:B,x_3:W}}function U(D,B){h_("u",D,G0,n),h_("scalar",B,_,N);const W=B,K=D;let he=Fp,pe=G0,V=D,P=Fp,ne=G0;for(let me=BigInt(m-1);me>=G0;me--){const H=W>>me&Fp;ne^=H,{x_2:he,x_3:V}=Z(ne,he,V),{x_2:pe,x_3:P}=Z(ne,pe,P),ne=H;const fe=he+pe,Ae=R(fe*fe),ke=he-pe,$e=R(ke*ke),Ve=Ae-$e,Fe=V+P,wt=V-P,De=R(wt*fe),Q=R(Fe*ke),ue=De+Q,Ee=De-Q;V=R(ue*ue),P=R(K*R(Ee*Ee)),he=R(Ae*$e),pe=R(Ve*(Ae+R(S*Ve)))}({x_2:he,x_3:V}=Z(ne,he,V)),{x_2:pe,x_3:P}=Z(ne,pe,P);const de=o(pe);return R(he*de)}return{scalarMult:j,scalarMultBase:L,getSharedSecret:(D,B)=>j(D,B),getPublicKey:D=>L(D),utils:{randomPrivateKey:()=>p(y)},GuBytes:$.slice()}}BigInt(0);const yK=BigInt(1),BA=BigInt(2),bK=BigInt(3),wK=BigInt(5);BigInt(8);const B9={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function vK(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),o=B9.p,c=t*t%o*t%o,l=Ea(c,BA,o)*c%o,p=Ea(l,yK,o)*t%o,m=Ea(p,wK,o)*p%o,y=Ea(m,e,o)*m%o,v=Ea(y,n,o)*y%o,S=Ea(v,r,o)*v%o,_=Ea(S,s,o)*S%o,A=Ea(_,s,o)*S%o,N=Ea(A,e,o)*m%o;return{pow_p_5_8:Ea(N,BA,o)*t%o,b2:c}}function EK(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const f_=(()=>{const t=B9.p;return gK({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=vK(e);return ko(Ea(n,bK,t)*r,t)},adjustScalarBytes:EK})})();function FA(t){t.lowS!==void 0&&Uv("lowS",t.lowS),t.prehash!==void 0&&Uv("prehash",t.prehash)}class CK extends Error{constructor(e=""){super(e)}}const kl={Err:CK,_tlv:{encode:(t,e)=>{const{Err:n}=kl;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=$1(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?$1(s.length/2|128):"";return $1(t)+o+s+e},decode(t,e){const{Err:n}=kl;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],o=!!(s&128);let c=0;if(!o)c=s;else{const p=s&127;if(!p)throw new n("tlv.decode(long): indefinite length not supported");if(p>4)throw new n("tlv.decode(long): byte length is too big");const m=e.subarray(r,r+p);if(m.length!==p)throw new n("tlv.decode: length bytes not complete");if(m[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const y of m)c=c<<8|y;if(r+=p,c<128)throw new n("tlv.decode(long): not minimal encoding")}const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: wrong value length");return{v:l,l:e.subarray(r+c)}}},_int:{encode(t){const{Err:e}=kl;if(t<dy)throw new e("integer: negative integers are not allowed");let n=$1(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=kl;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return C2(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=kl,s=Ti("signature",t),{v:o,l:c}=r.decode(48,s);if(c.length)throw new e("invalid signature: left bytes after parsing");const{v:l,l:p}=r.decode(2,o),{v:m,l:y}=r.decode(2,p);if(y.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(l),s:n.decode(m)}},hexFromSig(t){const{_tlv:e,_int:n}=kl,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),o=r+s;return e.encode(48,o)}},dy=BigInt(0),hy=BigInt(1),SK=BigInt(2),B1=BigInt(3),_K=BigInt(4);function xK(t,e,n){function r(s){const o=t.sqr(s),c=t.mul(o,s);return t.add(t.add(c,t.mul(s,e)),n)}return r}function F9(t,e,n){const{BYTES:r}=t;function s(o){let c;if(typeof o=="bigint")c=o;else{let l=Ti("private key",o);if(e){if(!e.includes(l.length*2))throw new Error("invalid private key");const p=new Uint8Array(r);p.set(l,p.length-l.length),l=p}try{c=t.fromBytes(l)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof o}`)}}if(n&&(c=t.create(c)),!t.isValidNot0(c))throw new Error("invalid private key: out of range [1..N-1]");return c}return s}function TK(t,e={}){const{Fp:n,Fn:r}=pK("weierstrass",t,e),{h:s,n:o}=t;_2(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!n.is0(t.a)||typeof c.beta!="bigint"||typeof c.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function l(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function p(U,D,B){const{x:W,y:K}=D.toAffine(),he=n.toBytes(W);if(Uv("isCompressed",B),B){l();const pe=!n.isOdd(K);return Wh(Z9(pe),he)}else return Wh(Uint8Array.of(4),he,n.toBytes(K))}function m(U){jo(U);const D=n.BYTES,B=D+1,W=2*D+1,K=U.length,he=U[0],pe=U.subarray(1);if(K===B&&(he===2||he===3)){const V=n.fromBytes(pe);if(!n.isValid(V))throw new Error("bad point: is not on curve, wrong x");const P=S(V);let ne;try{ne=n.sqrt(P)}catch(me){const H=me instanceof Error?": "+me.message:"";throw new Error("bad point: is not on curve, sqrt error"+H)}l();const de=n.isOdd(ne);return(he&1)===1!==de&&(ne=n.neg(ne)),{x:V,y:ne}}else if(K===W&&he===4){const V=n.fromBytes(pe.subarray(D*0,D*1)),P=n.fromBytes(pe.subarray(D*1,D*2));if(!_(V,P))throw new Error("bad point: is not on curve");return{x:V,y:P}}else throw new Error(`bad point: got length ${K}, expected compressed=${B} or uncompressed=${W}`)}const y=e.toBytes||p,v=e.fromBytes||m,S=xK(n,t.a,t.b);function _(U,D){const B=n.sqr(D),W=S(U);return n.eql(B,W)}if(!_(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const A=n.mul(n.pow(t.a,B1),_K),N=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(A,N)))throw new Error("bad curve params: a or b");function R(U,D,B=!1){if(!n.isValid(D)||B&&n.is0(D))throw new Error(`bad point coordinate ${U}`);return D}function $(U){if(!(U instanceof j))throw new Error("ProjectivePoint expected")}const G=LA((U,D)=>{const{px:B,py:W,pz:K}=U;if(n.eql(K,n.ONE))return{x:B,y:W};const he=U.is0();D==null&&(D=he?n.ONE:n.inv(K));const pe=n.mul(B,D),V=n.mul(W,D),P=n.mul(K,D);if(he)return{x:n.ZERO,y:n.ZERO};if(!n.eql(P,n.ONE))throw new Error("invZ was invalid");return{x:pe,y:V}}),F=LA(U=>{if(U.is0()){if(e.allowInfinityPoint&&!n.is0(U.py))return;throw new Error("bad point: ZERO")}const{x:D,y:B}=U.toAffine();if(!n.isValid(D)||!n.isValid(B))throw new Error("bad point: x or y not field elements");if(!_(D,B))throw new Error("bad point: equation left != right");if(!U.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function X(U,D,B,W,K){return B=new j(n.mul(B.px,U),B.py,B.pz),D=uy(W,D),B=uy(K,B),D.add(B)}class j{constructor(D,B,W){this.px=R("x",D),this.py=R("y",B,!0),this.pz=R("z",W),Object.freeze(this)}static fromAffine(D){const{x:B,y:W}=D||{};if(!D||!n.isValid(B)||!n.isValid(W))throw new Error("invalid affine point");if(D instanceof j)throw new Error("projective point not allowed");return n.is0(B)&&n.is0(W)?j.ZERO:new j(B,W,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(D){return cK(j,"pz",D)}static fromBytes(D){return jo(D),j.fromHex(D)}static fromHex(D){const B=j.fromAffine(v(Ti("pointHex",D)));return B.assertValidity(),B}static fromPrivateKey(D){const B=F9(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return j.BASE.multiply(B(D))}static msm(D,B){return fK(j,r,D,B)}precompute(D=8,B=!0){return Z.setWindowSize(this,D),B||this.multiply(B1),this}_setWindowSize(D){this.precompute(D)}assertValidity(){F(this)}hasEvenY(){const{y:D}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(D)}equals(D){$(D);const{px:B,py:W,pz:K}=this,{px:he,py:pe,pz:V}=D,P=n.eql(n.mul(B,V),n.mul(he,K)),ne=n.eql(n.mul(W,V),n.mul(pe,K));return P&&ne}negate(){return new j(this.px,n.neg(this.py),this.pz)}double(){const{a:D,b:B}=t,W=n.mul(B,B1),{px:K,py:he,pz:pe}=this;let V=n.ZERO,P=n.ZERO,ne=n.ZERO,de=n.mul(K,K),me=n.mul(he,he),H=n.mul(pe,pe),fe=n.mul(K,he);return fe=n.add(fe,fe),ne=n.mul(K,pe),ne=n.add(ne,ne),V=n.mul(D,ne),P=n.mul(W,H),P=n.add(V,P),V=n.sub(me,P),P=n.add(me,P),P=n.mul(V,P),V=n.mul(fe,V),ne=n.mul(W,ne),H=n.mul(D,H),fe=n.sub(de,H),fe=n.mul(D,fe),fe=n.add(fe,ne),ne=n.add(de,de),de=n.add(ne,de),de=n.add(de,H),de=n.mul(de,fe),P=n.add(P,de),H=n.mul(he,pe),H=n.add(H,H),de=n.mul(H,fe),V=n.sub(V,de),ne=n.mul(H,me),ne=n.add(ne,ne),ne=n.add(ne,ne),new j(V,P,ne)}add(D){$(D);const{px:B,py:W,pz:K}=this,{px:he,py:pe,pz:V}=D;let P=n.ZERO,ne=n.ZERO,de=n.ZERO;const me=t.a,H=n.mul(t.b,B1);let fe=n.mul(B,he),Ae=n.mul(W,pe),ke=n.mul(K,V),$e=n.add(B,W),Ve=n.add(he,pe);$e=n.mul($e,Ve),Ve=n.add(fe,Ae),$e=n.sub($e,Ve),Ve=n.add(B,K);let Fe=n.add(he,V);return Ve=n.mul(Ve,Fe),Fe=n.add(fe,ke),Ve=n.sub(Ve,Fe),Fe=n.add(W,K),P=n.add(pe,V),Fe=n.mul(Fe,P),P=n.add(Ae,ke),Fe=n.sub(Fe,P),de=n.mul(me,Ve),P=n.mul(H,ke),de=n.add(P,de),P=n.sub(Ae,de),de=n.add(Ae,de),ne=n.mul(P,de),Ae=n.add(fe,fe),Ae=n.add(Ae,fe),ke=n.mul(me,ke),Ve=n.mul(H,Ve),Ae=n.add(Ae,ke),ke=n.sub(fe,ke),ke=n.mul(me,ke),Ve=n.add(Ve,ke),fe=n.mul(Ae,Ve),ne=n.add(ne,fe),fe=n.mul(Fe,Ve),P=n.mul($e,P),P=n.sub(P,fe),fe=n.mul($e,Ae),de=n.mul(Fe,de),de=n.add(de,fe),new j(P,ne,de)}subtract(D){return this.add(D.negate())}is0(){return this.equals(j.ZERO)}multiply(D){const{endo:B}=e;if(!r.isValidNot0(D))throw new Error("invalid scalar: out of range");let W,K;const he=pe=>Z.wNAFCached(this,pe,j.normalizeZ);if(B){const{k1neg:pe,k1:V,k2neg:P,k2:ne}=B.splitScalar(D),{p:de,f:me}=he(V),{p:H,f:fe}=he(ne);K=me.add(fe),W=X(B.beta,de,H,pe,P)}else{const{p:pe,f:V}=he(D);W=pe,K=V}return j.normalizeZ([W,K])[0]}multiplyUnsafe(D){const{endo:B}=e,W=this;if(!r.isValid(D))throw new Error("invalid scalar: out of range");if(D===dy||W.is0())return j.ZERO;if(D===hy)return W;if(Z.hasPrecomputes(this))return this.multiply(D);if(B){const{k1neg:K,k1:he,k2neg:pe,k2:V}=B.splitScalar(D),{p1:P,p2:ne}=hK(j,W,he,V);return X(B.beta,P,ne,K,pe)}else return Z.wNAFCachedUnsafe(W,D)}multiplyAndAddUnsafe(D,B,W){const K=this.multiplyUnsafe(B).add(D.multiplyUnsafe(W));return K.is0()?void 0:K}toAffine(D){return G(this,D)}isTorsionFree(){const{isTorsionFree:D}=e;return s===hy?!0:D?D(j,this):Z.wNAFCachedUnsafe(this,o).is0()}clearCofactor(){const{clearCofactor:D}=e;return s===hy?this:D?D(j,this):this.multiplyUnsafe(s)}toBytes(D=!0){return Uv("isCompressed",D),this.assertValidity(),y(j,this,D)}toRawBytes(D=!0){return this.toBytes(D)}toHex(D=!0){return Ky(this.toBytes(D))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}j.BASE=new j(t.Gx,t.Gy,n.ONE),j.ZERO=new j(n.ZERO,n.ONE,n.ZERO),j.Fp=n,j.Fn=r;const L=r.BITS,Z=dK(j,e.endo?Math.ceil(L/2):L);return j}function Z9(t){return Uint8Array.of(t?2:3)}function AK(t,e,n={}){_2(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Fm,s=e.hmac||((W,...K)=>v2(e.hash,W,Wh(...K))),{Fp:o,Fn:c}=t,{ORDER:l,BITS:p}=c;function m(W){const K=l>>hy;return W>K}function y(W){return m(W)?c.neg(W):W}function v(W,K){if(!c.isValidNot0(K))throw new Error(`invalid signature ${W}: out of range 1..CURVE.n`)}class S{constructor(K,he,pe){v("r",K),v("s",he),this.r=K,this.s=he,pe!=null&&(this.recovery=pe),Object.freeze(this)}static fromCompact(K){const he=c.BYTES,pe=Ti("compactSignature",K,he*2);return new S(c.fromBytes(pe.subarray(0,he)),c.fromBytes(pe.subarray(he,he*2)))}static fromDER(K){const{r:he,s:pe}=kl.toSig(Ti("DER",K));return new S(he,pe)}assertValidity(){}addRecoveryBit(K){return new S(this.r,this.s,K)}recoverPublicKey(K){const he=o.ORDER,{r:pe,s:V,recovery:P}=this;if(P==null||![0,1,2,3].includes(P))throw new Error("recovery id invalid");if(l*SK<he&&P>1)throw new Error("recovery id is ambiguous for h>1 curve");const ne=P===2||P===3?pe+l:pe;if(!o.isValid(ne))throw new Error("recovery id 2 or 3 invalid");const de=o.toBytes(ne),me=t.fromHex(Wh(Z9((P&1)===0),de)),H=c.inv(ne),fe=F(Ti("msgHash",K)),Ae=c.create(-fe*H),ke=c.create(V*H),$e=t.BASE.multiplyUnsafe(Ae).add(me.multiplyUnsafe(ke));if($e.is0())throw new Error("point at infinify");return $e.assertValidity(),$e}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new S(this.r,c.neg(this.s),this.recovery):this}toBytes(K){if(K==="compact")return Wh(c.toBytes(this.r),c.toBytes(this.s));if(K==="der")return B5(kl.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ky(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ky(this.toBytes("compact"))}}const _=F9(c,n.allowedPrivateKeyLengths,n.wrapPrivateKey),A={isValidPrivateKey(W){try{return _(W),!0}catch{return!1}},normPrivateKeyToScalar:_,randomPrivateKey:()=>{const W=l;return aK(r(U9(W)),W)},precompute(W=8,K=t.BASE){return K.precompute(W,!1)}};function N(W,K=!0){return t.fromPrivateKey(W).toBytes(K)}function R(W){if(typeof W=="bigint")return!1;if(W instanceof t)return!0;const K=Ti("key",W).length,he=o.BYTES,pe=he+1,V=2*he+1;if(!(n.allowedPrivateKeyLengths||c.BYTES===pe))return K===pe||K===V}function $(W,K,he=!0){if(R(W)===!0)throw new Error("first arg must be private key");if(R(K)===!1)throw new Error("second arg must be public key");return t.fromHex(K).multiply(_(W)).toBytes(he)}const G=e.bits2int||function(W){if(W.length>8192)throw new Error("input is too large");const K=C2(W),he=W.length*8-p;return he>0?K>>BigInt(he):K},F=e.bits2int_modN||function(W){return c.create(G(W))},X=S2(p);function j(W){return h_("num < 2^"+p,W,dy,X),c.toBytes(W)}function L(W,K,he=Z){if(["recovered","canonical"].some($e=>$e in he))throw new Error("sign() legacy options not supported");const{hash:pe}=e;let{lowS:V,prehash:P,extraEntropy:ne}=he;V==null&&(V=!0),W=Ti("msgHash",W),FA(he),P&&(W=Ti("prehashed msgHash",pe(W)));const de=F(W),me=_(K),H=[j(me),j(de)];if(ne!=null&&ne!==!1){const $e=ne===!0?r(o.BYTES):ne;H.push(Ti("extraEntropy",$e))}const fe=Wh(...H),Ae=de;function ke($e){const Ve=G($e);if(!c.isValidNot0(Ve))return;const Fe=c.inv(Ve),wt=t.BASE.multiply(Ve).toAffine(),De=c.create(wt.x);if(De===dy)return;const Q=c.create(Fe*c.create(Ae+De*me));if(Q===dy)return;let ue=(wt.x===De?0:2)|Number(wt.y&hy),Ee=Q;return V&&m(Q)&&(Ee=y(Q),ue^=1),new S(De,Ee,ue)}return{seed:fe,k2sig:ke}}const Z={lowS:e.lowS,prehash:!1},U={lowS:e.lowS,prehash:!1};function D(W,K,he=Z){const{seed:pe,k2sig:V}=L(W,K,he);return QV(e.hash.outputLen,c.BYTES,s)(pe,V)}t.BASE.precompute(8);function B(W,K,he,pe=U){const V=W;K=Ti("msgHash",K),he=Ti("publicKey",he),FA(pe);const{lowS:P,prehash:ne,format:de}=pe;if("strict"in pe)throw new Error("options.strict was renamed to lowS");if(de!==void 0&&!["compact","der","js"].includes(de))throw new Error('format must be "compact", "der" or "js"');const me=typeof V=="string"||U5(V),H=!me&&!de&&typeof V=="object"&&V!==null&&typeof V.r=="bigint"&&typeof V.s=="bigint";if(!me&&!H)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let fe,Ae;try{if(H)if(de===void 0||de==="js")fe=new S(V.r,V.s);else throw new Error("invalid format");if(me){try{de!=="compact"&&(fe=S.fromDER(V))}catch(ue){if(!(ue instanceof kl.Err))throw ue}!fe&&de!=="der"&&(fe=S.fromCompact(V))}Ae=t.fromHex(he)}catch{return!1}if(!fe||P&&fe.hasHighS())return!1;ne&&(K=e.hash(K));const{r:ke,s:$e}=fe,Ve=F(K),Fe=c.inv($e),wt=c.create(Ve*Fe),De=c.create(ke*Fe),Q=t.BASE.multiplyUnsafe(wt).add(Ae.multiplyUnsafe(De));return Q.is0()?!1:c.create(Q.x)===ke}return Object.freeze({getPublicKey:N,getSharedSecret:$,sign:D,verify:B,utils:A,Point:t,Signature:S})}function IK(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=Zm(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function NK(t){const{CURVE:e,curveOpts:n}=IK(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function RK(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function OK(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=NK(t),s=TK(e,n),o=AK(s,r,n);return RK(t,o)}function p_(t,e){const n=r=>OK({...t,hash:r});return{...n(e),create:n}}const z9={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},G9={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},H9={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},PK=Zm(z9.p),kK=Zm(G9.p),LK=Zm(H9.p),DK=p_({...z9,Fp:PK,lowS:!1},w2);p_({...G9,Fp:kK,lowS:!1},zW),p_({...H9,Fp:LK,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},ZW);const MK=DK,X9="base10",ti="base16",Ta="base64pad",td="base64url",Ib="utf8",W9=0,Ml=1,Nb=2,UK=0,ZA=1,fy=12,X5=32;function $K(){const t=f_.utils.randomPrivateKey(),e=f_.getPublicKey(t);return{privateKey:Oi(t,ti),publicKey:Oi(e,ti)}}function m_(){const t=Fm(X5);return Oi(t,ti)}function jK(t,e){const n=f_.getSharedSecret(Mo(t,ti),Mo(e,ti)),r=KV(E2,n,void 0,void 0,X5);return Oi(r,ti)}function sv(t){const e=E2(Mo(t,ti));return Oi(e,ti)}function Oc(t){const e=E2(Mo(t,Ib));return Oi(e,ti)}function V9(t){return Mo(`${t}`,X9)}function hf(t){return Number(Oi(t,X9))}function K9(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Y9(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function BK(t){const e=V9(typeof t.type<"u"?t.type:W9);if(hf(e)===Ml&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Mo(t.senderPublicKey,ti):void 0,r=typeof t.iv<"u"?Mo(t.iv,ti):Fm(fy),s=Mo(t.symKey,ti),o=I9(s,r).encrypt(Mo(t.message,Ib)),c=q9({type:e,sealed:o,iv:r,senderPublicKey:n});return t.encoding===td?K9(c):c}function FK(t){const e=Mo(t.symKey,ti),{sealed:n,iv:r}=qy({encoded:t.encoded,encoding:t.encoding}),s=I9(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return Oi(s,Ib)}function ZK(t,e){const n=V9(Nb),r=Fm(fy),s=Mo(t,Ib),o=q9({type:n,sealed:s,iv:r});return e===td?K9(o):o}function zK(t,e){const{sealed:n}=qy({encoded:t,encoding:e});return Oi(n,Ib)}function q9(t){if(hf(t.type)===Nb)return Oi(ly([t.type,t.sealed]),Ta);if(hf(t.type)===Ml){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Oi(ly([t.type,t.senderPublicKey,t.iv,t.sealed]),Ta)}return Oi(ly([t.type,t.iv,t.sealed]),Ta)}function qy(t){const e=(t.encoding||Ta)===td?Y9(t.encoded):t.encoded,n=Mo(e,Ta),r=n.slice(UK,ZA),s=ZA;if(hf(r)===Ml){const p=s+X5,m=p+fy,y=n.slice(s,p),v=n.slice(p,m),S=n.slice(m);return{type:r,sealed:S,iv:v,senderPublicKey:y}}if(hf(r)===Nb){const p=n.slice(s),m=Fm(fy);return{type:r,sealed:p,iv:m}}const o=s+fy,c=n.slice(s,o),l=n.slice(o);return{type:r,sealed:l,iv:c}}function GK(t,e){const n=qy({encoded:t,encoding:e?.encoding});return Q9({type:hf(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Oi(n.senderPublicKey,ti):void 0,receiverPublicKey:e?.receiverPublicKey})}function Q9(t){const e=t?.type||W9;if(e===Ml){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function zA(t){return t.type===Ml&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function GA(t){return t.type===Nb}function HK(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return ly([new Uint8Array([4]),e,n])}function XK(t,e){const[n,r,s]=t.split("."),o=Buffer.from(Y9(s),"base64");if(o.length!==64)throw new Error("Invalid signature length");const c=o.slice(0,32),l=o.slice(32,64),p=`${n}.${r}`,m=E2(p),y=HK(e);if(!MK.verify(ly([c,l]),m,y))throw new Error("Invalid signature");return YS(t).payload}const WK="irn";function jv(t){return t?.relay||{protocol:WK}}function ny(t){const e=NX[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function VK(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const o=s.replace(r,""),c=t[s];n[o]=c}}),n}function HA(t){if(!t.includes("wc:")){const m=l9(t);m!=null&&m.includes("wc:")&&(t=m)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),o=typeof n<"u"?t.substring(n):"",c=new URLSearchParams(o),l={};c.forEach((m,y)=>{l[y]=m});const p=typeof l.methods=="string"?l.methods.split(","):void 0;return{protocol:r,topic:KK(s[0]),version:parseInt(s[1],10),symKey:l.symKey,relay:VK(l),methods:p,expiryTimestamp:l.expiryTimestamp?parseInt(l.expiryTimestamp,10):void 0}}function KK(t){return t.startsWith("//")?t.substring(2):t}function YK(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const o=s,c=n+e+o;t[o]&&(r[c]=t[o])}),r}function XA(t){const e=new URLSearchParams,n=YK(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function F1(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var qK=Object.defineProperty,QK=Object.defineProperties,JK=Object.getOwnPropertyDescriptors,WA=Object.getOwnPropertySymbols,eY=Object.prototype.hasOwnProperty,tY=Object.prototype.propertyIsEnumerable,VA=(t,e,n)=>e in t?qK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nY=(t,e)=>{for(var n in e||(e={}))eY.call(e,n)&&VA(t,n,e[n]);if(WA)for(var n of WA(e))tY.call(e,n)&&VA(t,n,e[n]);return t},rY=(t,e)=>QK(t,JK(e));function zm(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function sY(t){const e=[];return Object.values(t).forEach(n=>{e.push(...zm(n.accounts))}),e}function iY(t,e){const n=[];return Object.values(t).forEach(r=>{zm(r.accounts).includes(e)&&n.push(...r.methods)}),n}function oY(t,e){const n=[];return Object.values(t).forEach(r=>{zm(r.accounts).includes(e)&&n.push(...r.events)}),n}function x2(t){return t.includes(":")}function om(t){return x2(t)?t.split(":")[0]:t}function KA(t){var e,n,r;const s={};if(!Mc(t))return s;for(const[o,c]of Object.entries(t)){const l=x2(o)?[o]:c.chains,p=c.methods||[],m=c.events||[],y=om(o);s[y]=rY(nY({},s[y]),{chains:Dc(l,(e=s[y])==null?void 0:e.chains),methods:Dc(p,(n=s[y])==null?void 0:n.methods),events:Dc(m,(r=s[y])==null?void 0:r.events)})}return s}function aY(t){const e={};return t?.forEach(n=>{var r;const[s,o]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${o}`)}),e}function YA(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=aY(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Dc(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function cY(t,e){var n,r,s,o,c,l;const p=KA(t),m=KA(e),y={},v=Object.keys(p).concat(Object.keys(m));for(const S of v)y[S]={chains:Dc((n=p[S])==null?void 0:n.chains,(r=m[S])==null?void 0:r.chains),methods:Dc((s=p[S])==null?void 0:s.methods,(o=m[S])==null?void 0:o.methods),events:Dc((c=p[S])==null?void 0:c.events,(l=m[S])==null?void 0:l.events)};return y}const lY={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},uY={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ot(t,e){const{message:n,code:r}=uY[t];return{message:e?`${n} ${e}`:n,code:r}}function or(t,e){const{message:n,code:r}=lY[t];return{message:e?`${n} ${e}`:n,code:r}}function Ul(t,e){return!!Array.isArray(t)}function Mc(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function gs(t){return typeof t>"u"}function Ar(t,e){return e&&gs(t)?!0:typeof t=="string"&&!!t.trim().length}function W5(t,e){return e&&gs(t)?!0:typeof t=="number"&&!isNaN(t)}function dY(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let o=!0;return Xh(s,r)?(r.forEach(c=>{const{accounts:l,methods:p,events:m}=t.namespaces[c],y=zm(l),v=n[c];(!Xh(s9(c,v),y)||!Xh(v.methods,p)||!Xh(v.events,m))&&(o=!1)}),o):!1}function Bv(t){return Ar(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function hY(t){if(Ar(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&Bv(n)}}return!1}function fY(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Ar(t,!1)){if(e(t))return!0;const n=l9(t);return e(n)}}catch{}return!1}function pY(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function mY(t){return t?.topic}function gY(t,e){let n=null;return Ar(t?.publicKey,!1)||(n=ot("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function qA(t){let e=!0;return Ul(t)?t.length&&(e=t.every(n=>Ar(n,!1))):e=!1,e}function yY(t,e,n){let r=null;return Ul(e)&&e.length?e.forEach(s=>{r||Bv(s)||(r=or("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Bv(t)||(r=or("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function bY(t,e,n){let r=null;return Object.entries(t).forEach(([s,o])=>{if(r)return;const c=yY(s,s9(s,o),`${e} ${n}`);c&&(r=c)}),r}function wY(t,e){let n=null;return Ul(t)?t.forEach(r=>{n||hY(r)||(n=or("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=or("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function vY(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=wY(r?.accounts,`${e} namespace`);s&&(n=s)}),n}function EY(t,e){let n=null;return qA(t?.methods)?qA(t?.events)||(n=or("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=or("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function J9(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=EY(r,`${e}, namespace`);s&&(n=s)}),n}function CY(t,e,n){let r=null;if(t&&Mc(t)){const s=J9(t,e);s&&(r=s);const o=bY(t,e,n);o&&(r=o)}else r=ot("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function ZC(t,e){let n=null;if(t&&Mc(t)){const r=J9(t,e);r&&(n=r);const s=vY(t,e);s&&(n=s)}else n=ot("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function eO(t){return Ar(t.protocol,!0)}function SY(t,e){let n=!1;return t?t&&Ul(t)&&t.length&&t.forEach(r=>{n=eO(r)}):n=!0,n}function _Y(t){return typeof t=="number"}function _i(t){return typeof t<"u"&&typeof t!==null}function xY(t){return!(!t||typeof t!="object"||!t.code||!W5(t.code,!1)||!t.message||!Ar(t.message,!1))}function TY(t){return!(gs(t)||!Ar(t.method,!1))}function AY(t){return!(gs(t)||gs(t.result)&&gs(t.error)||!W5(t.id,!1)||!Ar(t.jsonrpc,!1))}function IY(t){return!(gs(t)||!Ar(t.name,!1))}function QA(t,e){return!(!Bv(e)||!sY(t).includes(e))}function NY(t,e,n){return Ar(n,!1)?iY(t,e).includes(n):!1}function RY(t,e,n){return Ar(n,!1)?oY(t,e).includes(n):!1}function JA(t,e,n){let r=null;const s=OY(t),o=PY(e),c=Object.keys(s),l=Object.keys(o),p=eI(Object.keys(t)),m=eI(Object.keys(e)),y=p.filter(v=>!m.includes(v));return y.length&&(r=ot("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${y.toString()}
      Received: ${Object.keys(e).toString()}`)),Xh(c,l)||(r=ot("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${l.toString()}`)),Object.keys(e).forEach(v=>{if(!v.includes(":")||r)return;const S=zm(e[v].accounts);S.includes(v)||(r=ot("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${v}
        Required: ${v}
        Approved: ${S.toString()}`))}),c.forEach(v=>{r||(Xh(s[v].methods,o[v].methods)?Xh(s[v].events,o[v].events)||(r=ot("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${v}`)):r=ot("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${v}`))}),r}function OY(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function eI(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function PY(t){const e={};return Object.keys(t).forEach(n=>{n.includes(":")?e[n]=t[n]:zm(t[n].accounts)?.forEach(s=>{e[s]={accounts:t[n].accounts.filter(o=>o.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}),e}function kY(t,e){return W5(t,!1)&&t<=e.max&&t>=e.min}function tI(){const t=Tb();return new Promise(e=>{switch(t){case eo.browser:e(LY());break;case eo.reactNative:e(DY());break;case eo.node:e(MY());break;default:e(!0)}})}function LY(){return Bm()&&navigator?.onLine}async function DY(){return vd()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function MY(){return!0}function UY(t){switch(Tb()){case eo.browser:$Y(t);break;case eo.reactNative:jY(t);break}}function $Y(t){!vd()&&Bm()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function jY(t){vd()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}function BY(){var t;return Bm()&&Bl.getDocument()?((t=Bl.getDocument())==null?void 0:t.visibilityState)==="visible":!0}const zC={};class H0{static get(e){return zC[e]}static set(e,n){zC[e]=n}static delete(e){delete zC[e]}}function FY(t){const e=jm.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function ZY({publicKey:t,signature:e,payload:n}){var r;const s=g_(n.method),o=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),c=HY(n.address),l=n.era==="00"?new Uint8Array([0]):g_(n.era);if(l.length!==1&&l.length!==2)throw new Error("Invalid era length");const p=parseInt(n.nonce,16),m=new Uint8Array([p&255,p>>8&255]),y=BigInt(`0x${GY(n.tip)}`),v=WY(y),S=new Uint8Array([0,...t,c,...e,...l,...m,...v,...s]),_=XY(S.length+1);return new Uint8Array([..._,o,...S])}function zY(t){const e=g_(t),n=kX.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function g_(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function GY(t){return t.startsWith("0x")?t.slice(2):t}function HY(t){const e=jm.decode(t)[0];return e===42?0:e===60?2:1}function XY(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function WY(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function VY(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=FY(t.transaction.address),r=ZY({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return zY(s)}const KY="PARSE_ERROR",YY="INVALID_REQUEST",qY="METHOD_NOT_FOUND",QY="INVALID_PARAMS",tO="INTERNAL_ERROR",V5="SERVER_ERROR",JY=[-32700,-32600,-32601,-32602,-32603],py={[KY]:{code:-32700,message:"Parse error"},[YY]:{code:-32600,message:"Invalid Request"},[qY]:{code:-32601,message:"Method not found"},[QY]:{code:-32602,message:"Invalid params"},[tO]:{code:-32603,message:"Internal error"},[V5]:{code:-32e3,message:"Server error"}},nO=V5;function eq(t){return JY.includes(t)}function nI(t){return Object.keys(py).includes(t)?py[t]:py[nO]}function tq(t){const e=Object.values(py).find(n=>n.code===t);return e||py[nO]}function rO(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var GC={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var y_=function(t,e){return y_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},y_(t,e)};function nq(t,e){y_(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var b_=function(){return b_=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},b_.apply(this,arguments)};function rq(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function sq(t,e,n,r){var s=arguments.length,o=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(c=t[l])&&(o=(s<3?c(o):s>3?c(e,n,o):c(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function iq(t,e){return function(n,r){e(n,r,t)}}function oq(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function aq(t,e,n,r){function s(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function l(y){try{m(r.next(y))}catch(v){c(v)}}function p(y){try{m(r.throw(y))}catch(v){c(v)}}function m(y){y.done?o(y.value):s(y.value).then(l,p)}m((r=r.apply(t,e||[])).next())})}function cq(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(m){return function(y){return p([m,y])}}function p(m){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(o=m[0]&2?s.return:m[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,m[1])).done)return o;switch(s=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,s=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){n.label=m[1];break}if(m[0]===6&&n.label<o[1]){n.label=o[1],o=m;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(m);break}o[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(y){m=[6,y],s=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function lq(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function uq(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function w_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function sO(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],c;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(l){c={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(c)throw c.error}}return o}function dq(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(sO(arguments[e]));return t}function hq(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var o=arguments[e],c=0,l=o.length;c<l;c++,s++)r[s]=o[c];return r}function Qy(t){return this instanceof Qy?(this.v=t,this):new Qy(t)}function fq(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,o=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(S){r[S]&&(s[S]=function(_){return new Promise(function(A,N){o.push([S,_,A,N])>1||l(S,_)})})}function l(S,_){try{p(r[S](_))}catch(A){v(o[0][3],A)}}function p(S){S.value instanceof Qy?Promise.resolve(S.value.v).then(m,y):v(o[0][2],S)}function m(S){l("next",S)}function y(S){l("throw",S)}function v(S,_){S(_),o.shift(),o.length&&l(o[0][0],o[0][1])}}function pq(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,o){e[s]=t[s]?function(c){return(n=!n)?{value:Qy(t[s](c)),done:s==="return"}:o?o(c):c}:o}}function mq(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof w_=="function"?w_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(c){return new Promise(function(l,p){c=t[o](c),s(l,p,c.done,c.value)})}}function s(o,c,l,p){Promise.resolve(p).then(function(m){o({value:m,done:l})},c)}}function gq(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function yq(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function bq(t){return t&&t.__esModule?t:{default:t}}function wq(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function vq(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Eq=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return b_},__asyncDelegator:pq,__asyncGenerator:fq,__asyncValues:mq,__await:Qy,__awaiter:aq,__classPrivateFieldGet:wq,__classPrivateFieldSet:vq,__createBinding:lq,__decorate:sq,__exportStar:uq,__extends:nq,__generator:cq,__importDefault:bq,__importStar:yq,__makeTemplateObject:gq,__metadata:oq,__param:iq,__read:sO,__rest:rq,__spread:dq,__spreadArrays:hq,__values:w_},Symbol.toStringTag,{value:"Module"})),Cq=ON(Eq);var Al={},rI;function Sq(){if(rI)return Al;rI=1,Object.defineProperty(Al,"__esModule",{value:!0}),Al.isBrowserCryptoAvailable=Al.getSubtleCrypto=Al.getBrowerCrypto=void 0;function t(){return Lo?.crypto||Lo?.msCrypto||{}}Al.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}Al.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return Al.isBrowserCryptoAvailable=n,Al}var Il={},sI;function _q(){if(sI)return Il;sI=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.isBrowser=Il.isNode=Il.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Il.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Il.isNode=e;function n(){return!t()&&!e()}return Il.isBrowser=n,Il}var iI;function xq(){return iI||(iI=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Cq;e.__exportStar(Sq(),t),e.__exportStar(_q(),t)}(GC)),GC}var Tq=xq();function Ic(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Yh(t=6){return BigInt(Ic(t))}function id(t,e,n){return{id:n||Ic(),jsonrpc:"2.0",method:t,params:e}}function T2(t,e){return{id:t,jsonrpc:"2.0",result:e}}function A2(t,e,n){return{id:t,jsonrpc:"2.0",error:Aq(e)}}function Aq(t,e){return typeof t>"u"?nI(tO):(typeof t=="string"&&(t=Object.assign(Object.assign({},nI(V5)),{message:t})),eq(t.code)&&(t=tq(t.code)),t)}let Iq=class{},Nq=class extends Iq{constructor(){super()}},Rq=class extends Nq{constructor(e){super()}};const Oq="^https?:",Pq="^wss?:";function kq(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function iO(t,e){const n=kq(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function oI(t){return iO(t,Oq)}function aI(t){return iO(t,Pq)}function Lq(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function oO(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function K5(t){return oO(t)&&"method"in t}function I2(t){return oO(t)&&(Nc(t)||Po(t))}function Nc(t){return"result"in t}function Po(t){return"error"in t}let zo=class extends Rq{constructor(e){super(e),this.events=new Zo.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(id(e.method,e.params||[],e.id||Yh().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(o){s(o)}this.events.on(`${e.id}`,o=>{Po(o)?s(o.error):r(o.result)});try{await this.connection.send(e,n)}catch(o){s(o)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),I2(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Dq=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Mq=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",cI=t=>t.split("?")[0],lI=10,Uq=Dq();let $q=class{constructor(e){if(this.url=e,this.events=new Zo.EventEmitter,this.registering=!1,!aI(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(jl(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!aI(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),s(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=Tq.isReactNative()?void 0:{rejectUnauthorized:!Lq(e)},o=new Uq(e,[],s);Mq()?o.onerror=c=>{const l=c;r(this.emitError(l.error))}:o.on("error",c=>{r(this.emitError(c))}),o.onopen=()=>{this.onOpen(o),n(o)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?lf(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),o=A2(e,s);this.events.emit("payload",o)}parseError(e,n=this.url){return rO(e,cI(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>lI&&this.events.setMaxListeners(lI)}emitError(e){const n=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${cI(this.url)}`));return this.events.emit("register_error",n),n}};var jq={};const aO="wc",cO=2,v_="core",Fc=`${aO}@2:${v_}:`,Bq={logger:"error"},Fq={database:":memory:"},Zq="crypto",uI="client_ed25519_seed",zq=ct.ONE_DAY,Gq="keychain",Hq="0.3",Xq="messages",Wq="0.3",dI=ct.SIX_HOURS,Vq="publisher",lO="irn",Kq="error",uO="wss://relay.walletconnect.org",Yq="relayer",qr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},qq="_subscription",Ao={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Qq=.1,E_="2.21.5",Jn={link_mode:"link_mode",relay:"relay"},iv={inbound:"inbound",outbound:"outbound"},Jq="0.3",eQ="WALLETCONNECT_CLIENT_ID",hI="WALLETCONNECT_LINK_MODE_APPS",Yi={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},tQ="subscription",nQ="0.3",rQ="pairing",sQ="0.3",X0={wc_pairingDelete:{req:{ttl:ct.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ct.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ct.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ct.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ct.ONE_DAY,prompt:!1,tag:0},res:{ttl:ct.ONE_DAY,prompt:!1,tag:0}}},Fh={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ba={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},iQ="history",oQ="0.3",aQ="expirer",Ro={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},cQ="0.3",lQ="verify-api",uQ="https://verify.walletconnect.com",dO="https://verify.walletconnect.org",my=dO,dQ=`${my}/v3`,hQ=[uQ,dO],fQ="echo",pQ="https://echo.walletconnect.com",Ac={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Ol={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},wa={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Lh={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Dh={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},W0={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},mQ=.1,gQ="event-client",yQ=86400,bQ="https://pulse.walletconnect.org/batch";function wQ(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var o=t.charAt(s),c=o.charCodeAt(0);if(n[c]!==255)throw new TypeError(o+" is ambiguous");n[c]=s}var l=t.length,p=t.charAt(0),m=Math.log(l)/Math.log(256),y=Math.log(256)/Math.log(l);function v(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var N=0,R=0,$=0,G=A.length;$!==G&&A[$]===0;)$++,N++;for(var F=(G-$)*y+1>>>0,X=new Uint8Array(F);$!==G;){for(var j=A[$],L=0,Z=F-1;(j!==0||L<R)&&Z!==-1;Z--,L++)j+=256*X[Z]>>>0,X[Z]=j%l>>>0,j=j/l>>>0;if(j!==0)throw new Error("Non-zero carry");R=L,$++}for(var U=F-R;U!==F&&X[U]===0;)U++;for(var D=p.repeat(N);U<F;++U)D+=t.charAt(X[U]);return D}function S(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var N=0;if(A[N]!==" "){for(var R=0,$=0;A[N]===p;)R++,N++;for(var G=(A.length-N)*m+1>>>0,F=new Uint8Array(G);A[N];){var X=n[A.charCodeAt(N)];if(X===255)return;for(var j=0,L=G-1;(X!==0||j<$)&&L!==-1;L--,j++)X+=l*F[L]>>>0,F[L]=X%256>>>0,X=X/256>>>0;if(X!==0)throw new Error("Non-zero carry");$=j,N++}if(A[N]!==" "){for(var Z=G-$;Z!==G&&F[Z]===0;)Z++;for(var U=new Uint8Array(R+(G-Z)),D=R;Z!==G;)U[D++]=F[Z++];return U}}}function _(A){var N=S(A);if(N)return N;throw new Error(`Non-${e} character`)}return{encode:v,decodeUnsafe:S,decode:_}}var vQ=wQ,EQ=vQ;const hO=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},CQ=t=>new TextEncoder().encode(t),SQ=t=>new TextDecoder().decode(t);class _Q{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class xQ{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return fO(this,e)}}class TQ{constructor(e){this.decoders=e}or(e){return fO(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const fO=(t,e)=>new TQ({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class AQ{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new _Q(e,n,r),this.decoder=new xQ(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const N2=({name:t,prefix:e,encode:n,decode:r})=>new AQ(t,e,n,r),Rb=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=EQ(n,e);return N2({prefix:t,name:e,encode:r,decode:o=>hO(s(o))})},IQ=(t,e,n,r)=>{const s={};for(let y=0;y<e.length;++y)s[e[y]]=y;let o=t.length;for(;t[o-1]==="=";)--o;const c=new Uint8Array(o*n/8|0);let l=0,p=0,m=0;for(let y=0;y<o;++y){const v=s[t[y]];if(v===void 0)throw new SyntaxError(`Non-${r} character`);p=p<<n|v,l+=n,l>=8&&(l-=8,c[m++]=255&p>>l)}if(l>=n||255&p<<8-l)throw new SyntaxError("Unexpected end of data");return c},NQ=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let o="",c=0,l=0;for(let p=0;p<t.length;++p)for(l=l<<8|t[p],c+=8;c>n;)c-=n,o+=e[s&l>>c];if(c&&(o+=e[s&l<<n-c]),r)for(;o.length*n&7;)o+="=";return o},Ss=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>N2({prefix:e,name:t,encode(s){return NQ(s,r,n)},decode(s){return IQ(s,r,n,t)}}),RQ=N2({prefix:"\0",name:"identity",encode:t=>SQ(t),decode:t=>CQ(t)});var OQ=Object.freeze({__proto__:null,identity:RQ});const PQ=Ss({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var kQ=Object.freeze({__proto__:null,base2:PQ});const LQ=Ss({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var DQ=Object.freeze({__proto__:null,base8:LQ});const MQ=Rb({prefix:"9",name:"base10",alphabet:"0123456789"});var UQ=Object.freeze({__proto__:null,base10:MQ});const $Q=Ss({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),jQ=Ss({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var BQ=Object.freeze({__proto__:null,base16:$Q,base16upper:jQ});const FQ=Ss({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ZQ=Ss({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),zQ=Ss({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),GQ=Ss({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),HQ=Ss({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),XQ=Ss({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),WQ=Ss({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),VQ=Ss({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),KQ=Ss({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var YQ=Object.freeze({__proto__:null,base32:FQ,base32upper:ZQ,base32pad:zQ,base32padupper:GQ,base32hex:HQ,base32hexupper:XQ,base32hexpad:WQ,base32hexpadupper:VQ,base32z:KQ});const qQ=Rb({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),QQ=Rb({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var JQ=Object.freeze({__proto__:null,base36:qQ,base36upper:QQ});const eJ=Rb({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),tJ=Rb({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var nJ=Object.freeze({__proto__:null,base58btc:eJ,base58flickr:tJ});const rJ=Ss({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),sJ=Ss({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),iJ=Ss({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),oJ=Ss({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var aJ=Object.freeze({__proto__:null,base64:rJ,base64pad:sJ,base64url:iJ,base64urlpad:oJ});const pO=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),cJ=pO.reduce((t,e,n)=>(t[n]=e,t),[]),lJ=pO.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function uJ(t){return t.reduce((e,n)=>(e+=cJ[n],e),"")}function dJ(t){const e=[];for(const n of t){const r=lJ[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const hJ=N2({prefix:"🚀",name:"base256emoji",encode:uJ,decode:dJ});var fJ=Object.freeze({__proto__:null,base256emoji:hJ}),pJ=mO,fI=128,mJ=-128,gJ=Math.pow(2,31);function mO(t,e,n){e=e||[],n=n||0;for(var r=n;t>=gJ;)e[n++]=t&255|fI,t/=128;for(;t&mJ;)e[n++]=t&255|fI,t>>>=7;return e[n]=t|0,mO.bytes=n-r+1,e}var yJ=C_,bJ=128,pI=127;function C_(t,r){var n=0,r=r||0,s=0,o=r,c,l=t.length;do{if(o>=l)throw C_.bytes=0,new RangeError("Could not decode varint");c=t[o++],n+=s<28?(c&pI)<<s:(c&pI)*Math.pow(2,s),s+=7}while(c>=bJ);return C_.bytes=o-r,n}var wJ=Math.pow(2,7),vJ=Math.pow(2,14),EJ=Math.pow(2,21),CJ=Math.pow(2,28),SJ=Math.pow(2,35),_J=Math.pow(2,42),xJ=Math.pow(2,49),TJ=Math.pow(2,56),AJ=Math.pow(2,63),IJ=function(t){return t<wJ?1:t<vJ?2:t<EJ?3:t<CJ?4:t<SJ?5:t<_J?6:t<xJ?7:t<TJ?8:t<AJ?9:10},NJ={encode:pJ,decode:yJ,encodingLength:IJ},gO=NJ;const mI=(t,e,n=0)=>(gO.encode(t,e,n),e),gI=t=>gO.encodingLength(t),S_=(t,e)=>{const n=e.byteLength,r=gI(t),s=r+gI(n),o=new Uint8Array(s+n);return mI(t,o,0),mI(n,o,r),o.set(e,s),new RJ(t,n,e,o)};class RJ{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const yO=({name:t,code:e,encode:n})=>new OJ(t,e,n);class OJ{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?S_(this.code,n):n.then(r=>S_(this.code,r))}else throw Error("Unknown type, must be binary type")}}const bO=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),PJ=yO({name:"sha2-256",code:18,encode:bO("SHA-256")}),kJ=yO({name:"sha2-512",code:19,encode:bO("SHA-512")});var LJ=Object.freeze({__proto__:null,sha256:PJ,sha512:kJ});const wO=0,DJ="identity",vO=hO,MJ=t=>S_(wO,vO(t)),UJ={code:wO,name:DJ,encode:vO,digest:MJ};var $J=Object.freeze({__proto__:null,identity:UJ});new TextEncoder,new TextDecoder;const yI={...OQ,...kQ,...DQ,...UQ,...BQ,...YQ,...JQ,...nJ,...aJ,...fJ};({...LJ,...$J});function EO(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function jJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?EO(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function CO(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const bI=CO("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),HC=CO("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=jJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),BJ={utf8:bI,"utf-8":bI,hex:yI.base16,latin1:HC,ascii:HC,binary:HC,...yI};function FJ(t,e="utf8"){const n=BJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?EO(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var ZJ=Object.defineProperty,zJ=(t,e,n)=>e in t?ZJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xc=(t,e,n)=>zJ(t,typeof e!="symbol"?e+"":e,n);class GJ{constructor(e,n){this.core=e,this.logger=n,xc(this,"keychain",new Map),xc(this,"name",Gq),xc(this,"version",Hq),xc(this,"initialized",!1),xc(this,"storagePrefix",Fc),xc(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),xc(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),xc(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),xc(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:o}=ot("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(o)}return s}),xc(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Zs(n,this.name)}get context(){return Li(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,s_(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?i_(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ot("NOT_INITIALIZED",this.name);throw new Error(e)}}}var HJ=Object.defineProperty,XJ=(t,e,n)=>e in t?HJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fs=(t,e,n)=>XJ(t,typeof e!="symbol"?e+"":e,n);class WJ{constructor(e,n,r){this.core=e,this.logger=n,fs(this,"name",Zq),fs(this,"keychain"),fs(this,"randomSessionIdentifier",m_()),fs(this,"initialized",!1),fs(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),fs(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),fs(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),o=FT(s);return I4(o.publicKey)}),fs(this,"generateKeyPair",()=>{this.isInitialized();const s=$K();return this.setPrivateKey(s.publicKey,s.privateKey)}),fs(this,"signJWT",async s=>{this.isInitialized();const o=await this.getClientSeed(),c=FT(o),l=this.randomSessionIdentifier;return await Dz(l,s,zq,c)}),fs(this,"generateSharedKey",(s,o,c)=>{this.isInitialized();const l=this.getPrivateKey(s),p=jK(l,o);return this.setSymKey(p,c)}),fs(this,"setSymKey",async(s,o)=>{this.isInitialized();const c=o||sv(s);return await this.keychain.set(c,s),c}),fs(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),fs(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),fs(this,"encode",async(s,o,c)=>{this.isInitialized();const l=Q9(c),p=jl(o);if(GA(l))return ZK(p,c?.encoding);if(zA(l)){const S=l.senderPublicKey,_=l.receiverPublicKey;s=await this.generateSharedKey(S,_)}const m=this.getSymKey(s),{type:y,senderPublicKey:v}=l;return BK({type:y,symKey:m,message:p,senderPublicKey:v,encoding:c?.encoding})}),fs(this,"decode",async(s,o,c)=>{this.isInitialized();const l=GK(o,c);if(GA(l)){const p=zK(o,c?.encoding);return lf(p)}if(zA(l)){const p=l.receiverPublicKey,m=l.senderPublicKey;s=await this.generateSharedKey(p,m)}try{const p=this.getSymKey(s),m=FK({symKey:p,encoded:o,encoding:c?.encoding});return lf(m)}catch(p){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(p)}}),fs(this,"getPayloadType",(s,o=Ta)=>{const c=qy({encoded:s,encoding:o});return hf(c.type)}),fs(this,"getPayloadSenderPublicKey",(s,o=Ta)=>{const c=qy({encoded:s,encoding:o});return c.senderPublicKey?Oi(c.senderPublicKey,ti):void 0}),this.core=e,this.logger=Zs(n,this.name),this.keychain=r||new GJ(this.core,this.logger)}get context(){return Li(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(uI)}catch{e=m_(),await this.keychain.set(uI,e)}return FJ(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ot("NOT_INITIALIZED",this.name);throw new Error(e)}}}var VJ=Object.defineProperty,KJ=Object.defineProperties,YJ=Object.getOwnPropertyDescriptors,wI=Object.getOwnPropertySymbols,qJ=Object.prototype.hasOwnProperty,QJ=Object.prototype.propertyIsEnumerable,__=(t,e,n)=>e in t?VJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,JJ=(t,e)=>{for(var n in e||(e={}))qJ.call(e,n)&&__(t,n,e[n]);if(wI)for(var n of wI(e))QJ.call(e,n)&&__(t,n,e[n]);return t},eee=(t,e)=>KJ(t,YJ(e)),Ki=(t,e,n)=>__(t,typeof e!="symbol"?e+"":e,n);class tee extends kB{constructor(e,n){super(e,n),this.logger=e,this.core=n,Ki(this,"messages",new Map),Ki(this,"messagesWithoutClientAck",new Map),Ki(this,"name",Xq),Ki(this,"version",Wq),Ki(this,"initialized",!1),Ki(this,"storagePrefix",Fc),Ki(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Ki(this,"set",async(r,s,o)=>{this.isInitialized();const c=Oc(s);let l=this.messages.get(r);if(typeof l>"u"&&(l={}),typeof l[c]<"u")return c;if(l[c]=s,this.messages.set(r,l),o===iv.inbound){const p=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,eee(JJ({},p),{[c]:s}))}return await this.persist(),c}),Ki(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Ki(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const o of r){const c=this.messagesWithoutClientAck.get(o)||{};s[o]=Object.values(c)}return s}),Ki(this,"has",(r,s)=>{this.isInitialized();const o=this.get(r),c=Oc(s);return typeof o[c]<"u"}),Ki(this,"ack",async(r,s)=>{this.isInitialized();const o=this.messagesWithoutClientAck.get(r);if(typeof o>"u")return;const c=Oc(s);delete o[c],Object.keys(o).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,o),await this.persist()}),Ki(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Zs(e,this.name),this.core=n}get context(){return Li(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,s_(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,s_(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?i_(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?i_(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=ot("NOT_INITIALIZED",this.name);throw new Error(e)}}}var nee=Object.defineProperty,ree=Object.defineProperties,see=Object.getOwnPropertyDescriptors,vI=Object.getOwnPropertySymbols,iee=Object.prototype.hasOwnProperty,oee=Object.prototype.propertyIsEnumerable,x_=(t,e,n)=>e in t?nee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Z1=(t,e)=>{for(var n in e||(e={}))iee.call(e,n)&&x_(t,n,e[n]);if(vI)for(var n of vI(e))oee.call(e,n)&&x_(t,n,e[n]);return t},XC=(t,e)=>ree(t,see(e)),va=(t,e,n)=>x_(t,typeof e!="symbol"?e+"":e,n);class aee extends LB{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,va(this,"events",new Zo.EventEmitter),va(this,"name",Vq),va(this,"queue",new Map),va(this,"publishTimeout",ct.toMiliseconds(ct.ONE_MINUTE)),va(this,"initialPublishTimeout",ct.toMiliseconds(ct.ONE_SECOND*15)),va(this,"needsTransportRestart",!1),va(this,"publish",async(r,s,o)=>{var c;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:o}});const l=o?.ttl||dI,p=jv(o),m=o?.prompt||!1,y=o?.tag||0,v=o?.id||Yh().toString(),S={topic:r,message:s,opts:{ttl:l,relay:p,prompt:m,tag:y,id:v,attestation:o?.attestation,tvf:o?.tvf}},_=`Failed to publish payload, please try again. id:${v} tag:${y}`;try{const A=new Promise(async N=>{const R=({id:G})=>{S.opts.id===G&&(this.removeRequestFromQueue(G),this.relayer.events.removeListener(qr.publish,R),N(S))};this.relayer.events.on(qr.publish,R);const $=sd(new Promise((G,F)=>{this.rpcPublish({topic:r,message:s,ttl:l,prompt:m,tag:y,id:v,attestation:o?.attestation,tvf:o?.tvf}).then(G).catch(X=>{this.logger.warn(X,X?.message),F(X)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${v} tag:${y}`);try{await $,this.events.removeListener(qr.publish,R)}catch(G){this.queue.set(v,XC(Z1({},S),{attempt:1})),this.logger.warn(G,G?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:v,topic:r,message:s,opts:o}}),await sd(A,this.publishTimeout,_)}catch(A){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(A),(c=o?.internal)!=null&&c.throwOnFailedPublish)throw A}finally{this.queue.delete(v)}}),va(this,"on",(r,s)=>{this.events.on(r,s)}),va(this,"once",(r,s)=>{this.events.once(r,s)}),va(this,"off",(r,s)=>{this.events.off(r,s)}),va(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Zs(n,this.name),this.registerEventListeners()}get context(){return Li(this.logger)}async rpcPublish(e){var n,r,s,o;const{topic:c,message:l,ttl:p=dI,prompt:m,tag:y,id:v,attestation:S,tvf:_}=e,A={method:ny(jv().protocol).publish,params:Z1({topic:c,message:l,ttl:p,prompt:m,tag:y,attestation:S},_),id:v};gs((n=A.params)==null?void 0:n.prompt)&&((r=A.params)==null||delete r.prompt),gs((s=A.params)==null?void 0:s.tag)&&((o=A.params)==null||delete o.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:A});const N=await this.relayer.request(A);return this.relayer.events.emit(qr.publish,e),this.logger.debug("Successfully Published Payload"),N}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,XC(Z1({},e),{attempt:r}));const{topic:s,message:o,opts:c,attestation:l}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(XC(Z1({},e),{topic:s,message:o,ttl:c.ttl,prompt:c.prompt,tag:c.tag,id:c.id,attestation:l,tvf:c.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ef.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(qr.connection_stalled);return}this.checkQueue()}),this.relayer.on(qr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var cee=Object.defineProperty,lee=(t,e,n)=>e in t?cee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zp=(t,e,n)=>lee(t,typeof e!="symbol"?e+"":e,n);class uee{constructor(){Zp(this,"map",new Map),Zp(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Zp(this,"get",e=>this.map.get(e)||[]),Zp(this,"exists",(e,n)=>this.get(e).includes(n)),Zp(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(o=>o!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Zp(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var dee=Object.defineProperty,hee=Object.defineProperties,fee=Object.getOwnPropertyDescriptors,EI=Object.getOwnPropertySymbols,pee=Object.prototype.hasOwnProperty,mee=Object.prototype.propertyIsEnumerable,T_=(t,e,n)=>e in t?dee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V0=(t,e)=>{for(var n in e||(e={}))pee.call(e,n)&&T_(t,n,e[n]);if(EI)for(var n of EI(e))mee.call(e,n)&&T_(t,n,e[n]);return t},WC=(t,e)=>hee(t,fee(e)),Fn=(t,e,n)=>T_(t,typeof e!="symbol"?e+"":e,n);class gee extends UB{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Fn(this,"subscriptions",new Map),Fn(this,"topicMap",new uee),Fn(this,"events",new Zo.EventEmitter),Fn(this,"name",tQ),Fn(this,"version",nQ),Fn(this,"pending",new Map),Fn(this,"cached",[]),Fn(this,"initialized",!1),Fn(this,"storagePrefix",Fc),Fn(this,"subscribeTimeout",ct.toMiliseconds(ct.ONE_MINUTE)),Fn(this,"initialSubscribeTimeout",ct.toMiliseconds(ct.ONE_SECOND*15)),Fn(this,"clientId"),Fn(this,"batchSubscribeTopicsLimit",500),Fn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Fn(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const o=jv(s),c={topic:r,relay:o,transportType:s?.transportType};this.pending.set(r,c);const l=await this.rpcSubscribe(r,o,s);return typeof l=="string"&&(this.onSubscribe(l,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),l}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),Fn(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Fn(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Fn(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(o=>o.topic===r))})),Fn(this,"on",(r,s)=>{this.events.on(r,s)}),Fn(this,"once",(r,s)=>{this.events.once(r,s)}),Fn(this,"off",(r,s)=>{this.events.off(r,s)}),Fn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Fn(this,"start",async()=>{await this.onConnect()}),Fn(this,"stop",async()=>{await this.onDisconnect()}),Fn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Fn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Fn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Ef.pulse,async()=>{await this.checkPending()}),this.events.on(Yi.created,async r=>{const s=Yi.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Yi.deleted,async r=>{const s=Yi.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Zs(n,this.name),this.clientId=""}get context(){return Li(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=jv(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const o=or("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,o),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||r?.transportType===Jn.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const o={method:ny(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o});const c=(s=r?.internal)==null?void 0:s.throwOnFailedPublish;try{const l=await this.getSubscriptionId(e);if(r?.transportType===Jn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(o).catch(y=>this.logger.warn(y))},ct.toMiliseconds(ct.ONE_SECOND)),l;const p=new Promise(async y=>{const v=S=>{S.topic===e&&(this.events.removeListener(Yi.created,v),y(S.id))};this.events.on(Yi.created,v);try{const S=await sd(new Promise((_,A)=>{this.relayer.request(o).catch(N=>{this.logger.warn(N,N?.message),A(N)}).then(_)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Yi.created,v),y(S)}catch{}}),m=await sd(p,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!m&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return m?l:null}catch(l){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(qr.connection_stalled),c)throw l}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:ny(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await sd(new Promise(s=>{this.relayer.request(r).catch(o=>this.logger.warn(o)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(qr.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:ny(n.protocol).batchFetchMessages,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await sd(new Promise((o,c)=>{this.relayer.request(r).catch(l=>{this.logger.warn(l),c(l)}).then(o)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(qr.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:ny(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,WC(V0({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,V0({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,V0({},n)),this.topicMap.set(n.topic,e),this.events.emit(Yi.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=ot("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Yi.deleted,WC(V0({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Yi.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Yi.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=ot("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>WC(V0({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await oW(ct.toMiliseconds(ct.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=ot("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Oc(e+await this.getClientId())}}var yee=Object.defineProperty,CI=Object.getOwnPropertySymbols,bee=Object.prototype.hasOwnProperty,wee=Object.prototype.propertyIsEnumerable,A_=(t,e,n)=>e in t?yee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,SI=(t,e)=>{for(var n in e||(e={}))bee.call(e,n)&&A_(t,n,e[n]);if(CI)for(var n of CI(e))wee.call(e,n)&&A_(t,n,e[n]);return t},pn=(t,e,n)=>A_(t,typeof e!="symbol"?e+"":e,n);class vee extends DB{constructor(e){super(e),pn(this,"protocol","wc"),pn(this,"version",2),pn(this,"core"),pn(this,"logger"),pn(this,"events",new Zo.EventEmitter),pn(this,"provider"),pn(this,"messages"),pn(this,"subscriber"),pn(this,"publisher"),pn(this,"name",Yq),pn(this,"transportExplicitlyClosed",!1),pn(this,"initialized",!1),pn(this,"connectionAttemptInProgress",!1),pn(this,"relayUrl"),pn(this,"projectId"),pn(this,"packageName"),pn(this,"bundleId"),pn(this,"hasExperiencedNetworkDisruption",!1),pn(this,"pingTimeout"),pn(this,"heartBeatTimeout",ct.toMiliseconds(ct.THIRTY_SECONDS+ct.FIVE_SECONDS)),pn(this,"reconnectTimeout"),pn(this,"connectPromise"),pn(this,"reconnectInProgress",!1),pn(this,"requestsInFlight",[]),pn(this,"connectTimeout",ct.toMiliseconds(ct.ONE_SECOND*15)),pn(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const o=n.id||Yh().toString();await this.toEstablishConnection();try{this.logger.trace({id:o,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const c=`${o}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(c);const l=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(p=>p!==c),l}catch(c){throw this.logger.debug(`Failed to Publish Request: ${o}`),c}}),pn(this,"resetPingTimeout",()=>{Dv()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,o;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(o=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||o.call(s)}catch(c){this.logger.warn(c,c?.message)}},this.heartBeatTimeout))}),pn(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),pn(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(qr.connect)}),pn(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),pn(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(qr.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),pn(this,"registerProviderListeners",()=>{this.provider.on(Ao.payload,this.onPayloadHandler),this.provider.on(Ao.connect,this.onConnectHandler),this.provider.on(Ao.disconnect,this.onDisconnectHandler),this.provider.on(Ao.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Zs(e.logger,this.name):Cb(Dm({level:e.logger||Kq})),this.messages=new tee(this.logger,e.core),this.subscriber=new gee(this,this.logger),this.publisher=new aee(this,this.logger),this.relayUrl=e?.relayUrl||uO,this.projectId=e.projectId,GX()?this.packageName=dA():HX()&&(this.bundleId=dA()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return Li(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Jn.relay},iv.outbound)}async subscribe(e,n){var r,s,o;this.isInitialized(),(!(n!=null&&n.transportType)||n?.transportType==="relay")&&await this.toEstablishConnection();const c=typeof((r=n?.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n?.internal)==null?void 0:s.throwOnFailedPublish;let l=((o=this.subscriber.topicMap.get(e))==null?void 0:o[0])||"",p;const m=y=>{y.topic===e&&(this.subscriber.off(Yi.created,m),p())};return await Promise.all([new Promise(y=>{p=y,this.subscriber.on(Yi.created,m)}),new Promise(async(y,v)=>{l=await this.subscriber.subscribe(e,SI({internal:{throwOnFailedPublish:c}},n)).catch(S=>{c&&v(S)})||l,y()})]),l}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await sd(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await tI())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+s?.message)}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=kr(ct.FIVE_MINUTES),o={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,o)}this.events.emit(qr.message,e),await this.recordMessageEvent(e,iv.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const o=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Ao.disconnect,o),await sd(new Promise((c,l)=>{this.provider.connect().then(c).catch(l)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(c=>{s(c)}).finally(()=>{this.provider.off(Ao.disconnect,o),clearTimeout(this.reconnectTimeout)}),await new Promise(async(c,l)=>{const p=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ao.disconnect,p),await this.subscriber.start().then(c).catch(l).finally(()=>{this.provider.off(Ao.disconnect,p)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,ct.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,o;if(Dv())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((o=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||o.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(c){this.logger.warn(c,c?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new zo(new $q(YX({sdkVersion:E_,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),K5(e)){if(!e.method.endsWith(qq))return;const n=e.params,{topic:r,message:s,publishedAt:o,attestation:c}=n.data,l={topic:r,message:s,publishedAt:o,transportType:Jn.relay,attestation:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(SI({type:"event",event:n.id},l)),this.events.emit(n.id,l),await this.acknowledgePayload(e),await this.onMessageEvent(l)}else I2(e)&&this.events.emit(qr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,iv.inbound),this.events.emit(qr.message,e))}async acknowledgePayload(e){const n=T2(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Ao.payload,this.onPayloadHandler),this.provider.off(Ao.connect,this.onConnectHandler),this.provider.off(Ao.disconnect,this.onDisconnectHandler),this.provider.off(Ao.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await tI();UY(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Ef.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&BY())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(qr.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},ct.toMiliseconds(Qq)))))}isInitialized(){if(!this.initialized){const{message:e}=ot("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function Eee(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function _I(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function xI(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Cee="[object RegExp]",See="[object String]",_ee="[object Number]",xee="[object Boolean]",TI="[object Arguments]",Tee="[object Symbol]",Aee="[object Date]",Iee="[object Map]",Nee="[object Set]",Ree="[object Array]",Oee="[object Function]",Pee="[object ArrayBuffer]",VC="[object Object]",kee="[object Error]",Lee="[object DataView]",Dee="[object Uint8Array]",Mee="[object Uint8ClampedArray]",Uee="[object Uint16Array]",$ee="[object Uint32Array]",jee="[object BigUint64Array]",Bee="[object Int8Array]",Fee="[object Int16Array]",Zee="[object Int32Array]",zee="[object BigInt64Array]",Gee="[object Float32Array]",Hee="[object Float64Array]";function Xee(){}function AI(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Wee(t,e,n){return ry(t,e,void 0,void 0,void 0,void 0,n)}function ry(t,e,n,r,s,o,c){const l=c(t,e,n,r,s,o);if(l!==void 0)return l;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return gy(t,e,o,c)}return gy(t,e,o,c)}function gy(t,e,n,r){if(Object.is(t,e))return!0;let s=xI(t),o=xI(e);if(s===TI&&(s=VC),o===TI&&(o=VC),s!==o)return!1;switch(s){case See:return t.toString()===e.toString();case _ee:{const p=t.valueOf(),m=e.valueOf();return Eee(p,m)}case xee:case Aee:case Tee:return Object.is(t.valueOf(),e.valueOf());case Cee:return t.source===e.source&&t.flags===e.flags;case Oee:return t===e}n=n??new Map;const c=n.get(t),l=n.get(e);if(c!=null&&l!=null)return c===e;n.set(t,e),n.set(e,t);try{switch(s){case Iee:{if(t.size!==e.size)return!1;for(const[p,m]of t.entries())if(!e.has(p)||!ry(m,e.get(p),p,t,e,n,r))return!1;return!0}case Nee:{if(t.size!==e.size)return!1;const p=Array.from(t.values()),m=Array.from(e.values());for(let y=0;y<p.length;y++){const v=p[y],S=m.findIndex(_=>ry(v,_,void 0,t,e,n,r));if(S===-1)return!1;m.splice(S,1)}return!0}case Ree:case Dee:case Mee:case Uee:case $ee:case jee:case Bee:case Fee:case Zee:case zee:case Gee:case Hee:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let p=0;p<t.length;p++)if(!ry(t[p],e[p],p,t,e,n,r))return!1;return!0}case Pee:return t.byteLength!==e.byteLength?!1:gy(new Uint8Array(t),new Uint8Array(e),n,r);case Lee:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:gy(new Uint8Array(t),new Uint8Array(e),n,r);case kee:return t.name===e.name&&t.message===e.message;case VC:{if(!(gy(t.constructor,e.constructor,n,r)||AI(t)&&AI(e)))return!1;const p=[...Object.keys(t),..._I(t)],m=[...Object.keys(e),..._I(e)];if(p.length!==m.length)return!1;for(let y=0;y<p.length;y++){const v=p[y],S=t[v];if(!Object.hasOwn(e,v))return!1;const _=e[v];if(!ry(S,_,v,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function Vee(t,e){return Wee(t,e,Xee)}var Kee=Object.defineProperty,II=Object.getOwnPropertySymbols,Yee=Object.prototype.hasOwnProperty,qee=Object.prototype.propertyIsEnumerable,I_=(t,e,n)=>e in t?Kee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,NI=(t,e)=>{for(var n in e||(e={}))Yee.call(e,n)&&I_(t,n,e[n]);if(II)for(var n of II(e))qee.call(e,n)&&I_(t,n,e[n]);return t},vi=(t,e,n)=>I_(t,typeof e!="symbol"?e+"":e,n);class Sf extends MB{constructor(e,n,r,s=Fc,o=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,vi(this,"map",new Map),vi(this,"version",Jq),vi(this,"cached",[]),vi(this,"initialized",!1),vi(this,"getKey"),vi(this,"storagePrefix",Fc),vi(this,"recentlyDeleted",[]),vi(this,"recentlyDeletedLimit",200),vi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(c=>{this.getKey&&c!==null&&!gs(c)?this.map.set(this.getKey(c),c):pY(c)?this.map.set(c.id,c):mY(c)&&this.map.set(c.topic,c)}),this.cached=[],this.initialized=!0)}),vi(this,"set",async(c,l)=>{this.isInitialized(),this.map.has(c)?await this.update(c,l):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:l}),this.map.set(c,l),await this.persist())}),vi(this,"get",c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c))),vi(this,"getAll",c=>(this.isInitialized(),c?this.values.filter(l=>Object.keys(c).every(p=>Vee(l[p],c[p]))):this.values)),vi(this,"update",async(c,l)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:l});const p=NI(NI({},this.getData(c)),l);this.map.set(c,p),await this.persist()}),vi(this,"delete",async(c,l)=>{this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:l}),this.map.delete(c),this.addToRecentlyDeleted(c),await this.persist())}),this.logger=Zs(n,this.name),this.storagePrefix=s,this.getKey=o}get context(){return Li(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=ot("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=ot("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=ot("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ot("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Qee=Object.defineProperty,Jee=(t,e,n)=>e in t?Qee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nn=(t,e,n)=>Jee(t,typeof e!="symbol"?e+"":e,n);class ete{constructor(e,n){this.core=e,this.logger=n,nn(this,"name",rQ),nn(this,"version",sQ),nn(this,"events",new v5),nn(this,"pairings"),nn(this,"initialized",!1),nn(this,"storagePrefix",Fc),nn(this,"ignoredPayloadTypes",[Ml]),nn(this,"registeredMethods",[]),nn(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),nn(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),nn(this,"create",async r=>{this.isInitialized();const s=m_(),o=await this.core.crypto.setSymKey(s),c=kr(ct.FIVE_MINUTES),l={protocol:lO},p={topic:o,expiry:c,relay:l,active:!1,methods:r?.methods},m=XA({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:l,expiryTimestamp:c,methods:r?.methods});return this.events.emit(Fh.create,p),this.core.expirer.set(o,c),await this.pairings.set(o,p),await this.core.relayer.subscribe(o,{transportType:r?.transportType}),{topic:o,uri:m}}),nn(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r?.uri,trace:[Ac.pairing_started]}});this.isValidPair(r,s);const{topic:o,symKey:c,relay:l,expiryTimestamp:p,methods:m}=HA(r.uri);s.props.properties.topic=o,s.addTrace(Ac.pairing_uri_validation_success),s.addTrace(Ac.pairing_uri_not_expired);let y;if(this.pairings.keys.includes(o)){if(y=this.pairings.get(o),s.addTrace(Ac.existing_pairing),y.active)throw s.setError(Ol.active_pairing_already_exists),new Error(`Pairing already exists: ${o}. Please try again with a new connection URI.`);s.addTrace(Ac.pairing_not_expired)}const v=p||kr(ct.FIVE_MINUTES),S={topic:o,relay:l,expiry:v,active:!1,methods:m};this.core.expirer.set(o,v),await this.pairings.set(o,S),s.addTrace(Ac.store_new_pairing),r.activatePairing&&await this.activate({topic:o}),this.events.emit(Fh.create,S),s.addTrace(Ac.emit_inactive_pairing),this.core.crypto.keychain.has(o)||await this.core.crypto.setSymKey(c,o),s.addTrace(Ac.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Ol.no_internet_connection)}try{await this.core.relayer.subscribe(o,{relay:l})}catch(_){throw s.setError(Ol.subscribe_pairing_topic_failure),_}return s.addTrace(Ac.subscribe_pairing_topic_success),S}),nn(this,"activate",async({topic:r})=>{this.isInitialized();const s=kr(ct.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),nn(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const o=await this.sendRequest(s,"wc_pairingPing",{}),{done:c,resolve:l,reject:p}=jh();this.events.once(Tn("pairing_ping",o),({error:m})=>{m?p(m):l()}),await c()}}),nn(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),nn(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),nn(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),nn(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",or("USER_DISCONNECTED")),await this.deletePairing(s))}),nn(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:o,expiry:c,methods:l}=r,p=this.core.crypto.keychain.get(s);return XA({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:p,relay:o,expiryTimestamp:c,methods:l})}),nn(this,"sendRequest",async(r,s,o)=>{const c=id(s,o),l=await this.core.crypto.encode(r,c),p=X0[s].req;return this.core.history.set(r,c),this.core.relayer.publish(r,l,p),c.id}),nn(this,"sendResult",async(r,s,o)=>{const c=T2(r,o),l=await this.core.crypto.encode(s,c),p=(await this.core.history.get(s,r)).request.method,m=X0[p].res;await this.core.relayer.publish(s,l,m),await this.core.history.resolve(c)}),nn(this,"sendError",async(r,s,o)=>{const c=A2(r,o),l=await this.core.crypto.encode(s,c),p=(await this.core.history.get(s,r)).request.method,m=X0[p]?X0[p].res:X0.unregistered_method.res;await this.core.relayer.publish(s,l,m),await this.core.history.resolve(c)}),nn(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,or("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),nn(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>qu(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),nn(this,"onRelayEventRequest",async r=>{const{topic:s,payload:o}=r;switch(o.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,o);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,o);default:return await this.onUnknownRpcMethodRequest(s,o)}}),nn(this,"onRelayEventResponse",async r=>{const{topic:s,payload:o}=r,c=(await this.core.history.get(s,o.id)).request.method;switch(c){case"wc_pairingPing":return this.onPairingPingResponse(s,o);default:return this.onUnknownRpcMethodResponse(c)}}),nn(this,"onPairingPingRequest",async(r,s)=>{const{id:o}=s;try{this.isValidPing({topic:r}),await this.sendResult(o,r,!0),this.events.emit(Fh.ping,{id:o,topic:r})}catch(c){await this.sendError(o,r,c),this.logger.error(c)}}),nn(this,"onPairingPingResponse",(r,s)=>{const{id:o}=s;setTimeout(()=>{Nc(s)?this.events.emit(Tn("pairing_ping",o),{}):Po(s)&&this.events.emit(Tn("pairing_ping",o),{error:s.error})},500)}),nn(this,"onPairingDeleteRequest",async(r,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Fh.delete,{id:o,topic:r})}catch(c){await this.sendError(o,r,c),this.logger.error(c)}}),nn(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:o,method:c}=s;try{if(this.registeredMethods.includes(c))return;const l=or("WC_METHOD_UNSUPPORTED",c);await this.sendError(o,r,l),this.logger.error(l)}catch(l){await this.sendError(o,r,l),this.logger.error(l)}}),nn(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(or("WC_METHOD_UNSUPPORTED",r))}),nn(this,"isValidPair",(r,s)=>{var o;if(!_i(r)){const{message:l}=ot("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Ol.malformed_pairing_uri),new Error(l)}if(!fY(r.uri)){const{message:l}=ot("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Ol.malformed_pairing_uri),new Error(l)}const c=HA(r?.uri);if(!((o=c?.relay)!=null&&o.protocol)){const{message:l}=ot("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Ol.malformed_pairing_uri),new Error(l)}if(!(c!=null&&c.symKey)){const{message:l}=ot("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Ol.malformed_pairing_uri),new Error(l)}if(c!=null&&c.expiryTimestamp&&ct.toMiliseconds(c?.expiryTimestamp)<Date.now()){s.setError(Ol.pairing_expired);const{message:l}=ot("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(l)}}),nn(this,"isValidPing",async r=>{if(!_i(r)){const{message:o}=ot("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidPairingTopic(s)}),nn(this,"isValidDisconnect",async r=>{if(!_i(r)){const{message:o}=ot("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(o)}const{topic:s}=r;await this.isValidPairingTopic(s)}),nn(this,"isValidPairingTopic",async r=>{if(!Ar(r,!1)){const{message:s}=ot("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=ot("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(qu(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=ot("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Zs(n,this.name),this.pairings=new Sf(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Li(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ot("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(qr.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Jn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const o=await this.core.crypto.decode(n,r);K5(o)?(this.core.history.set(n,o),await this.onRelayEventRequest({topic:n,payload:o})):I2(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:n,payload:o}),this.core.history.delete(n,o.id)),await this.core.relayer.messages.ack(n,r)}catch(o){this.logger.error(o)}})}registerExpirerEvents(){this.core.expirer.on(Ro.expired,async e=>{const{topic:n}=c9(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Fh.expire,{topic:n}))})}}var tte=Object.defineProperty,nte=(t,e,n)=>e in t?tte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ps=(t,e,n)=>nte(t,typeof e!="symbol"?e+"":e,n);class rte extends PB{constructor(e,n){super(e,n),this.core=e,this.logger=n,ps(this,"records",new Map),ps(this,"events",new Zo.EventEmitter),ps(this,"name",iQ),ps(this,"version",oQ),ps(this,"cached",[]),ps(this,"initialized",!1),ps(this,"storagePrefix",Fc),ps(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ps(this,"set",(r,s,o)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:o}),this.records.has(s.id))return;const c={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:o,expiry:kr(ct.THIRTY_DAYS)};this.records.set(c.id,c),this.persist(),this.events.emit(ba.created,c)}),ps(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Po(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(ba.updated,s))}),ps(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),ps(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(o=>{if(o.topic===r){if(typeof s<"u"&&o.id!==s)return;this.records.delete(o.id),this.events.emit(ba.deleted,o)}}),this.persist()}),ps(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),ps(this,"on",(r,s)=>{this.events.on(r,s)}),ps(this,"once",(r,s)=>{this.events.once(r,s)}),ps(this,"off",(r,s)=>{this.events.off(r,s)}),ps(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Zs(n,this.name)}get context(){return Li(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:id(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=ot("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ba.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=ot("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ba.created,e=>{const n=ba.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ba.updated,e=>{const n=ba.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ba.deleted,e=>{const n=ba.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(Ef.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{ct.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(ba.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ot("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ste=Object.defineProperty,ite=(t,e,n)=>e in t?ste(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,js=(t,e,n)=>ite(t,typeof e!="symbol"?e+"":e,n);class ote extends $B{constructor(e,n){super(e,n),this.core=e,this.logger=n,js(this,"expirations",new Map),js(this,"events",new Zo.EventEmitter),js(this,"name",aQ),js(this,"version",cQ),js(this,"cached",[]),js(this,"initialized",!1),js(this,"storagePrefix",Fc),js(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),js(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),js(this,"set",(r,s)=>{this.isInitialized();const o=this.formatTarget(r),c={target:o,expiry:s};this.expirations.set(o,c),this.checkExpiry(o,c),this.events.emit(Ro.created,{target:o,expiration:c})}),js(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),js(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),o=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Ro.deleted,{target:s,expiration:o})}}),js(this,"on",(r,s)=>{this.events.on(r,s)}),js(this,"once",(r,s)=>{this.events.once(r,s)}),js(this,"off",(r,s)=>{this.events.off(r,s)}),js(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Zs(n,this.name)}get context(){return Li(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return qX(e);if(typeof e=="number")return QX(e);const{message:n}=ot("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ro.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=ot("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=ot("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;ct.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Ro.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(Ef.pulse,()=>this.checkExpirations()),this.events.on(Ro.created,e=>{const n=Ro.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Ro.expired,e=>{const n=Ro.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Ro.deleted,e=>{const n=Ro.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ot("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ate=Object.defineProperty,cte=(t,e,n)=>e in t?ate(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tr=(t,e,n)=>cte(t,typeof e!="symbol"?e+"":e,n);class lte extends jB{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Tr(this,"name",lQ),Tr(this,"abortController"),Tr(this,"isDevEnv"),Tr(this,"verifyUrlV3",dQ),Tr(this,"storagePrefix",Fc),Tr(this,"version",cO),Tr(this,"publicKey"),Tr(this,"fetchPromise"),Tr(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&ct.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Tr(this,"register",async s=>{if(!Bm()||this.isDevEnv)return;const o=window.location.origin,{id:c,decryptedId:l}=s,p=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${o}&id=${c}&decryptedId=${l}`;try{const m=Bl.getDocument(),y=this.startAbortTimer(ct.ONE_SECOND*5),v=await new Promise((S,_)=>{const A=()=>{window.removeEventListener("message",R),m.body.removeChild(N),_("attestation aborted")};this.abortController.signal.addEventListener("abort",A);const N=m.createElement("iframe");N.src=p,N.style.display="none",N.addEventListener("error",A,{signal:this.abortController.signal});const R=$=>{if($.data&&typeof $.data=="string")try{const G=JSON.parse($.data);if(G.type==="verify_attestation"){if(YS(G.attestation).payload.id!==c)return;clearInterval(y),m.body.removeChild(N),this.abortController.signal.removeEventListener("abort",A),window.removeEventListener("message",R),S(G.attestation===null?"":G.attestation)}}catch(G){this.logger.warn(G)}};m.body.appendChild(N),window.addEventListener("message",R,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",v),v}catch(m){this.logger.warn(m)}return""}),Tr(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:o,hash:c,encryptedId:l}=s;if(o===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(o){if(YS(o).payload.id!==l)return;const m=await this.isValidJwtAttestation(o);if(m){if(!m.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return m}}if(!c)return;const p=this.getVerifyUrl(s?.verifyUrl);return this.fetchAttestation(c,p)}),Tr(this,"fetchAttestation",async(s,o)=>{this.logger.debug(`resolving attestation: ${s} from url: ${o}`);const c=this.startAbortTimer(ct.ONE_SECOND*5),l=await fetch(`${o}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(c),l.status===200?await l.json():void 0}),Tr(this,"getVerifyUrl",s=>{let o=s||my;return hQ.includes(o)||(this.logger.info(`verify url: ${o}, not included in trusted list, assigning default: ${my}`),o=my),o}),Tr(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(ct.FIVE_SECONDS),o=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await o.json()}catch(s){this.logger.warn(s)}}),Tr(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Tr(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Tr(this,"isValidJwtAttestation",async s=>{const o=await this.getPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(l){this.logger.error(l),this.logger.warn("error validating attestation")}const c=await this.fetchAndPersistPublicKey();try{if(c)return this.validateAttestation(s,c)}catch(l){this.logger.error(l),this.logger.warn("error validating attestation")}}),Tr(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Tr(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async o=>{const c=await this.fetchPublicKey();c&&(await this.persistPublicKey(c),o(c))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Tr(this,"validateAttestation",(s,o)=>{const c=XK(s,o.publicKey),l={hasExpired:ct.toMiliseconds(c.exp)<Date.now(),payload:c};if(l.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:l.payload.origin,isScam:l.payload.isScam,isVerified:l.payload.isVerified}}),this.logger=Zs(n,this.name),this.abortController=new AbortController,this.isDevEnv=L5(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Li(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ct.toMiliseconds(e))}}var ute=Object.defineProperty,dte=(t,e,n)=>e in t?ute(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,RI=(t,e,n)=>dte(t,typeof e!="symbol"?e+"":e,n);class hte extends BB{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,RI(this,"context",fQ),RI(this,"registerDeviceToken",async r=>{const{clientId:s,token:o,notificationType:c,enableEncrypted:l=!1}=r,p=`${pQ}/${this.projectId}/clients`;await fetch(p,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:c,token:o,always_raw:l})})}),this.logger=Zs(n,this.context)}}var fte=Object.defineProperty,OI=Object.getOwnPropertySymbols,pte=Object.prototype.hasOwnProperty,mte=Object.prototype.propertyIsEnumerable,N_=(t,e,n)=>e in t?fte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,K0=(t,e)=>{for(var n in e||(e={}))pte.call(e,n)&&N_(t,n,e[n]);if(OI)for(var n of OI(e))mte.call(e,n)&&N_(t,n,e[n]);return t},Vr=(t,e,n)=>N_(t,typeof e!="symbol"?e+"":e,n);class gte extends FB{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Vr(this,"context",gQ),Vr(this,"storagePrefix",Fc),Vr(this,"storageVersion",mQ),Vr(this,"events",new Map),Vr(this,"shouldPersist",!1),Vr(this,"init",async()=>{if(!L5())try{const s={eventId:fA(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:o9(this.core.relayer.protocol,this.core.relayer.version,E_)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Vr(this,"createEvent",s=>{const{event:o="ERROR",type:c="",properties:{topic:l,trace:p}}=s,m=fA(),y=this.core.projectId||"",v=Date.now(),S=K0({eventId:m,timestamp:v,props:{event:o,type:c,properties:{topic:l,trace:p}},bundleId:y,domain:this.getAppDomain()},this.setMethods(m));return this.telemetryEnabled&&(this.events.set(m,S),this.shouldPersist=!0),S}),Vr(this,"getEvent",s=>{const{eventId:o,topic:c}=s;if(o)return this.events.get(o);const l=Array.from(this.events.values()).find(p=>p.props.properties.topic===c);if(l)return K0(K0({},l),this.setMethods(l.eventId))}),Vr(this,"deleteEvent",s=>{const{eventId:o}=s;this.events.delete(o),this.shouldPersist=!0}),Vr(this,"setEventListeners",()=>{this.core.heartbeat.on(Ef.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{ct.fromMiliseconds(Date.now())-ct.fromMiliseconds(s.timestamp)>yQ&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Vr(this,"setMethods",s=>({addTrace:o=>this.addTrace(s,o),setError:o=>this.setError(s,o)})),Vr(this,"addTrace",(s,o)=>{const c=this.events.get(s);c&&(c.props.properties.trace.push(o),this.events.set(s,c),this.shouldPersist=!0)}),Vr(this,"setError",(s,o)=>{const c=this.events.get(s);c&&(c.props.type=o,c.timestamp=Date.now(),this.events.set(s,c),this.shouldPersist=!0)}),Vr(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Vr(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(o=>{this.events.set(o.eventId,K0(K0({},o),this.setMethods(o.eventId)))})}catch(s){this.logger.warn(s)}}),Vr(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[o,c]of this.events)c.props.type&&s.push(c);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const o of s)this.events.delete(o.eventId),this.shouldPersist=!0}catch(o){this.logger.warn(o)}}),Vr(this,"sendEvent",async s=>{const o=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${bQ}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${E_}${o}`,{method:"POST",body:JSON.stringify(s)})}),Vr(this,"getAppDomain",()=>i9().url),this.logger=Zs(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var yte=Object.defineProperty,PI=Object.getOwnPropertySymbols,bte=Object.prototype.hasOwnProperty,wte=Object.prototype.propertyIsEnumerable,R_=(t,e,n)=>e in t?yte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kI=(t,e)=>{for(var n in e||(e={}))bte.call(e,n)&&R_(t,n,e[n]);if(PI)for(var n of PI(e))wte.call(e,n)&&R_(t,n,e[n]);return t},Hn=(t,e,n)=>R_(t,typeof e!="symbol"?e+"":e,n);let vte=class SO extends IB{constructor(e){var n;super(e),Hn(this,"protocol",aO),Hn(this,"version",cO),Hn(this,"name",v_),Hn(this,"relayUrl"),Hn(this,"projectId"),Hn(this,"customStoragePrefix"),Hn(this,"events",new Zo.EventEmitter),Hn(this,"logger"),Hn(this,"heartbeat"),Hn(this,"relayer"),Hn(this,"crypto"),Hn(this,"storage"),Hn(this,"history"),Hn(this,"expirer"),Hn(this,"pairing"),Hn(this,"verify"),Hn(this,"echoClient"),Hn(this,"linkModeSupportedApps"),Hn(this,"eventClient"),Hn(this,"initialized",!1),Hn(this,"logChunkController"),Hn(this,"on",(l,p)=>this.events.on(l,p)),Hn(this,"once",(l,p)=>this.events.once(l,p)),Hn(this,"off",(l,p)=>this.events.off(l,p)),Hn(this,"removeListener",(l,p)=>this.events.removeListener(l,p)),Hn(this,"dispatchEnvelope",({topic:l,message:p,sessionExists:m})=>{if(!l||!p)return;const y={topic:l,message:p,publishedAt:Date.now(),transportType:Jn.link_mode};this.relayer.onLinkMessageEvent(y,{sessionExists:m})});const r=this.getGlobalCore(e?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(l){console.warn("Failed to copy global core",l)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||uO,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Dm({level:typeof e?.logger=="string"&&e.logger?e.logger:Bq.logger,name:v_}),{logger:o,chunkLoggerController:c}=C5({opts:s,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=c,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var l,p;(l=this.logChunkController)!=null&&l.downloadLogsBlobInBrowser&&((p=this.logChunkController)==null||p.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Zs(o,this.name),this.heartbeat=new Aj,this.crypto=new WJ(this,this.logger,e?.keychain),this.history=new rte(this,this.logger),this.expirer=new ote(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new lB(kI(kI({},Fq),e?.storageOptions)),this.relayer=new vee({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new ete(this,this.logger),this.verify=new lte(this,this.logger,this.storage),this.echoClient=new hte(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new gte(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new SO(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(eQ,r),n}get context(){return Li(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(hI,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(hI)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&jq.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const Ete=vte,_O="wc",xO=2,TO="client",Y5=`${_O}@${xO}:${TO}:`,KC={name:TO,logger:"error"},LI="WALLETCONNECT_DEEPLINK_CHOICE",Cte="proposal",DI="Proposal expired",Ste="session",zp=ct.SEVEN_DAYS,_te="engine",Kr={wc_sessionPropose:{req:{ttl:ct.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ct.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:ct.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:ct.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:ct.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ct.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ct.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ct.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ct.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ct.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ct.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ct.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ct.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ct.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ct.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ct.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ct.ONE_DAY,prompt:!1,tag:1114},res:{ttl:ct.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:ct.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:ct.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:ct.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:ct.FIVE_MINUTES,prompt:!1,tag:1119}}},YC={min:ct.FIVE_MINUTES,max:ct.SEVEN_DAYS},Tc={idle:"IDLE",active:"ACTIVE"},xte={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},Tte="request",Ate=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Ite="wc",Nte="auth",Rte="authKeys",Ote="pairingTopics",Pte="requests",R2=`${Ite}@${1.5}:${Nte}:`,ov=`${R2}:PUB_KEY`;var kte=Object.defineProperty,Lte=Object.defineProperties,Dte=Object.getOwnPropertyDescriptors,MI=Object.getOwnPropertySymbols,Mte=Object.prototype.hasOwnProperty,Ute=Object.prototype.propertyIsEnumerable,O_=(t,e,n)=>e in t?kte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qn=(t,e)=>{for(var n in e||(e={}))Mte.call(e,n)&&O_(t,n,e[n]);if(MI)for(var n of MI(e))Ute.call(e,n)&&O_(t,n,e[n]);return t},Ei=(t,e)=>Lte(t,Dte(e)),et=(t,e,n)=>O_(t,typeof e!="symbol"?e+"":e,n);class $te extends HB{constructor(e){super(e),et(this,"name",_te),et(this,"events",new v5),et(this,"initialized",!1),et(this,"requestQueue",{state:Tc.idle,queue:[]}),et(this,"sessionRequestQueue",{state:Tc.idle,queue:[]}),et(this,"emittedSessionRequests",new aW({limit:500})),et(this,"requestQueueDelay",ct.ONE_SECOND),et(this,"expectedPairingMethodMap",new Map),et(this,"recentlyDeletedMap",new Map),et(this,"recentlyDeletedLimit",200),et(this,"relayMessageCache",[]),et(this,"pendingSessions",new Map),et(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Kr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ct.toMiliseconds(this.requestQueueDelay)))}),et(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Ei(Qn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=cY(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:l,scopedProperties:p,relays:m}=r;let y=s,v,S=!1;try{if(y){const L=this.client.core.pairing.pairings.get(y);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),S=L.active}}catch(L){throw this.client.logger.error(`connect() -> pairing.get(${y}) failed`),L}if(!y||!S){const{topic:L,uri:Z}=await this.client.core.pairing.create();y=L,v=Z}if(!y){const{message:L}=ot("NO_MATCHING_KEY",`connect() pairing topic: ${y}`);throw new Error(L)}const _=await this.client.core.crypto.generateKeyPair(),A=Kr.wc_sessionPropose.req.ttl||ct.FIVE_MINUTES,N=kr(A),R=Ei(Qn(Qn({requiredNamespaces:o,optionalNamespaces:c,relays:m??[{protocol:lO}],proposer:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:N,pairingTopic:y},l&&{sessionProperties:l}),p&&{scopedProperties:p}),{id:Ic()}),$=Tn("session_connect",R.id),{reject:G,resolve:F,done:X}=jh(A,DI),j=({id:L})=>{L===R.id&&(this.client.events.off("proposal_expire",j),this.pendingSessions.delete(R.id),this.events.emit($,{error:{message:DI,code:0}}))};return this.client.events.on("proposal_expire",j),this.events.once($,({error:L,session:Z})=>{this.client.events.off("proposal_expire",j),L?G(L):Z&&F(Z)}),await this.sendRequest({topic:y,method:"wc_sessionPropose",params:R,throwOnFailedPublish:!0,clientRpcId:R.id}),await this.setProposal(R.id,R),{uri:v,approval:X}}),et(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),et(this,"approve",async n=>{var r,s,o;const c=this.client.core.eventClient.createEvent({properties:{topic:(r=n?.id)==null?void 0:r.toString(),trace:[wa.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(D){throw c.setError(Lh.no_internet_connection),D}try{await this.isValidProposalId(n?.id)}catch(D){throw this.client.logger.error(`approve() -> proposal.get(${n?.id}) failed`),c.setError(Lh.proposal_not_found),D}try{await this.isValidApprove(n)}catch(D){throw this.client.logger.error("approve() -> isValidApprove() failed"),c.setError(Lh.session_approve_namespace_validation_failure),D}const{id:l,relayProtocol:p,namespaces:m,sessionProperties:y,scopedProperties:v,sessionConfig:S}=n,_=this.client.proposal.get(l);this.client.core.eventClient.deleteEvent({eventId:c.eventId});const{pairingTopic:A,proposer:N,requiredNamespaces:R,optionalNamespaces:$}=_;let G=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:A});G||(G=(o=this.client.core.eventClient)==null?void 0:o.createEvent({type:wa.session_approve_started,properties:{topic:A,trace:[wa.session_approve_started,wa.session_namespaces_validation_success]}}));const F=await this.client.core.crypto.generateKeyPair(),X=N.publicKey,j=await this.client.core.crypto.generateSharedKey(F,X),L=Qn(Qn(Qn({relay:{protocol:p??"irn"},namespaces:m,controller:{publicKey:F,metadata:this.client.metadata},expiry:kr(zp)},y&&{sessionProperties:y}),v&&{scopedProperties:v}),S&&{sessionConfig:S}),Z=Jn.relay;G.addTrace(wa.subscribing_session_topic);try{await this.client.core.relayer.subscribe(j,{transportType:Z})}catch(D){throw G.setError(Lh.subscribe_session_topic_failure),D}G.addTrace(wa.subscribe_session_topic_success);const U=Ei(Qn({},L),{topic:j,requiredNamespaces:R,optionalNamespaces:$,pairingTopic:A,acknowledged:!1,self:L.controller,peer:{publicKey:N.publicKey,metadata:N.metadata},controller:F,transportType:Jn.relay});await this.client.session.set(j,U),G.addTrace(wa.store_session);try{G.addTrace(wa.publishing_session_settle),await this.sendRequest({topic:j,method:"wc_sessionSettle",params:L,throwOnFailedPublish:!0}).catch(D=>{throw G?.setError(Lh.session_settle_publish_failure),D}),G.addTrace(wa.session_settle_publish_success),G.addTrace(wa.publishing_session_approve),await this.sendResult({id:l,topic:A,result:{relay:{protocol:p??"irn"},responderPublicKey:F},throwOnFailedPublish:!0}).catch(D=>{throw G?.setError(Lh.session_approve_publish_failure),D}),G.addTrace(wa.session_approve_publish_success)}catch(D){throw this.client.logger.error(D),this.client.session.delete(j,or("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(j),D}return this.client.core.eventClient.deleteEvent({eventId:G.eventId}),await this.client.core.pairing.updateMetadata({topic:A,metadata:N.metadata}),await this.deleteProposal(l),await this.client.core.pairing.activate({topic:A}),await this.setExpiry(j,kr(zp)),{topic:j,acknowledged:()=>Promise.resolve(this.client.session.get(j))}}),et(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(c){throw this.client.logger.error("reject() -> isValidReject() failed"),c}const{id:r,reason:s}=n;let o;try{o=this.client.proposal.get(r).pairingTopic}catch(c){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),c}o&&await this.sendError({id:r,topic:o,error:s,rpcOpts:Kr.wc_sessionPropose.reject}),await this.deleteProposal(r)}),et(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(v){throw this.client.logger.error("update() -> isValidUpdate() failed"),v}const{topic:r,namespaces:s}=n,{done:o,resolve:c,reject:l}=jh(),p=Ic(),m=Yh().toString(),y=this.client.session.get(r).namespaces;return this.events.once(Tn("session_update",p),({error:v})=>{v?l(v):c()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:p,relayRpcId:m}).catch(v=>{this.client.logger.error(v),this.client.session.update(r,{namespaces:y}),l(v)}),{acknowledged:o}}),et(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(p){throw this.client.logger.error("extend() -> isValidExtend() failed"),p}const{topic:r}=n,s=Ic(),{done:o,resolve:c,reject:l}=jh();return this.events.once(Tn("session_extend",s),({error:p})=>{p?l(p):c()}),await this.setExpiry(r,kr(zp)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(p=>{l(p)}),{acknowledged:o}}),et(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(R){throw this.client.logger.error("request() -> isValidRequest() failed"),R}const{chainId:r,request:s,topic:o,expiry:c=Kr.wc_sessionRequest.req.ttl}=n,l=this.client.session.get(o);l?.transportType===Jn.relay&&await this.confirmOnlineStateOrThrow();const p=Ic(),m=Yh().toString(),{done:y,resolve:v,reject:S}=jh(c,"Request expired. Please try again.");this.events.once(Tn("session_request",p),({error:R,result:$})=>{R?S(R):v($)});const _="wc_sessionRequest",A=this.getAppLinkIfEnabled(l.peer.metadata,l.transportType);if(A)return await this.sendRequest({clientRpcId:p,relayRpcId:m,topic:o,method:_,params:{request:Ei(Qn({},s),{expiryTimestamp:kr(c)}),chainId:r},expiry:c,throwOnFailedPublish:!0,appLink:A}).catch(R=>S(R)),this.client.events.emit("session_request_sent",{topic:o,request:s,chainId:r,id:p}),await y();const N={request:Ei(Qn({},s),{expiryTimestamp:kr(c)}),chainId:r};return await Promise.all([new Promise(async R=>{await this.sendRequest({clientRpcId:p,relayRpcId:m,topic:o,method:_,params:N,expiry:c,throwOnFailedPublish:!0,tvf:this.getTVFParams(p,N)}).catch($=>S($)),this.client.events.emit("session_request_sent",{topic:o,request:s,chainId:r,id:p}),R()}),new Promise(async R=>{var $;if(!(($=l.sessionConfig)!=null&&$.disableDeepLink)){const G=await nW(this.client.core.storage,LI);await JX({id:p,topic:o,wcDeepLink:G})}R()}),y()]).then(R=>R[2])}),et(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:o}=s,c=this.client.session.get(r);c.transportType===Jn.relay&&await this.confirmOnlineStateOrThrow();const l=this.getAppLinkIfEnabled(c.peer.metadata,c.transportType);Nc(s)?await this.sendResult({id:o,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:l}):Po(s)&&await this.sendError({id:o,topic:r,error:s.error,appLink:l}),this.cleanupAfterResponse(n)}),et(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Ic(),o=Yh().toString(),{done:c,resolve:l,reject:p}=jh();this.events.once(Tn("session_ping",s),({error:m})=>{m?p(m):l()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:o}),c()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),et(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:o}=n,c=Yh().toString(),l=Ic();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:o},throwOnFailedPublish:!0,relayRpcId:c,clientRpcId:l})}),et(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:or("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=ot("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),et(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>dY(r,n)))),et(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),et(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const o=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),c=o?Jn.link_mode:Jn.relay;c===Jn.relay&&await this.confirmOnlineStateOrThrow();const{chains:l,statement:p="",uri:m,domain:y,nonce:v,type:S,exp:_,nbf:A,methods:N=[],expiry:R}=n,$=[...n.resources||[]],{topic:G,uri:F}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:c});this.client.logger.info({message:"Generated new pairing",pairing:{topic:G,uri:F}});const X=await this.client.core.crypto.generateKeyPair(),j=sv(X);if(await Promise.all([this.client.auth.authKeys.set(ov,{responseTopic:j,publicKey:X}),this.client.auth.pairingTopics.set(j,{topic:j,pairingTopic:G})]),await this.client.core.relayer.subscribe(j,{transportType:c}),this.client.logger.info(`sending request to new pairing topic: ${G}`),N.length>0){const{namespace:me}=dm(l[0]);let H=bV(me,"request",N);rv($)&&(H=vV(H,$.pop())),$.push(H)}const L=R&&R>Kr.wc_sessionAuthenticate.req.ttl?R:Kr.wc_sessionAuthenticate.req.ttl,Z={authPayload:{type:S??"caip122",chains:l,statement:p,aud:m,domain:y,version:"1",nonce:v,iat:new Date().toISOString(),exp:_,nbf:A,resources:$},requester:{publicKey:X,metadata:this.client.metadata},expiryTimestamp:kr(L)},U={eip155:{chains:l,methods:[...new Set(["personal_sign",...N])],events:["chainChanged","accountsChanged"]}},D={requiredNamespaces:{},optionalNamespaces:U,relays:[{protocol:"irn"}],pairingTopic:G,proposer:{publicKey:X,metadata:this.client.metadata},expiryTimestamp:kr(Kr.wc_sessionPropose.req.ttl),id:Ic()},{done:B,resolve:W,reject:K}=jh(L,"Request expired"),he=Ic(),pe=Tn("session_connect",D.id),V=Tn("session_request",he),P=async({error:me,session:H})=>{this.events.off(V,ne),me?K(me):H&&W({session:H})},ne=async me=>{var H,fe,Ae;if(await this.deletePendingAuthRequest(he,{message:"fulfilled",code:0}),me.error){const Q=or("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return me.error.code===Q.code?void 0:(this.events.off(pe,P),K(me.error.message))}await this.deleteProposal(D.id),this.events.off(pe,P);const{cacaos:ke,responder:$e}=me.result,Ve=[],Fe=[];for(const Q of ke){await _A({cacao:Q,projectId:this.client.core.projectId})||(this.client.logger.error(Q,"Signature verification failed"),K(or("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ue}=Q,Ee=rv(ue.resources),Ye=[o_(ue.iss)],qe=Mv(ue.iss);if(Ee){const it=xA(Ee),Bt=TA(Ee);Ve.push(...it),Ye.push(...Bt)}for(const it of Ye)Fe.push(`${it}:${qe}`)}const wt=await this.client.core.crypto.generateSharedKey(X,$e.publicKey);let De;Ve.length>0&&(De={topic:wt,acknowledged:!0,self:{publicKey:X,metadata:this.client.metadata},peer:$e,controller:$e.publicKey,expiry:kr(zp),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:G,namespaces:YA([...new Set(Ve)],[...new Set(Fe)]),transportType:c},await this.client.core.relayer.subscribe(wt,{transportType:c}),await this.client.session.set(wt,De),G&&await this.client.core.pairing.updateMetadata({topic:G,metadata:$e.metadata}),De=this.client.session.get(wt)),(H=this.client.metadata.redirect)!=null&&H.linkMode&&(fe=$e.metadata.redirect)!=null&&fe.linkMode&&(Ae=$e.metadata.redirect)!=null&&Ae.universal&&r&&(this.client.core.addLinkModeSupportedApp($e.metadata.redirect.universal),this.client.session.update(wt,{transportType:Jn.link_mode})),W({auths:ke,session:De})};this.events.once(pe,P),this.events.once(V,ne);let de;try{if(o){const me=id("wc_sessionAuthenticate",Z,he);this.client.core.history.set(G,me);const H=await this.client.core.crypto.encode("",me,{type:Nb,encoding:td});de=F1(r,G,H)}else await Promise.all([this.sendRequest({topic:G,method:"wc_sessionAuthenticate",params:Z,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:he}),this.sendRequest({topic:G,method:"wc_sessionPropose",params:D,expiry:Kr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:D.id})])}catch(me){throw this.events.off(pe,P),this.events.off(V,ne),me}return await this.setProposal(D.id,D),await this.setAuthRequest(he,{request:Ei(Qn({},Z),{verifyContext:{}}),pairingTopic:G,transportType:c}),{uri:de??F,response:B}}),et(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,o=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Dh.authenticated_session_approve_started]}});try{this.isInitialized()}catch(R){throw o.setError(W0.no_internet_connection),R}const c=this.getPendingAuthRequest(r);if(!c)throw o.setError(W0.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const l=c.transportType||Jn.relay;l===Jn.relay&&await this.confirmOnlineStateOrThrow();const p=c.requester.publicKey,m=await this.client.core.crypto.generateKeyPair(),y=sv(p),v={type:Ml,receiverPublicKey:p,senderPublicKey:m},S=[],_=[];for(const R of s){if(!await _A({cacao:R,projectId:this.client.core.projectId})){o.setError(W0.invalid_cacao);const j=or("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:y,error:j,encodeOpts:v}),new Error(j.message)}o.addTrace(Dh.cacaos_verified);const{p:$}=R,G=rv($.resources),F=[o_($.iss)],X=Mv($.iss);if(G){const j=xA(G),L=TA(G);S.push(...j),F.push(...L)}for(const j of F)_.push(`${j}:${X}`)}const A=await this.client.core.crypto.generateSharedKey(m,p);o.addTrace(Dh.create_authenticated_session_topic);let N;if(S?.length>0){N={topic:A,acknowledged:!0,self:{publicKey:m,metadata:this.client.metadata},peer:{publicKey:p,metadata:c.requester.metadata},controller:p,expiry:kr(zp),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:c.pairingTopic,namespaces:YA([...new Set(S)],[...new Set(_)]),transportType:l},o.addTrace(Dh.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(A,{transportType:l})}catch(R){throw o.setError(W0.subscribe_authenticated_session_topic_failure),R}o.addTrace(Dh.subscribe_authenticated_session_topic_success),await this.client.session.set(A,N),o.addTrace(Dh.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:c.pairingTopic,metadata:c.requester.metadata})}o.addTrace(Dh.publishing_authenticated_session_approve);try{await this.sendResult({topic:y,id:r,result:{cacaos:s,responder:{publicKey:m,metadata:this.client.metadata}},encodeOpts:v,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(c.requester.metadata,l)})}catch(R){throw o.setError(W0.authenticated_session_approve_publish_failure),R}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:c.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:o.eventId}),{session:N}}),et(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,o=this.getPendingAuthRequest(r);if(!o)throw new Error(`Could not find pending auth request with id ${r}`);o.transportType===Jn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),p=sv(c),m={type:Ml,receiverPublicKey:c,senderPublicKey:l};await this.sendError({id:r,topic:p,error:s,encodeOpts:m,rpcOpts:Kr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(o.requester.metadata,o.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),et(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return S9(r,s)}),et(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),et(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(o=>{var c,l;return((c=o.peerMetadata)==null?void 0:c.url)&&((l=o.peerMetadata)==null?void 0:l.url)===n.peer.metadata.url&&o.topic&&o.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(o=>this.client.core.pairing.disconnect({topic:o.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),et(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:o=!1,emitEvent:c=!0,id:l=0}=n,{self:p}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,or("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(p.publicKey)&&await this.client.core.crypto.deleteKeyPair(p.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),o||this.client.core.expirer.del(s),this.client.core.storage.removeItem(LI).catch(m=>this.client.logger.warn(m)),this.getPendingSessionRequests().forEach(m=>{m.topic===s&&this.deletePendingSessionRequest(m.id,or("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Tc.idle),c&&this.client.events.emit("session_delete",{id:l,topic:s})}),et(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n);this.client.core.eventClient.getEvent({topic:s.pairingTopic})?.setError(Lh.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,or("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),et(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(o=>o.id!==n),s&&(this.sessionRequestQueue.state=Tc.idle,this.client.events.emit("session_request_expire",{id:n}))}),et(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),et(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),et(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,kr(Kr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),et(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:o,transportType:c=Jn.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:o,verifyContext:s.verifyContext,transportType:c})}),et(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:o,verifyContext:c}=n,l=o.request.expiryTimestamp||kr(Kr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,l),await this.client.pendingRequest.set(r,{id:r,topic:s,params:o,verifyContext:c})}),et(this,"sendRequest",async n=>{const{topic:r,method:s,params:o,expiry:c,relayRpcId:l,clientRpcId:p,throwOnFailedPublish:m,appLink:y,tvf:v}=n,S=id(s,o,p);let _;const A=!!y;try{const $=A?td:Ta;_=await this.client.core.crypto.encode(r,S,{encoding:$})}catch($){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),$}let N;if(Ate.includes(s)){const $=Oc(JSON.stringify(S)),G=Oc(_);N=await this.client.core.verify.register({id:G,decryptedId:$})}const R=Kr[s].req;if(R.attestation=N,c&&(R.ttl=c),l&&(R.id=l),this.client.core.history.set(r,S),A){const $=F1(y,r,_);await global.Linking.openURL($,this.client.name)}else{const $=Kr[s].req;c&&($.ttl=c),l&&($.id=l),$.tvf=Ei(Qn({},v),{correlationId:S.id}),m?($.internal=Ei(Qn({},$.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,_,$)):this.client.core.relayer.publish(r,_,$).catch(G=>this.client.logger.error(G))}return S.id}),et(this,"sendResult",async n=>{const{id:r,topic:s,result:o,throwOnFailedPublish:c,encodeOpts:l,appLink:p}=n,m=T2(r,o);let y;const v=p&&typeof(global==null?void 0:global.Linking)<"u";try{const A=v?td:Ta;y=await this.client.core.crypto.encode(s,m,Ei(Qn({},l||{}),{encoding:A}))}catch(A){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),A}let S,_;try{S=await this.client.core.history.get(s,r);const A=S.request;try{_=this.getTVFParams(r,A.params,o)}catch(N){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${N?.message}`)}}catch(A){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),A}if(v){const A=F1(p,s,y);await global.Linking.openURL(A,this.client.name)}else{const A=S.request.method,N=Kr[A].res;N.tvf=Ei(Qn({},_),{correlationId:r}),c?(N.internal=Ei(Qn({},N.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,y,N)):this.client.core.relayer.publish(s,y,N).catch(R=>this.client.logger.error(R))}await this.client.core.history.resolve(m)}),et(this,"sendError",async n=>{const{id:r,topic:s,error:o,encodeOpts:c,rpcOpts:l,appLink:p}=n,m=A2(r,o);let y;const v=p&&typeof(global==null?void 0:global.Linking)<"u";try{const _=v?td:Ta;y=await this.client.core.crypto.encode(s,m,Ei(Qn({},c||{}),{encoding:_}))}catch(_){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),_}let S;try{S=await this.client.core.history.get(s,r)}catch(_){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),_}if(v){const _=F1(p,s,y);await global.Linking.openURL(_,this.client.name)}else{const _=S.request.method,A=l||Kr[_].res;this.client.core.relayer.publish(s,y,A)}await this.client.core.history.resolve(m)}),et(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let o=!1;qu(s.expiry)&&(o=!0),this.client.core.crypto.keychain.has(s.topic)||(o=!0),o&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{qu(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),et(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),et(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),et(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Tc.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Tc.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Tc.idle}),et(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:o,transportType:c,encryptedId:l}=n,p=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:p}))switch(p){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:o,encryptedId:l});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:o,encryptedId:l,transportType:c});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:o,encryptedId:l,transportType:c});default:return this.client.logger.info(`Unsupported request method ${p}`)}}),et(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:o}=n,c=(await this.client.core.history.get(r,s.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${c}`)}}),et(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=ot("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),et(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,o=this.expectedPairingMethodMap.get(r);return!o||o.includes(s)?!1:!!(o.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),et(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:o,encryptedId:c}=n,{params:l,id:p}=s;try{const m=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),m?.setError(Ol.proposal_listener_not_found)),this.isValidConnect(Qn({},s.params));const y=l.expiryTimestamp||kr(Kr.wc_sessionPropose.req.ttl),v=Qn({id:p,pairingTopic:r,expiryTimestamp:y,attestation:o,encryptedId:c},l);await this.setProposal(p,v);const S=await this.getVerifyContext({attestationId:o,hash:Oc(JSON.stringify(s)),encryptedId:c,metadata:v.proposer.metadata});m?.addTrace(Ac.emit_session_proposal),this.client.events.emit("session_proposal",{id:p,params:v,verifyContext:S})}catch(m){await this.sendError({id:p,topic:r,error:m,rpcOpts:Kr.wc_sessionPropose.autoReject}),this.client.logger.error(m)}}),et(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:o}=r;if(Nc(r)){const{result:c}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const l=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});const p=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:p});const m=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:m});const y=await this.client.core.crypto.generateSharedKey(p,m);this.pendingSessions.set(o,{sessionTopic:y,pairingTopic:n,proposalId:o,publicKey:p});const v=await this.client.core.relayer.subscribe(y,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:v}),await this.client.core.pairing.activate({topic:n})}else if(Po(r)){await this.deleteProposal(o);const c=Tn("session_connect",o);if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners, 954`);this.events.emit(c,{error:r.error})}}),et(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:o}=r;try{this.isValidSessionSettleRequest(o);const{relay:c,controller:l,expiry:p,namespaces:m,sessionProperties:y,scopedProperties:v,sessionConfig:S}=r.params,_=[...this.pendingSessions.values()].find(R=>R.sessionTopic===n);if(!_)return this.client.logger.error(`Pending session not found for topic ${n}`);const A=this.client.proposal.get(_.proposalId),N=Ei(Qn(Qn(Qn({topic:n,relay:c,expiry:p,namespaces:m,acknowledged:!0,pairingTopic:_.pairingTopic,requiredNamespaces:A.requiredNamespaces,optionalNamespaces:A.optionalNamespaces,controller:l.publicKey,self:{publicKey:_.publicKey,metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},y&&{sessionProperties:y}),v&&{scopedProperties:v}),S&&{sessionConfig:S}),{transportType:Jn.relay});await this.client.session.set(N.topic,N),await this.setExpiry(N.topic,N.expiry),await this.client.core.pairing.updateMetadata({topic:_.pairingTopic,metadata:N.peer.metadata}),this.client.events.emit("session_connect",{session:N}),this.events.emit(Tn("session_connect",_.proposalId),{session:N}),this.pendingSessions.delete(_.proposalId),this.deleteProposal(_.proposalId,!1),this.cleanupDuplicatePairings(N),await this.sendResult({id:r.id,topic:n,result:!0})}catch(c){await this.sendError({id:s,topic:n,error:c}),this.client.logger.error(c)}}),et(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Nc(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Tn("session_approve",s),{})):Po(r)&&(await this.client.session.delete(n,or("USER_DISCONNECTED")),this.events.emit(Tn("session_approve",s),{error:r.error}))}),et(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:o}=r;try{const c=`${n}_session_update`,l=H0.get(c);if(l&&this.isRequestOutOfSync(l,o)){this.client.logger.warn(`Discarding out of sync request - ${o}`),this.sendError({id:o,topic:n,error:or("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Qn({topic:n},s));try{H0.set(c,o),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:o,topic:n,result:!0})}catch(p){throw H0.delete(c),p}this.client.events.emit("session_update",{id:o,topic:n,params:s})}catch(c){await this.sendError({id:o,topic:n,error:c}),this.client.logger.error(c)}}),et(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),et(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,o=Tn("session_update",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);Nc(r)?this.events.emit(Tn("session_update",s),{}):Po(r)&&this.events.emit(Tn("session_update",s),{error:r.error})}),et(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,kr(zp)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),et(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,o=Tn("session_extend",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);Nc(r)?this.events.emit(Tn("session_extend",s),{}):Po(r)&&this.events.emit(Tn("session_extend",s),{error:r.error})}),et(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),et(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,o=Tn("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners 2176`);Nc(r)?this.events.emit(Tn("session_ping",s),{}):Po(r)&&this.events.emit(Tn("session_ping",s),{error:r.error})},500)}),et(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(o=>{this.client.core.relayer.once(qr.publish,async()=>{o(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:or("USER_DISCONNECTED")})]).catch(o=>this.client.logger.error(o))}catch(o){this.client.logger.error(o)}}),et(this,"onSessionRequest",async n=>{var r,s,o;const{topic:c,payload:l,attestation:p,encryptedId:m,transportType:y}=n,{id:v,params:S}=l;try{await this.isValidRequest(Qn({topic:c},S));const _=this.client.session.get(c),A=await this.getVerifyContext({attestationId:p,hash:Oc(JSON.stringify(id("wc_sessionRequest",S,v))),encryptedId:m,metadata:_.peer.metadata,transportType:y}),N={id:v,topic:c,params:S,verifyContext:A};await this.setPendingSessionRequest(N),y===Jn.link_mode&&(r=_.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=_.peer.metadata.redirect)==null?void 0:s.universal),(o=this.client.signConfig)!=null&&o.disableRequestQueue?this.emitSessionRequest(N):(this.addSessionRequestToSessionRequestQueue(N),this.processSessionRequestQueue())}catch(_){await this.sendError({id:v,topic:c,error:_}),this.client.logger.error(_)}}),et(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,o=Tn("session_request",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);Nc(r)?this.events.emit(Tn("session_request",s),{result:r.result}):Po(r)&&this.events.emit(Tn("session_request",s),{error:r.error})}),et(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:o}=r;try{const c=`${n}_session_event_${o.event.name}`,l=H0.get(c);if(l&&this.isRequestOutOfSync(l,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Qn({topic:n},o)),this.client.events.emit("session_event",{id:s,topic:n,params:o}),H0.set(c,s)}catch(c){await this.sendError({id:s,topic:n,error:c}),this.client.logger.error(c)}}),et(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Nc(r)?this.events.emit(Tn("session_request",s),{result:r.result}):Po(r)&&this.events.emit(Tn("session_request",s),{error:r.error})}),et(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:o,attestation:c,encryptedId:l,transportType:p}=n;try{const{requester:m,authPayload:y,expiryTimestamp:v}=o.params,S=await this.getVerifyContext({attestationId:c,hash:Oc(JSON.stringify(o)),encryptedId:l,metadata:m.metadata,transportType:p}),_={requester:m,pairingTopic:s,id:o.id,authPayload:y,verifyContext:S,expiryTimestamp:v};await this.setAuthRequest(o.id,{request:_,pairingTopic:s,transportType:p}),p===Jn.link_mode&&(r=m.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(m.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:o.params,id:o.id,verifyContext:S})}catch(m){this.client.logger.error(m);const y=o.params.requester.publicKey,v=await this.client.core.crypto.generateKeyPair(),S=this.getAppLinkIfEnabled(o.params.requester.metadata,p),_={type:Ml,receiverPublicKey:y,senderPublicKey:v};await this.sendError({id:o.id,topic:s,error:m,encodeOpts:_,rpcOpts:Kr.wc_sessionAuthenticate.autoReject,appLink:S})}}),et(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),et(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Tc.idle,this.processSessionRequestQueue()},ct.toMiliseconds(this.requestQueueDelay))}),et(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(o=>o.topic===n&&o.request.method==="wc_sessionRequest").forEach(o=>{const c=o.request.id,l=Tn("session_request",c);if(this.events.listenerCount(l)===0)throw new Error(`emitting ${l} without any listeners`);this.events.emit(Tn("session_request",o.request.id),{error:r})})}),et(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Tc.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),et(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=Tc.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),et(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:id("wc_sessionPropose",Ei(Qn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),et(this,"isValidConnect",async n=>{if(!_i(n)){const{message:m}=ot("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(m)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:c,scopedProperties:l,relays:p}=n;if(gs(r)||await this.isValidPairingTopic(r),!SY(p)){const{message:m}=ot("MISSING_OR_INVALID",`connect() relays: ${p}`);throw new Error(m)}if(!gs(s)&&Mc(s)!==0){const m="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(m):this.client.logger.warn(m),this.validateNamespaces(s,"requiredNamespaces")}if(!gs(o)&&Mc(o)!==0&&this.validateNamespaces(o,"optionalNamespaces"),gs(c)||this.validateSessionProps(c,"sessionProperties"),!gs(l)){this.validateSessionProps(l,"scopedProperties");const m=Object.keys(s||{}).concat(Object.keys(o||{}));if(!Object.keys(l).every(y=>m.includes(y.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(l)}, required/optional namespaces: ${JSON.stringify(m)}`)}}),et(this,"validateNamespaces",(n,r)=>{const s=CY(n,"connect()",r);if(s)throw new Error(s.message)}),et(this,"isValidApprove",async n=>{if(!_i(n))throw new Error(ot("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:o,sessionProperties:c,scopedProperties:l}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const p=this.client.proposal.get(r),m=ZC(s,"approve()");if(m)throw new Error(m.message);const y=JA(p.requiredNamespaces,s,"approve()");if(y)throw new Error(y.message);if(!Ar(o,!0)){const{message:v}=ot("MISSING_OR_INVALID",`approve() relayProtocol: ${o}`);throw new Error(v)}if(gs(c)||this.validateSessionProps(c,"sessionProperties"),!gs(l)){this.validateSessionProps(l,"scopedProperties");const v=new Set(Object.keys(s));if(!Object.keys(l).every(S=>v.has(S.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(l)}, approved namespaces: ${Array.from(v).join(", ")}`)}}),et(this,"isValidReject",async n=>{if(!_i(n)){const{message:o}=ot("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(o)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!xY(s)){const{message:o}=ot("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(o)}}),et(this,"isValidSessionSettleRequest",n=>{if(!_i(n)){const{message:m}=ot("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(m)}const{relay:r,controller:s,namespaces:o,expiry:c}=n;if(!eO(r)){const{message:m}=ot("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(m)}const l=gY(s,"onSessionSettleRequest()");if(l)throw new Error(l.message);const p=ZC(o,"onSessionSettleRequest()");if(p)throw new Error(p.message);if(qu(c)){const{message:m}=ot("EXPIRED","onSessionSettleRequest()");throw new Error(m)}}),et(this,"isValidUpdate",async n=>{if(!_i(n)){const{message:p}=ot("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(p)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const o=this.client.session.get(r),c=ZC(s,"update()");if(c)throw new Error(c.message);const l=JA(o.requiredNamespaces,s,"update()");if(l)throw new Error(l.message)}),et(this,"isValidExtend",async n=>{if(!_i(n)){const{message:s}=ot("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),et(this,"isValidRequest",async n=>{if(!_i(n)){const{message:p}=ot("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(p)}const{topic:r,request:s,chainId:o,expiry:c}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:l}=this.client.session.get(r);if(!QA(l,o)){const{message:p}=ot("MISSING_OR_INVALID",`request() chainId: ${o}`);throw new Error(p)}if(!TY(s)){const{message:p}=ot("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(p)}if(!NY(l,o,s.method)){const{message:p}=ot("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(p)}if(c&&!kY(c,YC)){const{message:p}=ot("MISSING_OR_INVALID",`request() expiry: ${c}. Expiry must be a number (in seconds) between ${YC.min} and ${YC.max}`);throw new Error(p)}}),et(this,"isValidRespond",async n=>{var r;if(!_i(n)){const{message:c}=ot("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(c)}const{topic:s,response:o}=n;try{await this.isValidSessionTopic(s)}catch(c){throw(r=n?.response)!=null&&r.id&&this.cleanupAfterResponse(n),c}if(!AY(o)){const{message:c}=ot("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(c)}}),et(this,"isValidPing",async n=>{if(!_i(n)){const{message:s}=ot("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),et(this,"isValidEmit",async n=>{if(!_i(n)){const{message:l}=ot("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(l)}const{topic:r,event:s,chainId:o}=n;await this.isValidSessionTopic(r);const{namespaces:c}=this.client.session.get(r);if(!QA(c,o)){const{message:l}=ot("MISSING_OR_INVALID",`emit() chainId: ${o}`);throw new Error(l)}if(!IY(s)){const{message:l}=ot("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}if(!RY(c,o,s.name)){const{message:l}=ot("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}}),et(this,"isValidDisconnect",async n=>{if(!_i(n)){const{message:s}=ot("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),et(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:o,nonce:c}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Ar(s,!1))throw new Error("uri is required parameter");if(!Ar(o,!1))throw new Error("domain is required parameter");if(!Ar(c,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(p=>dm(p).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:l}=dm(r[0]);if(l!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),et(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:o,metadata:c,transportType:l}=n,p={verified:{verifyUrl:c.verifyUrl||my,validation:"UNKNOWN",origin:c.url||""}};try{if(l===Jn.link_mode){const y=this.getAppLinkIfEnabled(c,l);return p.verified.validation=y&&new URL(y).origin===new URL(c.url).origin?"VALID":"INVALID",p}const m=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:o,verifyUrl:c.verifyUrl});m&&(p.verified.origin=m.origin,p.verified.isScam=m.isScam,p.verified.validation=m.origin===new URL(c.url).origin?"VALID":"INVALID")}catch(m){this.client.logger.warn(m)}return this.client.logger.debug(`Verify context: ${JSON.stringify(p)}`),p}),et(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,o)=>{if(s==null){const{message:c}=ot("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[o]}`);throw new Error(c)}})}),et(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),et(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const o=this.recentlyDeletedLimit/2;for(const c of this.recentlyDeletedMap.keys()){if(s++>=o)break;this.recentlyDeletedMap.delete(c)}}}),et(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=ot("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),et(this,"isLinkModeEnabled",(n,r)=>{var s,o,c,l,p,m,y,v,S;return!n||r!==Jn.link_mode?!1:((o=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:o.linkMode)===!0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==void 0&&((m=(p=this.client.metadata)==null?void 0:p.redirect)==null?void 0:m.universal)!==""&&((y=n?.redirect)==null?void 0:y.universal)!==void 0&&((v=n?.redirect)==null?void 0:v.universal)!==""&&((S=n?.redirect)==null?void 0:S.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),et(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n?.redirect)==null?void 0:s.universal:void 0}),et(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=hA(n,"topic")||"",s=decodeURIComponent(hA(n,"wc_ev")||""),o=this.client.session.keys.includes(r);o&&this.client.session.update(r,{transportType:Jn.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:o})}),et(this,"registerLinkModeListeners",async()=>{var n;if(L5()||vd()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),et(this,"getTVFParams",(n,r,s)=>{var o,c,l;if(!((o=r.request)!=null&&o.method))return{};const p={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const m=this.extractTxHashesFromResult(r.request,s);p.txHashes=m,p.contractAddresses=this.isValidContractData(r.request.params)?[(l=(c=r.request.params)==null?void 0:c[0])==null?void 0:l.to]:[]}catch(m){this.client.logger.warn("Error getting TVF params",m)}return p}),et(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=n?.data||((r=n?.[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const o=s.slice(2);return/^[0-9a-fA-F]*$/.test(o)?o.length%2===0:!1}catch{}return!1}),et(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const o=n.method,c=xte[o];if(o==="sui_signTransaction")return[nV(r.transactionBytes)];if(o==="near_signTransaction")return[vA(r)];if(o==="near_signTransactions")return r.map(p=>vA(p));if(o==="xrpl_signTransactionFor"||o==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(o==="polkadot_signTransaction")return[VY({transaction:n.params.transactionPayload,signature:r.signature})];if(o==="algo_signTxn")return Ul(r)?r.map(p=>EA(p)):[EA(r)];if(o==="cosmos_signDirect")return[sV(r)];if(typeof r=="string")return[r];const l=r[c.key];if(Ul(l))return o==="solana_signAllTransactions"?l.map(p=>tV(p)):l;if(typeof l=="string")return[l]}catch(o){this.client.logger.warn("Error extracting tx hashes from result",o)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const o of s)try{await this.onProviderMessageEvent({topic:r,message:o,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${o}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=ot("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(qr.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:o}=e,{publicKey:c}=this.client.auth.authKeys.keys.includes(ov)?this.client.auth.authKeys.get(ov):{publicKey:void 0};try{const l=await this.client.core.crypto.decode(n,r,{receiverPublicKey:c,encoding:o===Jn.link_mode?td:Ta});K5(l)?(this.client.core.history.set(n,l),await this.onRelayEventRequest({topic:n,payload:l,attestation:s,transportType:o,encryptedId:Oc(r)})):I2(l)?(await this.client.core.history.resolve(l),await this.onRelayEventResponse({topic:n,payload:l,transportType:o}),this.client.core.history.delete(n,l.id)):await this.onRelayEventUnknownPayload({topic:n,payload:l,transportType:o}),await this.client.core.relayer.messages.ack(n,r)}catch(l){this.client.logger.error(l)}}registerExpirerEvents(){this.client.core.expirer.on(Ro.expired,async e=>{const{topic:n,id:r}=c9(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,ot("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,ot("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Fh.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Fh.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Ar(e,!1)){const{message:n}=ot("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=ot("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(qu(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=ot("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Ar(e,!1)){const{message:n}=ot("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=ot("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(qu(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=ot("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=ot("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Ar(e,!1)){const{message:n}=ot("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=ot("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!_Y(e)){const{message:n}=ot("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=ot("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(qu(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=ot("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class jte extends Sf{constructor(e,n){super(e,n,Cte,Y5),this.core=e,this.logger=n}}let Bte=class extends Sf{constructor(e,n){super(e,n,Ste,Y5),this.core=e,this.logger=n}};class Fte extends Sf{constructor(e,n){super(e,n,Tte,Y5,r=>r.id),this.core=e,this.logger=n}}class Zte extends Sf{constructor(e,n){super(e,n,Rte,R2,()=>ov),this.core=e,this.logger=n}}class zte extends Sf{constructor(e,n){super(e,n,Ote,R2),this.core=e,this.logger=n}}class Gte extends Sf{constructor(e,n){super(e,n,Pte,R2,r=>r.id),this.core=e,this.logger=n}}var Hte=Object.defineProperty,Xte=(t,e,n)=>e in t?Hte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qC=(t,e,n)=>Xte(t,typeof e!="symbol"?e+"":e,n);class Wte{constructor(e,n){this.core=e,this.logger=n,qC(this,"authKeys"),qC(this,"pairingTopics"),qC(this,"requests"),this.authKeys=new Zte(this.core,this.logger),this.pairingTopics=new zte(this.core,this.logger),this.requests=new Gte(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var Vte=Object.defineProperty,Kte=(t,e,n)=>e in t?Vte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rn=(t,e,n)=>Kte(t,typeof e!="symbol"?e+"":e,n);let Yte=class AO extends GB{constructor(e){super(e),rn(this,"protocol",_O),rn(this,"version",xO),rn(this,"name",KC.name),rn(this,"metadata"),rn(this,"core"),rn(this,"logger"),rn(this,"events",new Zo.EventEmitter),rn(this,"engine"),rn(this,"session"),rn(this,"proposal"),rn(this,"pendingRequest"),rn(this,"auth"),rn(this,"signConfig"),rn(this,"on",(r,s)=>this.events.on(r,s)),rn(this,"once",(r,s)=>this.events.once(r,s)),rn(this,"off",(r,s)=>this.events.off(r,s)),rn(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),rn(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),rn(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),rn(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(o){throw this.logger.error(o.message),o}}),rn(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),rn(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=e?.name||KC.name,this.metadata=WX(e?.metadata),this.signConfig=e?.signConfig;const n=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Cb(Dm({level:e?.logger||KC.logger}));this.core=e?.core||new Ete(e),this.logger=Zs(n,this.name),this.session=new Bte(this.core,this.logger),this.proposal=new jte(this.core,this.logger),this.pendingRequest=new Fte(this.core,this.logger),this.engine=new $te(this),this.auth=new Wte(this.core,this.logger)}static async init(e){const n=new AO(e);return await n.initialize(),n}get context(){return Li(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var z1={exports:{}},UI;function qte(){return UI||(UI=1,function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Lo<"u"&&Lo,r=function(){function o(){this.fetch=!1,this.DOMException=n.DOMException}return o.prototype=n,new o}();(function(o){(function(c){var l=typeof o<"u"&&o||typeof self<"u"&&self||typeof Lo<"u"&&Lo||{},p={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function m(V){return V&&DataView.prototype.isPrototypeOf(V)}if(p.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=ArrayBuffer.isView||function(V){return V&&y.indexOf(Object.prototype.toString.call(V))>-1};function S(V){if(typeof V!="string"&&(V=String(V)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(V)||V==="")throw new TypeError('Invalid character in header field name: "'+V+'"');return V.toLowerCase()}function _(V){return typeof V!="string"&&(V=String(V)),V}function A(V){var P={next:function(){var ne=V.shift();return{done:ne===void 0,value:ne}}};return p.iterable&&(P[Symbol.iterator]=function(){return P}),P}function N(V){this.map={},V instanceof N?V.forEach(function(P,ne){this.append(ne,P)},this):Array.isArray(V)?V.forEach(function(P){if(P.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+P.length);this.append(P[0],P[1])},this):V&&Object.getOwnPropertyNames(V).forEach(function(P){this.append(P,V[P])},this)}N.prototype.append=function(V,P){V=S(V),P=_(P);var ne=this.map[V];this.map[V]=ne?ne+", "+P:P},N.prototype.delete=function(V){delete this.map[S(V)]},N.prototype.get=function(V){return V=S(V),this.has(V)?this.map[V]:null},N.prototype.has=function(V){return this.map.hasOwnProperty(S(V))},N.prototype.set=function(V,P){this.map[S(V)]=_(P)},N.prototype.forEach=function(V,P){for(var ne in this.map)this.map.hasOwnProperty(ne)&&V.call(P,this.map[ne],ne,this)},N.prototype.keys=function(){var V=[];return this.forEach(function(P,ne){V.push(ne)}),A(V)},N.prototype.values=function(){var V=[];return this.forEach(function(P){V.push(P)}),A(V)},N.prototype.entries=function(){var V=[];return this.forEach(function(P,ne){V.push([ne,P])}),A(V)},p.iterable&&(N.prototype[Symbol.iterator]=N.prototype.entries);function R(V){if(!V._noBody){if(V.bodyUsed)return Promise.reject(new TypeError("Already read"));V.bodyUsed=!0}}function $(V){return new Promise(function(P,ne){V.onload=function(){P(V.result)},V.onerror=function(){ne(V.error)}})}function G(V){var P=new FileReader,ne=$(P);return P.readAsArrayBuffer(V),ne}function F(V){var P=new FileReader,ne=$(P),de=/charset=([A-Za-z0-9_-]+)/.exec(V.type),me=de?de[1]:"utf-8";return P.readAsText(V,me),ne}function X(V){for(var P=new Uint8Array(V),ne=new Array(P.length),de=0;de<P.length;de++)ne[de]=String.fromCharCode(P[de]);return ne.join("")}function j(V){if(V.slice)return V.slice(0);var P=new Uint8Array(V.byteLength);return P.set(new Uint8Array(V)),P.buffer}function L(){return this.bodyUsed=!1,this._initBody=function(V){this.bodyUsed=this.bodyUsed,this._bodyInit=V,V?typeof V=="string"?this._bodyText=V:p.blob&&Blob.prototype.isPrototypeOf(V)?this._bodyBlob=V:p.formData&&FormData.prototype.isPrototypeOf(V)?this._bodyFormData=V:p.searchParams&&URLSearchParams.prototype.isPrototypeOf(V)?this._bodyText=V.toString():p.arrayBuffer&&p.blob&&m(V)?(this._bodyArrayBuffer=j(V.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):p.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(V)||v(V))?this._bodyArrayBuffer=j(V):this._bodyText=V=Object.prototype.toString.call(V):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof V=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p.searchParams&&URLSearchParams.prototype.isPrototypeOf(V)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p.blob&&(this.blob=function(){var V=R(this);if(V)return V;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var V=R(this);return V||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(p.blob)return this.blob().then(G);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var V=R(this);if(V)return V;if(this._bodyBlob)return F(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(X(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(B)}),this.json=function(){return this.text().then(JSON.parse)},this}var Z=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function U(V){var P=V.toUpperCase();return Z.indexOf(P)>-1?P:V}function D(V,P){if(!(this instanceof D))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');P=P||{};var ne=P.body;if(V instanceof D){if(V.bodyUsed)throw new TypeError("Already read");this.url=V.url,this.credentials=V.credentials,P.headers||(this.headers=new N(V.headers)),this.method=V.method,this.mode=V.mode,this.signal=V.signal,!ne&&V._bodyInit!=null&&(ne=V._bodyInit,V.bodyUsed=!0)}else this.url=String(V);if(this.credentials=P.credentials||this.credentials||"same-origin",(P.headers||!this.headers)&&(this.headers=new N(P.headers)),this.method=U(P.method||this.method||"GET"),this.mode=P.mode||this.mode||null,this.signal=P.signal||this.signal||function(){if("AbortController"in l){var H=new AbortController;return H.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ne)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(ne),(this.method==="GET"||this.method==="HEAD")&&(P.cache==="no-store"||P.cache==="no-cache")){var de=/([?&])_=[^&]*/;if(de.test(this.url))this.url=this.url.replace(de,"$1_="+new Date().getTime());else{var me=/\?/;this.url+=(me.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}D.prototype.clone=function(){return new D(this,{body:this._bodyInit})};function B(V){var P=new FormData;return V.trim().split("&").forEach(function(ne){if(ne){var de=ne.split("="),me=de.shift().replace(/\+/g," "),H=de.join("=").replace(/\+/g," ");P.append(decodeURIComponent(me),decodeURIComponent(H))}}),P}function W(V){var P=new N,ne=V.replace(/\r?\n[\t ]+/g," ");return ne.split("\r").map(function(de){return de.indexOf(`
`)===0?de.substr(1,de.length):de}).forEach(function(de){var me=de.split(":"),H=me.shift().trim();if(H){var fe=me.join(":").trim();try{P.append(H,fe)}catch(Ae){console.warn("Response "+Ae.message)}}}),P}L.call(D.prototype);function K(V,P){if(!(this instanceof K))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(P||(P={}),this.type="default",this.status=P.status===void 0?200:P.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=P.statusText===void 0?"":""+P.statusText,this.headers=new N(P.headers),this.url=P.url||"",this._initBody(V)}L.call(K.prototype),K.prototype.clone=function(){return new K(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new N(this.headers),url:this.url})},K.error=function(){var V=new K(null,{status:200,statusText:""});return V.ok=!1,V.status=0,V.type="error",V};var he=[301,302,303,307,308];K.redirect=function(V,P){if(he.indexOf(P)===-1)throw new RangeError("Invalid status code");return new K(null,{status:P,headers:{location:V}})},c.DOMException=l.DOMException;try{new c.DOMException}catch{c.DOMException=function(P,ne){this.message=P,this.name=ne;var de=Error(P);this.stack=de.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function pe(V,P){return new Promise(function(ne,de){var me=new D(V,P);if(me.signal&&me.signal.aborted)return de(new c.DOMException("Aborted","AbortError"));var H=new XMLHttpRequest;function fe(){H.abort()}H.onload=function(){var $e={statusText:H.statusText,headers:W(H.getAllResponseHeaders()||"")};me.url.indexOf("file://")===0&&(H.status<200||H.status>599)?$e.status=200:$e.status=H.status,$e.url="responseURL"in H?H.responseURL:$e.headers.get("X-Request-URL");var Ve="response"in H?H.response:H.responseText;setTimeout(function(){ne(new K(Ve,$e))},0)},H.onerror=function(){setTimeout(function(){de(new TypeError("Network request failed"))},0)},H.ontimeout=function(){setTimeout(function(){de(new TypeError("Network request timed out"))},0)},H.onabort=function(){setTimeout(function(){de(new c.DOMException("Aborted","AbortError"))},0)};function Ae($e){try{return $e===""&&l.location.href?l.location.href:$e}catch{return $e}}if(H.open(me.method,Ae(me.url),!0),me.credentials==="include"?H.withCredentials=!0:me.credentials==="omit"&&(H.withCredentials=!1),"responseType"in H&&(p.blob?H.responseType="blob":p.arrayBuffer&&(H.responseType="arraybuffer")),P&&typeof P.headers=="object"&&!(P.headers instanceof N||l.Headers&&P.headers instanceof l.Headers)){var ke=[];Object.getOwnPropertyNames(P.headers).forEach(function($e){ke.push(S($e)),H.setRequestHeader($e,_(P.headers[$e]))}),me.headers.forEach(function($e,Ve){ke.indexOf(Ve)===-1&&H.setRequestHeader(Ve,$e)})}else me.headers.forEach(function($e,Ve){H.setRequestHeader(Ve,$e)});me.signal&&(me.signal.addEventListener("abort",fe),H.onreadystatechange=function(){H.readyState===4&&me.signal.removeEventListener("abort",fe)}),H.send(typeof me._bodyInit>"u"?null:me._bodyInit)})}return pe.polyfill=!0,l.fetch||(l.fetch=pe,l.Headers=N,l.Request=D,l.Response=K),c.Headers=N,c.Request=D,c.Response=K,c.fetch=pe,Object.defineProperty(c,"__esModule",{value:!0}),c})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e}(z1,z1.exports)),z1.exports}var Qte=qte();const $I=Rm(Qte);var Jte=Object.defineProperty,ene=Object.defineProperties,tne=Object.getOwnPropertyDescriptors,jI=Object.getOwnPropertySymbols,nne=Object.prototype.hasOwnProperty,rne=Object.prototype.propertyIsEnumerable,BI=(t,e,n)=>e in t?Jte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,FI=(t,e)=>{for(var n in e||(e={}))nne.call(e,n)&&BI(t,n,e[n]);if(jI)for(var n of jI(e))rne.call(e,n)&&BI(t,n,e[n]);return t},ZI=(t,e)=>ene(t,tne(e));const sne={Accept:"application/json","Content-Type":"application/json"},ine="POST",zI={headers:sne,method:ine},GI=10;let Pa=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Zo.EventEmitter,this.isAvailable=!1,this.registering=!1,!oI(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=jl(e),r=await(await $I(this.url,ZI(FI({},zI),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!oI(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),s(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=jl({id:1,jsonrpc:"2.0",method:"test",params:[]});await $I(e,ZI(FI({},zI),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?lf(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),o=A2(e,s);this.events.emit("payload",o)}parseError(e,n=this.url){return rO(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>GI&&this.events.setMaxListeners(GI)}};const HI="error",one="wss://relay.walletconnect.org",ane="wc",cne="universal_provider",G1=`${ane}@2:${cne}:`,IO="https://rpc.walletconnect.org/v1/",rm="generic",lne=`${IO}bundler`,Go={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function q5(t){return t==null||typeof t!="object"&&typeof t!="function"}function NO(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function RO(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const une="[object RegExp]",OO="[object String]",PO="[object Number]",kO="[object Boolean]",LO="[object Arguments]",dne="[object Symbol]",hne="[object Date]",fne="[object Map]",pne="[object Set]",mne="[object Array]",gne="[object ArrayBuffer]",yne="[object Object]",bne="[object DataView]",wne="[object Uint8Array]",vne="[object Uint8ClampedArray]",Ene="[object Uint16Array]",Cne="[object Uint32Array]",Sne="[object Int8Array]",_ne="[object Int16Array]",xne="[object Int32Array]",Tne="[object Float32Array]",Ane="[object Float64Array]";function Q5(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ine(t,e){return am(t,void 0,t,new Map,e)}function am(t,e,n,r=new Map,s=void 0){const o=s?.(t,e,n,r);if(o!=null)return o;if(q5(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const c=new Array(t.length);r.set(t,c);for(let l=0;l<t.length;l++)c[l]=am(t[l],l,n,r,s);return Object.hasOwn(t,"index")&&(c.index=t.index),Object.hasOwn(t,"input")&&(c.input=t.input),c}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const c=new RegExp(t.source,t.flags);return c.lastIndex=t.lastIndex,c}if(t instanceof Map){const c=new Map;r.set(t,c);for(const[l,p]of t)c.set(l,am(p,l,n,r,s));return c}if(t instanceof Set){const c=new Set;r.set(t,c);for(const l of t)c.add(am(l,void 0,n,r,s));return c}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(Q5(t)){const c=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,c);for(let l=0;l<t.length;l++)c[l]=am(t[l],l,n,r,s);return c}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const c=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,c),Zh(c,t,n,r,s),c}if(typeof File<"u"&&t instanceof File){const c=new File([t],t.name,{type:t.type});return r.set(t,c),Zh(c,t,n,r,s),c}if(t instanceof Blob){const c=new Blob([t],{type:t.type});return r.set(t,c),Zh(c,t,n,r,s),c}if(t instanceof Error){const c=new t.constructor;return r.set(t,c),c.message=t.message,c.name=t.name,c.stack=t.stack,c.cause=t.cause,Zh(c,t,n,r,s),c}if(typeof t=="object"&&Nne(t)){const c=Object.create(Object.getPrototypeOf(t));return r.set(t,c),Zh(c,t,n,r,s),c}return t}function Zh(t,e,n=t,r,s){const o=[...Object.keys(e),...NO(e)];for(let c=0;c<o.length;c++){const l=o[c],p=Object.getOwnPropertyDescriptor(t,l);(p==null||p.writable)&&(t[l]=am(e[l],l,n,r,s))}}function Nne(t){switch(RO(t)){case LO:case mne:case gne:case bne:case kO:case hne:case Tne:case Ane:case Sne:case _ne:case xne:case fne:case PO:case yne:case une:case pne:case OO:case dne:case wne:case vne:case Ene:case Cne:return!0;default:return!1}}function Rne(t,e){return Ine(t,(n,r,s,o)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case PO:case OO:case kO:{const c=new t.constructor(t?.valueOf());return Zh(c,t),c}case LO:{const c={};return Zh(c,t),c.length=t.length,c[Symbol.iterator]=t[Symbol.iterator],c}default:return}})}function XI(t){return Rne(t)}function WI(t){return t!==null&&typeof t=="object"&&RO(t)==="[object Arguments]"}function VI(t){return typeof t=="object"&&t!==null}function One(){}function Pne(t){return Q5(t)}function kne(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Lne(t){if(q5(t))return t;if(Array.isArray(t)||Q5(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function Dne(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let o=0;o<n.length;o++){const c=n[o];s=P_(s,c,r,new Map)}return s}function P_(t,e,n,r){if(q5(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return Lne(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let o=0;o<e.length;o++)e[o]=e[o]??void 0}const s=[...Object.keys(e),...NO(e)];for(let o=0;o<s.length;o++){const c=s[o];let l=e[c],p=t[c];if(WI(l)&&(l={...l}),WI(p)&&(p={...p}),typeof Buffer<"u"&&Buffer.isBuffer(l)&&(l=XI(l)),Array.isArray(l))if(typeof p=="object"&&p!=null){const y=[],v=Reflect.ownKeys(p);for(let S=0;S<v.length;S++){const _=v[S];y[_]=p[_]}p=y}else p=[];const m=n(p,l,c,t,e,r);m!=null?t[c]=m:Array.isArray(l)||VI(p)&&VI(l)?t[c]=P_(p,l,n,r):p==null&&kne(l)?t[c]=P_({},l,n,r):p==null&&Pne(l)?t[c]=XI(l):(p===void 0||l!==void 0)&&(t[c]=l)}return t}function Mne(t,...e){return Dne(t,...e,One)}var Une=Object.defineProperty,$ne=Object.defineProperties,jne=Object.getOwnPropertyDescriptors,KI=Object.getOwnPropertySymbols,Bne=Object.prototype.hasOwnProperty,Fne=Object.prototype.propertyIsEnumerable,YI=(t,e,n)=>e in t?Une(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H1=(t,e)=>{for(var n in e||(e={}))Bne.call(e,n)&&YI(t,n,e[n]);if(KI)for(var n of KI(e))Fne.call(e,n)&&YI(t,n,e[n]);return t},Zne=(t,e)=>$ne(t,jne(e));function no(t,e,n){var r;const s=dm(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${IO}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function _f(t){return t.includes(":")?t.split(":")[1]:t}function DO(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function zne(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const o=e.namespaces[s].accounts;r.push(...o)}),r}function qI(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>{var r,s;return((r=n?.chains)==null?void 0:r.length)&&((s=n?.chains)==null?void 0:s.length)>0}))}function X1(t={},e={}){const n=qI(QI(t)),r=qI(QI(e));return Mne(n,r)}function QI(t){var e,n,r,s,o;const c={};if(!Mc(t))return c;for(const[l,p]of Object.entries(t)){const m=x2(l)?[l]:p.chains,y=p.methods||[],v=p.events||[],S=p.rpcMap||{},_=om(l);c[_]=Zne(H1(H1({},c[_]),p),{chains:Dc(m,(e=c[_])==null?void 0:e.chains),methods:Dc(y,(n=c[_])==null?void 0:n.methods),events:Dc(v,(r=c[_])==null?void 0:r.events)}),(Mc(S)||Mc(((s=c[_])==null?void 0:s.rpcMap)||{}))&&(c[_].rpcMap=H1(H1({},S),(o=c[_])==null?void 0:o.rpcMap))}return c}function JI(t){return t.includes(":")?t.split(":")[2]:t}function eN(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],o=r.events||[],c=r.accounts||[],l=x2(n)?[n]:r.chains?r.chains:DO(r.accounts);e[n]={chains:l,methods:s,events:o,accounts:c}}return e}function QC(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const MO={},yn=t=>MO[t],JC=(t,e)=>{MO[t]=e};var Gne=Object.defineProperty,tN=Object.getOwnPropertySymbols,Hne=Object.prototype.hasOwnProperty,Xne=Object.prototype.propertyIsEnumerable,nN=(t,e,n)=>e in t?Gne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rN=(t,e)=>{for(var n in e||(e={}))Hne.call(e,n)&&nN(t,n,e[n]);if(tN)for(var n of tN(e))Xne.call(e,n)&&nN(t,n,e[n]);return t};const sN="eip155",Wne=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],Vne=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,eS=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,iN=t=>Object.keys(t).filter(e=>Wne.includes(e)).reduce((e,n)=>(e[n]=t[n],e),{}),Kne=(t,e,n)=>{const{sessionProperties:r={},scopedProperties:s={}}=t,o={};if(!Mc(s)&&!Mc(r))return;const c=iN(r);for(const l of n){const p=Vne(l);if(!p)continue;o[eS(p)]=c;const m=s?.[`${sN}:${p}`];if(m){const y=m?.[`${sN}:${p}:${e}`];o[eS(p)]=rN(rN({},o[eS(p)]),iN(y||m))}}for(const[l,p]of Object.entries(o))Object.keys(p).length===0&&delete o[l];return Object.keys(o).length>0?o:void 0};var Yne=Object.defineProperty,qne=(t,e,n)=>e in t?Yne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gp=(t,e,n)=>qne(t,typeof e!="symbol"?e+"":e,n);class Qne{constructor(e){Gp(this,"name","polkadot"),Gp(this,"client"),Gp(this,"httpProviders"),Gp(this,"events"),Gp(this,"namespace"),Gp(this,"chainId"),this.namespace=e.namespace,this.events=yn("events"),this.client=yn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Go.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=_f(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||no(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new zo(new Pa(r,yn("disableProviderPing")))}}var Jne=Object.defineProperty,ere=Object.defineProperties,tre=Object.getOwnPropertyDescriptors,oN=Object.getOwnPropertySymbols,nre=Object.prototype.hasOwnProperty,rre=Object.prototype.propertyIsEnumerable,k_=(t,e,n)=>e in t?Jne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aN=(t,e)=>{for(var n in e||(e={}))nre.call(e,n)&&k_(t,n,e[n]);if(oN)for(var n of oN(e))rre.call(e,n)&&k_(t,n,e[n]);return t},cN=(t,e)=>ere(t,tre(e)),Hp=(t,e,n)=>k_(t,typeof e!="symbol"?e+"":e,n);class sre{constructor(e){Hp(this,"name","eip155"),Hp(this,"client"),Hp(this,"chainId"),Hp(this,"namespace"),Hp(this,"httpProviders"),Hp(this,"events"),this.namespace=e.namespace,this.events=yn("events"),this.client=yn("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Go.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||no(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new zo(new Pa(r,yn("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(_f(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const o=parseInt(s,16);if(this.isChainApproved(o))this.setDefaultChain(`${o}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${o}`);else throw new Error(`Failed to switch to chain 'eip155:${o}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,o,c;const l=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],p=((o=(s=e.request)==null?void 0:s.params)==null?void 0:o[1])||[];if(!l)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const m=this.client.session.get(e.topic),y=((c=m?.sessionProperties)==null?void 0:c.capabilities)||{},v=`${l}${p.join(",")}`,S=y?.[v];if(S)return S;let _;try{_=Kne(m,l,p)}catch(N){console.warn("Failed to extract capabilities from session",N)}if(_)return _;const A=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:cN(aN({},m.sessionProperties||{}),{capabilities:cN(aN({},y||{}),{[v]:A})})})}catch(N){console.warn("Failed to update session with capabilities",N)}return A}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),o=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(o){const l=this.getBundlerUrl(e.chainId,o);try{return await this.getUserOperationReceipt(l,e)}catch(p){console.warn("Failed to fetch call status from bundler",p,l)}}const c=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(c)try{return await this.getUserOperationReceipt(c,e)}catch(l){console.warn("Failed to fetch call status from custom bundler",l,c)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),o=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(id("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!o.ok)throw new Error(`Failed to fetch user operation receipt - ${o.status}`);return await o.json()}getBundlerUrl(e,n){return`${lne}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var ire=Object.defineProperty,ore=(t,e,n)=>e in t?ire(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xp=(t,e,n)=>ore(t,typeof e!="symbol"?e+"":e,n);class are{constructor(e){Xp(this,"name","solana"),Xp(this,"client"),Xp(this,"httpProviders"),Xp(this,"events"),Xp(this,"namespace"),Xp(this,"chainId"),this.namespace=e.namespace,this.events=yn("events"),this.client=yn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Go.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=_f(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||no(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new zo(new Pa(r,yn("disableProviderPing")))}}var cre=Object.defineProperty,lre=(t,e,n)=>e in t?cre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wp=(t,e,n)=>lre(t,typeof e!="symbol"?e+"":e,n);class ure{constructor(e){Wp(this,"name","cosmos"),Wp(this,"client"),Wp(this,"httpProviders"),Wp(this,"events"),Wp(this,"namespace"),Wp(this,"chainId"),this.namespace=e.namespace,this.events=yn("events"),this.client=yn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Go.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=_f(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||no(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new zo(new Pa(r,yn("disableProviderPing")))}}var dre=Object.defineProperty,hre=(t,e,n)=>e in t?dre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vp=(t,e,n)=>hre(t,typeof e!="symbol"?e+"":e,n);class fre{constructor(e){Vp(this,"name","algorand"),Vp(this,"client"),Vp(this,"httpProviders"),Vp(this,"events"),Vp(this,"namespace"),Vp(this,"chainId"),this.namespace=e.namespace,this.events=yn("events"),this.client=yn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||no(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Go.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||no(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new zo(new Pa(r,yn("disableProviderPing")))}}var pre=Object.defineProperty,mre=(t,e,n)=>e in t?pre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kp=(t,e,n)=>mre(t,typeof e!="symbol"?e+"":e,n);class gre{constructor(e){Kp(this,"name","cip34"),Kp(this,"client"),Kp(this,"httpProviders"),Kp(this,"events"),Kp(this,"namespace"),Kp(this,"chainId"),this.namespace=e.namespace,this.events=yn("events"),this.client=yn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Go.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=_f(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new zo(new Pa(r,yn("disableProviderPing")))}}var yre=Object.defineProperty,bre=(t,e,n)=>e in t?yre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yp=(t,e,n)=>bre(t,typeof e!="symbol"?e+"":e,n);class wre{constructor(e){Yp(this,"name","elrond"),Yp(this,"client"),Yp(this,"httpProviders"),Yp(this,"events"),Yp(this,"namespace"),Yp(this,"chainId"),this.namespace=e.namespace,this.events=yn("events"),this.client=yn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Go.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=_f(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||no(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new zo(new Pa(r,yn("disableProviderPing")))}}var vre=Object.defineProperty,Ere=(t,e,n)=>e in t?vre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qp=(t,e,n)=>Ere(t,typeof e!="symbol"?e+"":e,n);class Cre{constructor(e){qp(this,"name","multiversx"),qp(this,"client"),qp(this,"httpProviders"),qp(this,"events"),qp(this,"namespace"),qp(this,"chainId"),this.namespace=e.namespace,this.events=yn("events"),this.client=yn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Go.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=_f(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||no(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new zo(new Pa(r,yn("disableProviderPing")))}}var Sre=Object.defineProperty,_re=(t,e,n)=>e in t?Sre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qp=(t,e,n)=>_re(t,typeof e!="symbol"?e+"":e,n);class xre{constructor(e){Qp(this,"name","near"),Qp(this,"client"),Qp(this,"httpProviders"),Qp(this,"events"),Qp(this,"namespace"),Qp(this,"chainId"),this.namespace=e.namespace,this.events=yn("events"),this.client=yn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||no(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Go.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||no(e,this.namespace);return typeof r>"u"?void 0:new zo(new Pa(r,yn("disableProviderPing")))}}var Tre=Object.defineProperty,Are=(t,e,n)=>e in t?Tre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jp=(t,e,n)=>Are(t,typeof e!="symbol"?e+"":e,n);class Ire{constructor(e){Jp(this,"name","tezos"),Jp(this,"client"),Jp(this,"httpProviders"),Jp(this,"events"),Jp(this,"namespace"),Jp(this,"chainId"),this.namespace=e.namespace,this.events=yn("events"),this.client=yn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||no(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Go.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||no(e,this.namespace);return typeof r>"u"?void 0:new zo(new Pa(r))}}var Nre=Object.defineProperty,Rre=(t,e,n)=>e in t?Nre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,em=(t,e,n)=>Rre(t,typeof e!="symbol"?e+"":e,n);class Ore{constructor(e){em(this,"name",rm),em(this,"client"),em(this,"httpProviders"),em(this,"events"),em(this,"namespace"),em(this,"chainId"),this.namespace=e.namespace,this.events=yn("events"),this.client=yn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Go.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const o=dm(s);r[`${o.namespace}:${o.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||no(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new zo(new Pa(r,yn("disableProviderPing")))}}var Pre=Object.defineProperty,kre=Object.defineProperties,Lre=Object.getOwnPropertyDescriptors,lN=Object.getOwnPropertySymbols,Dre=Object.prototype.hasOwnProperty,Mre=Object.prototype.propertyIsEnumerable,L_=(t,e,n)=>e in t?Pre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,W1=(t,e)=>{for(var n in e||(e={}))Dre.call(e,n)&&L_(t,n,e[n]);if(lN)for(var n of lN(e))Mre.call(e,n)&&L_(t,n,e[n]);return t},tS=(t,e)=>kre(t,Lre(e)),Io=(t,e,n)=>L_(t,typeof e!="symbol"?e+"":e,n);class J5{constructor(e){Io(this,"client"),Io(this,"namespaces"),Io(this,"optionalNamespaces"),Io(this,"sessionProperties"),Io(this,"scopedProperties"),Io(this,"events",new v5),Io(this,"rpcProviders",{}),Io(this,"session"),Io(this,"providerOpts"),Io(this,"logger"),Io(this,"uri"),Io(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Cb(Dm({level:e?.logger||HI})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const n=new J5(e);return await n.initialize(),n}async request(e,n,r){const[s,o]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:W1({},e),chainId:`${s}:${o}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const o=new Date().getTime();this.request(e,r,s).then(c=>n(null,T2(o,c))).catch(c=>n(c,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:or("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const o=await s();if(this.session=o.session,this.session){const c=eN(this.session.namespaces);this.namespaces=X1(this.namespaces,c),await this.persist("namespaces",this.namespaces),this.onConnect()}return o}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const o=eN(s.namespaces);return this.namespaces=X1(this.namespaces,o),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),o=this.getProvider(r);o.name===rm?o.setDefaultChain(`${r}:${s}`,n):o.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Ul(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await Yte.init({core:this.providerOpts.core,logger:this.providerOpts.logger||HI,relayUrl:this.providerOpts.relayUrl||one,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>om(n)))];JC("client",this.client),JC("events",this.events),JC("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=zne(n,this.session);if(r?.length===0)return;const s=DO(r),o=X1(this.namespaces,this.optionalNamespaces),c=tS(W1({},o[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new sre({namespace:c});break;case"algorand":this.rpcProviders[n]=new fre({namespace:c});break;case"solana":this.rpcProviders[n]=new are({namespace:c});break;case"cosmos":this.rpcProviders[n]=new ure({namespace:c});break;case"polkadot":this.rpcProviders[n]=new Qne({namespace:c});break;case"cip34":this.rpcProviders[n]=new gre({namespace:c});break;case"elrond":this.rpcProviders[n]=new wre({namespace:c});break;case"multiversx":this.rpcProviders[n]=new Cre({namespace:c});break;case"near":this.rpcProviders[n]=new xre({namespace:c});break;case"tezos":this.rpcProviders[n]=new Ire({namespace:c});break;default:this.rpcProviders[rm]?this.rpcProviders[rm].updateNamespace(c):this.rpcProviders[rm]=new Ore({namespace:c})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:o}=r;if(o.name==="accountsChanged"){const c=o.data;c&&Ul(c)&&this.events.emit("accountsChanged",c.map(JI))}else if(o.name==="chainChanged"){const c=r.chainId,l=r.event.data,p=om(c),m=QC(c)!==QC(l)?`${p}:${QC(l)}`:c;this.onChainChanged(m)}else this.events.emit(o.name,o.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:o}=n,c=(s=this.client)==null?void 0:s.session.get(e);this.session=tS(W1({},c),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",tS(W1({},or("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Go.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[rm]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:o}=e;this.optionalNamespaces=X1(n,r),this.sessionProperties=s,this.scopedProperties=o}validateChain(e){const[n,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(c=>om(c)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=om(Object.keys(this.namespaces)[0]),o=this.rpcProviders[s].getDefaultChain();return[s,o]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const o=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:o,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,o;try{if(n===r)return;const c=(o=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:o.accounts;if(!c)return;const l=c.filter(p=>p.includes(`${r}:`)).map(JI);if(!Ul(l))return;this.events.emit("accountsChanged",l)}catch(c){this.logger.warn("Failed to emit accountsChanged on chain change",c)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${G1}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${G1}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${G1}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(G1)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}}let Mh=null;const Do={getSIWX(){return Ke.state.siwx},async initializeIfEnabled(t=ae.getActiveCaipAddress()){const e=Ke.state.siwx;if(!(e&&t))return;const[n,r,s]=t.split(":");if(ae.checkIfSupportedNetwork(n,`${n}:${r}`))try{if(Mh&&await Mh,(await e.getSessions(`${n}:${r}`,s)).length)return;await mn.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Rn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await ut._getClient()?.disconnect().catch(console.error),Dt.reset("Connect"),kc.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=Ke.state.siwx,e=yt.getPlainAddress(ae.getActiveCaipAddress()),n=ae.getActiveCaipNetwork(),r=ut._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),o=s.toString();at.getConnectorId(n.chainNamespace)===Oe.CONNECTOR_ID.AUTH&&Dt.pushTransactionStack({});const l=await r.signMessage(o);await t.addSession({data:s,message:o,signature:l}),ae.setLastConnectedSIWECaipNetwork(n),mn.close(),Rn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const o=this.getSIWXEventProperties();(!mn.state.open||Dt.state.view==="ApproveTransaction")&&await mn.open({view:"SIWXSignMessage"}),kc.showError("Error signing message"),Rn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:o}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){try{const t=this.getSIWX();if(t?.getRequired?.()){const n=ae.getLastConnectedSIWECaipNetwork();if(n){const r=await t?.getSessions(n?.caipNetworkId,yt.getPlainAddress(ae.getActiveCaipAddress())||"");r&&r.length>0?await ae.switchActiveNetwork(n):await ut.disconnect()}else await ut.disconnect()}else mn.close();mn.close(),Rn.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(t){console.error("SIWXUtil:cancelSignMessage",t)}},async getAllSessions(){const t=this.getSIWX(),e=ae.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await t?.getSessions(r.caipNetworkId,yt.getPlainAddress(ae.getActiveCaipAddress())||"");s&&n.push(...s)})),n},async getSessions(t){const e=Ke.state.siwx;let n=t?.address;if(!n){const s=ae.getActiveCaipAddress();n=yt.getPlainAddress(s)}let r=t?.caipNetworkId;return r||(r=ae.getActiveCaipNetwork()?.caipNetworkId),e&&n&&r?e.getSessions(r,n):[]},async isSIWXCloseDisabled(){const t=this.getSIWX();if(t){const e=Dt.state.view==="ApproveTransaction",n=Dt.state.view==="SIWXSignMessage";if(e||n)return t.getRequired?.()&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){const o=Do.getSIWX();if(!o||!s.includes(Oe.CHAIN.EVM)){const y=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:y.address,chainId:y.chainId,accounts:y.accounts}}const c=`${s}:${e}`,l=await o.createMessage({chainId:c,accountAddress:"<<AccountAddress>>"}),p={accountAddress:l.accountAddress,chainId:l.chainId,domain:l.domain,uri:l.uri,version:l.version,nonce:l.nonce,notBefore:l.notBefore,statement:l.statement,resources:l.resources,requestId:l.requestId,issuedAt:l.issuedAt,expirationTime:l.expirationTime,serializedMessage:l.toString()},m=await t.connect({chainId:e,socialUri:n,siwxMessage:p,preferredAccountType:r});return p.accountAddress=m.address,p.serializedMessage=m.message||"",m.signature&&m.message&&await Do.addEmbeddedWalletSession(p,m.message,m.signature),{address:m.address,chainId:m.chainId,accounts:m.accounts}},async addEmbeddedWalletSession(t,e,n){if(Mh)return Mh;const r=Do.getSIWX();return r?(Mh=r.addSession({data:t,message:e,signature:n}).finally(()=>{Mh=null}),Mh):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){const r=Do.getSIWX(),s=new Set(e.map(l=>l.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const o=await r.createMessage({chainId:ae.getActiveCaipNetwork()?.caipNetworkId||"",accountAddress:""}),c=await t.authenticate({nonce:o.nonce,domain:o.domain,uri:o.uri,exp:o.expirationTime,iat:o.issuedAt,nbf:o.notBefore,requestId:o.requestId,version:o.version,resources:o.resources,statement:o.statement,chainId:o.chainId,methods:n,chains:[o.chainId,...e.filter(l=>l!==o.chainId)]});if(kc.showLoading("Authenticating...",{autoClose:!1}),Et.setConnectedWalletInfo({...c.session.peer.metadata,name:c.session.peer.metadata.name,icon:c.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"},Array.from(s)[0]),c?.auths?.length){const l=c.auths.map(p=>{const m=t.client.formatAuthMessage({request:p.p,iss:p.p.iss});return{data:{...p.p,accountAddress:p.p.iss.split(":").slice(-1).join(""),chainId:p.p.iss.split(":").slice(2,4).join(":"),uri:p.p.aud,version:p.p.version||o.version,expirationTime:p.p.exp,issuedAt:p.p.iat,notBefore:p.p.nbf},message:m,signature:p.s.s,cacao:p}});try{await r.setSessions(l),Rn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Do.getSIWXEventProperties()})}catch(p){throw console.error("SIWX:universalProviderAuth - failed to set sessions",p),Rn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Do.getSIWXEventProperties()}),await t.disconnect().catch(console.error),p}finally{kc.hide()}}return!0},getSIWXEventProperties(){const t=ae.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:ae.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:to(t)===Ur.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},tr={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:Oe.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},Qi={ConnectorExplorerIds:{[Oe.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Oe.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Oe.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[Oe.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[Oe.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[tr.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[tr.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[tr.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[tr.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[tr.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[tr.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[tr.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[tr.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[tr.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[tr.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[tr.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[Oe.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Oe.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Oe.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Oe.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Oe.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Oe.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Oe.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Oe.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Oe.CONNECTOR_ID.COINBASE]:"Coinbase",[Oe.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Oe.CONNECTOR_ID.LEDGER]:"Ledger",[Oe.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[Oe.CONNECTOR_ID.INJECTED]:"INJECTED",[Oe.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[Oe.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[Oe.CONNECTOR_ID.AUTH]:"AUTH",[tr.CONNECTOR_TYPE_AUTH]:"AUTH"}},Jr={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${tr.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return t?.toLowerCase()===e?.toLowerCase()},getActiveNamespaceConnectedToAuth(){const t=ae.state.activeChain;return Oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>at.getConnectorId(e)===Oe.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function o(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(o,e),null)}o()})}},Ure=new AbortController,ur={EmbeddedWalletAbortController:Ure,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found. Please make sure it is included in 'networks' array in createAppKit function."},ORIGIN_NOT_ALLOWED:{shortMessage:"Origin Not Allowed",longMessage:()=>`🔧 Origin ${$re()?window.origin:"unknown"} not found on allow list. Please update your project configurations on dashboard.reown.com.`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Unverified Domain",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider. Please check your time settings and connect again."},INVALID_PROJECT_ID:{shortMessage:"Invalid Project ID",longMessage:"The project ID is invalid. Visit dashboard.reown.com to get a new one."},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured. Please update your project configurations on dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:t=>`Failed to get App Configuration ${t||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function $re(){return typeof window<"u"}const jre={createLogger(t,e="error"){const n=Dm({level:e}),{logger:r}=C5({opts:n});return r.error=(...s)=>{for(const o of s)if(o instanceof Error){t(o,...s);return}t(void 0,...s)},r}},Bre="rpc.walletconnect.org";function uN(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const nS=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Pc={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===Bre}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:Oe.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${Oe.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){const r=t.rpcUrls?.default?.http?.[0];return nS.includes(e)?uN(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){const s=this.getChainNamespace(t),o=this.getCaipNetworkId(t),c=t.rpcUrls?.default?.http?.[0],l=this.getDefaultRpcUrl(t,o,n),p=t?.rpcUrls?.chainDefault?.http?.[0]||c,m=r?.[o]?.map(S=>S.url)||[],y=[...m,...l?[l]:[]],v=[...m];return p&&!v.includes(p)&&v.push(p),{...t,chainNamespace:s,caipNetworkId:o,assets:{imageId:Qi.NetworkImageIds[t.id],imageUrl:e?.[t.id]},rpcUrls:{...t.rpcUrls,default:{http:y},chainDefault:{http:v}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Pc.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){const r=[];return n?.forEach(s=>{r.push(E1(s.url,s.config))}),nS.includes(t.caipNetworkId)&&r.push(E1(uN(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),t?.rpcUrls?.default?.http?.forEach(s=>{r.push(E1(s))}),A3(r)},extendWagmiTransports(t,e,n){if(nS.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return A3([n,E1(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:Oe.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){const e=nt.getActiveCaipNetworkId(),n=ae.getAllRequestedCaipNetworks(),r=Array.from(ae.state.chains?.keys()||[]),s=e?.split(":")[0],o=s?r.includes(s):!1,c=n?.find(p=>p.caipNetworkId===e);return o&&!c&&e?this.getUnsupportedNetwork(e):c||t||n?.[0]}},Fv={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Ci=Zn({providers:{...Fv},providerIds:{...Fv}}),Mn={state:Ci,subscribeKey(t,e){return vs(Ci,t,e)},subscribe(t){return ws(Ci,()=>{t(Ci)})},subscribeProviders(t){return ws(Ci.providers,()=>t(Ci.providers))},setProvider(t,e){t&&e&&(Ci.providers[t]=af(e))},getProvider(t){if(t)return Ci.providers[t]},setProviderId(t,e){e&&(Ci.providerIds[t]=e)},getProviderId(t){if(t)return Ci.providerIds[t]},reset(){Ci.providers={...Fv},Ci.providerIds={...Fv}},resetChain(t){Ci.providers[t]=void 0,Ci.providerIds[t]=void 0}},dN={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},ms={set(t,e){Ji.isClient&&localStorage.setItem(`${bt.STORAGE_KEY}${t}`,e)},get(t){return Ji.isClient?localStorage.getItem(`${bt.STORAGE_KEY}${t}`):null},delete(t,e){Ji.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${bt.STORAGE_KEY}${t}`))}},V1=30*1e3,Ji={checkIfAllowedToTriggerEmail(){const t=ms.get(bt.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<V1){const n=Math.ceil((V1-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=ms.get(bt.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<V1)return Math.ceil((V1-e)/1e3)}return 0},checkIfRequestExists(t){return Ur.NOT_SAFE_RPC_METHODS.includes(t.method)||Ur.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&(t?.match(dN.transactionHash)||t?.match(dN.signedMessage))?bt.RPC_RESPONSE_TYPE_TX:bt.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Ur.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var gn;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const o={};for(const c of s)o[c]=c;return o},t.getValidEnumValues=s=>{const o=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),c={};for(const l of o)c[l]=s[l];return t.objectValues(c)},t.objectValues=s=>t.objectKeys(s).map(function(o){return s[o]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const o=[];for(const c in s)Object.prototype.hasOwnProperty.call(s,c)&&o.push(c);return o},t.find=(s,o)=>{for(const c of s)if(o(c))return c},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,o=" | "){return s.map(c=>typeof c=="string"?`'${c}'`:c).join(o)}t.joinValues=r,t.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(gn||(gn={}));var D_;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(D_||(D_={}));const ft=gn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),nd=t=>{switch(typeof t){case"undefined":return ft.undefined;case"string":return ft.string;case"number":return isNaN(t)?ft.nan:ft.number;case"boolean":return ft.boolean;case"function":return ft.function;case"bigint":return ft.bigint;case"symbol":return ft.symbol;case"object":return Array.isArray(t)?ft.array:t===null?ft.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ft.promise:typeof Map<"u"&&t instanceof Map?ft.map:typeof Set<"u"&&t instanceof Set?ft.set:typeof Date<"u"&&t instanceof Date?ft.date:ft.object;default:return ft.unknown}},rt=gn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Fre=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Na extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(o){return o.message},r={_errors:[]},s=o=>{for(const c of o.issues)if(c.code==="invalid_union")c.unionErrors.map(s);else if(c.code==="invalid_return_type")s(c.returnTypeError);else if(c.code==="invalid_arguments")s(c.argumentsError);else if(c.path.length===0)r._errors.push(n(c));else{let l=r,p=0;for(;p<c.path.length;){const m=c.path[p];p===c.path.length-1?(l[m]=l[m]||{_errors:[]},l[m]._errors.push(n(c))):l[m]=l[m]||{_errors:[]},l=l[m],p++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,gn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Na.create=t=>new Na(t);const Jy=(t,e)=>{let n;switch(t.code){case rt.invalid_type:t.received===ft.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case rt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,gn.jsonStringifyReplacer)}`;break;case rt.unrecognized_keys:n=`Unrecognized key(s) in object: ${gn.joinValues(t.keys,", ")}`;break;case rt.invalid_union:n="Invalid input";break;case rt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${gn.joinValues(t.options)}`;break;case rt.invalid_enum_value:n=`Invalid enum value. Expected ${gn.joinValues(t.options)}, received '${t.received}'`;break;case rt.invalid_arguments:n="Invalid function arguments";break;case rt.invalid_return_type:n="Invalid function return type";break;case rt.invalid_date:n="Invalid date";break;case rt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:gn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case rt.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case rt.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case rt.custom:n="Invalid input";break;case rt.invalid_intersection_types:n="Intersection results could not be merged";break;case rt.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case rt.not_finite:n="Number must be finite";break;default:n=e.defaultError,gn.assertNever(t)}return{message:n}};let UO=Jy;function Zre(t){UO=t}function Zv(){return UO}const zv=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,o=[...n,...s.path||[]],c={...s,path:o};let l="";const p=r.filter(m=>!!m).slice().reverse();for(const m of p)l=m(c,{data:e,defaultError:l}).message;return{...s,path:o,message:s.message||l}},zre=[];function gt(t,e){const n=zv({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Zv(),Jy].filter(r=>!!r)});t.common.issues.push(n)}class Fs{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return jt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return Fs.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:o,value:c}=s;if(o.status==="aborted"||c.status==="aborted")return jt;o.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof c.value<"u"||s.alwaysSet)&&(r[o.value]=c.value)}return{status:e.value,value:r}}}const jt=Object.freeze({status:"aborted"}),$O=t=>({status:"dirty",value:t}),ni=t=>({status:"valid",value:t}),M_=t=>t.status==="aborted",U_=t=>t.status==="dirty",eb=t=>t.status==="valid",Gv=t=>typeof Promise<"u"&&t instanceof Promise;var At;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(At||(At={}));class Zc{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const hN=(t,e)=>{if(eb(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Na(t.common.issues);return this._error=n,this._error}}};function zt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(c,l)=>c.code!=="invalid_type"?{message:l.defaultError}:typeof l.data>"u"?{message:r??l.defaultError}:{message:n??l.defaultError},description:s}}class Xt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return nd(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:nd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Fs,ctx:{common:e.parent.common,data:e.data,parsedType:nd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Gv(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:nd(e)},o=this._parseSync({data:e,path:s.path,parent:s});return hN(s,o)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:nd(e)},s=this._parse({data:e,path:r.path,parent:r}),o=await(Gv(s)?s:Promise.resolve(s));return hN(r,o)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,o)=>{const c=e(s),l=()=>o.addIssue({code:rt.custom,...r(s)});return typeof Promise<"u"&&c instanceof Promise?c.then(p=>p?!0:(l(),!1)):c?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Oa({schema:this,typeName:Mt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return $l.create(this,this._def)}nullable(){return mf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ra.create(this,this._def)}promise(){return Am.create(this,this._def)}or(e){return sb.create([this,e],this._def)}and(e){return ib.create(this,e,this._def)}transform(e){return new Oa({...zt(this._def),schema:this,typeName:Mt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new ub({...zt(this._def),innerType:this,defaultValue:n,typeName:Mt.ZodDefault})}brand(){return new BO({typeName:Mt.ZodBranded,type:this,...zt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Vv({...zt(this._def),innerType:this,catchValue:n,typeName:Mt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Ob.create(this,e)}readonly(){return Yv.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Gre=/^c[^\s-]{8,}$/i,Hre=/^[a-z][a-z0-9]*$/,Xre=/^[0-9A-HJKMNP-TV-Z]{26}$/,Wre=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Vre=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Kre="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let rS;const Yre=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,qre=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Qre=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Jre(t,e){return!!((e==="v4"||!e)&&Yre.test(t)||(e==="v6"||!e)&&qre.test(t))}class Aa extends Xt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ft.string){const o=this._getOrReturnCtx(e);return gt(o,{code:rt.invalid_type,expected:ft.string,received:o.parsedType}),jt}const r=new Fs;let s;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(s=this._getOrReturnCtx(e,s),gt(s,{code:rt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(s=this._getOrReturnCtx(e,s),gt(s,{code:rt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const c=e.data.length>o.value,l=e.data.length<o.value;(c||l)&&(s=this._getOrReturnCtx(e,s),c?gt(s,{code:rt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&gt(s,{code:rt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")Vre.test(e.data)||(s=this._getOrReturnCtx(e,s),gt(s,{validation:"email",code:rt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")rS||(rS=new RegExp(Kre,"u")),rS.test(e.data)||(s=this._getOrReturnCtx(e,s),gt(s,{validation:"emoji",code:rt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")Wre.test(e.data)||(s=this._getOrReturnCtx(e,s),gt(s,{validation:"uuid",code:rt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")Gre.test(e.data)||(s=this._getOrReturnCtx(e,s),gt(s,{validation:"cuid",code:rt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")Hre.test(e.data)||(s=this._getOrReturnCtx(e,s),gt(s,{validation:"cuid2",code:rt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")Xre.test(e.data)||(s=this._getOrReturnCtx(e,s),gt(s,{validation:"ulid",code:rt.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),gt(s,{validation:"url",code:rt.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),gt(s,{validation:"regex",code:rt.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(e,s),gt(s,{code:rt.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(s=this._getOrReturnCtx(e,s),gt(s,{code:rt.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(s=this._getOrReturnCtx(e,s),gt(s,{code:rt.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?Qre(o).test(e.data)||(s=this._getOrReturnCtx(e,s),gt(s,{code:rt.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="ip"?Jre(e.data,o.version)||(s=this._getOrReturnCtx(e,s),gt(s,{validation:"ip",code:rt.invalid_string,message:o.message}),r.dirty()):gn.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:rt.invalid_string,...At.errToObj(r)})}_addCheck(e){return new Aa({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...At.errToObj(e)})}url(e){return this._addCheck({kind:"url",...At.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...At.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...At.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...At.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...At.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...At.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...At.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,...At.errToObj(e?.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...At.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...At.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...At.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...At.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...At.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...At.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...At.errToObj(n)})}nonempty(e){return this.min(1,At.errToObj(e))}trim(){return new Aa({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Aa({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Aa({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Aa.create=t=>{var e;return new Aa({checks:[],typeName:Mt.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...zt(t)})};function ese(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,o=parseInt(t.toFixed(s).replace(".","")),c=parseInt(e.toFixed(s).replace(".",""));return o%c/Math.pow(10,s)}class gd extends Xt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ft.number){const o=this._getOrReturnCtx(e);return gt(o,{code:rt.invalid_type,expected:ft.number,received:o.parsedType}),jt}let r;const s=new Fs;for(const o of this._def.checks)o.kind==="int"?gn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),gt(r,{code:rt.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),gt(r,{code:rt.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),gt(r,{code:rt.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="multipleOf"?ese(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),gt(r,{code:rt.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),gt(r,{code:rt.not_finite,message:o.message}),s.dirty()):gn.assertNever(o);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,At.toString(n))}gt(e,n){return this.setLimit("min",e,!1,At.toString(n))}lte(e,n){return this.setLimit("max",e,!0,At.toString(n))}lt(e,n){return this.setLimit("max",e,!1,At.toString(n))}setLimit(e,n,r,s){return new gd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:At.toString(s)}]})}_addCheck(e){return new gd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:At.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:At.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:At.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:At.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:At.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:At.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:At.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:At.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:At.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&gn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}gd.create=t=>new gd({checks:[],typeName:Mt.ZodNumber,coerce:t?.coerce||!1,...zt(t)});class yd extends Xt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ft.bigint){const o=this._getOrReturnCtx(e);return gt(o,{code:rt.invalid_type,expected:ft.bigint,received:o.parsedType}),jt}let r;const s=new Fs;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),gt(r,{code:rt.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),gt(r,{code:rt.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),gt(r,{code:rt.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):gn.assertNever(o);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,At.toString(n))}gt(e,n){return this.setLimit("min",e,!1,At.toString(n))}lte(e,n){return this.setLimit("max",e,!0,At.toString(n))}lt(e,n){return this.setLimit("max",e,!1,At.toString(n))}setLimit(e,n,r,s){return new yd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:At.toString(s)}]})}_addCheck(e){return new yd({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:At.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:At.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:At.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:At.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:At.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}yd.create=t=>{var e;return new yd({checks:[],typeName:Mt.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...zt(t)})};class tb extends Xt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ft.boolean){const r=this._getOrReturnCtx(e);return gt(r,{code:rt.invalid_type,expected:ft.boolean,received:r.parsedType}),jt}return ni(e.data)}}tb.create=t=>new tb({typeName:Mt.ZodBoolean,coerce:t?.coerce||!1,...zt(t)});class ff extends Xt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ft.date){const o=this._getOrReturnCtx(e);return gt(o,{code:rt.invalid_type,expected:ft.date,received:o.parsedType}),jt}if(isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return gt(o,{code:rt.invalid_date}),jt}const r=new Fs;let s;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(s=this._getOrReturnCtx(e,s),gt(s,{code:rt.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(s=this._getOrReturnCtx(e,s),gt(s,{code:rt.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):gn.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ff({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:At.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:At.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ff.create=t=>new ff({checks:[],coerce:t?.coerce||!1,typeName:Mt.ZodDate,...zt(t)});class Hv extends Xt{_parse(e){if(this._getType(e)!==ft.symbol){const r=this._getOrReturnCtx(e);return gt(r,{code:rt.invalid_type,expected:ft.symbol,received:r.parsedType}),jt}return ni(e.data)}}Hv.create=t=>new Hv({typeName:Mt.ZodSymbol,...zt(t)});class nb extends Xt{_parse(e){if(this._getType(e)!==ft.undefined){const r=this._getOrReturnCtx(e);return gt(r,{code:rt.invalid_type,expected:ft.undefined,received:r.parsedType}),jt}return ni(e.data)}}nb.create=t=>new nb({typeName:Mt.ZodUndefined,...zt(t)});class rb extends Xt{_parse(e){if(this._getType(e)!==ft.null){const r=this._getOrReturnCtx(e);return gt(r,{code:rt.invalid_type,expected:ft.null,received:r.parsedType}),jt}return ni(e.data)}}rb.create=t=>new rb({typeName:Mt.ZodNull,...zt(t)});class Tm extends Xt{constructor(){super(...arguments),this._any=!0}_parse(e){return ni(e.data)}}Tm.create=t=>new Tm({typeName:Mt.ZodAny,...zt(t)});class Qh extends Xt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ni(e.data)}}Qh.create=t=>new Qh({typeName:Mt.ZodUnknown,...zt(t)});class Zl extends Xt{_parse(e){const n=this._getOrReturnCtx(e);return gt(n,{code:rt.invalid_type,expected:ft.never,received:n.parsedType}),jt}}Zl.create=t=>new Zl({typeName:Mt.ZodNever,...zt(t)});class Xv extends Xt{_parse(e){if(this._getType(e)!==ft.undefined){const r=this._getOrReturnCtx(e);return gt(r,{code:rt.invalid_type,expected:ft.void,received:r.parsedType}),jt}return ni(e.data)}}Xv.create=t=>new Xv({typeName:Mt.ZodVoid,...zt(t)});class Ra extends Xt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==ft.array)return gt(n,{code:rt.invalid_type,expected:ft.array,received:n.parsedType}),jt;if(s.exactLength!==null){const c=n.data.length>s.exactLength.value,l=n.data.length<s.exactLength.value;(c||l)&&(gt(n,{code:c?rt.too_big:rt.too_small,minimum:l?s.exactLength.value:void 0,maximum:c?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(gt(n,{code:rt.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(gt(n,{code:rt.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((c,l)=>s.type._parseAsync(new Zc(n,c,n.path,l)))).then(c=>Fs.mergeArray(r,c));const o=[...n.data].map((c,l)=>s.type._parseSync(new Zc(n,c,n.path,l)));return Fs.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new Ra({...this._def,minLength:{value:e,message:At.toString(n)}})}max(e,n){return new Ra({...this._def,maxLength:{value:e,message:At.toString(n)}})}length(e,n){return new Ra({...this._def,exactLength:{value:e,message:At.toString(n)}})}nonempty(e){return this.min(1,e)}}Ra.create=(t,e)=>new Ra({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Mt.ZodArray,...zt(e)});function sm(t){if(t instanceof dr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=$l.create(sm(r))}return new dr({...t._def,shape:()=>e})}else return t instanceof Ra?new Ra({...t._def,type:sm(t.element)}):t instanceof $l?$l.create(sm(t.unwrap())):t instanceof mf?mf.create(sm(t.unwrap())):t instanceof zc?zc.create(t.items.map(e=>sm(e))):t}class dr extends Xt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=gn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ft.object){const m=this._getOrReturnCtx(e);return gt(m,{code:rt.invalid_type,expected:ft.object,received:m.parsedType}),jt}const{status:r,ctx:s}=this._processInputParams(e),{shape:o,keys:c}=this._getCached(),l=[];if(!(this._def.catchall instanceof Zl&&this._def.unknownKeys==="strip"))for(const m in s.data)c.includes(m)||l.push(m);const p=[];for(const m of c){const y=o[m],v=s.data[m];p.push({key:{status:"valid",value:m},value:y._parse(new Zc(s,v,s.path,m)),alwaysSet:m in s.data})}if(this._def.catchall instanceof Zl){const m=this._def.unknownKeys;if(m==="passthrough")for(const y of l)p.push({key:{status:"valid",value:y},value:{status:"valid",value:s.data[y]}});else if(m==="strict")l.length>0&&(gt(s,{code:rt.unrecognized_keys,keys:l}),r.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const m=this._def.catchall;for(const y of l){const v=s.data[y];p.push({key:{status:"valid",value:y},value:m._parse(new Zc(s,v,s.path,y)),alwaysSet:y in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const m=[];for(const y of p){const v=await y.key;m.push({key:v,value:await y.value,alwaysSet:y.alwaysSet})}return m}).then(m=>Fs.mergeObjectSync(r,m)):Fs.mergeObjectSync(r,p)}get shape(){return this._def.shape()}strict(e){return At.errToObj,new dr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,o,c,l;const p=(c=(o=(s=this._def).errorMap)===null||o===void 0?void 0:o.call(s,n,r).message)!==null&&c!==void 0?c:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=At.errToObj(e).message)!==null&&l!==void 0?l:p}:{message:p}}}:{}})}strip(){return new dr({...this._def,unknownKeys:"strip"})}passthrough(){return new dr({...this._def,unknownKeys:"passthrough"})}extend(e){return new dr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new dr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Mt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new dr({...this._def,catchall:e})}pick(e){const n={};return gn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new dr({...this._def,shape:()=>n})}omit(e){const n={};return gn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new dr({...this._def,shape:()=>n})}deepPartial(){return sm(this)}partial(e){const n={};return gn.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new dr({...this._def,shape:()=>n})}required(e){const n={};return gn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof $l;)o=o._def.innerType;n[r]=o}}),new dr({...this._def,shape:()=>n})}keyof(){return jO(gn.objectKeys(this.shape))}}dr.create=(t,e)=>new dr({shape:()=>t,unknownKeys:"strip",catchall:Zl.create(),typeName:Mt.ZodObject,...zt(e)});dr.strictCreate=(t,e)=>new dr({shape:()=>t,unknownKeys:"strict",catchall:Zl.create(),typeName:Mt.ZodObject,...zt(e)});dr.lazycreate=(t,e)=>new dr({shape:t,unknownKeys:"strip",catchall:Zl.create(),typeName:Mt.ZodObject,...zt(e)});class sb extends Xt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(o){for(const l of o)if(l.result.status==="valid")return l.result;for(const l of o)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const c=o.map(l=>new Na(l.ctx.common.issues));return gt(n,{code:rt.invalid_union,unionErrors:c}),jt}if(n.common.async)return Promise.all(r.map(async o=>{const c={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:c}),ctx:c}})).then(s);{let o;const c=[];for(const p of r){const m={...n,common:{...n.common,issues:[]},parent:null},y=p._parseSync({data:n.data,path:n.path,parent:m});if(y.status==="valid")return y;y.status==="dirty"&&!o&&(o={result:y,ctx:m}),m.common.issues.length&&c.push(m.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const l=c.map(p=>new Na(p));return gt(n,{code:rt.invalid_union,unionErrors:l}),jt}}get options(){return this._def.options}}sb.create=(t,e)=>new sb({options:t,typeName:Mt.ZodUnion,...zt(e)});const av=t=>t instanceof ab?av(t.schema):t instanceof Oa?av(t.innerType()):t instanceof cb?[t.value]:t instanceof bd?t.options:t instanceof lb?Object.keys(t.enum):t instanceof ub?av(t._def.innerType):t instanceof nb?[void 0]:t instanceof rb?[null]:null;class O2 extends Xt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ft.object)return gt(n,{code:rt.invalid_type,expected:ft.object,received:n.parsedType}),jt;const r=this.discriminator,s=n.data[r],o=this.optionsMap.get(s);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(gt(n,{code:rt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),jt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const o of n){const c=av(o.shape[e]);if(!c)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of c){if(s.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);s.set(l,o)}}return new O2({typeName:Mt.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...zt(r)})}}function $_(t,e){const n=nd(t),r=nd(e);if(t===e)return{valid:!0,data:t};if(n===ft.object&&r===ft.object){const s=gn.objectKeys(e),o=gn.objectKeys(t).filter(l=>s.indexOf(l)!==-1),c={...t,...e};for(const l of o){const p=$_(t[l],e[l]);if(!p.valid)return{valid:!1};c[l]=p.data}return{valid:!0,data:c}}else if(n===ft.array&&r===ft.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let o=0;o<t.length;o++){const c=t[o],l=e[o],p=$_(c,l);if(!p.valid)return{valid:!1};s.push(p.data)}return{valid:!0,data:s}}else return n===ft.date&&r===ft.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ib extends Xt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(o,c)=>{if(M_(o)||M_(c))return jt;const l=$_(o.value,c.value);return l.valid?((U_(o)||U_(c))&&n.dirty(),{status:n.value,value:l.data}):(gt(r,{code:rt.invalid_intersection_types}),jt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,c])=>s(o,c)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ib.create=(t,e,n)=>new ib({left:t,right:e,typeName:Mt.ZodIntersection,...zt(n)});class zc extends Xt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ft.array)return gt(r,{code:rt.invalid_type,expected:ft.array,received:r.parsedType}),jt;if(r.data.length<this._def.items.length)return gt(r,{code:rt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),jt;!this._def.rest&&r.data.length>this._def.items.length&&(gt(r,{code:rt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((c,l)=>{const p=this._def.items[l]||this._def.rest;return p?p._parse(new Zc(r,c,r.path,l)):null}).filter(c=>!!c);return r.common.async?Promise.all(o).then(c=>Fs.mergeArray(n,c)):Fs.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new zc({...this._def,rest:e})}}zc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new zc({items:t,typeName:Mt.ZodTuple,rest:null,...zt(e)})};class ob extends Xt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ft.object)return gt(r,{code:rt.invalid_type,expected:ft.object,received:r.parsedType}),jt;const s=[],o=this._def.keyType,c=this._def.valueType;for(const l in r.data)s.push({key:o._parse(new Zc(r,l,r.path,l)),value:c._parse(new Zc(r,r.data[l],r.path,l))});return r.common.async?Fs.mergeObjectAsync(n,s):Fs.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Xt?new ob({keyType:e,valueType:n,typeName:Mt.ZodRecord,...zt(r)}):new ob({keyType:Aa.create(),valueType:e,typeName:Mt.ZodRecord,...zt(n)})}}class Wv extends Xt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ft.map)return gt(r,{code:rt.invalid_type,expected:ft.map,received:r.parsedType}),jt;const s=this._def.keyType,o=this._def.valueType,c=[...r.data.entries()].map(([l,p],m)=>({key:s._parse(new Zc(r,l,r.path,[m,"key"])),value:o._parse(new Zc(r,p,r.path,[m,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const p of c){const m=await p.key,y=await p.value;if(m.status==="aborted"||y.status==="aborted")return jt;(m.status==="dirty"||y.status==="dirty")&&n.dirty(),l.set(m.value,y.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const p of c){const m=p.key,y=p.value;if(m.status==="aborted"||y.status==="aborted")return jt;(m.status==="dirty"||y.status==="dirty")&&n.dirty(),l.set(m.value,y.value)}return{status:n.value,value:l}}}}Wv.create=(t,e,n)=>new Wv({valueType:e,keyType:t,typeName:Mt.ZodMap,...zt(n)});class pf extends Xt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ft.set)return gt(r,{code:rt.invalid_type,expected:ft.set,received:r.parsedType}),jt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(gt(r,{code:rt.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(gt(r,{code:rt.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const o=this._def.valueType;function c(p){const m=new Set;for(const y of p){if(y.status==="aborted")return jt;y.status==="dirty"&&n.dirty(),m.add(y.value)}return{status:n.value,value:m}}const l=[...r.data.values()].map((p,m)=>o._parse(new Zc(r,p,r.path,m)));return r.common.async?Promise.all(l).then(p=>c(p)):c(l)}min(e,n){return new pf({...this._def,minSize:{value:e,message:At.toString(n)}})}max(e,n){return new pf({...this._def,maxSize:{value:e,message:At.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}pf.create=(t,e)=>new pf({valueType:t,minSize:null,maxSize:null,typeName:Mt.ZodSet,...zt(e)});class hm extends Xt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ft.function)return gt(n,{code:rt.invalid_type,expected:ft.function,received:n.parsedType}),jt;function r(l,p){return zv({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Zv(),Jy].filter(m=>!!m),issueData:{code:rt.invalid_arguments,argumentsError:p}})}function s(l,p){return zv({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Zv(),Jy].filter(m=>!!m),issueData:{code:rt.invalid_return_type,returnTypeError:p}})}const o={errorMap:n.common.contextualErrorMap},c=n.data;if(this._def.returns instanceof Am){const l=this;return ni(async function(...p){const m=new Na([]),y=await l._def.args.parseAsync(p,o).catch(_=>{throw m.addIssue(r(p,_)),m}),v=await Reflect.apply(c,this,y);return await l._def.returns._def.type.parseAsync(v,o).catch(_=>{throw m.addIssue(s(v,_)),m})})}else{const l=this;return ni(function(...p){const m=l._def.args.safeParse(p,o);if(!m.success)throw new Na([r(p,m.error)]);const y=Reflect.apply(c,this,m.data),v=l._def.returns.safeParse(y,o);if(!v.success)throw new Na([s(y,v.error)]);return v.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new hm({...this._def,args:zc.create(e).rest(Qh.create())})}returns(e){return new hm({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new hm({args:e||zc.create([]).rest(Qh.create()),returns:n||Qh.create(),typeName:Mt.ZodFunction,...zt(r)})}}class ab extends Xt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}ab.create=(t,e)=>new ab({getter:t,typeName:Mt.ZodLazy,...zt(e)});class cb extends Xt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return gt(n,{received:n.data,code:rt.invalid_literal,expected:this._def.value}),jt}return{status:"valid",value:e.data}}get value(){return this._def.value}}cb.create=(t,e)=>new cb({value:t,typeName:Mt.ZodLiteral,...zt(e)});function jO(t,e){return new bd({values:t,typeName:Mt.ZodEnum,...zt(e)})}class bd extends Xt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return gt(n,{expected:gn.joinValues(r),received:n.parsedType,code:rt.invalid_type}),jt}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return gt(n,{received:n.data,code:rt.invalid_enum_value,options:r}),jt}return ni(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return bd.create(e)}exclude(e){return bd.create(this.options.filter(n=>!e.includes(n)))}}bd.create=jO;class lb extends Xt{_parse(e){const n=gn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ft.string&&r.parsedType!==ft.number){const s=gn.objectValues(n);return gt(r,{expected:gn.joinValues(s),received:r.parsedType,code:rt.invalid_type}),jt}if(n.indexOf(e.data)===-1){const s=gn.objectValues(n);return gt(r,{received:r.data,code:rt.invalid_enum_value,options:s}),jt}return ni(e.data)}get enum(){return this._def.values}}lb.create=(t,e)=>new lb({values:t,typeName:Mt.ZodNativeEnum,...zt(e)});class Am extends Xt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ft.promise&&n.common.async===!1)return gt(n,{code:rt.invalid_type,expected:ft.promise,received:n.parsedType}),jt;const r=n.parsedType===ft.promise?n.data:Promise.resolve(n.data);return ni(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Am.create=(t,e)=>new Am({type:t,typeName:Mt.ZodPromise,...zt(e)});class Oa extends Xt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Mt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,o={addIssue:c=>{gt(r,c),c.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),s.type==="preprocess"){const c=s.transform(r.data,o);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(c).then(l=>this._def.schema._parseAsync({data:l,path:r.path,parent:r})):this._def.schema._parseSync({data:c,path:r.path,parent:r})}if(s.type==="refinement"){const c=l=>{const p=s.refinement(l,o);if(r.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?jt:(l.status==="dirty"&&n.dirty(),c(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?jt:(l.status==="dirty"&&n.dirty(),c(l.value).then(()=>({status:n.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!eb(c))return c;const l=s.transform(c.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>eb(c)?Promise.resolve(s.transform(c.value,o)).then(l=>({status:n.value,value:l})):c);gn.assertNever(s)}}Oa.create=(t,e,n)=>new Oa({schema:t,typeName:Mt.ZodEffects,effect:e,...zt(n)});Oa.createWithPreprocess=(t,e,n)=>new Oa({schema:e,effect:{type:"preprocess",transform:t},typeName:Mt.ZodEffects,...zt(n)});class $l extends Xt{_parse(e){return this._getType(e)===ft.undefined?ni(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$l.create=(t,e)=>new $l({innerType:t,typeName:Mt.ZodOptional,...zt(e)});class mf extends Xt{_parse(e){return this._getType(e)===ft.null?ni(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}mf.create=(t,e)=>new mf({innerType:t,typeName:Mt.ZodNullable,...zt(e)});class ub extends Xt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ft.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ub.create=(t,e)=>new ub({innerType:t,typeName:Mt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...zt(e)});class Vv extends Xt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Gv(s)?s.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Na(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Na(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Vv.create=(t,e)=>new Vv({innerType:t,typeName:Mt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...zt(e)});class Kv extends Xt{_parse(e){if(this._getType(e)!==ft.nan){const r=this._getOrReturnCtx(e);return gt(r,{code:rt.invalid_type,expected:ft.nan,received:r.parsedType}),jt}return{status:"valid",value:e.data}}}Kv.create=t=>new Kv({typeName:Mt.ZodNaN,...zt(t)});const tse=Symbol("zod_brand");class BO extends Xt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Ob extends Xt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?jt:o.status==="dirty"?(n.dirty(),$O(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?jt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Ob({in:e,out:n,typeName:Mt.ZodPipeline})}}class Yv extends Xt{_parse(e){const n=this._def.innerType._parse(e);return eb(n)&&(n.value=Object.freeze(n.value)),n}}Yv.create=(t,e)=>new Yv({innerType:t,typeName:Mt.ZodReadonly,...zt(e)});const FO=(t,e={},n)=>t?Tm.create().superRefine((r,s)=>{var o,c;if(!t(r)){const l=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,p=(c=(o=l.fatal)!==null&&o!==void 0?o:n)!==null&&c!==void 0?c:!0,m=typeof l=="string"?{message:l}:l;s.addIssue({code:"custom",...m,fatal:p})}}):Tm.create(),nse={object:dr.lazycreate};var Mt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Mt||(Mt={}));const rse=(t,e={message:`Input not instance of ${t.name}`})=>FO(n=>n instanceof t,e),ZO=Aa.create,zO=gd.create,sse=Kv.create,ise=yd.create,GO=tb.create,ose=ff.create,ase=Hv.create,cse=nb.create,lse=rb.create,use=Tm.create,dse=Qh.create,hse=Zl.create,fse=Xv.create,pse=Ra.create,mse=dr.create,gse=dr.strictCreate,yse=sb.create,bse=O2.create,wse=ib.create,vse=zc.create,Ese=ob.create,Cse=Wv.create,Sse=pf.create,_se=hm.create,xse=ab.create,Tse=cb.create,Ase=bd.create,Ise=lb.create,Nse=Am.create,fN=Oa.create,Rse=$l.create,Ose=mf.create,Pse=Oa.createWithPreprocess,kse=Ob.create,Lse=()=>ZO().optional(),Dse=()=>zO().optional(),Mse=()=>GO().optional(),Use={string:t=>Aa.create({...t,coerce:!0}),number:t=>gd.create({...t,coerce:!0}),boolean:t=>tb.create({...t,coerce:!0}),bigint:t=>yd.create({...t,coerce:!0}),date:t=>ff.create({...t,coerce:!0})},$se=jt;var q=Object.freeze({__proto__:null,defaultErrorMap:Jy,setErrorMap:Zre,getErrorMap:Zv,makeIssue:zv,EMPTY_PATH:zre,addIssueToContext:gt,ParseStatus:Fs,INVALID:jt,DIRTY:$O,OK:ni,isAborted:M_,isDirty:U_,isValid:eb,isAsync:Gv,get util(){return gn},get objectUtil(){return D_},ZodParsedType:ft,getParsedType:nd,ZodType:Xt,ZodString:Aa,ZodNumber:gd,ZodBigInt:yd,ZodBoolean:tb,ZodDate:ff,ZodSymbol:Hv,ZodUndefined:nb,ZodNull:rb,ZodAny:Tm,ZodUnknown:Qh,ZodNever:Zl,ZodVoid:Xv,ZodArray:Ra,ZodObject:dr,ZodUnion:sb,ZodDiscriminatedUnion:O2,ZodIntersection:ib,ZodTuple:zc,ZodRecord:ob,ZodMap:Wv,ZodSet:pf,ZodFunction:hm,ZodLazy:ab,ZodLiteral:cb,ZodEnum:bd,ZodNativeEnum:lb,ZodPromise:Am,ZodEffects:Oa,ZodTransformer:Oa,ZodOptional:$l,ZodNullable:mf,ZodDefault:ub,ZodCatch:Vv,ZodNaN:Kv,BRAND:tse,ZodBranded:BO,ZodPipeline:Ob,ZodReadonly:Yv,custom:FO,Schema:Xt,ZodSchema:Xt,late:nse,get ZodFirstPartyTypeKind(){return Mt},coerce:Use,any:use,array:pse,bigint:ise,boolean:GO,date:ose,discriminatedUnion:bse,effect:fN,enum:Ase,function:_se,instanceof:rse,intersection:wse,lazy:xse,literal:Tse,map:Cse,nan:sse,nativeEnum:Ise,never:hse,null:lse,nullable:Ose,number:zO,object:mse,oboolean:Mse,onumber:Dse,optional:Rse,ostring:Lse,pipeline:kse,preprocess:Pse,promise:Nse,record:Ese,set:Sse,strictObject:gse,string:ZO,symbol:ase,transformer:fN,tuple:vse,undefined:cse,union:yse,unknown:dse,void:fse,NEVER:$se,ZodIssueCode:rt,quotelessJson:Fre,ZodError:Na});const yr=q.object({message:q.string()});function pt(t){return q.literal(bt[t])}const P2=q.object({serializedMessage:q.string().optional(),accountAddress:q.string(),chainId:q.string(),notBefore:q.string().optional(),domain:q.string(),uri:q.string(),version:q.string(),nonce:q.string(),statement:q.string().optional(),resources:q.array(q.string()).optional(),requestId:q.string().optional(),issuedAt:q.string().optional(),expirationTime:q.string().optional()});q.object({accessList:q.array(q.string()),blockHash:q.string().nullable(),blockNumber:q.string().nullable(),chainId:q.string().or(q.number()),from:q.string(),gas:q.string(),hash:q.string(),input:q.string().nullable(),maxFeePerGas:q.string(),maxPriorityFeePerGas:q.string(),nonce:q.string(),r:q.string(),s:q.string(),to:q.string(),transactionIndex:q.string().nullable(),type:q.string(),v:q.string(),value:q.string()});const jse=q.object({chainId:q.string().or(q.number()),rpcUrl:q.optional(q.string())}),Bse=q.object({email:q.string().email()}),Fse=q.object({otp:q.string()}),Zse=q.object({uri:q.string(),preferredAccountType:q.optional(q.string()),chainId:q.optional(q.string().or(q.number())),siwxMessage:q.optional(P2),rpcUrl:q.optional(q.string())}),zse=q.object({chainId:q.optional(q.string().or(q.number())),preferredAccountType:q.optional(q.string()),socialUri:q.optional(q.string()),siwxMessage:q.optional(P2),rpcUrl:q.optional(q.string())}),Gse=q.object({provider:q.enum(["google","github","apple","facebook","x","discord"])}),Hse=q.object({email:q.string().email()}),Xse=q.object({otp:q.string()}),Wse=q.object({otp:q.string()}),Vse=q.object({themeMode:q.optional(q.enum(["light","dark"])),themeVariables:q.optional(q.record(q.string(),q.string().or(q.number()))),w3mThemeVariables:q.optional(q.record(q.string(),q.string()))}),Kse=q.object({metadata:q.object({name:q.string(),description:q.string(),url:q.string(),icons:q.array(q.string())}).optional(),sdkVersion:q.string().optional(),sdkType:q.string().optional(),projectId:q.string()}),Yse=q.object({type:q.string()}),qse=q.object({action:q.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),Qse=q.object({url:q.string()}),Jse=q.object({userName:q.string()}),eie=q.object({email:q.string().optional().nullable(),address:q.string(),chainId:q.string().or(q.number()),accounts:q.array(q.object({address:q.string(),type:q.enum([Ur.ACCOUNT_TYPES.EOA,Ur.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:q.string().optional().nullable(),preferredAccountType:q.optional(q.string()),signature:q.string().optional(),message:q.string().optional(),siwxMessage:q.optional(P2)}),tie=q.object({action:q.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),nie=q.object({email:q.string().email().optional().nullable(),address:q.string(),chainId:q.string().or(q.number()),smartAccountDeployed:q.optional(q.boolean()),accounts:q.array(q.object({address:q.string(),type:q.enum([Ur.ACCOUNT_TYPES.EOA,Ur.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:q.optional(q.string()),signature:q.string().optional(),message:q.string().optional(),siwxMessage:q.optional(P2)}),rie=q.object({uri:q.string()}),sie=q.object({isConnected:q.boolean()}),iie=q.object({chainId:q.string().or(q.number())}),oie=q.object({chainId:q.string().or(q.number())}),aie=q.object({newEmail:q.string().email()}),cie=q.object({smartAccountEnabledNetworks:q.array(q.number())});q.object({address:q.string(),isDeployed:q.boolean()});const lie=q.object({version:q.string().optional()}),uie=q.object({type:q.string(),address:q.string()}),die=q.any(),hie=q.object({method:q.literal("eth_accounts")}),fie=q.object({method:q.literal("eth_blockNumber")}),pie=q.object({method:q.literal("eth_call"),params:q.array(q.any())}),mie=q.object({method:q.literal("eth_chainId")}),gie=q.object({method:q.literal("eth_estimateGas"),params:q.array(q.any())}),yie=q.object({method:q.literal("eth_feeHistory"),params:q.array(q.any())}),bie=q.object({method:q.literal("eth_gasPrice")}),wie=q.object({method:q.literal("eth_getAccount"),params:q.array(q.any())}),vie=q.object({method:q.literal("eth_getBalance"),params:q.array(q.any())}),Eie=q.object({method:q.literal("eth_getBlockByHash"),params:q.array(q.any())}),Cie=q.object({method:q.literal("eth_getBlockByNumber"),params:q.array(q.any())}),Sie=q.object({method:q.literal("eth_getBlockReceipts"),params:q.array(q.any())}),_ie=q.object({method:q.literal("eth_getBlockTransactionCountByHash"),params:q.array(q.any())}),xie=q.object({method:q.literal("eth_getBlockTransactionCountByNumber"),params:q.array(q.any())}),Tie=q.object({method:q.literal("eth_getCode"),params:q.array(q.any())}),Aie=q.object({method:q.literal("eth_getFilterChanges"),params:q.array(q.any())}),Iie=q.object({method:q.literal("eth_getFilterLogs"),params:q.array(q.any())}),Nie=q.object({method:q.literal("eth_getLogs"),params:q.array(q.any())}),Rie=q.object({method:q.literal("eth_getProof"),params:q.array(q.any())}),Oie=q.object({method:q.literal("eth_getStorageAt"),params:q.array(q.any())}),Pie=q.object({method:q.literal("eth_getTransactionByBlockHashAndIndex"),params:q.array(q.any())}),kie=q.object({method:q.literal("eth_getTransactionByBlockNumberAndIndex"),params:q.array(q.any())}),Lie=q.object({method:q.literal("eth_getTransactionByHash"),params:q.array(q.any())}),Die=q.object({method:q.literal("eth_getTransactionCount"),params:q.array(q.any())}),Mie=q.object({method:q.literal("eth_getTransactionReceipt"),params:q.array(q.any())}),Uie=q.object({method:q.literal("eth_getUncleCountByBlockHash"),params:q.array(q.any())}),$ie=q.object({method:q.literal("eth_getUncleCountByBlockNumber"),params:q.array(q.any())}),jie=q.object({method:q.literal("eth_maxPriorityFeePerGas")}),Bie=q.object({method:q.literal("eth_newBlockFilter")}),Fie=q.object({method:q.literal("eth_newFilter"),params:q.array(q.any())}),Zie=q.object({method:q.literal("eth_newPendingTransactionFilter")}),zie=q.object({method:q.literal("eth_sendRawTransaction"),params:q.array(q.any())}),Gie=q.object({method:q.literal("eth_syncing"),params:q.array(q.any())}),Hie=q.object({method:q.literal("eth_uninstallFilter"),params:q.array(q.any())}),pN=q.object({method:q.literal("personal_sign"),params:q.array(q.any())}),Xie=q.object({method:q.literal("eth_signTypedData_v4"),params:q.array(q.any())}),Wie=q.object({method:q.literal("eth_sendTransaction"),params:q.array(q.any())}),Vie=q.object({method:q.literal("solana_signMessage"),params:q.object({message:q.string(),pubkey:q.string()})}),Kie=q.object({method:q.literal("solana_signTransaction"),params:q.object({transaction:q.string()})}),Yie=q.object({method:q.literal("solana_signAllTransactions"),params:q.object({transactions:q.array(q.string())})}),qie=q.object({method:q.literal("solana_signAndSendTransaction"),params:q.object({transaction:q.string(),options:q.object({skipPreflight:q.boolean().optional(),preflightCommitment:q.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:q.number().optional(),minContextSlot:q.number().optional()}).optional()})}),Qie=q.object({method:q.literal("wallet_sendCalls"),params:q.array(q.object({chainId:q.string().or(q.number()).optional(),from:q.string().optional(),version:q.string().optional(),capabilities:q.any().optional(),calls:q.array(q.object({to:q.string().startsWith("0x"),data:q.string().startsWith("0x").optional(),value:q.string().optional()}))}))}),Jie=q.object({method:q.literal("wallet_getCallsStatus"),params:q.array(q.string())}),eoe=q.object({method:q.literal("wallet_getCapabilities"),params:q.array(q.string().or(q.number()).optional()).optional()}),toe=q.object({method:q.literal("wallet_grantPermissions"),params:q.array(q.any())}),noe=q.object({method:q.literal("wallet_revokePermissions"),params:q.any()}),roe=q.object({method:q.literal("wallet_getAssets"),params:q.any()}),mN=q.object({token:q.string()}),mt=q.object({id:q.string().optional()}),sS={appEvent:mt.extend({type:pt("APP_SWITCH_NETWORK"),payload:jse}).or(mt.extend({type:pt("APP_CONNECT_EMAIL"),payload:Bse})).or(mt.extend({type:pt("APP_CONNECT_DEVICE")})).or(mt.extend({type:pt("APP_CONNECT_OTP"),payload:Fse})).or(mt.extend({type:pt("APP_CONNECT_SOCIAL"),payload:Zse})).or(mt.extend({type:pt("APP_GET_FARCASTER_URI")})).or(mt.extend({type:pt("APP_CONNECT_FARCASTER")})).or(mt.extend({type:pt("APP_GET_USER"),payload:q.optional(zse)})).or(mt.extend({type:pt("APP_GET_SOCIAL_REDIRECT_URI"),payload:Gse})).or(mt.extend({type:pt("APP_SIGN_OUT")})).or(mt.extend({type:pt("APP_IS_CONNECTED"),payload:q.optional(mN)})).or(mt.extend({type:pt("APP_GET_CHAIN_ID")})).or(mt.extend({type:pt("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(mt.extend({type:pt("APP_INIT_SMART_ACCOUNT")})).or(mt.extend({type:pt("APP_SET_PREFERRED_ACCOUNT"),payload:Yse})).or(mt.extend({type:pt("APP_RPC_REQUEST"),payload:pN.or(roe).or(hie).or(fie).or(pie).or(mie).or(gie).or(yie).or(bie).or(wie).or(vie).or(Eie).or(Cie).or(Sie).or(_ie).or(xie).or(Tie).or(Aie).or(Iie).or(Nie).or(Rie).or(Oie).or(Pie).or(kie).or(Lie).or(Die).or(Mie).or(Uie).or($ie).or(jie).or(Bie).or(Fie).or(Zie).or(zie).or(Gie).or(Hie).or(pN).or(Xie).or(Wie).or(Vie).or(Kie).or(Yie).or(qie).or(Jie).or(Qie).or(eoe).or(toe).or(noe).and(q.object({chainId:q.string().or(q.number()).optional(),chainNamespace:q.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:q.string().optional()}))})).or(mt.extend({type:pt("APP_UPDATE_EMAIL"),payload:Hse})).or(mt.extend({type:pt("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:Xse})).or(mt.extend({type:pt("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:Wse})).or(mt.extend({type:pt("APP_SYNC_THEME"),payload:Vse})).or(mt.extend({type:pt("APP_SYNC_DAPP_DATA"),payload:Kse})).or(mt.extend({type:pt("APP_RELOAD")})).or(mt.extend({type:pt("APP_RPC_ABORT")})),frameEvent:mt.extend({type:pt("FRAME_SWITCH_NETWORK_ERROR"),payload:yr}).or(mt.extend({type:pt("FRAME_SWITCH_NETWORK_SUCCESS"),payload:oie})).or(mt.extend({type:pt("FRAME_CONNECT_EMAIL_SUCCESS"),payload:qse})).or(mt.extend({type:pt("FRAME_CONNECT_EMAIL_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:Qse})).or(mt.extend({type:pt("FRAME_GET_FARCASTER_URI_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:Jse})).or(mt.extend({type:pt("FRAME_CONNECT_FARCASTER_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_CONNECT_OTP_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_CONNECT_OTP_SUCCESS")})).or(mt.extend({type:pt("FRAME_CONNECT_DEVICE_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_CONNECT_DEVICE_SUCCESS")})).or(mt.extend({type:pt("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:eie})).or(mt.extend({type:pt("FRAME_CONNECT_SOCIAL_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_GET_USER_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_GET_USER_SUCCESS"),payload:nie})).or(mt.extend({type:pt("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:rie})).or(mt.extend({type:pt("FRAME_SIGN_OUT_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_SIGN_OUT_SUCCESS")})).or(mt.extend({type:pt("FRAME_IS_CONNECTED_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_IS_CONNECTED_SUCCESS"),payload:sie})).or(mt.extend({type:pt("FRAME_GET_CHAIN_ID_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_GET_CHAIN_ID_SUCCESS"),payload:iie})).or(mt.extend({type:pt("FRAME_RPC_REQUEST_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_RPC_REQUEST_SUCCESS"),payload:die})).or(mt.extend({type:pt("FRAME_SESSION_UPDATE"),payload:mN})).or(mt.extend({type:pt("FRAME_UPDATE_EMAIL_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_UPDATE_EMAIL_SUCCESS"),payload:tie})).or(mt.extend({type:pt("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(mt.extend({type:pt("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:aie})).or(mt.extend({type:pt("FRAME_SYNC_THEME_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_SYNC_THEME_SUCCESS")})).or(mt.extend({type:pt("FRAME_SYNC_DAPP_DATA_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(mt.extend({type:pt("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:cie})).or(mt.extend({type:pt("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:uie})).or(mt.extend({type:pt("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_READY"),payload:lie})).or(mt.extend({type:pt("FRAME_RELOAD_ERROR"),payload:yr})).or(mt.extend({type:pt("FRAME_RELOAD_SUCCESS")}))};function iS(t,e={}){return typeof e?.type=="string"&&e?.type?.includes(t)}function soe({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=Oe.BLOCKCHAIN_API_RPC_URL}){const o=new URL(v7);return o.searchParams.set("projectId",t),o.searchParams.set("chainId",String(e)),o.searchParams.set("version",n),o.searchParams.set("enableLogger",String(r)),o.searchParams.set("rpcUrl",s),o.toString()}class ioe{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:o=Oe.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const c=document.getElementById("w3m-iframe");this.iframe&&!c&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(c,l,p)=>{function m({data:y}){if(!iS(bt.FRAME_EVENT_KEY,y))return;const v=sS.frameEvent.safeParse(y);if(!v.success){console.warn("W3mFrame: invalid frame event",v.error.message);return}v.data?.id===c&&(l(v.data),window.removeEventListener("message",m))}Ji.isClient&&(window.addEventListener("message",m),p.addEventListener("abort",()=>{window.removeEventListener("message",m)}))},onFrameEvent:c=>{Ji.isClient&&window.addEventListener("message",({data:l})=>{if(!iS(bt.FRAME_EVENT_KEY,l))return;const p=sS.frameEvent.safeParse(l);p.success?c(p.data):console.warn("W3mFrame: invalid frame event",p.error.message)})},onAppEvent:c=>{Ji.isClient&&window.addEventListener("message",({data:l})=>{if(!iS(bt.APP_EVENT_KEY,l))return;const p=sS.appEvent.safeParse(l);p.success||console.warn("W3mFrame: invalid app event",p.error.message),c(l)})},postAppEvent:c=>{if(Ji.isClient){if(!this.iframe?.contentWindow)throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(c,"*")}},postFrameEvent:c=>{if(Ji.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(c,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((c,l)=>{this.frameLoadPromiseResolver={resolve:c,reject:l}}),this.rpcUrl=o,n&&(this.frameLoadPromise=new Promise((c,l)=>{this.frameLoadPromiseResolver={resolve:c,reject:l}}),Ji.isClient)){const c=document.createElement("iframe");c.id="w3m-iframe",c.src=soe({projectId:e,chainId:r,version:C7,enableLogger:s,rpcUrl:this.rpcUrl}),c.name="w3m-secure-iframe",c.style.position="fixed",c.style.zIndex="999999",c.style.display="none",c.style.border="none",c.style.animationDelay="0s, 50ms",c.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",c.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=c,this.iframe.onerror=()=>{this.frameLoadPromiseResolver?.reject("Unable to load email login dependency")},this.events.onFrameEvent(l=>{l.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,this.frameLoadPromiseResolver?.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class ooe{constructor(e){const n=Dm({level:E7}),{logger:r,chunkLoggerController:s}=C5({opts:n});this.logger=Zs(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&this.chunkLoggerController?.downloadLogsBlobInBrowser&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{this.chunkLoggerController?.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class aoe{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:o,getActiveCaipNetwork:c}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new ooe(e)),this.abortController=o,this.getActiveCaipNetwork=c;const l=this.getRpcUrl(n);this.w3mFrame=new ioe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:l}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===bt.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!ms.get(bt.EMAIL_LOGIN_USED_KEY)}getEmail(){return ms.get(bt.EMAIL)}getUsername(){return ms.get(bt.SOCIAL_USERNAME)}async reload(){try{await this.appEvent({type:bt.APP_RELOAD})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error reloading iframe"),e}}async connectEmail(e){try{Ji.checkIfAllowedToTriggerEmail(),await this.init();const n=await this.appEvent({type:bt.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting email"),n}}async connectDevice(){try{return this.appEvent({type:bt.APP_CONNECT_DEVICE})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting device"),e}}async connectOtp(e){try{return this.appEvent({type:bt.APP_CONNECT_OTP,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting otp"),n}}async isConnected(){try{if(!this.getLoginEmailUsed())return{isConnected:!1};const e=await this.appEvent({type:bt.APP_IS_CONNECTED});return e?.isConnected||this.deleteAuthLoginCache(),e}catch(e){throw this.deleteAuthLoginCache(),this.w3mLogger?.logger.error({error:e},"Error checking connection"),e}}async getChainId(){try{const e=await this.appEvent({type:bt.APP_GET_CHAIN_ID});return this.setLastUsedChainId(e.chainId),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting chain id"),e}}async getSocialRedirectUri(e){try{return await this.init(),this.appEvent({type:bt.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error getting social redirect uri"),n}}async updateEmail(e){try{const n=await this.appEvent({type:bt.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),n}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error updating email"),n}}async updateEmailPrimaryOtp(e){try{return this.appEvent({type:bt.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error updating email primary otp"),n}}async updateEmailSecondaryOtp(e){try{const n=await this.appEvent({type:bt.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(n.newEmail),n}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error updating email secondary otp"),n}}async syncTheme(e){try{return this.appEvent({type:bt.APP_SYNC_THEME,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error syncing theme"),n}}async syncDappData(e){try{return this.appEvent({type:bt.APP_SYNC_DAPP_DATA,payload:e})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error syncing dapp data"),n}}async getSmartAccountEnabledNetworks(){try{const e=await this.appEvent({type:bt.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(e.smartAccountEnabledNetworks),e}catch(e){throw this.persistSmartAccountEnabledNetworks([]),this.w3mLogger?.logger.error({error:e},"Error getting smart account enabled networks"),e}}async setPreferredAccount(e){try{return this.appEvent({type:bt.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error setting preferred account"),n}}async connect(e){if(e?.socialUri)try{await this.init();const n=this.getRpcUrl(e.chainId),r=await this.appEvent({type:bt.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:n}});return r.userName&&this.setSocialLoginSuccess(r.userName),this.setLoginSuccess(r.email),this.setLastUsedChainId(r.chainId),this.user=r,r}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting social"),n}else try{const n=e?.chainId||this.getLastUsedChainId()||1,r=await this.getUser({chainId:n,preferredAccountType:e?.preferredAccountType,siwxMessage:e?.siwxMessage,rpcUrl:this.getRpcUrl(n)});return this.setLoginSuccess(r.email),this.setLastUsedChainId(r.chainId),this.user=r,r}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting"),n}}async getUser(e){try{await this.init();const n=e?.chainId||this.getLastUsedChainId()||1,r=await this.appEvent({type:bt.APP_GET_USER,payload:{...e,chainId:n}});return this.user=r,r}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting"),n}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){try{await this.init();const s=this.getRpcUrl(n),o=await this.appEvent({type:bt.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:s,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(s){throw this.w3mLogger?.logger.error({error:s},"Error connecting social"),s}}async getFarcasterUri(){try{return await this.init(),await this.appEvent({type:bt.APP_GET_FARCASTER_URI})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting farcaster uri"),e}}async connectFarcaster(){try{const e=await this.appEvent({type:bt.APP_CONNECT_FARCASTER});return e.userName&&this.setSocialLoginSuccess(e.userName),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting farcaster"),e}}async switchNetwork({chainId:e}){try{const n=this.getRpcUrl(e),r=await this.appEvent({type:bt.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:n}});return this.setLastUsedChainId(r.chainId),r}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error switching network"),n}}async disconnect(){try{return this.deleteAuthLoginCache(),await new Promise(async n=>{const r=setTimeout(()=>{n()},3e3);await this.appEvent({type:bt.APP_SIGN_OUT}),clearTimeout(r),n()})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error disconnecting"),e}}async request(e){const n=e;try{if(Ur.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const r=e.chainNamespace||"eip155",s=this.getActiveCaipNetwork(r)?.id;n.chainNamespace=r,n.chainId=s,n.rpcUrl=this.getRpcUrl(s),this.rpcRequestHandler?.(e);const o=await this.appEvent({type:bt.APP_RPC_REQUEST,payload:n});return this.rpcSuccessHandler?.(o,n),o}catch(r){throw this.rpcErrorHandler?.(r,n),this.w3mLogger?.logger.error({error:r},"Error requesting"),r}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===bt.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===bt.FRAME_IS_CONNECTED_ERROR&&e(),n.type===bt.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===bt.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===bt.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===bt.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===bt.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Ur.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){try{await Promise.all(this.openRpcRequests.map(async({abortController:e,method:n})=>{Ur.SAFE_RPC_METHODS.includes(n)||e.abort(),await this.appEvent({type:bt.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(e){this.w3mLogger?.logger.error({error:e},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(p){return p.replace("@w3m-app/","")}const o=[bt.APP_SYNC_DAPP_DATA,bt.APP_SYNC_THEME,bt.APP_SET_PREFERRED_ACCOUNT],c=s(e.type);return!this.w3mFrame.iframeIsReady&&!o.includes(e.type)&&(r=setTimeout(()=>{this.onTimeout?.("iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[bt.APP_CONNECT_EMAIL,bt.APP_CONNECT_DEVICE,bt.APP_CONNECT_OTP,bt.APP_CONNECT_SOCIAL,bt.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(c)&&(n=setTimeout(()=>{this.onTimeout?.("iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((p,m)=>{const y=Math.random().toString(36).substring(7);this.w3mLogger?.logger.info?.({event:e,id:y},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:y});const v=new AbortController;if(c==="RPC_REQUEST"){const _=e;this.openRpcRequests=[...this.openRpcRequests,{..._.payload,abortController:v}]}v.signal.addEventListener("abort",()=>{c==="RPC_REQUEST"?m(new Error("Request was aborted")):c!=="GET_FARCASTER_URI"&&m(new Error("Something went wrong"))});function S(_,A){_.id===y&&(A?.logger.info?.({framEvent:_,id:y},"Received frame response"),_.type===`@w3m-frame/${c}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in _&&p(_.payload),p(void 0)):_.type===`@w3m-frame/${c}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in _&&m(new Error(_.payload?.message||"An error occurred")),m(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(y,_=>S(_,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){ms.set(bt.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){ms.set(bt.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&ms.set(bt.EMAIL,e),ms.set(bt.EMAIL_LOGIN_USED_KEY,"true"),ms.delete(bt.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){ms.delete(bt.EMAIL_LOGIN_USED_KEY),ms.delete(bt.EMAIL),ms.delete(bt.LAST_USED_CHAIN_KEY),ms.delete(bt.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&ms.set(bt.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=ms.get(bt.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){ms.set(bt.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){let n=e===void 0?void 0:"eip155";return typeof e=="string"&&(e.includes(":")?n=Ii.parseCaipNetworkId(e)?.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana"),this.getActiveCaipNetwork(n)?.rpcUrls.default.http?.[0]}}class Jh{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:o,getActiveCaipNetwork:c}){return Jh.instance||(Jh.instance=new aoe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:o,getActiveCaipNetwork:c})),Jh.instance}}var gN={};const coe={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof gN<"u"?gN.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},j_={filterOutDuplicatesByRDNS(t){const e=Ke.state.enableEIP6963?at.state.connectors:[],n=nt.getRecentWallets(),r=e.map(l=>l.info?.rdns).filter(Boolean),s=n.map(l=>l.rdns).filter(Boolean),o=r.concat(s);if(o.includes("io.metamask.mobile")&&yt.isMobile()){const l=o.indexOf("io.metamask.mobile");o[l]="io.metamask"}return t.filter(l=>!(l?.rdns&&o.includes(String(l.rdns))||!l?.rdns&&e.some(m=>m.name===l.name)))},filterOutDuplicatesByIds(t){const e=at.state.connectors.filter(l=>l.type==="ANNOUNCED"||l.type==="INJECTED"),n=nt.getRecentWallets(),r=e.map(l=>l.explorerId),s=n.map(l=>l.id),o=r.concat(s);return t.filter(l=>!o.includes(l?.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=at.state,{featuredWalletIds:n}=Ke.state,r=e.filter(c=>c.type==="ANNOUNCED").reduce((c,l)=>(l.info?.rdns&&(c[l.info.rdns]=!0),c),{});return t.map(c=>({...c,installed:!!c.rdns&&!!r[c.rdns??""]})).sort((c,l)=>{const p=Number(l.installed)-Number(c.installed);if(p!==0)return p;if(n?.length){const m=n.indexOf(c.id),y=n.indexOf(l.id);if(m!==-1&&y!==-1)return m-y;if(m!==-1)return-1;if(y!==-1)return 1}return 0})},getConnectOrderMethod(t,e){const n=t?.connectMethodsOrder||Ke.state.features?.connectMethodsOrder,r=e||at.state.connectors;if(n)return n;const{injected:s,announced:o}=cv.getConnectorsByType(r,Tt.state.recommended,Tt.state.featured),c=s.filter(cv.showConnector),l=o.filter(cv.showConnector);return c.length||l.length?["wallet","email","social"]:coe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Tt.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Tt.state.excludedWallets.some(r=>Jr.isLowerCaseMatch(r.name,t.name));return e||n},markWalletsWithDisplayIndex(t){return t.map((e,n)=>({...e,display_index:n}))}},cv={getConnectorsByType(t,e,n){const{customWallets:r}=Ke.state,s=nt.getRecentWallets(),o=j_.filterOutDuplicateWallets(e),c=j_.filterOutDuplicateWallets(n),l=t.filter(v=>v.type==="MULTI_CHAIN"),p=t.filter(v=>v.type==="ANNOUNCED"),m=t.filter(v=>v.type==="INJECTED"),y=t.filter(v=>v.type==="EXTERNAL");return{custom:r,recent:s,external:y,multiChain:l,announced:p,injected:m,recommended:o,featured:c}},showConnector(t){const e=t.info?.rdns,n=!!e&&Tt.state.excludedWallets.some(s=>!!s.rdns&&s.rdns===e),r=!!t.name&&Tt.state.excludedWallets.some(s=>Jr.isLowerCaseMatch(s.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!yt.isMobile()||yt.isMobile()&&!e&&!ut.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(ae.state.chains.values()).some(n=>at.getConnectorId(n.namespace)===Oe.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:o,multiChain:c,external:l,overriddenConnectors:p=Ke.state.features?.connectorTypeOrder??[]}){const v=[{type:"walletConnect",isEnabled:Ke.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...o,...s,...c].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:l.length>0},{type:"recommended",isEnabled:t.length>0}].filter(N=>N.isEnabled),S=new Set(v.map(N=>N.type)),_=p.filter(N=>S.has(N)).map(N=>({type:N,isEnabled:!0})),A=v.filter(({type:N})=>!_.some(({type:$})=>$===N));return Array.from(new Set([..._,...A].map(({type:N})=>N)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){try{if(t.name==="Browser Wallet"&&!yt.isMobile())return{accounts:[],chainId:void 0};if(t.id===Oe.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[e,n]=await Promise.all([t.provider?.request({method:"eth_accounts"}),t.provider?.request({method:"eth_chainId"}).then(r=>Number(r))]);return{accounts:e,chainId:n}}catch(e){return console.warn(`Failed to fetch provider data for ${t.name}`,e),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const lv=globalThis,ex=lv.ShadowRoot&&(lv.ShadyCSS===void 0||lv.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,tx=Symbol(),yN=new WeakMap;let HO=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==tx)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(ex&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=yN.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&yN.set(n,e))}return e}toString(){return this.cssText}};const No=t=>new HO(typeof t=="string"?t:t+"",void 0,tx),fm=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,o)=>r+(c=>{if(c._$cssResult$===!0)return c.cssText;if(typeof c=="number")return c;throw Error("Value passed to 'css' function must be a 'css' function result: "+c+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[o+1],t[0]);return new HO(n,t,tx)},loe=(t,e)=>{if(ex)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=lv.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},bN=ex?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return No(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:uoe,defineProperty:doe,getOwnPropertyDescriptor:hoe,getOwnPropertyNames:foe,getOwnPropertySymbols:poe,getPrototypeOf:moe}=Object,k2=globalThis,wN=k2.trustedTypes,goe=wN?wN.emptyScript:"",yoe=k2.reactiveElementPolyfillSupport,yy=(t,e)=>t,B_={toAttribute(t,e){switch(e){case Boolean:t=t?goe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},XO=(t,e)=>!uoe(t,e),vN={attribute:!0,type:String,converter:B_,reflect:!1,useDefault:!1,hasChanged:XO};Symbol.metadata??=Symbol("metadata"),k2.litPropertyMetadata??=new WeakMap;let im=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=vN){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&doe(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:o}=hoe(this.prototype,e)??{get(){return this[n]},set(c){this[n]=c}};return{get:s,set(c){const l=s?.call(this);o?.call(this,c),this.requestUpdate(e,l,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??vN}static _$Ei(){if(this.hasOwnProperty(yy("elementProperties")))return;const e=moe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(yy("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(yy("properties"))){const n=this.properties,r=[...foe(n),...poe(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(bN(s))}else e!==void 0&&n.push(bN(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return loe(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(r.converter?.toAttribute!==void 0?r.converter:B_).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const o=r.getPropertyOptions(s),c=typeof o.converter=="function"?{fromAttribute:o.converter}:o.converter?.fromAttribute!==void 0?o.converter:B_;this._$Em=s;const l=c.fromAttribute(n,o.type);this[s]=l??this._$Ej?.get(s)??l,this._$Em=null}}requestUpdate(e,n,r){if(e!==void 0){const s=this.constructor,o=this[e];if(r??=s.getPropertyOptions(e),!((r.hasChanged??XO)(o,n)||r.useDefault&&r.reflect&&o===this._$Ej?.get(e)&&!this.hasAttribute(s._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:o},c){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,c??n??this[e]),o!==!0||c!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const r=this.constructor.elementProperties;if(r.size>0)for(const[s,o]of r){const{wrapped:c}=o,l=this[s];c!==!0||this._$AL.has(s)||l===void 0||this.C(s,void 0,o,l)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),this._$EO?.forEach(r=>r.hostUpdate?.()),this.update(n)):this._$EM()}catch(r){throw e=!1,this._$EM(),r}e&&this._$AE(n)}willUpdate(e){}_$AE(e){this._$EO?.forEach(n=>n.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(n=>this._$ET(n,this[n])),this._$EM()}updated(e){}firstUpdated(e){}};im.elementStyles=[],im.shadowRootOptions={mode:"open"},im[yy("elementProperties")]=new Map,im[yy("finalized")]=new Map,yoe?.({ReactiveElement:im}),(k2.reactiveElementVersions??=[]).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const nx=globalThis,qv=nx.trustedTypes,EN=qv?qv.createPolicy("lit-html",{createHTML:t=>t}):void 0,WO="$lit$",rd=`lit$${Math.random().toFixed(9).slice(2)}$`,VO="?"+rd,boe=`<${VO}>`,gf=document,db=()=>gf.createComment(""),hb=t=>t===null||typeof t!="object"&&typeof t!="function",rx=Array.isArray,woe=t=>rx(t)||typeof t?.[Symbol.iterator]=="function",oS=`[ 	
\f\r]`,Y0=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,CN=/-->/g,SN=/>/g,Uh=RegExp(`>|${oS}(?:([^\\s"'>=/]+)(${oS}*=${oS}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),_N=/'/g,xN=/"/g,KO=/^(?:script|style|textarea|title)$/i,YO=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),jce=YO(1),Bce=YO(2),Im=Symbol.for("lit-noChange"),Qr=Symbol.for("lit-nothing"),TN=new WeakMap,qh=gf.createTreeWalker(gf,129);function qO(t,e){if(!rx(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return EN!==void 0?EN.createHTML(e):e}const voe=(t,e)=>{const n=t.length-1,r=[];let s,o=e===2?"<svg>":e===3?"<math>":"",c=Y0;for(let l=0;l<n;l++){const p=t[l];let m,y,v=-1,S=0;for(;S<p.length&&(c.lastIndex=S,y=c.exec(p),y!==null);)S=c.lastIndex,c===Y0?y[1]==="!--"?c=CN:y[1]!==void 0?c=SN:y[2]!==void 0?(KO.test(y[2])&&(s=RegExp("</"+y[2],"g")),c=Uh):y[3]!==void 0&&(c=Uh):c===Uh?y[0]===">"?(c=s??Y0,v=-1):y[1]===void 0?v=-2:(v=c.lastIndex-y[2].length,m=y[1],c=y[3]===void 0?Uh:y[3]==='"'?xN:_N):c===xN||c===_N?c=Uh:c===CN||c===SN?c=Y0:(c=Uh,s=void 0);const _=c===Uh&&t[l+1].startsWith("/>")?" ":"";o+=c===Y0?p+boe:v>=0?(r.push(m),p.slice(0,v)+WO+p.slice(v)+rd+_):p+rd+(v===-2?l:_)}return[qO(t,o+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class fb{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let o=0,c=0;const l=e.length-1,p=this.parts,[m,y]=voe(e,n);if(this.el=fb.createElement(m,r),qh.currentNode=this.el.content,n===2||n===3){const v=this.el.content.firstChild;v.replaceWith(...v.childNodes)}for(;(s=qh.nextNode())!==null&&p.length<l;){if(s.nodeType===1){if(s.hasAttributes())for(const v of s.getAttributeNames())if(v.endsWith(WO)){const S=y[c++],_=s.getAttribute(v).split(rd),A=/([.?@])?(.*)/.exec(S);p.push({type:1,index:o,name:A[2],strings:_,ctor:A[1]==="."?Coe:A[1]==="?"?Soe:A[1]==="@"?_oe:L2}),s.removeAttribute(v)}else v.startsWith(rd)&&(p.push({type:6,index:o}),s.removeAttribute(v));if(KO.test(s.tagName)){const v=s.textContent.split(rd),S=v.length-1;if(S>0){s.textContent=qv?qv.emptyScript:"";for(let _=0;_<S;_++)s.append(v[_],db()),qh.nextNode(),p.push({type:2,index:++o});s.append(v[S],db())}}}else if(s.nodeType===8)if(s.data===VO)p.push({type:2,index:o});else{let v=-1;for(;(v=s.data.indexOf(rd,v+1))!==-1;)p.push({type:7,index:o}),v+=rd.length-1}o++}}static createElement(e,n){const r=gf.createElement("template");return r.innerHTML=e,r}}function Nm(t,e,n=t,r){if(e===Im)return e;let s=r!==void 0?n._$Co?.[r]:n._$Cl;const o=hb(e)?void 0:e._$litDirective$;return s?.constructor!==o&&(s?._$AO?.(!1),o===void 0?s=void 0:(s=new o(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??=[])[r]=s:n._$Cl=s),s!==void 0&&(e=Nm(t,s._$AS(t,e.values),s,r)),e}class Eoe{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=(e?.creationScope??gf).importNode(n,!0);qh.currentNode=s;let o=qh.nextNode(),c=0,l=0,p=r[0];for(;p!==void 0;){if(c===p.index){let m;p.type===2?m=new Pb(o,o.nextSibling,this,e):p.type===1?m=new p.ctor(o,p.name,p.strings,this,e):p.type===6&&(m=new xoe(o,this,e)),this._$AV.push(m),p=r[++l]}c!==p?.index&&(o=qh.nextNode(),c++)}return qh.currentNode=gf,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class Pb{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=Qr,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e?.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Nm(this,e,n),hb(e)?e===Qr||e==null||e===""?(this._$AH!==Qr&&this._$AR(),this._$AH=Qr):e!==this._$AH&&e!==Im&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):woe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Qr&&hb(this._$AH)?this._$AA.nextSibling.data=e:this.T(gf.createTextNode(e)),this._$AH=e}$(e){const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=fb.createElement(qO(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===s)this._$AH.p(n);else{const o=new Eoe(s,this),c=o.u(this.options);o.p(n),this.T(c),this._$AH=o}}_$AC(e){let n=TN.get(e.strings);return n===void 0&&TN.set(e.strings,n=new fb(e)),n}k(e){rx(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const o of e)s===n.length?n.push(r=new Pb(this.O(db()),this.O(db()),this,this.options)):r=n[s],r._$AI(o),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){for(this._$AP?.(!1,!0,n);e!==this._$AB;){const r=e.nextSibling;e.remove(),e=r}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class L2{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,o){this.type=1,this._$AH=Qr,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=o,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Qr}_$AI(e,n=this,r,s){const o=this.strings;let c=!1;if(o===void 0)e=Nm(this,e,n,0),c=!hb(e)||e!==this._$AH&&e!==Im,c&&(this._$AH=e);else{const l=e;let p,m;for(e=o[0],p=0;p<o.length-1;p++)m=Nm(this,l[r+p],n,p),m===Im&&(m=this._$AH[p]),c||=!hb(m)||m!==this._$AH[p],m===Qr?e=Qr:e!==Qr&&(e+=(m??"")+o[p+1]),this._$AH[p]=m}c&&!s&&this.j(e)}j(e){e===Qr?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Coe extends L2{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Qr?void 0:e}}class Soe extends L2{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Qr)}}class _oe extends L2{constructor(e,n,r,s,o){super(e,n,r,s,o),this.type=5}_$AI(e,n=this){if((e=Nm(this,e,n,0)??Qr)===Im)return;const r=this._$AH,s=e===Qr&&r!==Qr||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,o=e!==Qr&&(r===Qr||s);s&&this.element.removeEventListener(this.name,this,r),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class xoe{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Nm(this,e)}}const Toe=nx.litHtmlPolyfillSupport;Toe?.(fb,Pb),(nx.litHtmlVersions??=[]).push("3.3.1");const Aoe=(t,e,n)=>{const r=n?.renderBefore??e;let s=r._$litPart$;if(s===void 0){const o=n?.renderBefore??null;r._$litPart$=s=new Pb(e.insertBefore(db(),o),o,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const sx=globalThis;class uv extends im{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Aoe(n,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Im}}uv._$litElement$=!0,uv.finalized=!0,sx.litElementHydrateSupport?.({LitElement:uv});const Ioe=sx.litElementPolyfillSupport;Ioe?.({LitElement:uv});(sx.litElementVersions??=[]).push("4.2.1");let by,ud,dd;function Fce(t,e){by=document.createElement("style"),ud=document.createElement("style"),dd=document.createElement("style"),by.textContent=pm(t).core.cssText,ud.textContent=pm(t).dark.cssText,dd.textContent=pm(t).light.cssText,document.head.appendChild(by),document.head.appendChild(ud),document.head.appendChild(dd),QO(e)}function QO(t){ud&&dd&&(t==="light"?(ud.removeAttribute("media"),dd.media="enabled"):(dd.removeAttribute("media"),ud.media="enabled"))}function Noe(t){by&&ud&&dd&&(by.textContent=pm(t).core.cssText,ud.textContent=pm(t).dark.cssText,dd.textContent=pm(t).light.cssText)}function pm(t){return{core:fm`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${No(t?.["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${No(t?.["--w3m-font-family"]||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${No(t?.["--w3m-font-size-master"]||"10px")};
        --w3m-border-radius-master: ${No(t?.["--w3m-border-radius-master"]||"4px")};
        --w3m-z-index: ${No(t?.["--w3m-z-index"]||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:fm`
      :root {
        --w3m-color-mix: ${No(t?.["--w3m-color-mix"]||"#fff")};
        --w3m-accent: ${No(Ll(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${No(Ll(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:fm`
      :root {
        --w3m-color-mix: ${No(t?.["--w3m-color-mix"]||"#000")};
        --w3m-accent: ${No(Ll(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${No(Ll(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const Zce=fm`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,zce=fm`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,Gce=fm`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,dv={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([dv.getAddresses(t),dv.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){const n=e.rpcUrls.chainDefault?.http||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:dv.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[e.blockExplorers?.default.url],iconUrls:[Qi.NetworkImageIds[e.id]]}]})}},tm={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function Gm(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const AN=Gm({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),IN=Gm({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Gm({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Gm({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Gm({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const Roe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Uc={getMethodsByChainNamespace(t){return Roe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[o]=s.split(":");o&&r.add(o)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,o])=>{n[s]&&(n[s].methods=o)}),e.chains&&Object.entries(e.chains).forEach(([s,o])=>{n[s]&&(n[s].chains=o)}),e.events&&Object.entries(e.events).forEach(([s,o])=>{n[s]&&(n[s].events=o)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([o,c])=>{const[l,p]=o.split(":");!l||!p||!n[l]||(n[l].rpcMap||(n[l].rpcMap={}),s.has(l)||(n[l].rpcMap={},s.add(l)),n[l].rpcMap[p]=c)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:o,chainNamespace:c,rpcUrls:l}=s,p=l.default.http[0];r[c]||(r[c]=this.createDefaultNamespace(c));const m=`${c}:${o}`,y=r[c];switch(y.chains.push(m),m){case AN.caipNetworkId:y.chains.push(AN.deprecatedCaipNetworkId);break;case IN.caipNetworkId:y.chains.push(IN.deprecatedCaipNetworkId);break}return y?.rpcMap&&p&&(y.rpcMap[o]=p),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{const e=await ay.resolveName(t);return(Object.values(e?.addresses)||[])[0]?.address||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[o,c]=s.split(":");return`${o}:${c}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const o=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(o,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:o,onDisplayUri:c}){n&&t.on("connect",()=>{const l=Uc.getWalletConnectAccounts(t,e);n(l)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",l=>{if(Uc.isSessionEventData(l)){const{name:p,data:m}=l.params.event;if(p==="accountsChanged"&&Array.isArray(m)){const y=m.filter(v=>yt.isCaipAddress(v)).map(v=>Ii.parseCaipAddress(v)).filter(v=>v.chainNamespace===e);s(y)}}}),o&&t.on("chainChanged",l=>{o(l)}),c&&t.on("display_uri",l=>{c(l)})},getWalletConnectAccounts(t,e){const n=new Set,r=t?.session?.namespaces?.[e]?.accounts?.map(s=>Ii.parseCaipAddress(s)).filter(({address:s})=>n.has(s.toLowerCase())?!1:(n.add(s.toLowerCase()),!0));return r&&r.length>0?r:[]}};class Ooe{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case Oe.CHAIN.EVM:await this.syncEVMConnections(e);break;case Oe.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case Oe.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:o,onListenProvider:c}){await Promise.all(e.filter(l=>{const{hasDisconnected:p,hasConnected:m}=s(l.id);return!p&&m}).map(async l=>{if(l.id===Oe.CONNECTOR_ID.WALLET_CONNECT){const p=Uc.getWalletConnectAccounts(r,this.namespace),m=n.find(y=>y.chainNamespace===this.namespace&&y.id.toString()===p[0]?.chainId?.toString());p.length>0&&o({connectorId:l.id,accounts:p.map(y=>({address:y.address})),caipNetwork:m})}else{const{accounts:p,chainId:m}=await cv.fetchProviderData(l);if(p.length>0&&m){const y=n.find(v=>v.chainNamespace===this.namespace&&v.id.toString()===m.toString());o({connectorId:l.id,accounts:p.map(v=>({address:v})),caipNetwork:y}),l.provider&&l.id!==Oe.CONNECTOR_ID.AUTH&&l.id!==Oe.CONNECTOR_ID.WALLET_CONNECT&&c(l.id,l.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:o,onListenProvider:c}){await Promise.all(e.filter(l=>{const{hasDisconnected:p,hasConnected:m}=s(l.id);return!p&&m}).map(async l=>{if(l.id===Oe.CONNECTOR_ID.WALLET_CONNECT){const p=Uc.getWalletConnectAccounts(r,this.namespace);p.length>0&&o({connectorId:l.id,accounts:p.map(m=>({address:m.address})),caipNetwork:n})}else{const p=await l.connect({chainId:n?.id});p&&(o({connectorId:l.id,accounts:[{address:p}],caipNetwork:n}),c(l.id,l.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:o,onListenProvider:c}){await Promise.all(e.filter(l=>{const{hasDisconnected:p,hasConnected:m}=s(l.id);return!p&&m}).map(async l=>{if(l.id===Oe.CONNECTOR_ID.WALLET_CONNECT){const S=Uc.getWalletConnectAccounts(r,this.namespace);S.length>0&&o({connectorId:l.id,accounts:S.map(_=>({address:_.address})),caipNetwork:n});return}const p=await l.connect();let y=(await l.getAccountAddresses())?.map(S=>yt.createAccount(Oe.CHAIN.BITCOIN,S.address,S.purpose||"payment",S.publicKey,S.path));if(y&&y.length>1&&(y=[{namespace:Oe.CHAIN.BITCOIN,publicKey:y[tm.ACCOUNT_INDEXES.PAYMENT]?.publicKey??"",path:y[tm.ACCOUNT_INDEXES.PAYMENT]?.path??"",address:y[tm.ACCOUNT_INDEXES.PAYMENT]?.address??"",type:"payment"},{namespace:Oe.CHAIN.BITCOIN,publicKey:y[tm.ACCOUNT_INDEXES.ORDINAL]?.publicKey??"",path:y[tm.ACCOUNT_INDEXES.ORDINAL]?.path??"",address:y[tm.ACCOUNT_INDEXES.ORDINAL]?.address??"",type:"ordinal"}]),!(l.chains.find(S=>S.id===n?.id)||l.chains[0]))throw new Error("The connector does not support any of the requested chains");p&&(c(l.id,l.provider),o({connectorId:l.id,accounts:y.map(S=>({address:S.address,type:S.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const c=r.find(m=>Jr.isLowerCaseMatch(m.connectorId,n));if(!c)return null;const l=s.find(m=>Jr.isLowerCaseMatch(m.id,c.connectorId)),p=e?c.accounts.find(m=>Jr.isLowerCaseMatch(m.address,e)):c.accounts[0];return{...c,account:p,connector:l}}const o=r.find(c=>c.accounts.length>0&&s.some(l=>Jr.isLowerCaseMatch(l.id,c.connectorId)));if(o){const[c]=o.accounts,l=s.find(p=>Jr.isLowerCaseMatch(p.id,o.connectorId));return{...o,account:c,connector:l}}return null}}const sy={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};class ix{constructor({provider:e,namespace:n}){this.id=Oe.CONNECTOR_ID.WALLET_CONNECT,this.name=Qi.ConnectorNamesMap[Oe.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Qi.ConnectorImageIds[Oe.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=ae.getCaipNetworks.bind(ae),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=Ke.state.universalProviderConfigOverride,s=Uc.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Do.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:Poe})}}const Poe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],koe=[Oe.CONNECTOR_ID.AUTH,Oe.CONNECTOR_ID.WALLET_CONNECT];class JO{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>ae.getCaipNetworks(n),this.getConnectorId=n=>at.getConnectorId(n),e&&this.construct(e),e?.namespace&&(this.connectionManager=new Ooe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===n?.toString());e&&r&&this.addConnection({connectorId:Oe.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:Oe.CONNECTOR_ID.AUTH,type:"AUTH",name:Oe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Qi.ConnectorImageIds[Oe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!Jr.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){Et.setStatus(e,n)}on(e,n){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,c=to(n.chainNamespace);await o.switchNetwork({chainId:n.caipNetworkId});const l=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:c});this.emit("switchNetwork",l)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof ix);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=yt.getAccount(e[0]),o=this.getCaipNetworks().filter(l=>l.chainNamespace===this.namespace).find(l=>l.id.toString()===s?.toString()),c=this.connectors.find(l=>l.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:c}),this.addConnection({connectorId:n,accounts:e.map(l=>{const{address:p}=yt.getAccount(l);return{address:p}}),caipNetwork:o}))}}onAccountsChanged(e,n,r=!0){if(e.length>0){const{address:s}=yt.getAccount(e[0]),o=this.connectionManager?.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});s&&Jr.isLowerCaseMatch(this.getConnectorId(Oe.CHAIN.EVM),n)&&this.emit("accountChanged",{address:s,chainId:o?.caipNetwork?.id,connector:o?.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=yt.getAccount(c);return{address:l}}),caipNetwork:o?.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Jr.isLowerCaseMatch(this.getConnectorId(Oe.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){const r=typeof e=="string"&&e.startsWith("0x")?dv.hexStringToNumber(e).toString():e.toString(),s=this.connectionManager?.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),o=this.getCaipNetworks().filter(c=>c.chainNamespace===this.namespace).find(c=>c.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:o}),Jr.isLowerCaseMatch(this.getConnectorId(Oe.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(koe.includes(e))return;const r=c=>this.onAccountsChanged(c,e),s=c=>this.onChainChanged(c,e),o=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",o),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:o,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:o}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",o),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){const e=this.connectionManager?.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[n]=e.accounts;this.emit("accountChanged",{address:n?.address,chainId:e.caipNetwork?.id,connector:e.connector})}}}class Loe extends JO{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new ix({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){const r=this.provider?.session?.namespaces?.[e]?.accounts?.map(s=>{const[,,o]=s.split(":");return o}).filter((s,o,c)=>c.indexOf(s)===o)||[];return Promise.resolve({accounts:r.map(s=>yt.createAccount(e,s,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&En.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(Et.state.balanceLoading&&e.chainId===ae.state.activeCaipNetwork?.id)return{balance:Et.state.balance||"0.00",symbol:Et.state.balanceSymbol||""};const s=(await Et.fetchTokenBalance()).find(o=>o.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&o.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:s?.quantity.numeric||"0.00",symbol:s?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let o="";return ae.state.activeCaipNetwork?.chainNamespace===Oe.CHAIN.SOLANA?o=(await n.request({method:"solana_signMessage",params:{message:jm.encode(new TextEncoder().encode(r)),pubkey:s}},ae.state.activeCaipNetwork?.caipNetworkId)).signature:o=await n.request({method:"personal_sign",params:[r,s]},ae.state.activeCaipNetwork?.caipNetworkId),{signature:o}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===Oe.CHAIN.EVM)try{await r.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:gm(n.id)}]})}catch(s){if(s.code===sy.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||s.code===sy.ERROR_INVALID_CHAIN_ID||s.code===sy.ERROR_CODE_DEFAULT||s?.data?.originalError?.code===sy.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await r.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:gm(n.id),rpcUrls:[n?.rpcUrls.chainDefault?.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[n.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(r=>r.type==="WALLET_CONNECT")?.provider}}const Doe=["email","socials","swaps","onramp","activity","reownBranding","multiWallet"],K1={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?En.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?En.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?En.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?En.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?En.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?En.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?En.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?En.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?En.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>En.DEFAULT_REMOTE_FEATURES.multiWallet}},Moe={localSettingsOverridden:new Set,getApiConfig(t,e){return e?.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=K1[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const o=K1[t],c=e[o.localFeatureName];if(s&&!o.isAvailableOnBasic)return!1;if(r){const l=this.getApiConfig(o.apiFeatureName,n);return l?.config===null?this.processFallbackFeature(t,c):l?.config?(c!==void 0&&this.addWarning(c,t),this.processApiFeature(t,l)):!1}return this.processFallbackFeature(t,c)},processApiFeature(t,e){return K1[t].processApi(e)},processFallbackFeature(t,e){return K1[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Tt.fetchProjectConfig(),s=r!=null}catch(c){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",c)}const o=s&&!e?En.DEFAULT_REMOTE_FEATURES:En.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const c of Doe){const l=this.processFeature(c,n,r,s,e);Object.assign(o,{[c]:l})}}catch(c){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",c),En.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const c=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;er.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${c}`},"warning")}return o}};class Uoe{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{if(n){const s=ae.getCaipNetworks(n)?.find(l=>l.id===r);if(s)return s;const o=ae.getNetworkData(n)?.caipNetwork;return o||ae.getRequestedCaipNetworks(n).filter(l=>l.chainNamespace===n)?.[0]}return ae.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>ae.getCaipNetworks(n),this.getActiveChainNamespace=()=>ae.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{ae.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>ae.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>ae.state.activeChain===n||!n?ae.state.activeCaipAddress:ae.getAccountProp("caipAddress",n),this.setClientId=n=>{It.setClientId(n)},this.getProvider=n=>Mn.getProvider(n),this.getProviderType=n=>Mn.getProviderId(n),this.getPreferredAccountType=n=>to(n),this.setCaipAddress=(n,r)=>{Et.setCaipAddress(n,r)},this.setBalance=(n,r,s)=>{Et.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Et.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Et.setProfileImage(n,r)},this.setUser=(n,r)=>{Et.setUser(n,r)},this.resetAccount=n=>{Et.resetAccount(n)},this.setCaipNetwork=n=>{ae.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{ae.setChainNetworkData(r,{caipNetwork:n})},this.setStatus=(n,r)=>{Et.setStatus(n,r),at.isConnected()?nt.setConnectionStatus("connected"):nt.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>ae.getAccountProp("address",n),this.setConnectors=n=>{const r=[...at.state.allConnectors,...n];at.setConnectors(r)},this.setConnections=(n,r)=>{nt.setConnections(n,r),ut.setConnections(n,r)},this.fetchIdentity=n=>It.fetchIdentity(n),this.getReownName=n=>ay.getNamesForAddress(n),this.getConnectors=()=>at.getConnectors(),this.getConnectorImage=n=>HR.getConnectorImage(n),this.getConnections=n=>this.remoteFeatures.multiWallet?xv.getConnectionsData(n).connections:(er.open(Oe.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=n=>this.remoteFeatures.multiWallet?xv.getConnectionsData(n).recentConnections:(er.open(Oe.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async n=>{if(!this.remoteFeatures.multiWallet){er.open(Oe.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await ut.switchConnection(n)},this.deleteConnection=n=>{if(!this.remoteFeatures.multiWallet){er.open(Oe.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}nt.deleteAddressFromConnection(n),ut.syncStorageConnections()},this.setConnectedWalletInfo=(n,r)=>{const s=Mn.getProviderId(r),o=n?{...n,type:s}:void 0;Et.setConnectedWalletInfo(o,r)},this.getIsConnectedState=()=>!!ae.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Et.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Et.removeAddressLabel(n,r)},this.getAddress=n=>ae.state.activeChain===n||!n?Et.state.address:ae.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>ae.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{ae.resetNetwork(n)},this.addConnector=n=>{at.addConnector(n)},this.resetWcConnection=()=>{ut.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Et.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Et.setSmartAccountDeployed(n,r)},this.setPreferredAccountType=(n,r)=>{ae.setAccountProp("preferredAccountType",n,r)},this.setEIP6963Enabled=n=>{Ke.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e?.map(o=>o.namespace).filter(o=>!!o);if(r?.length)return[...new Set(r)];const s=n?.map(o=>o.chainNamespace);return[...new Set(s)]}async initialize(e){this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),Ke.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),this.remoteFeatures=await Moe.fetchRemoteFeatures(e),Ke.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&BS.setOnrampProviders(this.remoteFeatures.onramp),(Ke.state.remoteFeatures?.email||Array.isArray(Ke.state.remoteFeatures?.socials)&&Ke.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await Tt.fetchAllowedOrigins();if(!e||!yt.isClient()){er.open(ur.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;Uc.isOriginAllowed(n,e,sy.DEFAULT_ALLOWED_ANCESTORS)||er.open(ur.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error)){er.open(ur.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":er.open(ur.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;er.open({shortMessage:ur.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:ur.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(n.message)},"error");break}default:er.open(ur.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){const{...n}=e;delete n.adapters,delete n.universalProvider,Rn.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(r=>r.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&xi.setThemeMode(e.themeMode),e.themeVariables&&xi.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");ae.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&ae.setActiveCaipNetwork(n)}initializeConnectionController(e){ut.initialize(e.adapters??[]),ut.setWcBasic(e.basic??!1)}initializeConnectorController(){at.initialize(this.chainNamespaces)}initializeProjectSettings(e){Ke.setProjectId(e.projectId),Ke.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){Ke.setDebug(e.debug!==!1),Ke.setEnableWalletConnect(e.enableWalletConnect!==!1),Ke.setEnableWalletGuide(e.enableWalletGuide!==!1),Ke.setEnableWallets(e.enableWallets!==!1),Ke.setEIP6963Enabled(e.enableEIP6963!==!1),Ke.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),Ke.setEnableReconnect(e.enableReconnect!==!1),Ke.setEnableAuthLogger(e.enableAuthLogger!==!1),Ke.setCustomRpcUrls(e.customRpcUrls),Ke.setEnableEmbedded(e.enableEmbedded),Ke.setAllWallets(e.allWallets),Ke.setIncludeWalletIds(e.includeWalletIds),Ke.setExcludeWalletIds(e.excludeWalletIds),Ke.setFeaturedWalletIds(e.featuredWalletIds),Ke.setTokens(e.tokens),Ke.setTermsConditionsUrl(e.termsConditionsUrl),Ke.setPrivacyPolicyUrl(e.privacyPolicyUrl),Ke.setCustomWallets(e.customWallets),Ke.setFeatures(e.features),Ke.setAllowUnsupportedChain(e.allowUnsupportedChain),Ke.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),Ke.setPreferUniversalLinks(e.experimental_preferUniversalLinks),Ke.setDefaultAccountTypes(e.defaultAccountTypes);const n=this.getDefaultMetaData();if(!e.metadata&&n&&(e.metadata=n),Ke.setMetadata(e.metadata),Ke.setDisableAppend(e.disableAppend),Ke.setEnableEmbedded(e.enableEmbedded),Ke.setSIWX(e.siwx),!e.projectId){er.open(ur.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(s=>s.namespace===Oe.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");Ke.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return yt.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Pc.getUnsupportedNetwork(`${n}:${e}`);ae.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Pc.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Pc.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Pc.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>s.id===e.defaultNetwork?.id);return n?Pc.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e,n){try{this.setLoading(!0,e);let r={connections:[]};const s=this.getAdapter(e),{caipAddress:o}=ae.getAccountData(e)||{};return(o||!Ke.state.enableReconnect)&&s?.disconnect&&(r=await s.disconnect({id:n})),this.setLoading(!1,e),r}catch(r){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${r.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{const e=ae.state.activeChain,n=this.getAdapter(e),r=this.getCaipNetwork(e)?.id,s=ut.getConnections(e),o=this.remoteFeatures.multiWallet,c=s.length>0;if(!n)throw new Error("Adapter not found");const l=await n.connectWalletConnect(r);(!c||!o)&&this.close(),this.setClientId(l?.clientId||null),nt.setConnectedNamespaces([...ae.state.chains.keys()]),await this.syncWalletConnectAccount(),await Do.initializeIfEnabled()},connectExternal:async({id:e,address:n,info:r,type:s,provider:o,chain:c,caipNetwork:l,socialUri:p})=>{const m=ae.state.activeChain,y=c||m,v=this.getAdapter(y);if(c&&c!==m&&!l){const A=this.getCaipNetworks().find(N=>N.chainNamespace===c);A&&this.setCaipNetwork(A)}if(!y)throw new Error("connectExternal: namespace not found");if(!v)throw new Error("connectExternal: adapter not found");const S=this.getCaipNetwork(y),_=await v.connect({id:e,address:n,info:r,type:s,provider:o,socialUri:p,chainId:l?.id||S?.id,rpcUrl:l?.rpcUrls?.default?.http?.[0]||S?.rpcUrls?.default?.http?.[0]});if(_)return nt.addConnectedNamespace(y),this.syncProvider({..._,chainNamespace:y}),this.setStatus("connected",y),this.syncConnectedWalletInfo(y),nt.removeDisconnectedConnectorId(e,y),{address:_.address}},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{const o=ae.state.activeChain,c=this.getAdapter(o);if(!o)throw new Error("reconnectExternal: namespace not found");if(!c)throw new Error("reconnectExternal: adapter not found");c?.reconnect&&(await c?.reconnect({id:e,info:n,type:r,provider:s,chainId:this.getCaipNetwork()?.id}),nt.addConnectedNamespace(o),this.syncConnectedWalletInfo(o))},disconnect:async e=>{const{id:n,chainNamespace:r,initialDisconnect:s}=e||{},o=r||ae.state.activeChain,c=at.getConnectorId(o),l=n===Oe.CONNECTOR_ID.AUTH||c===Oe.CONNECTOR_ID.AUTH,p=n===Oe.CONNECTOR_ID.WALLET_CONNECT||c===Oe.CONNECTOR_ID.WALLET_CONNECT;try{const m=Array.from(ae.state.chains.keys());let y=r?[r]:m;(p||l)&&(y=m);const v=y.map(async A=>{const N=at.getConnectorId(A),R=await this.disconnectNamespace(A,n||N);R&&(l&&nt.deleteConnectedSocialProvider(),R.connections.forEach($=>{nt.addDisconnectedConnectorId($.connectorId,A)})),s&&this.onDisconnectNamespace({chainNamespace:A,closeModal:!1})}),S=await Promise.allSettled(v);vn.resetSend(),ut.resetWcConnection(),Do.getSIWX()?.signOutOnDisconnect&&await Do.clearSessions(),at.setFilterByNamespace(void 0),ut.syncStorageConnections();const _=S.filter(A=>A.status==="rejected");if(_.length>0)throw new Error(_.map(A=>A.reason.message).join(", "));Rn.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:r||"all"}})}catch(m){throw new Error(`Failed to disconnect chains: ${m.message}`)}},checkInstalled:e=>e?e.some(n=>!!window.ethereum?.[String(n)]):!!window.ethereum,signMessage:async e=>{const n=ae.state.activeChain,r=this.getAdapter(ae.state.activeChain);if(!n)throw new Error("signMessage: namespace not found");if(!r)throw new Error("signMessage: adapter not found");return(await r?.signMessage({message:e,address:Et.state.address,provider:Mn.getProvider(n)}))?.signature||""},sendTransaction:async e=>{const n=e.chainNamespace;if(!n)throw new Error("sendTransaction: namespace not found");if(En.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(n);if(!r)throw new Error("sendTransaction: adapter not found");const s=Mn.getProvider(n);return(await r?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}))?.hash||""}return""},estimateGas:async e=>{const n=e.chainNamespace;if(n===Oe.CHAIN.EVM){const r=this.getAdapter(n);if(!r)throw new Error("estimateGas: adapter is required but got undefined");const s=Mn.getProvider(n),o=this.getCaipNetwork();if(!o)throw new Error("estimateGas: caipNetwork is required but got undefined");return(await r?.estimateGas({...e,provider:s,caipNetwork:o}))?.gas||0n}return 0n},getEnsAvatar:async()=>{const e=ae.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");return await this.syncIdentity({address:Et.state.address,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:e}),Et.state.profileImage||!1},getEnsAddress:async e=>await Uc.resolveReownName(e),writeContract:async e=>{const n=ae.state.activeChain,r=this.getAdapter(n);if(!n)throw new Error("writeContract: namespace is required but got undefined");if(!r)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),o=this.getCaipAddress(),c=Mn.getProvider(n);if(!s||!o)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");return(await r?.writeContract({...e,caipNetwork:s,provider:c,caipAddress:o}))?.hash},parseUnits:(e,n)=>{const r=this.getAdapter(ae.state.activeChain);if(!r)throw new Error("parseUnits: adapter is required but got undefined");return r?.parseUnits({value:e,decimals:n})??0n},formatUnits:(e,n)=>{const r=this.getAdapter(ae.state.activeChain);if(!r)throw new Error("formatUnits: adapter is required but got undefined");return r?.formatUnits({value:e,decimals:n})??"0"},getCapabilities:async e=>{const n=this.getAdapter(ae.state.activeChain);if(!n)throw new Error("getCapabilities: adapter is required but got undefined");return await n?.getCapabilities(e)},grantPermissions:async e=>{const n=this.getAdapter(ae.state.activeChain);if(!n)throw new Error("grantPermissions: adapter is required but got undefined");return await n?.grantPermissions(e)},revokePermissions:async e=>{const n=this.getAdapter(ae.state.activeChain);if(!n)throw new Error("revokePermissions: adapter is required but got undefined");return n?.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(ae.state.activeChain);if(!n)throw new Error("walletGetAssets: adapter is required but got undefined");return await n?.walletGetAssets(e)??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Et.state.address||this.updateNativeBalance(Et.state.address,n?.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},ut.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(Mn.getProviderId(ae.state.activeChain)===tr.CONNECTOR_TYPE_WALLET_CONNECT){const n=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(n)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Mn.getProvider(n),o=Mn.getProviderId(n);if(e.chainNamespace===ae.state.activeChain)await this.getAdapter(n)?.switchNetwork({caipNetwork:e,provider:s,providerType:o});else if(this.setCaipNetwork(e),o===tr.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const c=this.getAddressByChainNamespace(n);c&&this.syncAccount({address:c,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(o=>{const{chainId:c,chainNamespace:l}=Ii.parseCaipAddress(o);return`${l}:${c}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{const s=e?.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new Loe({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),await this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=nt.getConnectionStatus();Ke.state.enableReconnect===!1?this.setStatus("disconnected",e):r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(nt.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:o})=>{const c=this.getCaipNetworks().find(m=>m.id.toString()===o.toString()||m.caipNetworkId.toString()===o.toString()),l=ae.state.activeChain===e,p=ae.getAccountProp("address",e);if(c){const m=l&&s?s:p;m&&this.syncAccount({address:m,chainId:c.id,chainNamespace:e})}else this.setUnsupportedNetwork(o)}),n.on("disconnect",()=>{this.onDisconnectNamespace({chainNamespace:e})}),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Et.state.address,o=ae.state.activeCaipNetwork;!s||!o?.id||this.updateNativeBalance(s,o.id,o.chainNamespace)}),n.on("accountChanged",({address:s,chainId:o,connector:c})=>{const l=ae.state.activeChain===e;c?.provider&&(this.syncProvider({id:c.id,type:c.type,provider:c.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e)),l&&o?this.syncAccount({address:s,chainId:o,chainNamespace:e}):l&&ae.state.activeCaipNetwork?.id?this.syncAccount({address:s,chainId:ae.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(s,o,e),nt.addConnectedNamespace(e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&await this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>ut.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async syncNamespaceConnection(e){try{e===Oe.CHAIN.EVM&&yt.isSafeApp()&&at.setConnectorId(Oe.CONNECTOR_ID.SAFE,e);const n=at.getConnectorId(e);switch(this.setStatus("connecting",e),n){case Oe.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case Oe.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:n,closeModal:r}=e||{};ae.resetAccount(n),ae.resetNetwork(n),nt.removeConnectedNamespace(n);const s=Array.from(ae.state.chains.keys());(n?[n]:s).forEach(c=>nt.addDisconnectedConnectorId(at.getConnectorId(c)||"",c)),at.removeConnectorId(n),Mn.resetChain(n),this.setUser(void 0,n),this.setStatus("disconnected",n),this.setConnectedWalletInfo(void 0,n),r!==!1&&mn.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{const n=this.getCaipAddress(e),r=this.getCaipNetwork(e);return this.chainAdapters?.[e].syncConnections({connectToFirstConnector:!n,caipNetwork:r,getConnectorStorageInfo(s){const c=nt.getConnections()[e]??[];return{hasDisconnected:nt.isConnectorDisconnected(s,e),hasConnected:c.some(l=>Jr.isLowerCaseMatch(l.connectorId,s))}}})}))}async syncAdapterConnection(e){const n=this.getAdapter(e),r=at.getConnectorId(e),s=this.getCaipNetwork(e),c=at.getConnectors(e).find(l=>l.id===r);try{if(!n||!c)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!s?.id)throw new Error("CaipNetwork not found");const l=await n?.syncConnection({namespace:e,id:c.id,chainId:s.id,rpcUrl:s?.rpcUrls?.default?.http?.[0]});l?(this.syncProvider({...l,chainNamespace:e}),await this.syncAccount({...l,chainNamespace:e}),this.setStatus("connected",e)):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){const e=Object.keys(this.universalProvider?.session?.namespaces||{}),n=this.chainNamespaces.map(async r=>{const s=this.getAdapter(r);if(!s)return;const o=this.universalProvider?.session?.namespaces?.[r]?.accounts||[],c=ae.state.activeCaipNetwork?.id,l=o.find(p=>{const{chainId:m}=Ii.parseCaipAddress(p);return m===c?.toString()})||o[0];if(l){const p=Ii.validateCaipAddress(l),{chainId:m,address:y}=Ii.parseCaipAddress(p);if(Mn.setProviderId(r,tr.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&ae.state.activeCaipNetwork&&s.namespace!==Oe.CHAIN.EVM){const v=s.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:ae.state.activeCaipNetwork});Mn.setProvider(r,v)}else Mn.setProvider(r,this.universalProvider);at.setConnectorId(Oe.CONNECTOR_ID.WALLET_CONNECT,r),nt.addConnectedNamespace(r),await this.syncAccount({address:y,chainId:m,chainNamespace:r})}else e.includes(r)&&this.setStatus("disconnected",r);this.syncConnectedWalletInfo(r),await ae.setApprovedCaipNetworksData(r)});await Promise.all(n)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Mn.setProviderId(s,e),Mn.setProvider(s,n),at.setConnectorId(r,s)}async syncAccount(e){const n=e.chainNamespace===ae.state.activeChain,r=ae.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:o,chainNamespace:c}=e,{chainId:l}=nt.getActiveNetworkProps(),p=o||l,m=ae.state.activeCaipNetwork?.name===Oe.UNSUPPORTED_NETWORK_NAME,y=ae.getNetworkProp("supportsAllNetworks",c);if(this.setStatus("connected",c),!(m&&!y)&&p){let v=this.getCaipNetworks().find(A=>A.id.toString()===p.toString()),S=this.getCaipNetworks().find(A=>A.chainNamespace===c);if(!y&&!v&&!S){const A=this.getApprovedCaipNetworkIds()||[],N=A.find($=>Ii.parseCaipNetworkId($)?.chainId===p.toString()),R=A.find($=>Ii.parseCaipNetworkId($)?.chainNamespace===c);v=this.getCaipNetworks().find($=>$.caipNetworkId===N),S=this.getCaipNetworks().find($=>$.caipNetworkId===R||"deprecatedCaipNetworkId"in $&&$.deprecatedCaipNetworkId===R)}const _=v||S;_?.chainNamespace===ae.state.activeChain?Ke.state.enableNetworkSwitch&&!Ke.state.allowUnsupportedChain&&ae.state.activeCaipNetwork?.name===Oe.UNSUPPORTED_NETWORK_NAME?ae.showUnsupportedChainUI():this.setCaipNetwork(_):n||r&&this.setCaipNetworkOfNamespace(r,c),this.syncConnectedWalletInfo(c),Jr.isLowerCaseMatch(s,Et.state.address)||this.syncAccountInfo(s,_?.id,c),n?await this.syncBalance({address:s,chainId:_?.id,chainNamespace:c}):await this.syncBalance({address:s,chainId:r?.id,chainNamespace:c})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),o=n||s?.split(":")[1];if(!o)return;const c=`${r}:${o}:${e}`;this.setCaipAddress(c,r),await this.syncIdentity({address:e,chainId:o,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){const n=at.getConnectorId(e),r=Mn.getProviderId(e);if(r===tr.CONNECTOR_TYPE_ANNOUNCED||r===tr.CONNECTOR_TYPE_INJECTED){if(n){const o=this.getConnectors().find(c=>{const l=c.id===n,p=c.info?.rdns===n,m=c.connectors?.some(y=>y.id===n||y.info?.rdns===n);return l||p||!!m});if(o){const{info:c,name:l,imageUrl:p}=o,m=p||this.getConnectorImage(o);this.setConnectedWalletInfo({name:l,icon:m,...c},e)}}}else if(r===tr.CONNECTOR_TYPE_WALLET_CONNECT){const s=Mn.getProvider(e);s?.session&&this.setConnectedWalletInfo({...s.session.peer.metadata,name:s.session.peer.metadata.name,icon:s.session.peer.metadata.icons?.[0]},e)}else if(n&&(n===Oe.CONNECTOR_ID.COINBASE_SDK||n===Oe.CONNECTOR_ID.COINBASE)){const s=this.getConnectors().find(p=>p.id===n),o=s?.name||"Coinbase Wallet",c=s?.imageUrl||this.getConnectorImage(s),l=s?.info;this.setConnectedWalletInfo({...l,name:o,icon:c},e)}}async syncBalance(e){!Gy.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>r.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),o=ae.getCaipNetworkByNamespace(r,n);if(s){const c=await s.getBalance({address:e,chainId:n,caipNetwork:o,tokens:this.options.tokens});return this.setBalance(c.balance,c.symbol,r),c}}async initializeUniversalAdapter(){const e=jre.createLogger((r,...s)=>{r&&this.handleAlertError(r),console.error(...s)}),n={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};Ke.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await J5.init(n),Ke.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{Uc.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:n=>{ut.setUri(n)},onConnect:()=>{ut.finalizeWcConnection()},onDisconnect:()=>{ae.state.noAdapters&&this.resetAccount(e),ut.resetWcConnection()},onChainChanged:n=>{const r=ae.state.activeChain,s=r&&at.state.activeConnectorIds[r]===Oe.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(ae.state.noAdapters||s)){const o=this.getCaipNetworks().find(l=>l.id.toString()===n.toString()||l.caipNetworkId.toString()===n.toString()),c=this.getCaipNetwork();if(!o){this.setUnsupportedNetwork(n);return}c?.id.toString()!==o?.id.toString()&&c?.chainNamespace===o?.chainNamespace&&this.setCaipNetwork(o)}},onAccountsChanged:n=>{const r=ae.state.activeChain,s=r&&at.state.activeConnectorIds[r]===Oe.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(ae.state.noAdapters||s)&&n.length>0){const o=n[0];this.syncAccount({address:o.address,chainId:o.chainId,chainNamespace:o.chainNamespace})}}})})}createUniversalProvider(){return!this.universalProviderInitPromise&&yt.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Rn.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(ur.UniversalProviderErrors).find(([,{message:l}])=>e.message.includes(l)),[r,s]=n??[],{message:o,alertErrorKey:c}=s??{};if(r&&o&&!this.reportedAlertErrors[r]){const l=ur.ALERT_ERRORS[c];l&&(er.open(l,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e?.uri&&ut.setUri(e.uri),e?.arguments)switch(e?.view){case"Swap":return mn.open({...e,data:{swap:e.arguments}})}return mn.open(e)}async close(){await this.injectModalUi(),mn.close()}setLoading(e,n){mn.setLoading(e,n)}async disconnect(e){await ut.disconnect({namespace:e})}getSIWX(){return Ke.state.siwx}getError(){return""}getChainId(){return ae.state.activeCaipNetwork?.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){er.open(ur.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await ae.switchActiveNetwork(n)}getWalletProvider(){return ae.state.activeChain?Mn.state.providers[ae.state.activeChain]:null}getWalletProviderType(){return Mn.getProviderId(ae.state.activeChain)}subscribeProviders(e){return Mn.subscribeProviders(e)}getThemeMode(){return xi.state.themeMode}getThemeVariables(){return xi.state.themeVariables}setThemeMode(e){xi.setThemeMode(e),QO(xi.state.themeMode)}setTermsConditionsUrl(e){Ke.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){Ke.setPrivacyPolicyUrl(e)}setThemeVariables(e){xi.setThemeVariables(e),Noe(xi.state.themeVariables)}subscribeTheme(e){return xi.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?ut.subscribe(e):(er.open(Oe.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?ae.getAccountProp("connectedWalletInfo",e):Et.state.connectedWalletInfo}getAccount(e){const n=e||ae.state.activeChain,r=at.getAuthConnector(n),s=ae.getAccountData(n),o=nt.getConnectedConnectorId(ae.state.activeChain),c=ut.getConnections(n);if(!n)throw new Error("AppKit:getAccount - namespace is required");const l=c.flatMap(p=>p.accounts.map(({address:m,type:y})=>yt.createAccount(n,m,y||"eoa")));if(s)return{allAccounts:l,caipAddress:s.caipAddress,address:yt.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:r&&o===Oe.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:nt.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:to(n),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?ae.subscribeChainProp("accountState",r,n):ae.subscribe(r),at.subscribe(r)}subscribeNetwork(e){return ae.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n?.id,caipNetworkId:n?.caipNetworkId})})}subscribeWalletInfo(e,n){return n?Et.subscribeKey("connectedWalletInfo",e,n):Et.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Et.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){ae.subscribeKey("activeCaipNetwork",e)}getState(){return xa.state}getRemoteFeatures(){return Ke.state.remoteFeatures}subscribeState(e){return xa.subscribe(e)}subscribeRemoteFeatures(e){return Ke.subscribeKey("remoteFeatures",e)}showErrorMessage(e){kc.showError(e)}showSuccessMessage(e){kc.showSuccess(e)}getEvent(){return{...Rn.state}}subscribeEvents(e){return Rn.subscribe(e)}replace(e){Dt.replace(e)}redirect(e){Dt.push(e)}popTransactionStack(e){Dt.popTransactionStack(e)}isOpen(){return mn.state.open}isTransactionStackEmpty(){return Dt.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){Ke.setFeatures(e)}updateRemoteFeatures(e){Ke.setRemoteFeatures(e)}updateOptions(e){const r={...Ke.state||{},...e};Ke.setOptions(r)}setConnectMethodsOrder(e){Ke.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){Ke.setWalletFeaturesOrder(e)}setCollapseWallets(e){Ke.setCollapseWallets(e)}setSocialsOrder(e){Ke.setSocialsOrder(e)}getConnectMethodsOrder(){return j_.getConnectOrderMethod(Ke.state.features,at.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||ae.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&ae.removeNetwork(e,n)}}let NN=!1;class $oe extends Uoe{async onAuthProviderConnected(e){e.message&&e.signature&&e.siwxMessage&&await Do.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature);const n=ae.state.activeChain;if(!n)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const r=n===Oe.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=Ke.state.defaultAccountTypes[n],o=to(n),c=e.preferredAccountType||o||s;Jr.isLowerCaseMatch(e.address,Et.state.address)||this.syncIdentity({address:e.address,chainId:e.chainId,chainNamespace:n}),this.setCaipAddress(r,n);const{signature:l,siwxMessage:p,message:m,...y}=e;this.setUser({...Et.state.user||{},...y},n),this.setSmartAccountDeployed(!!e.smartAccountDeployed,n),this.setPreferredAccountType(c,n),this.setLoading(!1,n)}setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Ji.checkIfRequestExists(n)?Ji.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Ur.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Ur.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Ji.checkIfRequestIsSafe(r),o=Et.state.address,c=ae.state.activeCaipNetwork;s||(o&&c?.id&&this.updateNativeBalance(o,c.id,c.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=ae.state.activeChain;if(!n)throw new Error("AppKit:onNotConnected - namespace is required");at.getConnectorId(n)===Oe.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:n,type:r})=>{const s=ae.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");n&&this.setPreferredAccountType(r,s)})}async syncAuthConnectorTheme(e){if(!e)return;const n=xi.getSnapshot(),r=Ke.getSnapshot();await Promise.all([e.syncDappData({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),e.syncTheme({themeMode:n.themeMode,themeVariables:n.themeVariables,w3mThemeVariables:Ll(n.themeVariables,n.themeMode)})])}async syncAuthConnector(e,n){const r=Oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===ae.state.activeChain;if(!r)return;this.setLoading(!0,n);const o=e.getLoginEmailUsed();this.setLoading(o,n),o&&this.setStatus("connecting",n);const c=e.getEmail(),l=e.getUsername();this.setUser({...Et.state?.user||{},username:l,email:c},n),this.setupAuthConnectorListeners(e);const{isConnected:p}=await e.isConnected();if(await this.syncAuthConnectorTheme(e),n&&r&&s){const m=await e.getSmartAccountEnabledNetworks();ae.setSmartAccountEnabledNetworks(m?.smartAccountEnabledNetworks||[],n),p&&this.connectionControllerClient?.connectExternal?(await this.connectionControllerClient?.connectExternal({id:Oe.CONNECTOR_ID.AUTH,info:{name:Oe.CONNECTOR_ID.AUTH},type:tr.CONNECTOR_TYPE_AUTH,provider:e,chainId:ae.state.activeCaipNetwork?.id,chain:n}),this.setStatus("connected",n)):at.getConnectorId(n)===Oe.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),nt.removeConnectedNamespace(n))}this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){try{if(!yt.isTelegram())return;const n=nt.getTelegramSocialProvider();if(!n||!yt.isClient())return;const s=new URL(window.location.href).searchParams.get("result_uri");if(!s)return;Et.setSocialProvider(n,e),await this.authProvider?.init();const o=at.getAuthConnector();n&&o&&(this.setLoading(!0,e),await ut.connectExternal({id:o.id,type:o.type,socialUri:s},o.chain),nt.setConnectedSocialProvider(n),nt.removeTelegramSocialProvider(),Rn.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:n,caipNetworkId:ae.getActiveCaipNetwork()?.caipNetworkId}}))}catch(n){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",n)}try{const n=new URL(window.location.href);n.searchParams.delete("result_uri"),window.history.replaceState({},document.title,n.toString())}catch(n){console.error("tma social login failed",n)}}createAuthProvider(e){if(!Oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=this.remoteFeatures?.email,s=Array.isArray(this.remoteFeatures?.socials)&&this.remoteFeatures.socials.length>0,o=r||s,l=Jr.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&this.options?.projectId&&o&&(this.authProvider=Jh.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(l)?.caipNetworkId,abortController:ur.EmbeddedWalletAbortController,onTimeout:m=>{m==="iframe_load_failed"?er.open(ur.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):m==="iframe_request_timeout"?er.open(ur.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):m==="unverified_domain"&&er.open(ur.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:m=>ae.getActiveCaipNetwork(m)}),xa.subscribeOpen(m=>{!m&&this.isTransactionStackEmpty()&&this.authProvider?.rejectRpcRequests()}));const p=e===ae.state.activeChain&&Ke.state.enableReconnect;Ke.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&p&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Tt.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){if(!e)return;const n=ae.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=Mn.getProvider(r),p=Mn.getProviderId(r);await c?.switchNetwork({caipNetwork:e,provider:l,providerType:p}),this.setCaipNetwork(e)}else{const l=Mn.getProviderId(n)===tr.CONNECTOR_TYPE_AUTH,p=Mn.getProviderId(r),m=p===tr.CONNECTOR_TYPE_AUTH,y=Oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if(!r)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((l&&p===void 0||m)&&y)try{ae.state.activeChain=e.chainNamespace,s?await this.getAdapter(r)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:p}):await this.connectionControllerClient?.connectExternal?.({id:Oe.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:tr.CONNECTOR_TYPE_AUTH,caipNetwork:e}),this.setCaipNetwork(e)}catch{await this.getAdapter(r)?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:p})}else if(p===tr.CONNECTOR_TYPE_WALLET_CONNECT){if(!ae.state.noAdapters){const v=this.getAdapter(r),S=Mn.getProvider(r),_=Mn.getProviderId(r);await v?.switchNetwork({caipNetwork:e,provider:S,providerType:_})}this.setCaipNetwork(e),this.syncWalletConnectAccount()}else this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r})}}async initialize(e){await super.initialize(e),this.chainNamespaces?.forEach(n=>{this.createAuthProviderForAdapter(n)}),await this.injectModalUi(),xa.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){const s=`${r}:${n}`,o=this.caipNetworks?.find(c=>c.caipNetworkId===s);if(r!==Oe.CHAIN.EVM||o?.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:c,avatar:l}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(c,r),this.setProfileImage(l,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Mn.getProviderId(e);if(n===tr.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=nt.getConnectedSocialProvider()??"email",o=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:o,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(yt.isClient()&&!NN)try{const e={...En.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),yt.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!Ke.state.disableAppend&&!Ke.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}NN=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!yt.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(Bs(()=>import("./embedded-wallet-BfkP9U8S.js"),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13]))),n.email&&r.push(Bs(()=>import("./email-CMo1RZ3Q.js"),__vite__mapDeps([14,3,13,7,12,6,11,15,8]))),n.socials&&r.push(Bs(()=>import("./socials-D-ljZloW.js"),__vite__mapDeps([16,3,17,6,18,19,12,20,11,7,13,21,5,22]))),n.swaps&&n.swaps.length>0&&r.push(Bs(()=>import("./swaps-BxPLiieg.js"),__vite__mapDeps([23,3,11,7,24,25,26,5,12,22,8,6]))),e.send&&r.push(Bs(()=>import("./send-CjbSial1.js"),__vite__mapDeps([27,3,11,7,12,6,18,13,26,5,8,28,29]))),e.receive&&r.push(Bs(()=>import("./receive-CZOVNhFQ.js"),__vite__mapDeps([30,3,31,5,21]))),n.onramp&&n.onramp.length>0&&r.push(Bs(()=>import("./onramp-DzNOUjCq.js"),__vite__mapDeps([32,3,33,5,7,12,17,6,18,34,13,11,20,8]))),n.activity&&r.push(Bs(()=>import("./transactions-B8aqBfKz.js"),__vite__mapDeps([35,3,36,12,13,5,22]))),e.pay&&r.push(Bs(()=>import("./index-DZkiv7KZ.js"),__vite__mapDeps([37,3,11,7,38,5,12,9,33,29,20]))),await Promise.all([...r,Bs(()=>import("./index-D0C35hCc.js"),__vite__mapDeps([39,3,5,7,28,12,40,25,9,33,11,10,38,36,13,22,24,29,6,8,15,17,18,19,4,20,31,21,34])),Bs(()=>import("./w3m-modal-DQ0j6eUq.js"),__vite__mapDeps([41,3,9,5,12,10,7,25,40]))])}}const joe="1.7.16";function Boe(t){return new $oe({...t,sdkVersion:yt.generateSdkVersion(t.adapters??[],"html",joe)})}function Foe(t){let e=[],n,r;function s(l){return Gy.parseEvmChainId(l)||1}function o(){return n||(n=Jh.getInstance({projectId:t.options.projectId,chainId:ae.getActiveCaipNetwork()?.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:l=>{l==="iframe_load_failed"?er.open(ur.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?er.open(ur.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&er.open(ur.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:ur.EmbeddedWalletAbortController,getActiveCaipNetwork:l=>ae.getActiveCaipNetwork(l)})),n}async function c(l={}){const p=o();let m=l.chainId;if(l.isReconnecting){const N=Gy.parseEvmChainId(p.getLastUsedChainId()||""),R=t.chains?.[0].id;if(m=N||R,!m)throw new Error("ChainId not found in provider")}const y=to("eip155"),{address:v,chainId:S,accounts:_}=await Do.authConnectorAuthenticate({authConnector:p,chainId:m,preferredAccountType:y,socialUri:l.socialUri,chainNamespace:Oe.CHAIN.EVM});e=_?.map(N=>N.address)||[v];const A=s(S);return{accounts:e,account:v,chainId:A,chain:{id:A,unsuported:!1}}}return l=>({id:Oe.CONNECTOR_ID.AUTH,name:Oe.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:Oe.CHAIN.EVM,async connect(p={}){if(r)return r;r||(r=new Promise(y=>{y(c(p))}));const m=await r;return r=void 0,m},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e?.length?(l.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){return this.provider||(this.provider=Jh.getInstance({projectId:t.options.projectId,chainId:ae.getActiveCaipNetwork()?.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:ur.EmbeddedWalletAbortController,onTimeout:p=>{p==="iframe_load_failed"?er.open(ur.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):p==="iframe_request_timeout"?er.open(ur.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):p==="unverified_domain"&&er.open(ur.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:p=>ae.getActiveCaipNetwork(p)})),Promise.resolve(this.provider)},async getChainId(){const p=await this.getProvider(),{chainId:m}=await p.getChainId();return s(m)},async isAuthorized(){const m=ae.state.activeChain===Oe.CHAIN.EVM;if(Oe.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(S=>at.getConnectorId(S)===Oe.CONNECTOR_ID.AUTH)&&!m)return!1;const v=await this.getProvider();return Promise.resolve(v.getLoginEmailUsed())},async switchChain({chainId:p}){try{const m=l.chains.find(_=>_.id===p);if(!m)throw new Bc(new Error("chain not found on connector."));const y=await this.getProvider(),v=to("eip155"),S=await y.connect({chainId:p,preferredAccountType:v});return e=S?.accounts?.map(_=>_.address)||[S.address],l.emitter.emit("change",{chainId:Number(p),accounts:e}),m}catch(m){throw m instanceof Error?new Bc(m):m}},onAccountsChanged(p){p.length===0?this.onDisconnect():l.emitter.emit("change",{accounts:p.map(zh)})},onChainChanged(p){const m=Number(p);l.emitter.emit("change",{chainId:m})},async onDisconnect(p){await(await this.getProvider()).disconnect()}})}ox.type="walletConnect";function ox(t,e){const n=t.isNewChainsStale??!0;let r,s,o,c,l,p,m;return y=>({id:"walletConnect",name:"WalletConnect",type:ox.type,async setup(){const v=await this.getProvider().catch(()=>null);v&&(c||(c=this.onConnect.bind(this),v.on("connect",c)),p||(p=this.onSessionDelete.bind(this),v.on("session_delete",p)))},async connect({...v}={}){try{const S=ae.getCaipNetworks(),_=await this.getProvider();if(!_)throw new Yu;l||(l=this.onDisplayUri,_.on("display_uri",l));const A=await this.isChainsStale();_.session&&A&&await _.disconnect();const N=Ke.state.universalProviderConfigOverride;if(!_.session||A){const L=Uc.createNamespaces(S,N);await _.connect({optionalNamespaces:L,..."pairingTopic"in v?{pairingTopic:v.pairingTopic}:{}}),this.setRequestedChainsIds(S.map(Z=>Number(Z.id)))}const R=await this.getAccounts(),$=await this.getChainId(),G=_.session?.namespaces?.eip155?.chains,F=G?.some(L=>Number(L.split(":")[1])===$);let X=1;F?X=$:G?.[0]&&(X=Number(G[0].split(":")[1])),l&&(_.removeListener("display_uri",l),l=void 0),c&&(_.removeListener("connect",c),c=void 0),s||(s=this.onAccountsChanged.bind(this),_.on("accountsChanged",s)),o||(o=this.onChainChanged.bind(this),_.on("chainChanged",o)),m||(m=this.onDisconnect.bind(this),_.on("disconnect",m)),p||(p=this.onSessionDelete.bind(this),_.on("session_delete",p));const j=N?.defaultChain;return _.setDefaultChain(j??`eip155:${X}`),{accounts:R,chainId:X}}catch(S){throw/(user rejected|connection request reset)/i.test(S?.message)?new Lr(S):S}},async disconnect(){const v=await this.getProvider();try{await v?.disconnect()}catch(S){if(!/No matching key/i.test(S.message))throw S}finally{o&&(v?.removeListener("chainChanged",o),o=void 0),m&&(v?.removeListener("disconnect",m),m=void 0),c||(c=this.onConnect.bind(this),v?.on("connect",c)),s&&(v?.removeListener("accountsChanged",s),s=void 0),p&&(v?.removeListener("session_delete",p),p=void 0),this.setRequestedChainsIds([])}},async getAccounts(){const v=await this.getProvider();if(!v?.session?.namespaces)return[];const _=v?.session?.namespaces[Oe.CHAIN.EVM]?.accounts?.map(R=>R.split(":")[2])??[],A=new Set;return _.filter(R=>{const $=R?.toLowerCase();return A.has($)?!1:(A.add($),!0)})},async getProvider({chainId:v}={}){r||(r=await e.getUniversalProvider(),r?.events.setMaxListeners(Number.POSITIVE_INFINITY));const S=nt.getActiveNamespace(),_=e.getCaipNetwork()?.id;if(v&&_!==v&&S){const A=nt.getStoredActiveCaipNetworkId(),R=(S?e.getCaipNetworks(S):[])?.find($=>$.id===A);R&&R.chainNamespace===Oe.CHAIN.EVM&&await this.switchChain?.({chainId:Number(R.id)})}return r},async getChainId(){const v=e.getCaipNetwork(Oe.CHAIN.EVM)?.id;if(v)return v;const _=(await this.getProvider()).session?.namespaces[Oe.CHAIN.EVM]?.chains?.[0];return ae.getCaipNetworks().find(N=>N.id===_)?.id},async isAuthorized(){try{const[v,S]=await Promise.all([this.getAccounts(),this.getProvider()]);return v.length?await this.isChainsStale()&&S.session?(await S.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:v,chainId:S}){const _=await this.getProvider();if(!_)throw new Yu;const A=ae.getCaipNetworks().find(N=>N.id===S);if(!A)throw new Bc(new By);try{await _.request({method:"wallet_switchEthereumChain",params:[{chainId:Qt(S)}]}),A?.caipNetworkId&&_.setDefaultChain(A?.caipNetworkId),y.emitter.emit("change",{chainId:Number(S)});const N=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...N,S]),{...A,id:A.id}}catch(N){const R=N;if(/(?:user rejected)/iu.test(R.message))throw new Lr(R);try{let $;v?.blockExplorerUrls?$=v.blockExplorerUrls:$=A.blockExplorers?.default.url?[A.blockExplorers?.default.url]:[];const G=A.rpcUrls?.chainDefault?.http||[],F={blockExplorerUrls:$,chainId:Qt(S),chainName:A.name,iconUrls:v?.iconUrls,nativeCurrency:A.nativeCurrency,rpcUrls:G};await _.request({method:"wallet_addEthereumChain",params:[F]});const X=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...X,S]),{...A,id:A.id}}catch($){throw new Lr($)}}},onAccountsChanged(v){v.length===0?this.onDisconnect():y.emitter.emit("change",{accounts:v.map(S=>zh(S))})},onChainChanged(v){const S=Number(v);y.emitter.emit("change",{chainId:S})},onConnect(v){this.setRequestedChainsIds(ae.getCaipNetworks().map(S=>Number(S.id)))},async onDisconnect(v){this.setRequestedChainsIds([]),y.emitter.emit("disconnect");const S=await this.getProvider();s&&(S.removeListener("accountsChanged",s),s=void 0),o&&(S.removeListener("chainChanged",o),o=void 0),m&&(S.removeListener("disconnect",m),m=void 0),p&&(S.removeListener("session_delete",p),p=void 0),c||(c=this.onConnect.bind(this),S.on("connect",c))},onDisplayUri(v){y.emitter.emit("message",{type:"display_uri",data:v})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){return r?.session?.namespaces?r?.session?.namespaces[Oe.CHAIN.EVM]?.accounts?.map(_=>Number.parseInt(_.split(":")[1]??""))??[]:[]},async getRequestedChainsIds(){const v=await y.storage?.getItem(this.requestedChainsStorageKey)??[];return[...new Set(v)]},async isChainsStale(){if(!n)return!1;const v=y.chains.map(A=>A.id),S=this.getNamespaceChainsIds();if(S.length&&!S.some(A=>v.includes(A)))return!1;const _=await this.getRequestedChainsIds();return!v.every(A=>_.includes(Number(A)))},async setRequestedChainsIds(v){await y.storage?.setItem(this.requestedChainsStorageKey,v)},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const q0=Zn({pendingTransactions:0}),RN={state:q0,subscribeKey(t,e){return vs(q0,t,e)},increase(t){q0[t]+=1},decrease(t){q0[t]-=1},reset(t){q0[t]=0}};function Zoe(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function zoe(t){if(yt.isSafeApp()){const{safe:e}=await Bs(async()=>{const{safe:n}=await import("./index-Czvx4MJ_.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function Goe(t){try{const{coinbaseWallet:e}=await Bs(async()=>{const{coinbaseWallet:n}=await import("./index-Czvx4MJ_.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const Hoe={enable:!1,pollingInterval:3e4};class Xoe extends JO{constructor(e){const n=Pc.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=Oe.CHAIN.EVM,this.adapterType=Oe.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...Hoe,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===Oe.CONNECTOR_ID.AUTH){const o=await n.getProvider();if(!o?.user)return{accounts:[]};const{address:c,accounts:l}=o.user;return Promise.resolve({accounts:(l||[{address:c,type:"eoa"}]).map(p=>yt.createAccount("eip155",p.address,p.type))})}const{addresses:r,address:s}=um(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(o=>yt.createAccount("eip155",o||"","eoa"))})}checkChainId(){const{chainId:e}=um(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===Oe.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{const o=e.transports?.[s.id],c=Pc.getCaipNetworkId(s);o?n[s.id]=Pc.extendWagmiTransports(s,e.projectId,o):n[s.id]=Pc.getViemTransport(s,e.projectId,e.customRpcUrls?.[c])}),this.wagmiConfig=zU({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=EU(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),RN.increase("pendingTransactions")}});const e=RN.subscribeKey("pendingTransactions",n=>{n>=Oe.LIMITS.PENDING_TRANSACTIONS&&(this.unwatchPendingTransactions?.(),e())})}setupWatchers(){AR(this.wagmiConfig,{onChange:(e,n)=>{if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e?.chainId&&e?.chainId!==n?.chainId&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const r=e.address!==n?.address,s=e.connector.id!==n.connector?.id,o=n.status!=="connected";(r||s||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),wU(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(o=>o.id===n.chainId),s=n.connector.id===Oe.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(o=>({address:o})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:nt.getConnectedSocialProvider(),username:nt.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await Goe(this.wagmiConfig.connectors);s&&n.push(s)}const r=await zoe(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const o=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(c=>[...c,o]),this.addWagmiConnector(o,e)}))}addWagmiConnectors(e,n){const r=[];e.enableWalletConnect!==!1&&r.push(ox(e,n)),e.enableEIP6963!==!1&&r.push(u2({shimDisconnect:!0}));const s=n?.remoteFeatures?.email??!0,o=Array.isArray(n?.remoteFeatures?.socials)&&n?.remoteFeatures?.socials?.length>0;(s||o)&&r.push(Foe({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(c=>{const l=this.wagmiConfig._internal.connectors.setup(c);this.wagmiConfig._internal.connectors.setState(p=>[...p,l])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:Qi.ConnectorNamesMap[r.id]??r.name,imageId:Qi.ConnectorImageIds[r.id],type:Qi.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===Oe.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await yU(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=um(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await gU(this.wagmiConfig,s);const o=await TR(this.wagmiConfig,s);return await CU(this.wagmiConfig,{hash:o,timeout:25e3}),{hash:o}}async writeContract(e){const{caipNetwork:n,...r}=e,s=Number(Gy.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await SU(this.wagmiConfig,{chain:this.wagmiChains?.[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await dU(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return wR(e.value,e.decimals)}formatUnits(e){return Pm(e.value,e.decimals)}async addWagmiConnector(e,n){if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===Oe.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===Oe.CONNECTOR_ID.AUTH||e.id===Oe.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Qi.ConnectorExplorerIds[e.id],imageUrl:n?.connectorImages?.[e.id]??e.icon,name:Qi.ConnectorNamesMap[e.id]??e.name,imageId:Qi.ConnectorImageIds[e.id],type:Qi.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===Oe.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){vU(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){const{id:n,chainId:r}=e,o=Nl(this.wagmiConfig).find(m=>m.connector.id===n),l=await this.getWagmiConnector(n)?.getProvider();if(yt.isSafeApp()&&n===Oe.CONNECTOR_ID.SAFE&&!o?.accounts.length){const m=this.getWagmiConnector("safe");if(m){const y=await WE(this.wagmiConfig,{connector:m,chainId:Number(r)}),v=await m.getProvider();return{chainId:Number(r),address:y.accounts[0],provider:v,type:o?.connector.type?.toUpperCase(),id:o?.connector.id}}}return{chainId:Number(o?.chainId),address:o?.accounts[0],provider:l,type:o?.connector.type?.toUpperCase(),id:o?.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await WE(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await R3(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){const{id:n,address:r,provider:s,type:o,info:c,chainId:l,socialUri:p}=e,m=this.getWagmiConnector(n);if(!m)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&c&&m.id===Oe.CONNECTOR_ID.EIP6963&&m.setEip6963Wallet?.({provider:s,info:c});const y=this.wagmiConfig.state?.connections?.get(m.uid);if(y){await this.wagmiConfig.storage?.setItem("recentConnectorId",m.id);const S=[...y.accounts].sort((_,A)=>Jr.isLowerCaseMatch(_,r)?-1:Jr.isLowerCaseMatch(A,r)?1:0);return this.wagmiConfig?.setState(_=>({..._,connections:new Map(_.connections).set(m.uid,{accounts:S,chainId:y.chainId,connector:y.connector}),current:m.uid,status:"connected"})),{address:S[0],chainId:y.chainId,provider:s,type:o,id:n}}const v=await WE(this.wagmiConfig,{connector:m,chainId:l?Number(l):void 0,socialUri:p});return{address:v.accounts[0],chainId:v.chainId,provider:s,type:o,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await OS(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,o=this.balancePromises[s];if(o)return o;const c=nt.getNativeBalanceCacheForCaipAddress(s);return c?{balance:c.balance,symbol:c.symbol}:(this.balancePromises[s]=new Promise(async l=>{try{const p=Number(e.chainId),m=await mU(this.wagmiConfig,{address:e.address,chainId:p,token:e.tokens?.[r.caipNetworkId]?.address});nt.updateNativeBalanceCache({caipAddress:s,balance:m.formatted,symbol:m.symbol,timestamp:Date.now()}),l({balance:m.formatted,symbol:m.symbol})}catch(p){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",p),l({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){return this.getWagmiConnector("walletConnect")?.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=Nl(this.wagmiConfig).find(o=>Jr.isLowerCaseMatch(o.connector.id,e.id));return await I3(this.wagmiConfig,{connector:n}),Ke.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(o=>({address:o})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=Nl(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await I3(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(s=>s.id.toString()===n.id.toString());await R3(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:r?.name??n.name,nativeCurrency:r?.nativeCurrency??n.nativeCurrency,rpcUrls:[n.rpcUrls?.chainDefault?.http?.[0]??r?.rpcUrls?.default?.http?.[0]??""],blockExplorerUrls:[r?.blockExplorers?.default?.url??n.blockExplorers?.default?.url??""]}}),await super.switchNetwork(e)}async getCapabilities(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=Nl(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const o=await s.getProvider();if(!o)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const c=o.session?.sessionProperties?.capabilities;if(c){const p=Zoe(c)[e];if(p)return p}return await o.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=Nl(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const o=await s.getProvider();if(!o)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return o.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=Nl(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const o=await s.getProvider();if(!o)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return o.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=Nl(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const o=await s.getProvider();if(!o)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return o.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:Oe.CONNECTOR_ID.AUTH,type:"AUTH",name:Oe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Qi.ConnectorImageIds[Oe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=Nl(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(ae.state.activeChain==="eip155")return;OS(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new ix({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const eP=Gm({id:10143,caipNetworkId:"eip155:10143",chainNamespace:"eip155",name:"Monad Testnet",nativeCurrency:{decimals:18,name:"Monad",symbol:"MON"},rpcUrls:{default:{http:["https://testnet-rpc.monad.xyz"]}},blockExplorers:{default:{name:"Monad Explorer",url:"https://explorer.monad.xyz"}}}),tP="33c7b9a2cbd0ee02ddfbbaf5a3d81a67",nP=new Xoe({ssr:!0,projectId:tP,networks:[eP]});Boe({adapters:[nP],networks:[eP],projectId:tP,metadata:{name:"Collaborative Lobby",description:"Lobby dApp with Monad testnet",url:window.location.origin,icons:["https://avatars.githubusercontent.com/u/179229932"]}});const Woe=new T$;function Voe({children:t}){return Se.jsx(XU,{config:nP.wagmiConfig,children:Se.jsx(R$,{client:Woe,children:t})})}const Koe="2xzX6RWl3yDjUNRcrwCHevFrnsXrrz8MZyuPeKIUQ2";console.log("✅ React Together API key found:",`${Koe.substring(0,8)}...`),console.log("🚀 Initializing React Together for real-time collaboration");zP.createRoot(document.getElementById("root")).render(Se.jsx(st.StrictMode,{children:Se.jsx($$,{children:Se.jsx(Voe,{children:Se.jsx(j$,{children:Se.jsx(U$,{})})})})}));export{Do as $,Et as A,It as B,at as C,WR as D,ay as E,vs as F,ws as G,BS as H,Sa as I,Mn as J,d7 as K,cv as L,mn as M,a7 as N,Ke as O,Ii as P,xv as Q,Dt as R,kc as S,xi as T,Jr as U,Gce as V,Ur as W,Tt as X,j_ as Y,Pc as Z,G7 as _,uv as a,wy as a$,Rm as a0,Bce as a1,Qr as a2,J1 as a3,Fce as a4,XO as a5,B_ as a6,Im as a7,Bs as a8,$ae as a9,vce as aA,bce as aB,Rv as aC,Cce as aD,Ece as aE,mv as aF,u5 as aG,fd as aH,aae as aI,a2 as aJ,d5 as aK,iae as aL,sae as aM,n2 as aN,hv as aO,Q8 as aP,nk as aQ,Eae as aR,HD as aS,fae as aT,dk as aU,nf as aV,hae as aW,pae as aX,a6 as aY,dae as aZ,V_ as a_,zh as aa,Bc as ab,By as ac,Qt as ad,Lr as ae,Yu as af,bR as ag,u2 as ah,tt as ai,t5 as aj,Uo as ak,WD as al,PM as am,pR as an,ym as ao,y6 as ap,iy as aq,hd as ar,_G as as,wce as at,KT as au,$4 as av,Wy as aw,bG as ax,U4 as ay,xG as az,En as b,jc as b$,pv as b0,fv as b1,gae as b2,RL as b3,AD as b4,jD as b5,Y6 as b6,Iae as b7,KD as b8,GD as b9,D6 as bA,bv as bB,ef as bC,gR as bD,DM as bE,OM as bF,yR as bG,pM as bH,k6 as bI,gL as bJ,t2 as bK,f5 as bL,r5 as bM,i2 as bN,Ik as bO,cM as bP,kae as bQ,Pae as bR,Oae as bS,eD as bT,vm as bU,Pl as bV,Nae as bW,uR as bX,Rae as bY,uM as bZ,Y8 as b_,Pi as ba,Qv as bb,mb as bc,QN as bd,cR as be,lM as bf,Lm as bg,sR as bh,c2 as bi,xae as bj,gm as bk,Cae as bl,nr as bm,mR as bn,h5 as bo,ad as bp,_ae as bq,Sae as br,o2 as bs,i5 as bt,Gc as bu,s5 as bv,bM as bw,_M as bx,oae as by,l5 as bz,Oe as c,Lo as c$,tf as c0,Om as c1,Jv as c2,e6 as c3,Ok as c4,bae as c5,cae as c6,yae as c7,lae as c8,Rk as c9,QM as cA,BL as cB,c5 as cC,BM as cD,HE as cE,wae as cF,O6 as cG,vae as cH,L6 as cI,xM as cJ,_R as cK,tR as cL,gb as cM,Ri as cN,YD as cO,oR as cP,jM as cQ,LU as cR,E1 as cS,QR as cT,Xj as cU,Wj as cV,pT as cW,Mr as cX,JN as cY,Aae as cZ,ON as c_,$c as ca,r2 as cb,mm as cc,gM as cd,Ev as ce,vR as cf,$y as cg,UM as ch,_y as ci,YM as cj,kM as ck,dS as cl,s6 as cm,$M as cn,hR as co,Q_ as cp,A6 as cq,SL as cr,Tae as cs,b6 as ct,Uae as cu,rae as cv,Gk as cw,VD as cx,qM as cy,KM as cz,yt as d,Y7 as d0,PU as d1,Rn as e,to as f,Ll as g,ae as h,fm as i,zce as j,Ji as k,ut as l,tr as m,aoe as n,er as o,coe as p,nt as q,Zce as r,ur as s,vn as t,HR as u,Zn as v,io as w,jce as x,j7 as y,w5 as z};
